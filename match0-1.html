<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>basa</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>AoNuoi\ClassQuanLiAoNuoi.java</CENTER></H3><HR>
<PRE>
<A NAME="389"></A><FONT color="#f87a17"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#389',2,'match0-top.html#389',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.AoNuoi;
public class ClassQuanLiAoNuoi {
    String strMaAo, strTenAoNuoi, strNgayThaCa, strLoaiCa,
            strTrongLuong, strMaTinh, strMaHuyen, strMaXa,
            strTenTinh, strTenHuyen</B></FONT>, strTenXa, strThuHoach;
    boolean boolTinhTrang;
    public ClassQuanLiAoNuoi (String strMaAo, String strTenAoNuoi, String strNgayThaCa,
                             String strLoaiCa, String strTrongLuong,
                             String strMaTinh, String strMaHuyen, String strMaXa,
                             String strTenTinh, String strTenHuyen, String strTenXa,
                             boolean boolTinhTrang, String strThuHoach) {
<A NAME="390"></A>        this.strMaAo = strMaAo;
        this.strTenAoNuoi = strTenAoNuoi;
        this.strNgayThaCa = strNgayThaCa;
        <FONT color="#c57717"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#390',2,'match0-top.html#390',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>this.strLoaiCa = strLoaiCa;
        this.strTrongLuong = strTrongLuong;
        this.strMaTinh = strMaTinh;
        this.strMaHuyen = strMaHuyen;
        this.strMaXa = strMaXa;
        this.strTenTinh = strTenTinh;
        this.strTenHuyen = strTenHuyen;
        this.strTenXa = strTenXa;
        this.boolTinhTrang = boolTinhTrang;
        this.strThuHoach = strThuHoach;
    }

    public String getStrMaAo() {
        return strMaAo;
    }

    public String getStrTenAoNuoi() {
        return strTenAoNuoi;
    }

    public String getStrNgayThaCa() {
        return strNgayThaCa;
    }

    public String getStrLoaiCa() {
        return strLoaiCa;
    }

    public String getStrTrongLuong() {
        return strTrongLuong;
    }

    public String getStrMaTinh() {
        return strMaTinh;
    }

    public String getStrMaHuyen() {
        return strMaHuyen;
    }

    public String getStrMaXa() {
        return strMaXa;
    }

    public String getStrTenTinh() {
        return strTenTinh;
    }

    public String getStrTenHuyen() {
        return strTenHuyen;
    }</B></FONT>

    public String getStrTenXa() {
        return strTenXa;
    }

    public Boolean getBoolTinhTrang() {
        return boolTinhTrang;
    }

    public String getStrThuHoach() {
        return strThuHoach;
    }
}
</PRE>
<HR>
<H3><CENTER>AoNuoi\ClassTimKiemAoNuoi.java</CENTER></H3><HR>
<PRE>
package com.example.basa.AoNuoi;
<A NAME="597"></A>
public class ClassTimKiemAoNuoi {
    private final String strMaAo, strTenAoNuoi, strNgayThaCa,strLoai, strTrongLuong,
            strMaTinh, <FONT color="#800517"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#597',2,'match0-top.html#597',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>strMaHuyen, strMaXa,
            strTenTinh, strTenHuyen, strTenXa, strSdt, strHoTen, strAnh;
    public ClassTimKiemAoNuoi(String strMaAo, String strTenAoNuoi, String strNgayThaCa,
                              String strLoai, String strTrongLuong,
                              String strMaTinh, String strMaHuyen, String strMaXa,
                              String strTenTinh, String strTenHuyen, String strTenXa,
                              String strSdt, String strHoTen, String strAnh) {
        this.strMaAo = strMaAo;
        this.strTenAoNuoi = strTenAoNuoi;
        this.strNgayThaCa = strNgayThaCa;
<A NAME="293"></A>        this.strLoai = strLoai;
        this.strTrongLuong = strTrongLuong;
        this</B></FONT>.strMaTinh = strMaTinh;
        <FONT color="#6cc417"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#293',2,'match0-top.html#293',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>this.strMaHuyen = strMaHuyen;
        this.strMaXa = strMaXa;
        this.strTenTinh = strTenTinh;
        this.strTenHuyen = strTenHuyen;
        this.strTenXa = strTenXa;
        this.strSdt = strSdt;
        this.strHoTen = strHoTen;
        this.strAnh = strAnh;

    }

    public String getStrMaAo() {
        return strMaAo;
    }

    public String getStrTenAoNuoi() {
        return strTenAoNuoi;
    }

    public String getStrNgayThaCa() {
        return strNgayThaCa;
    }

    public String getStrLoai() {
        return strLoai;
    }

    public String getStrTrongLuong() {
        return strTrongLuong;
    }

    public String getStrMaTinh() {
        return strMaTinh;
    }

    public String getStrMaHuyen() {
        return strMaHuyen;
    }

    public String getStrMaXa() {
<A NAME="599"></A>        return strMaXa;
    }</B></FONT>

    public <FONT color="#4e9258"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#599',2,'match0-top.html#599',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>String getStrTenTinh() {
        return strTenTinh;
    }

    public String getStrTenHuyen() {
        return strTenHuyen;
    }

    public String getStrTenXa() {
        return strTenXa;
    }

    public String getStrSdt() {
        return strSdt;
    }

    public String getStrHoTen() {
        return strHoTen;
    }

    public String getStrAnh() {
        return strAnh;
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>AoNuoi\FragmentAoNuoiEdit.java</CENTER></H3><HR>
<PRE>
package com.example.basa.AoNuoi;

<A NAME="494"></A>import android.annotation.SuppressLint;
import android.app.AlertDialog;
import android.content.Context;
<FONT color="#f9966b"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#494',2,'match0-top.html#494',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.content.SharedPreferences;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.Spinner;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;

import com.example.basa.Class.ClassConnect;
import com.example.basa.Class.ClassPublic;
import com.example.basa.Menu.FragmentMenu;
import com.example.basa.R;

import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.Objects;

import static com.example.basa.Home.MainActivity.MyPREFERENCES;
import static com.example.basa.Home.MainActivity.User;


public class FragmentAoNuoiEdit extends Fragment {
    //Khai báo
    private View view;
    private EditText editMaAo, editTenAoNuoi</B></FONT>, editNgayThaCa, editTrongLuong, editDienTich;
    private Spinner cmdLoaiCa, cmdTinh, cmdHuyen, cmdXa;
<A NAME="147"></A>    private Button btnLuuLai, btnXoa;
    private ImageButton btnQuayLai;
    private final ClassPublic classPublic = new ClassPublic();
    private ClassConnect <FONT color="#3ea99f"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#147',2,'match0-top.html#147',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>classConnect;
    private int intDieuKienGan;
    private SharedPreferences sharedpreferences; //Nhớ tài khoản
    private SharedPreferences.Editor editor;
    private FragmentManager fragmentManager; //Tạo Fragment
    private FragmentTransaction fragmentTransaction;
    private final ArrayList&lt;String&gt; listMaLoaiCa = new ArrayList&lt;&gt;(); //Khai báo danh sách loại cá giống hay cá thịt
    private final ArrayList&lt;String&gt; listTenLoaiCa = new ArrayList&lt;&gt;();
    private final ArrayList&lt;String&gt; listMaTinh = new ArrayList&lt;&gt;(); //Khai báo danh sách tỉnh
    private final ArrayList&lt;String&gt; listTenTinh = new ArrayList&lt;&gt;();
    private final ArrayList&lt;String&gt; listMaHuyen = new ArrayList&lt;&gt;(); //Khai báo danh sách huyện
<A NAME="28"></A>    private final ArrayList&lt;String&gt; listTenHuyen = new ArrayList&lt;&gt;();
    private final ArrayList&lt;String&gt; listMaXa = new ArrayList&lt;&gt;(); //Khai báo danh sách xã
    private final ArrayList&lt;String&gt; listTenXa = new ArrayList&lt;&gt;();
    private String strMaTinh, strMaHuyen, strMaXa, strMaLoaiCa</B></FONT>, <FONT color="#717d7d"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#28',2,'match0-top.html#28',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>ganLoaiCa, ganMaTinh, ganMaHuyen, ganMaXa, strMaAo, strTaiKhoan;
    @SuppressLint({&quot;NewApi&quot;, &quot;UseRequireInsteadOfGet&quot;})
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);
        view = inflater.inflate(R.layout.fragment_ao_nuoi_edit, container, false);
        sharedpreferences = Objects.requireNonNull(this.getActivity()).getSharedPreferences(MyPREFERENCES, Context.MODE_PRIVATE);
        editor = sharedpreferences.edit();
        editor.apply();
        fragmentManager = Objects.requireNonNull(getActivity()).getSupportFragmentManager();
        strTaiKhoan = sharedpreferences</B></FONT>.getString(User,&quot;&quot;); //Lấy tên tài khoản
        Bundle bundle = this.getArguments();
        if (bundle != null) {
            intDieuKienGan = 1;
            strMaAo = bundle.getString(&quot;MaAo&quot;);
        }
        else {
            intDieuKienGan = 0;
        }
        layoutAnhXa(); //Ánh xạ các đối tượng Layout
<A NAME="115"></A>        return view;
    }
    @SuppressLint(&quot;NewApi&quot;)
    private <FONT color="#980517"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#115',2,'match0-top.html#115',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>void layoutAnhXa() {
        editMaAo = view.findViewById(R.id.editMaAo);
        editTenAoNuoi = view.findViewById(R.id.editTenAoNuoi);
        editNgayThaCa = view.findViewById(R.id.editNgayThaCa);
        editTrongLuong = view.findViewById(R.id.editTrongLuong);
        editDienTich = view.findViewById(R.id.editDienTich);
        cmdLoaiCa = view.findViewById(R.id.cmdLoaiCa);
        btnQuayLai = view.findViewById(R.id.btnQuayLai);
        btnLuuLai = view.findViewById(R.id.btnLuuLai);
        btnXoa = view.findViewById(R.id.btnXoa) ;
        cmdTinh = view.findViewById(R.id.cmdTinh);
        cmdHuyen = view.findViewById(R.id.cmdHuyen);
        cmdXa = view.findViewById(R.id.cmdXa);
        intDieuKienGan = 1;
        ganThongTin(); //Gán thông tin
        loadTinh(); //Load danh sách tỉnh
        loadLoai();
<A NAME="150"></A>        clickButton</B></FONT>(); //Click button
    }

    private <FONT color="#827d6b"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#150',2,'match0-top.html#150',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>void ganThongTin(){
        try {
            classConnect = new ClassConnect(); //Mở kết nối SQL
            String sqlTaiKhoan = &quot;select * from TB_AoNuoi where MaAo = '&quot;+ strMaAo +&quot;'&quot;;
            ResultSet resultSetTaiKhoan = classConnect.selectData(getActivity(), sqlTaiKhoan);
            if (resultSetTaiKhoan != null &amp;&amp; resultSetTaiKhoan.next()){
                editDienTich.setText(resultSetTaiKhoan.getString(&quot;DienTich&quot;));
                editTrongLuong.setText(resultSetTaiKhoan</B></FONT>.getString(&quot;TrongLuong&quot;));
                editNgayThaCa.setText(resultSetTaiKhoan.getString(&quot;NgayThaCa&quot;));
                editTenAoNuoi.setText(resultSetTaiKhoan.getString(&quot;TenAoNuoi&quot;));
                ganLoaiCa = resultSetTaiKhoan.getString(&quot;LoaiCa&quot;);
                ganMaTinh = resultSetTaiKhoan.getString(&quot;MaTinh&quot;);
                ganMaHuyen = resultSetTaiKhoan.getString(&quot;MaHuyen&quot;);
                ganMaXa = resultSetTaiKhoan.getString(&quot;MaXa&quot;);
            }
            else {
                //Quay lại trang home
                fragmentTransaction = fragmentManager.beginTransaction();
                fragmentTransaction.replace(R.id.fragment_main, new FragmentMenu());
                fragmentTransaction.commit();
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
<A NAME="557"></A>        }catch (Exception e){
            Log.e(&quot;TAG&quot;,e.getMessage());
        }
    <FONT color="#41a317"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#557',2,'match0-top.html#557',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
    @SuppressLint(&quot;NewApi&quot;)
    private void loadTinh(){  //Danh sách tỉnh
        listMaTinh.clear(); // Xóa danh sách tỉnh
        listTenTinh.clear();
        try{
            classConnect = new ClassConnect(); //Mở kết nối SQL
            String sqlTinh = &quot;select MaTinh, TenTinh from TB_Tinh&quot;;
            ResultSet resultSetTinh = classConnect.selectData(getActivity(), sqlTinh);
            if (resultSetTinh != null){
                while (resultSetTinh.next()){
                    listMaTinh.add(resultSetTinh.getString(&quot;MaTinh&quot;));
                    listTenTinh.add(resultSetTinh.getString(&quot;TenTinh&quot;));
<A NAME="231"></A>                }</B></FONT>
                ArrayAdapter dataTinh = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenTinh);
                dataTinh.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
                <FONT color="#980517"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#231',2,'match0-top.html#231',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>cmdTinh.setAdapter(dataTinh);
            }
            if (listMaTinh.isEmpty()){
                classPublic.ThongBao(getActivity(), &quot;Thông báo! Đang cập nhật danh sách tỉnh/thành phố&quot;);
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
        }
        if (listMaTinh.isEmpty()){ //Nếu chưa nhập tỉnh thì không hiển thị huyện
            listMaHuyen.clear(); // Xóa danh sách huyện
            listTenHuyen.clear();
            ArrayAdapter&lt;String&gt; dataHuyen = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenHuyen);
<A NAME="199"></A>            dataHuyen.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
            cmdHuyen</B></FONT>.setAdapter(dataHuyen);
        }
        <FONT color="#87f717"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#199',2,'match0-top.html#199',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>cmdTinh.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaTinh.isEmpty()){
                    strMaTinh = listMaTinh</B></FONT>.get(position);
                    if (intDieuKienGan == 1){
<A NAME="118"></A>                        cmdTinh.setSelection(listMaTinh.indexOf(ganMaTinh));
                        strMaTinh = ganMaTinh;
                    }
                    <FONT color="#77bfc7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#118',2,'match0-top.html#118',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>loadHuyen(strMaTinh);
                }
            }

            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }
    @SuppressLint(&quot;NewApi&quot;)
    private void loadHuyen(String maTinh){ //Danh sách huyện
        listMaHuyen.clear(); // Xóa danh sách huyện
        listTenHuyen.clear();
        try {
            classConnect = new ClassConnect(); //Mở kết nối SQL
            String sqlHuyen = &quot;select MaHuyen, TenHuyen from TB_Huyen where MaTinh = '&quot;+maTinh+&quot;'&quot;;
            ResultSet resultSetHuyen = classConnect.selectData(getActivity(), sqlHuyen);
            if (resultSetHuyen != null){
                while (resultSetHuyen.next()){
                    listMaHuyen.add(resultSetHuyen.getString(&quot;MaHuyen&quot;));
                    listTenHuyen.add(resultSetHuyen.getString(&quot;TenHuyen&quot;));
                }
                ArrayAdapter&lt;String&gt; dataHuyen = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenHuyen);
                dataHuyen.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
                cmdHuyen.setAdapter(dataHuyen);
            }
            if (listMaHuyen.isEmpty()){
                classPublic.ThongBao(getActivity(), &quot;Thông báo! Đang cập nhật danh sách quận/huyện&quot;);
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
        }
        if (listMaHuyen.isEmpty()){ //Nếu chưa nhập huyện thì không hiển thị xã
            listMaXa.clear(); // Xóa danh sách xã
            listTenXa.clear();
<A NAME="119"></A>            ArrayAdapter&lt;String&gt; dataXa = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenXa);
            dataXa.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
            cmdXa</B></FONT>.setAdapter(dataXa);
        <FONT color="#6cc417"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#119',2,'match0-top.html#119',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
        cmdHuyen.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaHuyen</B></FONT>.isEmpty()){
<A NAME="452"></A>                    strMaHuyen = listMaHuyen.get(position);
                    if (intDieuKienGan == 1) {
                        cmdHuyen.setSelection(listMaHuyen.indexOf(ganMaHuyen));
                        <FONT color="#92c7c7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#452',2,'match0-top.html#452',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>strMaHuyen = ganMaHuyen;
                    }
                    loadXa(strMaHuyen);
                }
            }

            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }
    @SuppressLint(&quot;NewApi&quot;)
    private void loadXa(String maHuyen){ //Danh sách xã
        listMaXa.clear(); // Xóa danh sách xã
        listTenXa.clear();
        try {
            classConnect = new ClassConnect(); //Mở kết nối SQL
            String sqlXa = &quot;select MaXa, TenXa from TB_Xa where MaHuyen = '&quot;+maHuyen+&quot;'&quot;;
            ResultSet resultSetXa = classConnect.selectData(getActivity(), sqlXa);
            if (resultSetXa != null){
                while (resultSetXa.next()){
                    listMaXa.add(resultSetXa.getString(&quot;MaXa&quot;));
                    listTenXa.add(resultSetXa.getString(&quot;TenXa&quot;));
                }
<A NAME="456"></A>                ArrayAdapter&lt;String&gt; dataXa = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenXa);
                dataXa.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
                cmdXa</B></FONT>.setAdapter(dataXa);
            <FONT color="#ff0000"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#456',2,'match0-top.html#456',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
            if (listMaXa.isEmpty()){
                classPublic.ThongBao(getActivity(), &quot;Thông báo! Đang cập nhật danh sách phường/xã&quot;);
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
        }
        cmdXa.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaXa.isEmpty()){
                    strMaXa = listMaXa.get(position);
                    if (intDieuKienGan == 1){
                        cmdXa.setSelection(listMaXa</B></FONT>.indexOf(ganMaXa));
                        strMaXa = ganMaXa;
<A NAME="122"></A>                    }
                }
                intDieuKienGan = 0; //Bỏ gán giá trị theo csdl
            <FONT color="#50ebec"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#122',2,'match0-top.html#122',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}

            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }
    private void clickButton() {
        btnQuayLai.setOnClickListener(v -&gt; {
            //Quay lại trang ao nuôi
            fragmentTransaction = fragmentManager.beginTransaction();
            fragmentTransaction.replace(R.id.fragment_main, new FragmentQuanLiAoNuoi());
            fragmentTransaction.commit();
<A NAME="546"></A>        });
        btnXoa</B></FONT>.setOnClickListener(v -&gt; {
            //Hiện hộp thoại thông báo xóa ao nuôi
            AlertDialog.Builder <FONT color="#ada96e"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#546',2,'match0-top.html#546',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>builder = new AlertDialog.Builder(getActivity());
            builder.setTitle(&quot;XÓA AO NUÔI THỦY SẢN&quot;);
            builder.setMessage(&quot;Bạn có muốn xóa &quot;+editTenAoNuoi.getText().toString()+&quot; không?&quot;);
            builder.setIcon(R.drawable.ic_thongbao);
            builder</B></FONT>.setCancelable(false);
            builder.setPositiveButton(&quot;Đồng ý&quot;, (dialogInterface, i) -&gt; {
                try {
<A NAME="116"></A>                    classConnect = new ClassConnect();
                    String sqlAoNuoi = &quot;delete TB_AoNuoi where MaAo = '&quot;+strMaAo+&quot;'&quot;;
                    if (classConnect.updateData(getActivity(),sqlAoNuoi)== 1){
                        classPublic.ThongBao(<FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#116',2,'match0-top.html#116',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>getActivity(),&quot;Thông báo! Xóa ao nuôi thủy sản thành công&quot;);
                        //Quay lại trang ao nuôi
                        fragmentTransaction = fragmentManager.beginTransaction();
                        fragmentTransaction.replace(R.id.fragment_main, new FragmentQuanLiAoNuoi());
                        fragmentTransaction.commit();
                    }else {
                        classPublic.ThongBao(getActivity</B></FONT>(),&quot;Lỗi! Không xóa được ao nuôi thủy sản&quot;);
                    }
                }catch (Exception e){
                    Log.e(&quot;TAG&quot;, e.getMessage());
                }
            });
            builder.setNegativeButton(&quot;Hủy bỏ&quot;, (dialogInterface, i) -&gt; dialogInterface.dismiss());
            AlertDialog alertDialog = builder.create();
            alertDialog.show();
        });
<A NAME="103"></A>        btnLuuLai.setOnClickListener(view -&gt; {
            try {
                if (editTenAoNuoi.getText().length() != 0) {
                    if (<FONT color="#79d867"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#103',2,'match0-top.html#103',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>editNgayThaCa.getText().length() != 0) {
                        if (!listMaLoaiCa.isEmpty()) {
                            if (editTrongLuong.getText().length() != 0) {
                                if (!listMaTinh.isEmpty()) {
                                    if (!listMaHuyen.isEmpty()) {
                                        if (!listMaXa.isEmpty()) {
                                            if</B></FONT> (editDienTich.getText().length() != 0){
                                                String sqlAoNuoi;
                                                    sqlAoNuoi = &quot;update TB_AoNuoi set TenAoNuoi = N'&quot; + editTenAoNuoi.getText() + &quot;', NgayThaCa = '&quot; + editNgayThaCa.getText() + &quot;', LoaiCa = '&quot;+strMaLoaiCa+&quot;', TrongLuong = '&quot;+editTrongLuong.getText()+&quot;',&quot; +
                                                            &quot;DienTich = '&quot;+editDienTich.getText()+&quot;', MaTinh = '&quot;+ strMaTinh +&quot;', MaHuyen = '&quot;+ strMaHuyen +&quot;', MaXa = '&quot;+ strMaXa +&quot;'&quot;+
<A NAME="483"></A>                                                            &quot; where MaAo ='&quot; + strMaAo + &quot;' &quot;;
                                                classConnect = new ClassConnect(); //Mở kết nối SQL
                                                if (classConnect.updateData(getActivity(), sqlAoNuoi) == 1) {
                                                    <FONT color="#4e9258"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#483',2,'match0-top.html#483',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>classPublic.ThongBao(getActivity(), &quot;Thông báo! Cập nhật ao nuôi thành công&quot;);
                                                    ganThongTin(); //Load lại danh sách
                                                }
                                                else {
                                                    classPublic.ThongBao(getActivity(),&quot;Không cập nhật được ao nuôi&quot;);
                                                }
                                            }
                                            else {
                                                classPublic.ThongBao(getActivity(), &quot;Vui lòng nhập diện tích ao nuôi&quot;);
                                            }

                                        } else {
                                            classPublic.ThongBao(getActivity(), &quot;Vui lòng nhập mã xã&quot;);
                                        }

                                    } else {
                                        classPublic.ThongBao(getActivity(), &quot;Vui lòng nhập mã huyện&quot;);
                                    }</B></FONT>

                                } else {
                                    classPublic.ThongBao(getActivity(), &quot;Vui lòng nhập mã tỉnh&quot;);
                                }

                            } else {
                                classPublic.ThongBao(getActivity(), &quot;Nhập trọng lượng cá&quot;);
                            }

<A NAME="38"></A>                        } else {
                            classPublic.ThongBao(getActivity(), &quot;Vui Lòng Chọn Loại&quot;);
                        }
                    } <FONT color="#348781"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#38',2,'match0-top.html#38',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>else {
                        classPublic.ThongBao(getActivity(), &quot;Vui lòng nhập tên ao nuôi&quot;);
                    }
                } else {
                    classPublic.ThongBao(getActivity(), &quot;Vui lòng nhập mã loại&quot;);
                }
            }catch (Exception e){
                Log.e(&quot;TAG&quot;,e</B></FONT>.getMessage());

            }
<A NAME="117"></A>        });
    }
    private void loadLoai() {
        <FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#117',2,'match0-top.html#117',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>listMaLoaiCa.clear(); //Xóa danh sách đang có
        listTenLoaiCa.clear();
        listMaLoaiCa.add(&quot;1&quot;);
        listTenLoaiCa.add(&quot;Cá giống&quot;);
        listMaLoaiCa.add(&quot;2&quot;);
        listTenLoaiCa.add(&quot;Cá thịt&quot;);
        ArrayAdapter&lt;String&gt; dataLoaiTaiKhoan = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item, listTenLoaiCa);
        dataLoaiTaiKhoan.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
        cmdLoaiCa.setAdapter(dataLoaiTaiKhoan);
        cmdLoaiCa.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @</B></FONT>Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaLoaiCa.isEmpty()){
<A NAME="457"></A>                    strMaLoaiCa = listMaLoaiCa.get(position);
                    if (intDieuKienGan == 1){
                        cmdLoaiCa.setSelection(listMaLoaiCa.indexOf(ganLoaiCa));
                        <FONT color="#b38481"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#457',2,'match0-top.html#457',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>strMaLoaiCa = ganLoaiCa;
                    }
                }
            }
            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>AoNuoi\FragmentQuanLiAoNuoi.java</CENTER></H3><HR>
<PRE>
package com.example.basa.AoNuoi;

import android.annotation.SuppressLint;
import android.app.AlertDialog;
import android.content.Context;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
<A NAME="196"></A>import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
<FONT color="#4cc417"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#196',2,'match0-top.html#196',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.ListView;
import android.widget.Spinner;
import android.widget.TextView;
import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;

import com.example.basa.Class.ClassConnect;
import com.example.basa.Class.ClassPublic;
import com.example.basa.Menu.FragmentMenu;
import com.example.basa.R;

import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.Objects;
import static com.example.basa.Home.MainActivity.MyPREFERENCES;
import static com.example.basa.Home.MainActivity.User;

public class FragmentQuanLiAoNuoi extends Fragment {
    //Khai báo
    String strTaiKhoan, strLoaiTaiKhoan;
    View view;
    ListView listView;
    ImageButton btnAdd, btnQuayLai;
    ClassPublic classPublic = new ClassPublic();
    ClassConnect classConnect;
    ListViewQuanLiAoNuoi adapterAoNuoi</B></FONT>;
    SharedPreferences sharedpreferences; //Nhớ tài khoản
    SharedPreferences.Editor editor;
    public static FragmentManager fragmentManager; //Fragment trang chủ
    public static FragmentTransaction fragmentTransaction;
    public static ArrayList&lt;ClassQuanLiAoNuoi&gt; arrayListAoNuoi;
<A NAME="469"></A>    ArrayList&lt;String&gt; listMaLoaiCa = new ArrayList&lt;&gt;(); //Khai báo danh sách loại cá giống hay cá thịt
    ArrayList&lt;String&gt; listTenLoaiCa = new ArrayList&lt;&gt;();
    ArrayList&lt;String&gt; listMaTinh = new ArrayList&lt;&gt;(); //Khai báo danh sách tỉnh
    ArrayList&lt;<FONT color="#c8c2a7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#469',2,'match0-top.html#469',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>String&gt; listTenTinh = new ArrayList&lt;&gt;();
    ArrayList&lt;String&gt; listMaHuyen = new ArrayList&lt;&gt;(); //Khai báo danh sách huyện
    ArrayList&lt;String&gt; listTenHuyen = new ArrayList&lt;&gt;();
    ArrayList&lt;String&gt; listMaXa = new ArrayList&lt;&gt;(); //Khai báo danh sách xã
    ArrayList&lt;String&gt; listTenXa = new ArrayList&lt;&gt;();
    ArrayList&lt;String&gt; listMaTinhTrang = new ArrayList&lt;&gt;(); //Khai báo danh sách tình trạng ao nuôi
    ArrayList&lt;String&gt; listTinhTrang = new ArrayList&lt;&gt;();
    String  strMaTinh, strMaHuyen, strMaXa, strMaLoaiCa, ganLoaiCa, ganMaTinh, ganMaHuyen, ganMaXa, strTinhTrang;
    //Khai báo các đối tượng trên dialog
    TextView textTieuDe;
<A NAME="140"></A>    EditText editMaAo, editTenAoNuoi, editNgayThaCa, editTrongLuong, editDienTich;
    Spinner cmdLoaiCa, cmdTinh, cmdHuyen, cmdXa, cmdTinhTrang;
    Button btnLuuLai, btnDong</B></FONT>;
    int <FONT color="#ada96e"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#140',2,'match0-top.html#140',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>intDieuKienGan;

    @SuppressLint({&quot;NewApi&quot;, &quot;UseRequireInsteadOfGet&quot;})
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);
        view = inflater.inflate(R.layout.fragment_quan_li_ao_nuoi, container, false);
        sharedpreferences = Objects.requireNonNull(this.getActivity()).getSharedPreferences(MyPREFERENCES, Context.MODE_PRIVATE);
        editor = sharedpreferences.edit();
        editor.apply();
        fragmentManager = Objects.requireNonNull(Objects</B></FONT>.requireNonNull(getActivity()).getSupportFragmentManager());//Chuyển đổi giữa các fragment
        strTaiKhoan = sharedpreferences.getString(User,&quot;&quot;);
        strLoaiTaiKhoan = classPublic.layLoaiTaiKhoan(strTaiKhoan, getActivity());
        layoutAnhXa(); //Ánh xạ các đối tượng trên layout
<A NAME="198"></A>        return view;
    }
    @SuppressLint(&quot;NewApi&quot;)
    private <FONT color="#ada96e"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#198',2,'match0-top.html#198',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>void layoutAnhXa() {
        listView = view.findViewById(R.id.listView);
        btnAdd = view.findViewById(R.id.btnAdd);
        btnQuayLai = view.findViewById(R.id.btnQuayLai);
        cmdTinhTrang = view.findViewById(R.id.cmdTinhTrang);
        loadTinhTrang();
        clickButton();//Click vào nút
    }

    private void loadTinhTrang() {
        listMaTinhTrang.clear(); //Xóa danh sách đang có
        listTinhTrang.clear();
        listMaTinhTrang.add(&quot;False&quot;);
        listTinhTrang.add(&quot;Chưa thu hoạch&quot;);
        listMaTinhTrang.add(&quot;True&quot;);
        listTinhTrang.add(&quot;Đã thu hoạch&quot;);
<A NAME="625"></A>        ArrayAdapter&lt;String&gt; dataTinhTrang = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTinhTrang);
        dataTinhTrang.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
        cmdTinhTrang.setAdapter(dataTinhTrang);
        cmdTinhTrang</B></FONT>.setOnItemSelectedListener(new <FONT color="#79d867"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#625',2,'match0-top.html#625',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaTinhTrang.isEmpty()) {
                    strTinhTrang = listMaTinhTrang.get(position);
                    loadDanhSachAoNuoi();//Load danh sách ao nuôi
                }
            }
            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }

<A NAME="49"></A>        });
    }</B></FONT>

    private <FONT color="#8e35ef"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#49',2,'match0-top.html#49',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>void loadDanhSachAoNuoi() {
        arrayListAoNuoi = new ArrayList&lt;&gt;();
        arrayListAoNuoi.clear();
        try{
            classConnect = new ClassConnect(); //Mở kết nối đến SQL
            String sqlAoNuoi</B></FONT> = &quot;select * from TB_AoNuoi an, TB_Tinh t, TB_Huyen h, TB_Xa x where &quot; +
                    &quot;an.MaTinh = t.MaTinh and an.MaHuyen = h.MaHuyen and an.MaXa = x.MaXa and &quot; +
                    &quot;an.TaiKhoan = '&quot; + strTaiKhoan + &quot;' and an.TinhTrang = '&quot;+ Boolean.parseBoolean(strTinhTrang) +&quot;' order by MaAo desc&quot;;
            ResultSet resultSetAoNuoi = classConnect.selectData(getActivity(), sqlAoNuoi);
            if (resultSetAoNuoi != null) {
<A NAME="201"></A>                while (resultSetAoNuoi.next()) {
                    arrayListAoNuoi.add(new ClassQuanLiAoNuoi(resultSetAoNuoi.getString(&quot;MaAo&quot;), resultSetAoNuoi.getString(&quot;TenAoNuoi&quot;),
                            resultSetAoNuoi.getString(&quot;NgayThaCa&quot;),resultSetAoNuoi.getString(&quot;LoaiCa&quot;),resultSetAoNuoi.getString(&quot;TrongLuong&quot;),
                            <FONT color="#e77471"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#201',2,'match0-top.html#201',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>resultSetAoNuoi.getString(&quot;MaTinh&quot;), resultSetAoNuoi.getString(&quot;MaHuyen&quot;), resultSetAoNuoi.getString(&quot;MaXa&quot;),
                            resultSetAoNuoi.getString(&quot;TenTinh&quot;),resultSetAoNuoi.getString(&quot;TenHuyen&quot;),resultSetAoNuoi.getString(&quot;TenXa&quot;), resultSetAoNuoi.getBoolean(&quot;TinhTrang&quot;),
                            resultSetAoNuoi.getString(&quot;ThuHoach&quot;)));
                }
            } else {
                classPublic.ThongBao(getActivity(), &quot;Chưa cập nhật danh sách ao canh tác&quot;);
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối đến SQL
        } catch (Exception e) {
            Log.e(&quot;TAG&quot;, e</B></FONT>.getMessage());
        }
        adapterAoNuoi = new ListViewQuanLiAoNuoi(getContext());
        listView.setAdapter(adapterAoNuoi);
    }
    private void clickButton() {
        if (strLoaiTaiKhoan.equals(&quot;2&quot;)){
            btnAdd.setOnClickListener(v -&gt;  {
                updateAoNuoi(-1);
                intDieuKienGan = 0;
            });
        }
        else {
            btnAdd.setVisibility(View.GONE);//Ẩn nút thêm mới
            classPublic.ThongBao(getActivity(),&quot;Bạn không có quyền sử dụng chức năng này&quot;);
        }

        btnQuayLai.setOnClickListener(v -&gt; {
            fragmentTransaction = fragmentManager.beginTransaction();
<A NAME="440"></A>            fragmentTransaction.replace(R.id.fragment_main, new FragmentMenu());
            fragmentTransaction.commit();
        });
    <FONT color="#827d6b"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#440',2,'match0-top.html#440',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
    @SuppressLint(&quot;SetTextI18n&quot;)
    //Dùng dialog
    private void updateAoNuoi(final int intChiSo) {
        LayoutInflater inflater = getLayoutInflater();
        @SuppressLint(&quot;InflateParams&quot;) View alertLayout</B></FONT> = inflater.inflate(R.layout.dialog_quan_li_ao_nuoi, null);
        textTieuDe = alertLayout.findViewById(R.id.textTieuDe);
        editMaAo = alertLayout.findViewById(R.id.editMaAo);
        editTenAoNuoi = alertLayout.findViewById(R.id.editTenAoNuoi);
        editNgayThaCa = alertLayout.findViewById(R.id.editNgayThaCa);
        editTrongLuong = alertLayout.findViewById(R.id.editTrongLuong);
        editDienTich = alertLayout.findViewById(R.id.editDienTich);
        cmdLoaiCa = alertLayout.findViewById(R.id.cmdLoaiCa);
        cmdTinh = alertLayout.findViewById(R.id.cmdTinh);
        cmdHuyen = alertLayout.findViewById(R.id.cmdHuyen);
<A NAME="611"></A>        cmdXa = alertLayout.findViewById(R.id.cmdXa);
        btnLuuLai = alertLayout.findViewById(R.id.btnLuuLai);
        btnDong = alertLayout.findViewById(R.id.btnDong);
        final AlertDialog.Builder alert = new AlertDialog.Builder(<FONT color="#3ea99f"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#611',2,'match0-top.html#611',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>getActivity());
        loadLoai(); //Load loại nuôi cá giống hay cá thịt
        loadTinh(); //Load danh sách tỉnh
        intDieuKienGan = 1;
        alert.setView(alertLayout);
        alert.setCancelable(false);
        final AlertDialog dialog = alert.create();
        if</B></FONT> (intChiSo == -1) {
            String strTieuDe = &quot;THÊM MỚI THÔNG TIN AO NUÔI&quot;;
            textTieuDe.setText(strTieuDe);
            editMaAo.setText(&quot;&quot;);
            String strNut = &quot;THÊM MỚI&quot;; //Đổi text nút lưu lại thành thêm mới
            btnLuuLai.setText(strNut);
        } else {
            String strTieuDe = &quot;CẬP NHẬT THÔNG TIN AO NUÔI&quot;;
            textTieuDe.setText(strTieuDe);
            String strNut = &quot;CẬP NHẬT&quot;; //Đổi text nút lưu lại thành cập nhật
            btnLuuLai.setText(strNut);
        }
        btnLuuLai.setOnClickListener(v -&gt;  {
            try {
                if (editTenAoNuoi.getText().length() != 0) {
                    if (editNgayThaCa.getText().length() != 0) {
                        if (!listMaLoaiCa.isEmpty()) {
<A NAME="631"></A>                            if (editTrongLuong.getText().length() != 0) {
                                if (!listMaTinh.isEmpty()) {
                                    if (!listMaHuyen.isEmpty()) {
                                        <FONT color="#b38481"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#631',2,'match0-top.html#631',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>if (!listMaXa.isEmpty()) {
                                            if (editDienTich.getText().length() != 0){
                                                String sqlAoNuoi;
                                                if (intChiSo == -1) { //Thêm mới ao nuôi
                                                    sqlAoNuoi = &quot;insert into TB_AoNuoi(TaiKhoan, TenAoNuoi, NgayThaCa, LoaiCa, TrongLuong, DienTich, MaTinh, MaHuyen, MaXa, TinhTrang) values ('&quot; + strTaiKhoan + &quot;', N'&quot; + editTenAoNuoi.getText() + &quot;',&quot; +
<A NAME="632"></A>                                                            &quot;'&quot; + editNgayThaCa.getText() + &quot;','&quot; + strMaLoaiCa + &quot;','&quot; + editTrongLuong</B></FONT>.getText() + &quot;', '&quot;+editDienTich.getText()+&quot;', '&quot; + strMaTinh + &quot;',&quot; +
                                                            &quot;'&quot; + strMaHuyen + &quot;','&quot; + strMaXa + &quot;',0)&quot;;
                                                } else { //Cập nhật ao nuôi
                                                    sqlAoNuoi = &quot;update TB_AoNuoi set TenAoNuoi = N'&quot; + <FONT color="#2b60de"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#632',2,'match0-top.html#632',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>editTenAoNuoi.getText() + &quot;', NgayThaCa = '&quot; + editNgayThaCa.getText() + &quot;', LoaiCa = '&quot;+strMaLoaiCa+&quot;', TrongLuong = '&quot;+editTrongLuong.getText()+&quot;',&quot; +
                                                            &quot;DienTich = '&quot;+editDienTich.getText()+&quot;', MaTinh = '&quot;+ strMaTinh +&quot;', MaHuyen = '&quot;+ strMaHuyen +&quot;', MaXa = '&quot;+ strMaXa +&quot;'&quot;+
                                                            &quot; where MaAo ='&quot; + editMaAo.getText() + &quot;' &quot;;
                                                }
                                                classConnect = new ClassConnect(); //Mở kết nối SQL
                                                if (classConnect.updateData(getActivity(), sqlAoNuoi) == 1) {
                                                    if (intChiSo == -1) {
                                                        classPublic.ThongBao(getActivity(), &quot;Thêm mới ao nuôi thành công&quot;);
                                                    } else {
                                                        classPublic.ThongBao(getActivity(), &quot;Cập nhật ao nuôi thành công&quot;);
                                                    }
                                                    dialog.cancel(); //Đóng dialog sau đó gọi load mới danh sách
                                                    loadDanhSachAoNuoi</B></FONT>(); //Load lại danh sách
                                                }
                                            }
                                            else {
                                                classPublic.ThongBao(getActivity(), &quot;Vui lòng nhập diện tích ao nuôi&quot;);
                                            }

                                        } else {
                                            classPublic.ThongBao(getActivity(), &quot;Vui lòng nhập mã xã&quot;);
                                        }

                                    } else {
                                        classPublic.ThongBao(getActivity(), &quot;Vui lòng nhập mã huyện&quot;);
                                    }

                                } else {
                                    classPublic.ThongBao(getActivity(), &quot;Vui lòng nhập mã tỉnh&quot;);
                                }

                            } else {
                                classPublic.ThongBao(getActivity(), &quot;Nhập trọng lượng cá&quot;);
                            }

<A NAME="273"></A>                        } else {
                            classPublic.ThongBao(getActivity(), &quot;Vui Lòng Chọn Loại&quot;);
                        }
                    } <FONT color="#f87a17"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#273',2,'match0-top.html#273',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>else {
                        classPublic.ThongBao(getActivity(), &quot;Vui lòng nhập tên ao nuôi&quot;);
                    }
                } else {
                    classPublic.ThongBao(getActivity(), &quot;Vui lòng nhập mã loại&quot;);
                }

            } catch (Exception e) {
<A NAME="265"></A>                Log.e(&quot;TAG&quot;, e</B></FONT>.getMessage());
            }
        });
        <FONT color="#736aff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#265',2,'match0-top.html#265',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>btnDong.setOnClickListener(v -&gt; dialog.cancel());
        dialog.show(); //Show giao diện dialog cập nhật danh sách ao nuôi
    }
    @SuppressLint(&quot;NewApi&quot;)
    private void loadTinh(){
        //Danh sách tỉnh
        listMaTinh.clear(); // Xóa danh sách tỉnh
        listTenTinh.clear();
        try{
            classConnect = new ClassConnect(); //Mở kết nối SQL
            String sqlTinh = &quot;select MaTinh, TenTinh from TB_Tinh&quot;;
            ResultSet resultSetTinh = classConnect.selectData(getActivity(), sqlTinh);
            if (resultSetTinh != null){
                while (resultSetTinh.next()){
                    listMaTinh.add(resultSetTinh.getString(&quot;MaTinh&quot;));
                    listTenTinh.add(resultSetTinh.getString(&quot;TenTinh&quot;));
                }</B></FONT>
                ArrayAdapter dataTinh = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenTinh);
                dataTinh.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
<A NAME="453"></A>                cmdTinh.setAdapter(dataTinh);
            }
            else {
                <FONT color="#d16587"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#453',2,'match0-top.html#453',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>Log.e(&quot;TAG&quot;, &quot;Chưa cập nhật danh sách tỉnh&quot;);
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
        }
        if (listMaTinh.isEmpty()){ //Nếu chưa nhập tỉnh thì không hiển thị huyện
            listMaHuyen.clear(); // Xóa danh sách huyện
            listTenHuyen.clear();
            ArrayAdapter&lt;String&gt; dataHuyen = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenHuyen);
<A NAME="331"></A>            dataHuyen.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
            cmdHuyen</B></FONT>.setAdapter(dataHuyen);
        }
        <FONT color="#f87a17"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#331',2,'match0-top.html#331',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>cmdTinh.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaTinh</B></FONT>.isEmpty()){
<A NAME="455"></A>                    strMaTinh = listMaTinh.get(position);
                    if (intDieuKienGan == 1){
                        cmdTinh.setSelection(listMaTinh.indexOf(ganMaTinh));
                        <FONT color="#8e35ef"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#455',2,'match0-top.html#455',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>strMaTinh = ganMaTinh;
                    }
                    loadHuyen(strMaTinh); //Load huyện theo tỉnh
                }
            }
            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }
    @SuppressLint(&quot;NewApi&quot;)
    private void loadHuyen(String maTinh){
        //Danh sách huyện
        listMaHuyen.clear(); // Xóa danh sách huyện
        listTenHuyen.clear();
        try {
            classConnect = new ClassConnect(); //Mở kết nối SQL
            String sqlHuyen = &quot;select MaHuyen, TenHuyen from TB_Huyen where MaTinh = '&quot;+maTinh+&quot;'&quot;;
            ResultSet resultSetHuyen = classConnect.selectData(getActivity(), sqlHuyen);
            if (resultSetHuyen != null){
                while (resultSetHuyen.next()){
                    listMaHuyen.add(resultSetHuyen.getString(&quot;MaHuyen&quot;));
                    listTenHuyen.add(resultSetHuyen.getString(&quot;TenHuyen&quot;));
                }
                ArrayAdapter&lt;String&gt; dataHuyen = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenHuyen);
                dataHuyen.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
<A NAME="339"></A>                cmdHuyen</B></FONT>.setAdapter(dataHuyen);
            }
            else {
                <FONT color="#8e35ef"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#339',2,'match0-top.html#339',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>Log.e(&quot;TAG&quot;, &quot;Chưa cập nhật danh sách huyện&quot;);
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
<A NAME="320"></A>        }catch (Exception e){
            Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
        }</B></FONT>
        if (<FONT color="#f9966b"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#320',2,'match0-top.html#320',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>listMaHuyen.isEmpty()){ //Nếu chưa nhập huyện thì không hiển thị xã
<A NAME="229"></A>            listMaXa.clear(); // Xóa danh sách xã
            listTenXa.clear();
            ArrayAdapter&lt;String&gt; dataXa = new ArrayAdapter&lt;&gt;(getActivity</B></FONT>(), android.R.layout.simple_spinner_item,listTenXa);
            <FONT color="#4863a0"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#229',2,'match0-top.html#229',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>dataXa.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
            cmdXa.setAdapter(dataXa);
        }
        cmdHuyen.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaHuyen.isEmpty()){
<A NAME="490"></A>                    strMaHuyen = listMaHuyen.get(position);
                    if (intDieuKienGan == 1) {
                        cmdHuyen.setSelection(listMaHuyen</B></FONT>.indexOf(ganMaHuyen));
                        <FONT color="#95b9c7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#490',2,'match0-top.html#490',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>strMaHuyen = ganMaHuyen;
                    }
                    loadXa(strMaHuyen); //Load xã theo huyện
                }
            }
            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }
    @SuppressLint(&quot;NewApi&quot;)
    private void loadXa(String maHuyen){
        //Danh sách huyện
        listMaXa.clear(); // Xóa danh sách huyện
        listTenXa.clear();
        try {
            classConnect = new ClassConnect(); //Mở kết nối SQL
            String sqlXa = &quot;select MaXa, TenXa from TB_Xa where MaHuyen = '&quot;+maHuyen+&quot;'&quot;;
            ResultSet resultSetXa = classConnect.selectData(getActivity(), sqlXa);
            if (resultSetXa != null){
                while (resultSetXa.next()){
                    listMaXa.add(resultSetXa.getString(&quot;MaXa&quot;));
                    listTenXa.add(resultSetXa.getString(&quot;TenXa&quot;));
                }
                ArrayAdapter&lt;String&gt; dataXa = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenXa);
                dataXa.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
<A NAME="318"></A>                cmdXa</B></FONT>.setAdapter(dataXa);
            }
            else {
                <FONT color="#717d7d"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#318',2,'match0-top.html#318',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>Log.e(&quot;TAG&quot;, &quot;Chưa cập nhật danh sách huyện&quot;);
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
        }
        cmdXa.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaXa</B></FONT>.isEmpty()){
                    strMaXa = listMaXa.get(position);
                    if (intDieuKienGan == 1){
                        cmdXa.setSelection(listMaXa.indexOf(ganMaXa));
                        strMaXa = ganMaXa;
<A NAME="615"></A>                    }
                }
                intDieuKienGan = 0; //Bỏ gán giá trị theo csdl
            <FONT color="#41a317"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#615',2,'match0-top.html#615',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}

            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
<A NAME="133"></A>        });
    }
    private void</B></FONT> loadLoai() {
        <FONT color="#800517"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#133',2,'match0-top.html#133',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>listMaLoaiCa.clear(); //Xóa danh sách đang có
        listTenLoaiCa.clear();
        listMaLoaiCa.add(&quot;1&quot;);
        listTenLoaiCa.add(&quot;Cá giống&quot;);
        listMaLoaiCa.add(&quot;2&quot;);
        listTenLoaiCa.add(&quot;Cá thịt&quot;);
        ArrayAdapter&lt;String&gt; dataLoaiTaiKhoan = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item, listTenLoaiCa);
        dataLoaiTaiKhoan.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
        cmdLoaiCa.setAdapter(dataLoaiTaiKhoan);
        cmdLoaiCa.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @</B></FONT>Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaLoaiCa.isEmpty()){
<A NAME="642"></A>                    strMaLoaiCa = listMaLoaiCa.get(position);
                    if (intDieuKienGan == 1){
                        cmdLoaiCa.setSelection(listMaLoaiCa.indexOf(ganLoaiCa));
                        <FONT color="#151b8d"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#642',2,'match0-top.html#642',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>strMaLoaiCa = ganLoaiCa;
                    }
                }
            }
            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>AoNuoi\FragmentThongKeAoNuoi.java</CENTER></H3><HR>
<PRE>
<A NAME="313"></A><FONT color="#f660ab"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#313',2,'match0-top.html#313',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.AoNuoi;

import android.annotation.SuppressLint;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ImageButton;
import android.widget.ListView;
import android.widget.Spinner;
import android.widget.Switch;
import android.widget.TextView;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;

import com.example.basa.R;
import com.example.basa.Class.ClassConnect;
import com.example.basa.Class.ClassPublic;
import com.example.basa.Home.FragmentHome;

import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.Objects;

import static java.lang.String.format;

public class FragmentThongKeAoNuoi extends Fragment{
    //Khai báo
    private View view;
<A NAME="221"></A>    private ListView listView;
    private Spinner cmdTinh</B></FONT>, cmdHuyen, cmdLoaiCa;
    @SuppressLint(&quot;UseSwitchCompatOrMaterialCode&quot;)
    private Switch <FONT color="#d16587"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#221',2,'match0-top.html#221',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>switchTinh, switchHuyen, switchLoaiCa;
    private Integer intTinh, intHuyen, intLoaiCa;
    private TextView textTongDienTich;
    private ImageButton btnQuayLai;
    public static ArrayList&lt;ClassThongKeAoNuoi&gt; arrayListThongKeAoNuoi;
    private ListViewThongKeAoNuoi adapterThongKeAoNuoi;
    private final ArrayList&lt;String&gt; listMaTinh = new ArrayList&lt;&gt;(); //Khai báo danh sách tỉnh
    private final ArrayList&lt;String&gt; listTenTinh = new ArrayList&lt;&gt;();
    private final ArrayList&lt;String&gt; listMaHuyen = new ArrayList&lt;&gt;(); //Khai báo danh sách huyện
    private final ArrayList&lt;String&gt; listTenHuyen = new ArrayList&lt;&gt;();
    private final ArrayList&lt;String&gt; listMaXa = new ArrayList&lt;&gt;(); //Khai báo danh sách xã
    private final ArrayList&lt;String&gt; listTenXa = new ArrayList</B></FONT>&lt;&gt;();
    private final ArrayList&lt;String&gt; listMaLoaiCa = new ArrayList&lt;&gt;(); //Khai báo danh sách xã
    private final ArrayList&lt;String&gt; listTenLoaiCa = new ArrayList&lt;&gt;();
    private String strMaTinh, strMaHuyen, strLoaiCa;
    private final ClassPublic classPublic = new ClassPublic();
    private ClassConnect classConnect;
<A NAME="298"></A>    public static FragmentManager fragmentManager; //Fragment trang chủ
    public static FragmentTransaction fragmentTransaction;
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        <FONT color="#bce954"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#298',2,'match0-top.html#298',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>super.onCreateView(inflater, container, savedInstanceState);
        view = inflater.inflate(R.layout.fragment_thong_ke_ao_nuoi, container, false);
        layoutAnhXa(); //Ánh xạ các đối tượng trên layout
        return view;
    }

    private void layoutAnhXa() {
        fragmentManager = requireActivity</B></FONT>().getSupportFragmentManager();//Chuyển đổi giữa các fragment
        cmdTinh = view.findViewById(R.id.cmdTinh);
        cmdHuyen = view.findViewById(R.id.cmdHuyen);
        cmdLoaiCa = view.findViewById(R.id.cmdLoaiCa);
        switchTinh = view.findViewById(R.id.switchTinh);
        switchHuyen = view.findViewById(R.id.switchHuyen);
        switchLoaiCa = view.findViewById(R.id.switchLoaiCa);
        textTongDienTich = view.findViewById(R.id.textTongDienTich);
        btnQuayLai = view.findViewById(R.id.btnQuayLai);
        btnQuayLai.setOnClickListener(view -&gt; {
            fragmentTransaction = fragmentManager.beginTransaction();
            fragmentTransaction.replace(R.id.fragment_main, new FragmentHome());
            fragmentTransaction.commit();
        });
        listView = view.findViewById(R.id.listView);
        intTinh = 0;
<A NAME="549"></A>        intHuyen = 0;
        intLoaiCa = 0;
        cmdTinh.setEnabled(false); //Không cho chọn tỉnh
        <FONT color="#e77471"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#549',2,'match0-top.html#549',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>cmdHuyen.setEnabled(false); //Không cho chọn huyện
        cmdLoaiCa.setEnabled(false); //Không cho chọn loại cá
        loadTinh();//Load danh sách tỉnh
        loadLoaiCa();
        clickButton();//Click vào button
        loadThongKeAoNuoi(&quot;0&quot;,&quot;0&quot;,&quot;0&quot;);
<A NAME="501"></A>    }

    private void</B></FONT> loadLoaiCa(){
        <FONT color="#810541"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#501',2,'match0-top.html#501',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>listMaLoaiCa.clear(); //Xóa danh sách đang có
        listTenLoaiCa.clear();
        listMaLoaiCa.add(&quot;1&quot;);
<A NAME="31"></A>        listTenLoaiCa.add(&quot;Cá giống&quot;);
        listMaLoaiCa.add(&quot;2&quot;);
        listTenLoaiCa.add(&quot;Cá thịt&quot;);
        ArrayAdapter&lt;String&gt; dataLoaiTaiKhoan = new ArrayAdapter</B></FONT>&lt;&gt;(<FONT color="#3ea99f"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#31',2,'match0-top.html#31',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>getActivity(), android.R.layout.simple_spinner_item,listTenLoaiCa);
        dataLoaiTaiKhoan.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
        cmdLoaiCa.setAdapter(dataLoaiTaiKhoan);
        cmdLoaiCa.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaLoaiCa.isEmpty()) {
                    strLoaiCa = listMaLoaiCa.get(position);
                    loadThongKeAoNuoi(strMaTinh, strMaHuyen, strLoaiCa);
                }
            }
            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }

        });
<A NAME="613"></A>    }
    @SuppressLint(&quot;NewApi&quot;)
    private void</B></FONT> loadTinh(){  //Danh sách tỉnh
        <FONT color="#736aff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#613',2,'match0-top.html#613',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>listMaTinh.clear(); // Xóa danh sách tỉnh
        listTenTinh.clear();
        try{
            classConnect = new ClassConnect(); //Mở kết nối SQL
            String sqlTinh = &quot;select MaTinh, TenTinh from TB_Tinh&quot;;
            ResultSet resultSetTinh = classConnect.selectData(getActivity(), sqlTinh);
            if (resultSetTinh != null){
                while (resultSetTinh.next()){
<A NAME="639"></A>                    listMaTinh.add(resultSetTinh.getString(&quot;MaTinh&quot;));
                    listTenTinh.add(resultSetTinh.getString(&quot;TenTinh&quot;));
                }</B></FONT>
                ArrayAdapter dataTinh = new ArrayAdapter&lt;&gt;(<FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#639',2,'match0-top.html#639',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>getActivity(), android.R.layout.simple_spinner_item,listTenTinh);
                dataTinh.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
                cmdTinh.setAdapter(dataTinh);
            }
            if (listMaTinh.isEmpty()){
                classPublic.ThongBao(getActivity(), &quot;Thông báo! Đang cập nhật danh sách tỉnh/thành phố&quot;);
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
        }
        if (listMaTinh.isEmpty()){ //Nếu chưa nhập tỉnh thì không hiển thị huyện
            listMaHuyen.clear(); // Xóa danh sách huyện
            listTenHuyen.clear();
            ArrayAdapter&lt;String&gt; dataHuyen = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenHuyen);
            dataHuyen.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
            cmdHuyen.setAdapter(dataHuyen);
            loadThongKeAoNuoi(strMaTinh, strMaHuyen, strLoaiCa);
        }
        cmdTinh.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
<A NAME="120"></A>            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaTinh</B></FONT>.isEmpty()){
                    <FONT color="#151b8d"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#120',2,'match0-top.html#120',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>strMaTinh = listMaTinh.get(position);
                    loadHuyen(strMaTinh);
                }
            }

            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }
    @SuppressLint(&quot;NewApi&quot;)
    private void loadHuyen(String maTinh){ //Danh sách huyện
        listMaHuyen.clear(); // Xóa danh sách huyện
        listTenHuyen.clear();
        try {
            classConnect = new ClassConnect(); //Mở kết nối SQL
            String sqlHuyen = &quot;select MaHuyen, TenHuyen from TB_Huyen where MaTinh = '&quot;+maTinh+&quot;'&quot;;
            ResultSet resultSetHuyen = classConnect.selectData(getActivity(), sqlHuyen);
            if (resultSetHuyen != null){
                while (resultSetHuyen.next()){
                    listMaHuyen.add(resultSetHuyen.getString(&quot;MaHuyen&quot;));
                    listTenHuyen.add(resultSetHuyen.getString(&quot;TenHuyen&quot;));
                }
                ArrayAdapter&lt;String&gt; dataHuyen = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenHuyen);
                dataHuyen.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
                cmdHuyen.setAdapter(dataHuyen);
            }
            if (listMaHuyen.isEmpty()){
                classPublic.ThongBao(getActivity(), &quot;Thông báo! Đang cập nhật danh sách quận/huyện&quot;);
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
        }
        if (listMaHuyen.isEmpty()){ //Nếu chưa nhập huyện thì không hiển thị xã
            listMaXa.clear(); // Xóa danh sách xã
            listTenXa.clear();
            ArrayAdapter&lt;String&gt; dataXa = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenXa);
            dataXa.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
            loadThongKeAoNuoi(strMaTinh, strMaHuyen, strLoaiCa);
        }
        cmdHuyen.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
<A NAME="59"></A>            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaHuyen</B></FONT>.isEmpty()){
                    strMaHuyen = <FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#59',2,'match0-top.html#59',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>listMaHuyen.get(position);
                    loadXa(strMaHuyen);
                    loadThongKeAoNuoi(strMaTinh, strMaHuyen, strLoaiCa);
                }
            }

            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {
<A NAME="578"></A>
            }
        }</B></FONT>);
    <FONT color="#52d017"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#578',2,'match0-top.html#578',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
    @SuppressLint(&quot;NewApi&quot;)
    private void loadXa(String maHuyen){ //Danh sách xã
        listMaXa.clear(); // Xóa danh sách xã
        listTenXa.clear();
        try {
            classConnect = new ClassConnect(); //Mở kết nối SQL
            String sqlXa = &quot;select MaXa, TenXa from TB_Xa where MaHuyen = '&quot;+maHuyen+&quot;'&quot;;
            ResultSet resultSetXa = classConnect.selectData(getActivity(), sqlXa);
            if (resultSetXa != null){
                while (resultSetXa.next()){
<A NAME="16"></A>                    listMaXa.add(resultSetXa.getString(&quot;MaXa&quot;));
                    listTenXa.add(resultSetXa.getString(&quot;TenXa&quot;));
                }</B></FONT>
            <FONT color="#3090c7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#16',2,'match0-top.html#16',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
            classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
        }
    }

    private void clickButton() {
        switchTinh</B></FONT>.setOnCheckedChangeListener((buttonView, isChecked) -&gt; {
            if (isChecked){
                intTinh = 1;
                cmdTinh.setEnabled(true);
            }
            else {
                cmdTinh.setEnabled(false);
                intTinh = 0;
                switchHuyen.setChecked(false);
                intHuyen = 0;
            }
            loadThongKeAoNuoi(strMaTinh, strMaHuyen, strLoaiCa);
        });
        switchHuyen.setOnCheckedChangeListener((buttonView, isChecked) -&gt; {
            if (isChecked){
                intHuyen = 1;
                cmdHuyen.setEnabled(true);
            }
            else {
                cmdHuyen.setEnabled(false);
                intHuyen = 0;
            }
            loadThongKeAoNuoi(strMaTinh, strMaHuyen, strLoaiCa);
        });
        switchLoaiCa.setOnCheckedChangeListener((buttonView, isChecked) -&gt; {
            if (isChecked){
                intLoaiCa = 1;
                cmdLoaiCa.setEnabled(true);
            }
            else {
<A NAME="224"></A>                cmdLoaiCa.setEnabled(false);
                intLoaiCa = 0;
            }
            <FONT color="#ff0000"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#224',2,'match0-top.html#224',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>loadThongKeAoNuoi(strMaTinh, strMaHuyen, strLoaiCa);
        });
    }

    @SuppressLint({&quot;SetTextI18n&quot;, &quot;DefaultLocale&quot;})
    private void loadThongKeAoNuoi(String maTinh, String maHuyen, String loaiCa) {
        arrayListThongKeAoNuoi = new ArrayList&lt;&gt;();
        arrayListThongKeAoNuoi.clear();
        int intSTT = 0;
        try{
            classConnect = new ClassConnect(); //Mở kết nối đến SQL
            double doubleTongDienTich = 0</B></FONT>;//Gán giá trị ban đầu bằng 0
            if (intTinh == 1){
                if (intHuyen == 1){
                    if (intLoaiCa == 1){
                        String sqlThongKe = &quot;select MaXa, sum(DienTich) as dientich from TB_AoNuoi &quot; +
                                &quot;where MaTinh = '&quot;+ maTinh +&quot;' and MaHuyen = '&quot;+ maHuyen +&quot;' and LoaiCa = '&quot;+ loaiCa +&quot;' and DienTich IS NOT NULL GROUP BY MaXa&quot;;
                        ResultSet resultSetThongKe = classConnect.selectData(getActivity(), sqlThongKe);
                        if (resultSetThongKe != null){
                            while (resultSetThongKe.next()){
                                doubleTongDienTich = doubleTongDienTich + Double.parseDouble(resultSetThongKe.getString(&quot;dientich&quot;));//Cộng các giá trị
<A NAME="420"></A>                                //Lấy giá trị từ csdl
                                arrayListThongKeAoNuoi.add(new ClassThongKeAoNuoi(++intSTT, listTenXa.get(listMaXa.indexOf(resultSetThongKe.getString(&quot;MaXa&quot;))), Double.parseDouble(resultSetThongKe.getString(&quot;dientich&quot;))));
                            }
                        <FONT color="#f52887"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#420',2,'match0-top.html#420',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
                    }
                    else {
                        String sqlThongKe = &quot;select MaXa, sum(DienTich) as dientich from TB_AoNuoi &quot; +
                                &quot;where MaTinh = '&quot;+ maTinh +&quot;' and MaHuyen = '&quot;+ maHuyen +&quot;' and DienTich IS NOT NULL GROUP BY MaXa&quot;;
                        ResultSet resultSetThongKe = classConnect.selectData(getActivity(), sqlThongKe);
                        if</B></FONT> (resultSetThongKe != null){
                            while (resultSetThongKe.next()){
                                doubleTongDienTich = doubleTongDienTich + Double.parseDouble(resultSetThongKe.getString(&quot;dientich&quot;));//Cộng các giá trị
                                //Lấy giá trị từ csdl
                                arrayListThongKeAoNuoi.add(new ClassThongKeAoNuoi(++intSTT, listTenXa.get(listMaXa.indexOf(resultSetThongKe.getString(&quot;MaXa&quot;))), Double.parseDouble(resultSetThongKe.getString(&quot;dientich&quot;))));
                            }
                        }
                    }
                }
                else {
                    if (intLoaiCa == 1){
                        String sqlThongKe = &quot;select MaHuyen, sum(DienTich) as dientich from TB_AoNuoi &quot; +
                                &quot;where MaTinh = '&quot;+ maTinh +&quot;' and LoaiCa = '&quot;+ loaiCa +&quot;' and DienTich IS NOT NULL GROUP BY MaHuyen&quot;;
                        ResultSet resultSetThongKe = classConnect.selectData(getActivity(), sqlThongKe);
                        if (resultSetThongKe != null){
                            while (resultSetThongKe.next()){
                                doubleTongDienTich = doubleTongDienTich + Double.parseDouble(resultSetThongKe.getString(&quot;dientich&quot;));
                                arrayListThongKeAoNuoi.add(new ClassThongKeAoNuoi(++intSTT, listTenHuyen.get(listMaHuyen.indexOf(resultSetThongKe.getString(&quot;MaHuyen&quot;))), Double.parseDouble(resultSetThongKe.getString(&quot;dientich&quot;))));
                            }
                        }
                    }
                    else {
                        String sqlThongKe = &quot;select MaHuyen, sum(DienTich) as dientich from TB_AoNuoi &quot; +
                                &quot;where MaTinh = '&quot;+ maTinh +&quot;' and DienTich IS NOT NULL GROUP BY MaHuyen&quot;;
                        ResultSet resultSetThongKe = classConnect.selectData(getActivity(), sqlThongKe);
                        if (resultSetThongKe != null){
                            while (resultSetThongKe.next()){
                                doubleTongDienTich = doubleTongDienTich + Double.parseDouble(resultSetThongKe.getString(&quot;dientich&quot;));
                                arrayListThongKeAoNuoi.add(new ClassThongKeAoNuoi(++intSTT, listTenHuyen.get(listMaHuyen.indexOf(resultSetThongKe.getString(&quot;MaHuyen&quot;))), Double.parseDouble(resultSetThongKe.getString(&quot;dientich&quot;))));
                            }
                        }
                    }
                }
            }
            else {
                if (intLoaiCa == 1){
                    String sqlThongKe = &quot;select MaTinh, sum(DienTich) as dientich from TB_AoNuoi where &quot; +
                            &quot;LoaiCa = '&quot;+ loaiCa +&quot;' and DienTich IS NOT NULL GROUP BY MaTinh&quot;;
                    ResultSet resultSetThongKe = classConnect.selectData(getActivity(), sqlThongKe);
                    if (resultSetThongKe != null){
                        while (resultSetThongKe.next()){
                            doubleTongDienTich = doubleTongDienTich + Double.parseDouble(resultSetThongKe.getString(&quot;dientich&quot;));
                            arrayListThongKeAoNuoi.add(new ClassThongKeAoNuoi(++intSTT, listTenTinh.get(listMaTinh.indexOf(resultSetThongKe.getString(&quot;MaTinh&quot;))), Double.parseDouble(resultSetThongKe.getString(&quot;dientich&quot;))));
                        }
                    }
                }
                else {
                    String sqlThongKe = &quot;select MaTinh, sum(DienTich) as dientich from TB_AoNuoi where &quot; +
                            &quot;DienTich IS NOT NULL GROUP BY MaTinh&quot;;
                    ResultSet resultSetThongKe = classConnect.selectData(getActivity(), sqlThongKe);
                    if (resultSetThongKe != null){
                        while (resultSetThongKe.next()){
                            doubleTongDienTich = doubleTongDienTich + Double.parseDouble(resultSetThongKe.getString(&quot;dientich&quot;));
                            arrayListThongKeAoNuoi.add(new ClassThongKeAoNuoi(++intSTT, listTenTinh.get(listMaTinh.indexOf(resultSetThongKe.getString(&quot;MaTinh&quot;))), Double.parseDouble(resultSetThongKe.getString(&quot;dientich&quot;))));
                        }
                    }
<A NAME="266"></A>                }
            }
            textTongDienTich.setText(&quot;Tổng diện tích : &quot; + format(&quot;%.2f&quot;,doubleTongDienTich/10000) + &quot; ha&quot;);
            <FONT color="#827d6b"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#266',2,'match0-top.html#266',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>if (arrayListThongKeAoNuoi.isEmpty()){
                classPublic.ThongBao(getActivity(),&quot;Thông báo! Đang cập nhật thống kê&quot;);
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối đến SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, e</B></FONT>.getMessage());
        }
        adapterThongKeAoNuoi = new ListViewThongKeAoNuoi(getContext());
        listView.setAdapter(adapterThongKeAoNuoi);
    }
}
</PRE>
<HR>
<H3><CENTER>AoNuoi\FragmentTimKiemAoNuoi.java</CENTER></H3><HR>
<PRE>
<A NAME="335"></A><FONT color="#79d867"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#335',2,'match0-top.html#335',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.AoNuoi;

import android.annotation.SuppressLint;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.ListView;
import android.widget.Spinner;
import android.widget.TextView;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;

import com.example.basa.Home.FragmentHome;
import com.example.basa.Class.ClassConnect;
import com.example.basa.Class.ClassPublic;
import com.example.basa.R;

import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.Objects;

public class FragmentTimKiemAoNuoi extends Fragment {
    //Khai báo
    private View view;
    private ListView listView;
    private TextView textDiaChi;
    private EditText editCaTu, editCaDen;
    private ImageButton btnSearch, btnQuayLai</B></FONT>;
    private final ClassPublic classPublic = new ClassPublic();
<A NAME="426"></A>    private ClassConnect classConnect;
    private ListViewTimKiemAoNuoi adapterAoNuoiView;
    public static ArrayList&lt;ClassTimKiemAoNuoi&gt; arrayListAoNuoiView;
    public static FragmentManager <FONT color="#d4a017"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#426',2,'match0-top.html#426',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>fragmentManager; //Fragment trang chủ
    public static FragmentTransaction fragmentTransaction;
    private final ArrayList&lt;String&gt; listMaLoaiCa = new ArrayList&lt;&gt;(); //Khai báo danh sách loại cá giống hay cá thịt
    private final ArrayList&lt;String&gt; listTenLoaiCa = new ArrayList&lt;&gt;();
    private final ArrayList&lt;String&gt; listMaTinh = new ArrayList&lt;&gt;(); //Khai báo danh sách tỉnh
    private final ArrayList&lt;String&gt; listTenTinh = new ArrayList&lt;&gt;();
    private final ArrayList&lt;String&gt; listMaHuyen = new ArrayList&lt;&gt;(); //Khai báo danh sách huyện
    private final ArrayList&lt;String&gt; listTenHuyen = new ArrayList&lt;&gt;();
<A NAME="575"></A>    private String strMaTinh, strMaHuyen, strMaLoaiCa, ganMaTinh, ganMaHuyen;
    private Spinner cmdLoaiCa, cmdTinh, cmdHuyen;
    int intDieuKienGan</B></FONT>;
    <FONT color="#f88158"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#575',2,'match0-top.html#575',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>@SuppressLint({&quot;NewApi&quot;, &quot;UseRequireInsteadOfGet&quot;})
<A NAME="186"></A>    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);
        view = inflater.inflate(R.layout.fragment_tim_kiem_ao_nuoi, container, false);
        fragmentManager = Objects.requireNonNull(<FONT color="#3b9c9c"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#186',2,'match0-top.html#186',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>Objects</B></FONT>.requireNonNull(getActivity()).getSupportFragmentManager());//Chuyển đổi giữa các fragment
        layoutAnhXa(); //Ánh xạ các đối tượng trên layout
        loadTinh(); //Load danh sách tỉnh
        return view;
    }
    @SuppressLint(&quot;NewApi&quot;)
    private void layoutAnhXa() {
        //Ảnh xạ từ layout
        listView = view.findViewById(R.id.listView);
        editCaTu = view.findViewById(R.id.editCaTu);
        editCaDen = view.findViewById(R.id.editCaDen);
        btnSearch = view.findViewById(R.id.btnSearch);
        btnQuayLai = view.findViewById(R.id.btnQuayLai);
        textDiaChi = view.findViewById(R.id.textDiaChi);
        cmdTinh = view.findViewById(R.id.cmdTinh);
        cmdHuyen = view.findViewById(R.id.cmdHuyen);
        cmdLoaiCa = view</B></FONT>.findViewById(R.id.cmdLoaiCa);
        clickButton();//Click vào buttton
    }
    private void clickButton() {
        btnSearch.setOnClickListener(v -&gt; loadDanhSachAoNuoi());
        btnQuayLai.setOnClickListener(view -&gt; {
            fragmentTransaction = fragmentManager.beginTransaction();
            fragmentTransaction.replace(R.id.fragment_main, new FragmentHome() );
<A NAME="60"></A>            fragmentTransaction.commit();
        });
    }
    private <FONT color="#77bfc7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#60',2,'match0-top.html#60',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>void loadDanhSachAoNuoi() {
        arrayListAoNuoiView = new ArrayList&lt;&gt;();
        arrayListAoNuoiView.clear();
        try{
            classConnect = new ClassConnect(); //Mở kết nối đến SQL
<A NAME="478"></A>            String sqlAoNuoiView</B></FONT> = &quot;select Anh, HoTen, SoDienThoai, MaAo, TenAoNuoi, NgayThaCa, LoaiCa, TrongLuong, an.MaTinh, an.MaHuyen, an.MaXa, TenTinh, TenHuyen, TenXa from TB_AoNuoi an, TB_Tinh t, TB_Huyen h, TB_Xa x, &quot; +
                    &quot;TB_NguoiDung nd where an.MaTinh = t.MaTinh and an.MaHuyen = h.MaHuyen and an.MaXa = x.MaXa and &quot; +
                    &quot;an.MaHuyen = '&quot; + strMaHuyen + &quot;' and an.TaiKhoan = nd.TaiKhoan and  an.LoaiCa = '&quot;+strMaLoaiCa+&quot;' and TinhTrang = 0 and an.TrongLuong between '&quot;+Integer.parseInt(editCaTu.getText().toString())+&quot;' and '&quot;+Integer.parseInt(editCaDen.getText().toString())+&quot;'&quot;;
            ResultSet <FONT color="#f52887"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#478',2,'match0-top.html#478',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>resultSetAoNuoiView = classConnect.selectData(getActivity(), sqlAoNuoiView);
            if (resultSetAoNuoiView != null) {
                while (resultSetAoNuoiView.next()) {
                    //Lấy giá trị từ csdl
                    arrayListAoNuoiView.add(new ClassTimKiemAoNuoi(resultSetAoNuoiView.getString(&quot;MaAo&quot;), resultSetAoNuoiView.getString(&quot;TenAoNuoi&quot;),
                            resultSetAoNuoiView.getString(&quot;NgayThaCa&quot;),resultSetAoNuoiView.getString(&quot;LoaiCa&quot;),resultSetAoNuoiView.getString(&quot;TrongLuong&quot;),
                            resultSetAoNuoiView.getString(&quot;MaTinh&quot;), resultSetAoNuoiView.getString(&quot;MaHuyen&quot;), resultSetAoNuoiView.getString(&quot;MaXa&quot;),
                            resultSetAoNuoiView.getString(&quot;TenTinh&quot;), resultSetAoNuoiView.getString(&quot;TenHuyen&quot;), resultSetAoNuoiView.getString(&quot;TenXa&quot;),
                            resultSetAoNuoiView.getString(&quot;SoDienThoai&quot;),resultSetAoNuoiView.getString(&quot;HoTen&quot;),resultSetAoNuoiView.getString(&quot;Anh&quot;)));
                }
            }
            if (arrayListAoNuoiView.isEmpty()){
                //Thông báo
                classPublic.ThongBao(getActivity(), &quot;Chưa có ao nuôi bạn muốn tìm&quot;);
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối đến SQL
<A NAME="317"></A>        } catch (Exception e) {
            Log.e(&quot;TAG&quot;, e</B></FONT>.getMessage());
        }
        adapterAoNuoiView = new ListViewTimKiemAoNuoi(<FONT color="#e77471"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#317',2,'match0-top.html#317',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>getContext());
        listView.setAdapter(adapterAoNuoiView);
    }
    @SuppressLint(&quot;NewApi&quot;)
    private void loadTinh() {
        //Danh sách tỉnh
        listMaTinh.clear(); // Xóa danh sách tỉnh
        listTenTinh.clear();
        try {
            classConnect = new ClassConnect(); //Mở kết nối SQL
            String sqlTinh = &quot;select MaTinh, TenTinh from TB_Tinh&quot;;
            ResultSet resultSetTinh = classConnect.selectData(getActivity(), sqlTinh);
            if (resultSetTinh != null) {
                while (resultSetTinh.next()) {
                    listMaTinh.add(resultSetTinh.getString(&quot;MaTinh&quot;));
                    listTenTinh.add(resultSetTinh.getString(&quot;TenTinh&quot;));
                }</B></FONT>
                ArrayAdapter dataTinh = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item, listTenTinh);
<A NAME="433"></A>                dataTinh.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
                cmdTinh.setAdapter(dataTinh);
            } else {
                <FONT color="#e77471"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#433',2,'match0-top.html#433',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>Log.e(&quot;TAG&quot;, &quot;Chưa cập nhật danh sách tỉnh&quot;);
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
        } catch (Exception e) {
            Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
        }

        cmdTinh.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaTinh</B></FONT>.isEmpty()) {
<A NAME="640"></A>                    strMaTinh = listMaTinh.get(position);
                    if (intDieuKienGan == 1) {
                        cmdTinh.setSelection(listMaTinh.indexOf(ganMaTinh));
                        <FONT color="#77bfc7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#640',2,'match0-top.html#640',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>strMaTinh = ganMaTinh;
                    }
                    loadHuyen(strMaTinh);//Load huyện theo tỉnh
                }
            }

            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }
    @SuppressLint(&quot;NewApi&quot;)
    private void loadHuyen(String maTinh){
        //Danh sách huyện
        listMaHuyen.clear(); // Xóa danh sách huyện
        listTenHuyen.clear();
        try {
            classConnect = new ClassConnect(); //Mở kết nối SQL
            String sqlHuyen = &quot;select MaHuyen, TenHuyen from TB_Huyen where MaTinh = '&quot;+maTinh+&quot;'&quot;;
            ResultSet resultSetHuyen = classConnect.selectData(getActivity(), sqlHuyen);
            if (resultSetHuyen != null){
                while (resultSetHuyen.next()){
                    listMaHuyen.add(resultSetHuyen.getString(&quot;MaHuyen&quot;));
                    listTenHuyen.add(resultSetHuyen.getString(&quot;TenHuyen&quot;));
                }
                ArrayAdapter&lt;String&gt; dataHuyen = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenHuyen);
                dataHuyen.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
<A NAME="474"></A>                cmdHuyen</B></FONT>.setAdapter(dataHuyen);
            }
            else {
                <FONT color="#b041ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#474',2,'match0-top.html#474',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>Log.e(&quot;TAG&quot;, &quot;Chưa cập nhật danh sách huyện&quot;);
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
        }
        cmdHuyen.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaHuyen</B></FONT>.isEmpty()){
                    strMaHuyen = listMaHuyen.get(position);
                    if (intDieuKienGan == 1) {
                        cmdHuyen.setSelection(listMaHuyen.indexOf(ganMaHuyen));
                        strMaHuyen = ganMaHuyen;
                        loadDanhSachAoNuoi();
                    }
<A NAME="319"></A>                }
                intDieuKienGan = 0;
                loadLoaiCa();
            <FONT color="#faafba"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#319',2,'match0-top.html#319',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}

            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }
    private void loadLoaiCa() {
        listMaLoaiCa.clear(); //Xóa danh sách đang có
        listTenLoaiCa.clear();
        listMaLoaiCa.add(&quot;1&quot;);
<A NAME="582"></A>        listTenLoaiCa.add(&quot;Cá giống&quot;);
        listMaLoaiCa.add(&quot;2&quot;);
        listTenLoaiCa</B></FONT>.add(&quot;Cá thịt&quot;);
        ArrayAdapter&lt;String&gt; dataLoaiTaiKhoan = new ArrayAdapter&lt;&gt;(<FONT color="#77bfc7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#582',2,'match0-top.html#582',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>getActivity(), android.R.layout.simple_spinner_item, listTenLoaiCa);
        dataLoaiTaiKhoan.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
        cmdLoaiCa.setAdapter(dataLoaiTaiKhoan);
        cmdLoaiCa.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaLoaiCa.isEmpty()){
                    strMaLoaiCa = listMaLoaiCa.get(position);
                    loadDanhSachAoNuoi();
                }
            }
            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }</B></FONT>
}
</PRE>
<HR>
<H3><CENTER>AoNuoi\ListViewQuanLiAoNuoi.java</CENTER></H3><HR>
<PRE>
<A NAME="700"></A><FONT color="#151b8d"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#700',2,'match0-top.html#700',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.AoNuoi;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageButton;
import android.widget.TextView;

import com.example.basa.Benh.FragmentBenhAoNuoi;
import com.example.basa.ChamSoc.FragmentChamSocView;
import com.example.basa.Class.ClassConnect;
import com.example.basa.CtyThucAn.FragmentThucAnAoNuoi;
import com.example.basa.Class.ClassPublic;
import com.example.basa.R;
import com.example.basa.ThamKhao.FragmentThamKhao;
import com.example.basa.ThoiTiet.FragmentThoiTiet;
import com.example.basa.TinTuc.FragmentTinTucView;

import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;

public class ListViewQuanLiAoNuoi extends BaseAdapter {
    ClassPublic classPublic = new</B></FONT> ClassPublic();
<A NAME="514"></A>    ClassConnect classConnect;
    Context mContext;
    LayoutInflater inflater;
    ArrayList&lt;ClassQuanLiAoNuoi&gt; <FONT color="#ff0000"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#514',2,'match0-top.html#514',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>arraylist;
    public ListViewQuanLiAoNuoi(Context context) {
        mContext = context;
        inflater = LayoutInflater.from(mContext);
        this.arraylist = new ArrayList&lt;&gt;();
        this.arraylist.addAll(FragmentQuanLiAoNuoi.arrayListAoNuoi);
    }
    public static class ViewHolder {
        TextView textNgayThaCa, textTrongLuong, textTenAoNuoi, textSoNgay, textDiaChi;
        ImageButton btnTinTuc, btnThamKhao, btnKyThuat, btnThoiTiet, btnThucAn, btnBenh, btnEdit, btnThuHoach;
    }
    @Override
    public int getCount() {
        return FragmentQuanLiAoNuoi.arrayListAoNuoi.size();
    }

    @Override
    public Object getItem(int position) {
        return FragmentQuanLiAoNuoi.arrayListAoNuoi.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @SuppressLint({&quot;InflateParams&quot;, &quot;SetTextI18n&quot;})
    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.listview_quan_li_ao_nuoi, null);
            holder.textNgayThaCa = convertView.findViewById(R.id.textNgayThaCa);
            holder.textTrongLuong = convertView.findViewById(R.id.textTrongLuong);
            holder.textTenAoNuoi = convertView.findViewById(R.id.textTenAoNuoi);
            holder.textSoNgay = convertView.findViewById(R.id.textSoNgay);
            holder.textDiaChi = convertView.findViewById(R.id.textDiaChi);
            holder.btnTinTuc = convertView.findViewById(R.id.btnTinTuc);
            holder.btnThamKhao = convertView.findViewById(R.id.btnThamKhao);
            holder.btnKyThuat = convertView.findViewById(R.id.btnKyThuat);
            holder.btnThoiTiet = convertView.findViewById(R.id.btnThoiTiet);
            holder.btnThucAn = convertView.findViewById(R.id.btnThucAn);
            holder.btnBenh = convertView.findViewById(R.id.btnBenh);
            holder.btnEdit = convertView.findViewById(R.id.btnEdit);
            holder.btnThuHoach = convertView.findViewById(R.id.btnThuHoach);
            convertView.setTag(holder);
        } else {
<A NAME="569"></A>            holder = (ViewHolder) convertView.getTag();
        }</B></FONT>
        //Ẩn các nút
        <FONT color="#d16587"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#569',2,'match0-top.html#569',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>if (FragmentQuanLiAoNuoi.arrayListAoNuoi.get(position).getBoolTinhTrang()){
            holder.btnTinTuc.setVisibility(View.GONE);
            holder.btnThamKhao.setVisibility(View.GONE);
            holder.btnKyThuat.setVisibility(View.GONE);
            holder.btnThoiTiet.setVisibility(View.GONE);
            holder.btnEdit.setVisibility(View.GONE);
            holder</B></FONT>.btnThucAn.setVisibility(View.GONE);
            holder.btnBenh.setVisibility(View.GONE);
            holder.btnThuHoach.setVisibility(View.GONE);
            String thuHoach = &quot;Thu hoạch ngày: &quot;;
            holder.textSoNgay.setText(thuHoach.concat(FragmentQuanLiAoNuoi.arrayListAoNuoi.get(position).getStrThuHoach()));
        } else {
            String soNgay = &quot;Thả cá được: &quot;;
            int intNgay = Integer.parseInt(classPublic.soNgay(FragmentQuanLiAoNuoi.arrayListAoNuoi.get(position).getStrNgayThaCa()));
            holder.textSoNgay.setText(soNgay.concat(String.valueOf(intNgay)) + &quot; ngày&quot;);
        }
        int intNgay = Integer.parseInt(classPublic.soNgay(FragmentQuanLiAoNuoi.arrayListAoNuoi.get(position).getStrNgayThaCa()));
        String ngayThaCa =&quot;Thả cá ngày: &quot;;
        String trongLuong = &quot;Trọng lượng cá: &quot;;
        String strDiaChi = FragmentQuanLiAoNuoi.arrayListAoNuoi.get(position).getStrTenXa();
<A NAME="403"></A>        holder.textDiaChi.setText(strDiaChi.concat(&quot;-&quot;+ FragmentQuanLiAoNuoi.arrayListAoNuoi.get(position).getStrTenHuyen().concat(&quot;-&quot;+ FragmentQuanLiAoNuoi.arrayListAoNuoi.get(position).getStrTenTinh())));
        holder.textNgayThaCa.setText(ngayThaCa.concat(FragmentQuanLiAoNuoi.arrayListAoNuoi.get(position).getStrNgayThaCa()));
        holder.textTrongLuong.setText(trongLuong.concat(FragmentQuanLiAoNuoi.arrayListAoNuoi.get(position).getStrTrongLuong())+&quot; gam&quot;);
        holder.textTenAoNuoi.setText(<FONT color="#4863a0"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#403',2,'match0-top.html#403',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>FragmentQuanLiAoNuoi.arrayListAoNuoi.get(position).getStrTenAoNuoi().toUpperCase());
<A NAME="406"></A>        String tenAoNuoi = FragmentQuanLiAoNuoi.arrayListAoNuoi.get(position).getStrTenAoNuoi();
        String maAo =  FragmentQuanLiAoNuoi.arrayListAoNuoi.get(position).getStrMaAo();
        holder</B></FONT>.btnTinTuc.setOnClickListener(view -&gt; {
            <FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#406',2,'match0-top.html#406',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>FragmentQuanLiAoNuoi.fragmentTransaction = FragmentQuanLiAoNuoi.fragmentManager.beginTransaction();
            FragmentTinTucView fragment = new FragmentTinTucView();
            Bundle bundle = new Bundle();
            bundle.putString(&quot;MaAo&quot;, FragmentQuanLiAoNuoi.arrayListAoNuoi.get(position).getStrMaAo());
            fragment.setArguments(bundle);
            FragmentQuanLiAoNuoi.fragmentTransaction.replace(R.id.fragment_main,fragment);
            FragmentQuanLiAoNuoi.fragmentTransaction.commit();
        });

        holder</B></FONT>.btnThamKhao.setOnClickListener(view -&gt; {
            FragmentQuanLiAoNuoi.fragmentTransaction = FragmentQuanLiAoNuoi.fragmentManager.beginTransaction();
            FragmentQuanLiAoNuoi.fragmentTransaction.replace(R.id.fragment_main, new FragmentThamKhao());
            FragmentQuanLiAoNuoi.fragmentTransaction.commit();
<A NAME="404"></A>        });

        holder.btnKyThuat.setOnClickListener(v -&gt; {
            <FONT color="#52d017"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#404',2,'match0-top.html#404',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>FragmentQuanLiAoNuoi.fragmentTransaction = FragmentQuanLiAoNuoi.fragmentManager.beginTransaction();
            FragmentChamSocView fragment = new FragmentChamSocView();
            Bundle bundle = new Bundle();
            bundle.putInt(&quot;DieuKien&quot;, 1);
            bundle.putInt(&quot;Ngay&quot;, intNgay);
            bundle.putString(&quot;LoaiCa&quot;, FragmentQuanLiAoNuoi.arrayListAoNuoi.get(position).getStrLoaiCa());
            fragment.setArguments(bundle);
            FragmentQuanLiAoNuoi.fragmentTransaction.replace(R.id.fragment_main,fragment);
            FragmentQuanLiAoNuoi.fragmentTransaction.commit();
<A NAME="407"></A>        });

        holder</B></FONT>.btnThoiTiet.setOnClickListener(v -&gt; {
            <FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#407',2,'match0-top.html#407',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>FragmentQuanLiAoNuoi.fragmentTransaction = FragmentQuanLiAoNuoi.fragmentManager.beginTransaction();
            FragmentThoiTiet fragment = new FragmentThoiTiet();
            Bundle bundle = new Bundle();
            bundle.putString(&quot;MaAo&quot;, FragmentQuanLiAoNuoi.arrayListAoNuoi.get(position).getStrMaAo());
            fragment.setArguments(bundle);
            FragmentQuanLiAoNuoi.fragmentTransaction.replace(R.id.fragment_main, fragment);
            FragmentQuanLiAoNuoi.fragmentTransaction.commit();
<A NAME="408"></A>        });

        holder</B></FONT>.btnEdit.setOnClickListener(view -&gt; {
            <FONT color="#77bfc7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#408',2,'match0-top.html#408',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>FragmentQuanLiAoNuoi.fragmentTransaction = FragmentQuanLiAoNuoi.fragmentManager.beginTransaction();
            FragmentAoNuoiEdit fragment = new FragmentAoNuoiEdit();
            Bundle bundle = new Bundle();
            bundle.putString(&quot;MaAo&quot;, FragmentQuanLiAoNuoi.arrayListAoNuoi.get(position).getStrMaAo());
            fragment.setArguments(bundle);
            FragmentQuanLiAoNuoi.fragmentTransaction.replace(R.id.fragment_main,fragment);
            FragmentQuanLiAoNuoi.fragmentTransaction.commit();
<A NAME="536"></A>        });

        holder</B></FONT>.btnThucAn.setOnClickListener(view -&gt; {
            <FONT color="#f52887"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#536',2,'match0-top.html#536',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>FragmentQuanLiAoNuoi.fragmentTransaction = FragmentQuanLiAoNuoi.fragmentManager.beginTransaction();
            FragmentThucAnAoNuoi fragment = new FragmentThucAnAoNuoi();
            Bundle bundle = new Bundle();
            bundle.putInt(&quot;LoaiCa&quot;, Integer.parseInt(FragmentQuanLiAoNuoi.arrayListAoNuoi.get(position).getStrLoaiCa()));
            bundle.putInt(&quot;TrongLuong&quot;, Integer.parseInt(FragmentQuanLiAoNuoi.arrayListAoNuoi.get(position).getStrTrongLuong()));
            fragment</B></FONT>.setArguments(bundle);
            FragmentQuanLiAoNuoi.fragmentTransaction.replace(R.id.fragment_main,fragment);
            FragmentQuanLiAoNuoi.fragmentTransaction.commit();
<A NAME="537"></A>        });

        holder.btnBenh.setOnClickListener(view -&gt; {
            <FONT color="#3bb9ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#537',2,'match0-top.html#537',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>FragmentQuanLiAoNuoi.fragmentTransaction = FragmentQuanLiAoNuoi.fragmentManager.beginTransaction();
            FragmentBenhAoNuoi fragment = new FragmentBenhAoNuoi();
            Bundle bundle = new Bundle();
<A NAME="671"></A>            bundle.putInt(&quot;DieuKien&quot;, 1);
            bundle.putInt(&quot;LoaiCa&quot;, Integer.parseInt(FragmentQuanLiAoNuoi.arrayListAoNuoi.get(position).getStrLoaiCa()));
            bundle.putInt(&quot;TrongLuong&quot;, Integer.parseInt(FragmentQuanLiAoNuoi</B></FONT>.arrayListAoNuoi.get(position).getStrTrongLuong()));
            <FONT color="#736aff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#671',2,'match0-top.html#671',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>fragment.setArguments(bundle);
            FragmentQuanLiAoNuoi.fragmentTransaction.replace(R.id.fragment_main,fragment);
            FragmentQuanLiAoNuoi.fragmentTransaction.commit();
        });

        holder.btnThuHoach.setOnClickListener(view -&gt; {
            //Hiện hộp thoại thông báo
            AlertDialog.Builder builder = new AlertDialog.Builder(mContext);
            builder.setTitle(&quot;THÔNG BÁO&quot;);
            builder.setIcon(R.drawable.ic_thongbao);
            builder.setMessage(&quot;Bạn có muốn thu hoạch &quot;+tenAoNuoi+&quot; không?&quot;);
            builder</B></FONT>.setCancelable(false);
            builder.setPositiveButton(&quot;Đồng ý&quot;, (dialogInterface, i) -&gt; {
<A NAME="235"></A>                try{
                    Date date_HienTai = new Date();//Lấy ngày h hiện tại
                    @SuppressLint(&quot;SimpleDateFormat&quot;) SimpleDateFormat date_NgayThang = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);
                    <FONT color="#6cc417"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#235',2,'match0-top.html#235',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>classConnect = new ClassConnect(); //Mở kết nối đến SQL
                    String sqlAoNuoi = &quot;Update TB_AoNuoi set TinhTrang = 1, ThuHoach = '&quot;+date_NgayThang.format(date_HienTai)+&quot;' where MaAo = '&quot;+ Integer.parseInt(maAo) +&quot;' &quot;;
                    classPublic.ThongBao((Activity)mContext,&quot;Ao canh tác đã được thu hoạch&quot;);
<A NAME="172"></A>                    if (classConnect</B></FONT>.updateData((Activity)mContext, sqlAoNuoi) == 1){
                        FragmentQuanLiAoNuoi.fragmentTransaction = FragmentQuanLiAoNuoi.fragmentManager.beginTransaction();
                        FragmentQuanLiAoNuoi fragment = new FragmentQuanLiAoNuoi();
                        <FONT color="#52d017"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#172',2,'match0-top.html#172',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>FragmentQuanLiAoNuoi.fragmentTransaction.replace(R.id.fragment_main, fragment);
                        FragmentQuanLiAoNuoi.fragmentTransaction.commit();
                    }
                    else {
                        classPublic.ThongBao((Activity)mContext, &quot;Không thu hoạch được ao canh tác&quot;);
                    }
                    classConnect.CONN((Activity)mContext).close(); //Đóng kết nối đến SQL
                }catch (Exception e){
                    Log.e(&quot;TAG&quot;, e</B></FONT>.getMessage());
                }
            });
            builder.setNegativeButton(&quot;Hủy bỏ&quot;, (dialogInterface, i) -&gt; {
                //Đóng hộp thoại thông báo
                dialogInterface.dismiss();
            });
            AlertDialog alertDialog = builder.create();
            alertDialog.show();
        });

        return convertView;
    }
}
</PRE>
<HR>
<H3><CENTER>AoNuoi\ListViewThongKeAoNuoi.java</CENTER></H3><HR>
<PRE>
<A NAME="279"></A>package com.example.basa.AoNuoi;

<FONT color="#d16587"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#279',2,'match0-top.html#279',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.annotation.SuppressLint;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.TextView;

import com.example.basa.R;

import java.util.ArrayList;

public class ListViewThongKeAoNuoi extends BaseAdapter {
    private final Context mContext;
    private final LayoutInflater inflater;
    private final ArrayList&lt;ClassThongKeAoNuoi&gt; arraylist;
    public ListViewThongKeAoNuoi(Context context) {
        mContext = context;
        inflater = LayoutInflater.from(mContext);
        this.arraylist = new ArrayList&lt;&gt;();
        this.arraylist.addAll(FragmentThongKeAoNuoi.arrayListThongKeAoNuoi);
    }
<A NAME="288"></A>    public static class</B></FONT> ViewHolder {
        TextView textSTT;
        TextView textTenXa;
        TextView <FONT color="#52d017"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#288',2,'match0-top.html#288',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>textDienTich;
    }
    @Override
    public int getCount() {
        return FragmentThongKeAoNuoi.arrayListThongKeAoNuoi.size();
    }

    @Override
    public Object getItem(int position) {
        return FragmentThongKeAoNuoi.arrayListThongKeAoNuoi.get(position);
    }
    @Override
    public long getItemId(int position) {
        return position;
    }

    @SuppressLint({&quot;InflateParams&quot;, &quot;SetTextI18n&quot;, &quot;DefaultLocale&quot;})
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;
        if (convertView == null) {
<A NAME="400"></A>            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.listview_thongke_aonuoi, null);
            holder.textSTT = convertView</B></FONT>.findViewById(R.id.textSTT);
            <FONT color="#2b60de"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#400',2,'match0-top.html#400',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>holder.textTenXa = convertView.findViewById(R.id.textTenXa);
            holder.textDienTich = convertView.findViewById(R.id.textDienTich);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        holder.textSTT.setText(FragmentThongKeAoNuoi.arrayListThongKeAoNuoi.get(position).getIntSTT() + &quot;. &quot;);
        holder</B></FONT>.textTenXa.setText(FragmentThongKeAoNuoi.arrayListThongKeAoNuoi.get(position).getStrTenXa());
        Double doubleDienTich = FragmentThongKeAoNuoi.arrayListThongKeAoNuoi.get(position).getDoubleDienTich();
        holder.textDienTich.setText(&quot;Diện tích: &quot;+String.format (&quot;%.2f&quot;, doubleDienTich/10000) + &quot;ha&quot;);
        return convertView;
    }
}
</PRE>
<HR>
<H3><CENTER>AoNuoi\ListViewTimKiemAoNuoi.java</CENTER></H3><HR>
<PRE>
<A NAME="204"></A><FONT color="#f9966b"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#204',2,'match0-top.html#204',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.AoNuoi;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.Intent;
import android.net.ConnectivityManager;
import android.net.Uri;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.TextView;

import com.example.basa.Class.ClassPublic;
import com.example.basa.R;

import java.util.ArrayList;
import java.util.Objects;

public class ListViewTimKiemAoNuoi extends BaseAdapter {
    private ClassPublic classPublic</B></FONT> = new ClassPublic();
<A NAME="653"></A>    private final Context mContext;
    private final LayoutInflater inflater;
    private final ArrayList&lt;ClassTimKiemAoNuoi&gt; arraylist;
    public <FONT color="#3bb9ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#653',2,'match0-top.html#653',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>ListViewTimKiemAoNuoi(Context context) {
        mContext = context;
        inflater = LayoutInflater.from(mContext);
        this.arraylist = new ArrayList&lt;&gt;();
        this.arraylist.addAll(FragmentTimKiemAoNuoi.arrayListAoNuoiView);
    }
    public static class ViewHolder {
        EditText editMaAo;
        TextView textNgayThaCa, textTrongLuong, textTenAoNuoi, textSoNgay, textDiaChi, textHoTen;
        ImageButton btnCall;
        ImageView imgChuDe;
    }
    @Override
    public int getCount() {
        return FragmentTimKiemAoNuoi.arrayListAoNuoiView.size();
    }

    @Override
    public Object getItem(int position) {
        return FragmentTimKiemAoNuoi.arrayListAoNuoiView.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @SuppressLint({&quot;InflateParams&quot;, &quot;SetTextI18n&quot;, &quot;MissingPermission&quot;})
    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.listview_timkiem_aonuoi, null);
            holder.editMaAo = convertView.findViewById(R.id.editMaAo);
            holder.textNgayThaCa = convertView.findViewById(R.id.textNgayThaCa);
            holder.textTrongLuong = convertView.findViewById(R.id.textTrongLuong);
            holder.textTenAoNuoi = convertView.findViewById(R.id.textTenAoNuoi);
            holder.textSoNgay = convertView.findViewById(R.id.textSoNgay);
            holder.textDiaChi = convertView.findViewById(R.id.textDiaChi);
            holder.textHoTen = convertView.findViewById(R.id.textHoTen);
            holder.btnCall = convertView.findViewById(R.id.btnCall);
            holder.imgChuDe = convertView.findViewById(R.id.imgChuDe);
            convertView.setTag(holder);
<A NAME="373"></A>        } else {
            holder = (ViewHolder) convertView.getTag();
        }</B></FONT>
        String <FONT color="#87f717"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#373',2,'match0-top.html#373',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>ngayThaCa =&quot;Thả cá ngày: &quot;;
        String trongLuong = &quot;Trọng lượng cá: &quot;;
        String soNgay = &quot;Thả cá được: &quot;;
<A NAME="663"></A>        String chuAo = &quot;Chủ ao nuôi: &quot;;
        holder</B></FONT>.btnCall.setOnClickListener(v -&gt; {
        if (arraylist.get(position) != null) {
            if (<FONT color="#87f717"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#663',2,'match0-top.html#663',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>arraylist.get(position).getStrSdt().length() != 0) {
                if (arraylist.get(position).getStrSdt().length() &gt;= 10) {
                    //Hiện hộp thoại thông báo
                    AlertDialog.Builder builder = new AlertDialog.Builder(mContext );
                    builder.setTitle(&quot;THÔNG BÁO&quot;);
                    builder.setIcon(R.drawable.ic_thongbao);
                    builder.setMessage(&quot;Bạn có muốn gọi cho chủ ao &quot; + arraylist</B></FONT>.get(position).getStrTenAoNuoi().toUpperCase()+ &quot; không?&quot;);
                    builder.setCancelable(false);
                    builder.setPositiveButton(&quot;Đồng ý&quot;, (dialogInterface, i) -&gt; mContext.startActivity (new Intent(Intent.ACTION_DIAL, Uri.parse(&quot;tel: &quot; + arraylist.get(position).getStrSdt()))));
                    builder.setNegativeButton(&quot;Hủy bỏ&quot;, (dialogInterface, i) -&gt; {
<A NAME="664"></A>                        //Đóng hộp thoại thông báo
                        dialogInterface.dismiss();
                    });
                    AlertDialog <FONT color="#95b9c7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#664',2,'match0-top.html#664',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>alertDialog = builder.create();
                    alertDialog.show();
                } else {
                    classPublic.ThongBao((Activity) mContext, &quot;Số điện thoại không đúng&quot;);
                }
            }
            else {
                classPublic.ThongBao((Activity) mContext, &quot;Chưa cập nhật số điện thoại&quot;);
            }</B></FONT>
<A NAME="516"></A>        }
        });
        //Kiểm tra kết nối đến hosting
        ConnectivityManager <FONT color="#2b60de"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#516',2,'match0-top.html#516',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>connectivityManager = (ConnectivityManager) mContext.getSystemService (Context.CONNECTIVITY_SERVICE);
        if(Objects.requireNonNull(connectivityManager).getActiveNetworkInfo() != null &amp;&amp; Objects.requireNonNull(connectivityManager</B></FONT>.getActiveNetworkInfo()).isAvailable()
                &amp;&amp; connectivityManager.getActiveNetworkInfo().isConnected()) {
            String strAnh = FragmentTimKiemAoNuoi.arrayListAoNuoiView.get(position).getStrAnh();
            classPublic = new ClassPublic();
            if (!strAnh.isEmpty()) {
                classPublic.downloadImage(&quot;http://hoclamaimai.com/&quot; + strAnh, holder.imgChuDe); //Load ảnh đại diện
            }
            else {
                holder.imgChuDe.setImageResource(R.drawable.img_avatar);
            }
        }
        else {
            Log.e(&quot;TAG&quot;,&quot;LỖI! Kết nối đến hosting.&quot;);
        }
        holder.textHoTen.setText(chuAo.concat(FragmentTimKiemAoNuoi.arrayListAoNuoiView.get(position).getStrHoTen()));
<A NAME="728"></A>        holder.textDiaChi.setText(FragmentTimKiemAoNuoi.arrayListAoNuoiView.get(position).getStrTenXa().concat(&quot;-&quot;+ FragmentTimKiemAoNuoi.arrayListAoNuoiView.get(position).getStrTenHuyen().concat(&quot;-&quot;)+ FragmentTimKiemAoNuoi.arrayListAoNuoiView.get(position).getStrTenTinh()));
        holder.textNgayThaCa.setText(ngayThaCa.concat(FragmentTimKiemAoNuoi.arrayListAoNuoiView.get(position).getStrNgayThaCa()));
        holder.textTrongLuong.setText(trongLuong.concat(FragmentTimKiemAoNuoi.arrayListAoNuoiView.get(position).getStrTrongLuong())+&quot; gam&quot;);
        holder.textTenAoNuoi.setText(<FONT color="#82cafa"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#728',2,'match0-top.html#728',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>FragmentTimKiemAoNuoi.arrayListAoNuoiView.get(position).getStrTenAoNuoi());
        holder.textSoNgay.setText(soNgay.concat(classPublic.soNgay(FragmentTimKiemAoNuoi.arrayListAoNuoiView.get(position).getStrNgayThaCa()) + &quot; ngày&quot;));
        return convertView;
    }</B></FONT>
}
</PRE>
<HR>
<H3><CENTER>Benh\ClassBenhAoNuoi.java</CENTER></H3><HR>
<PRE>
package com.example.basa.Benh;

public class ClassBenhAoNuoi {
    private final Integer intSTT;
<A NAME="596"></A>    private final String strMaBenh, strTenBenh, strPhongTri, strAnh;
    public ClassBenhAoNuoi(Integer intSTT, String strMaBenh, String strTenBenh,
                           String strPhongTri, String strAnh){
        <FONT color="#3090c7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#596',2,'match0-top.html#596',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>this.intSTT = intSTT;
        this.strMaBenh = strMaBenh;
        this.strTenBenh = strTenBenh;
        this.strPhongTri = strPhongTri;
        this.strAnh = strAnh;
    }

    public Integer getIntSTT() {
        return intSTT;
    }

    public String getStrMaBenh() {
        return strMaBenh;
    }

    public String getStrTenBenh() {
        return strTenBenh;
    }

    public String getStrPhongTri() {
        return strPhongTri;
    }

    public String getStrAnh() {
        return strAnh;
    }</B></FONT>
}
</PRE>
<HR>
<H3><CENTER>Benh\FragmentBenhAoNuoi.java</CENTER></H3><HR>
<PRE>
<A NAME="589"></A>package com.example.basa.Benh;

import android.annotation.SuppressLint;
<FONT color="#f88017"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#589',2,'match0-top.html#589',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ImageButton;
import android.widget.ListView;
import android.widget.SearchView;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;

import com.example.basa.AoNuoi.FragmentQuanLiAoNuoi;
import com.example.basa.Class.ClassConnect;
import com.example.basa.Home.FragmentHome;
import com.example.basa.R;

import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.Objects;

public class FragmentBenhAoNuoi extends Fragment implements SearchView.OnQueryTextListener {
    //Khai báo
    private View view;
    private ImageButton btnQuayLai</B></FONT>;
    private SearchView searchTen;
    private ListView listView;
    public static FragmentManager fragmentManager; //Tạo Fragment
<A NAME="336"></A>    public static FragmentTransaction fragmentTransaction;
    private ClassConnect classConnect;
    private ListViewBenhAoNuoi adapterBenh;
    public static ArrayList&lt;ClassBenhAoNuoi&gt; <FONT color="#92c7c7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#336',2,'match0-top.html#336',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>arrayListBenh;
    public static Integer mLoaiCa, mTrongLuong, mDieuKien;

    @SuppressLint({&quot;NewApi&quot;, &quot;UseRequireInsteadOfGet&quot;})
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);
        view = inflater.inflate(R.layout.fragment_benh_aonuoi, container, false);
        fragmentManager = Objects.requireNonNull(getActivity()).getSupportFragmentManager();
        Bundle bundle = this.getArguments();
        if (bundle != null) {
            mLoaiCa = bundle.getInt(&quot;LoaiCa&quot;);
            mTrongLuong = bundle.getInt(&quot;TrongLuong&quot;);
            mDieuKien = bundle.getInt(&quot;DieuKien&quot;);
        } else</B></FONT> {
            mDieuKien = 0;
        }
        layoutAnhXa(); //Ánh xạ các đối tượng Layout
        return view;
<A NAME="418"></A>    }

    @SuppressLint(&quot;NewApi&quot;)
    private <FONT color="#3b9c9c"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#418',2,'match0-top.html#418',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>void layoutAnhXa() {
        btnQuayLai = view.findViewById(R.id.btnQuayLai);
        searchTen = view.findViewById(R.id.searchTen);
        listView = view.findViewById(R.id.listView);
        loadBenh();
        clickButton();
    }</B></FONT>

    private void loadBenh() {
        arrayListBenh = new ArrayList&lt;&gt;();
        arrayListBenh.clear();
            try {
                int intSTT = 0;
                classConnect = new ClassConnect(); //Mở kết nối đến SQL
                String sqlBenh = &quot;select * from TB_Benh&quot;;
<A NAME="703"></A>                ResultSet resultSetBenh = classConnect.selectData(getActivity(), sqlBenh);
                if (resultSetBenh != null){
                    while (resultSetBenh.next()) {
                        arrayListBenh.add(new ClassBenhAoNuoi(++intSTT,<FONT color="#c58917"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#703',2,'match0-top.html#703',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>resultSetBenh.getString(&quot;MaBenh&quot;),resultSetBenh.getString(&quot;TenBenh&quot;),
                                resultSetBenh.getString(&quot;DauHieu&quot;),resultSetBenh.getString(&quot;Anh&quot;)));
                    }
<A NAME="650"></A>                }
                classConnect.CONN(getActivity()).close(); //Đóng kết nối đến SQL
            }catch</B></FONT> (Exception e){
                <FONT color="#3b9c9c"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#650',2,'match0-top.html#650',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>Log.e(&quot;TAG&quot;, e.getMessage());
            }
        adapterBenh = new ListViewBenhAoNuoi(getContext());
        listView.setAdapter(adapterBenh);
        //Xử lí khi nhập vào ô tìm kiếm
        searchTen.setOnQueryTextListener(this);
    }
    @Override
    public boolean onQueryTextSubmit(String query) {
        return false;
    }

    @Override
    public boolean onQueryTextChange(String newText) { //Tìm theo tên bệnh
        adapterBenh.filter(newText);
        return false;
    }

    private void clickButton() {
        btnQuayLai</B></FONT>.setOnClickListener(v -&gt; {
            if (mDieuKien == 1){
                fragmentTransaction = fragmentManager.beginTransaction();
                fragmentTransaction.replace(R.id.fragment_main, new FragmentQuanLiAoNuoi());
                fragmentTransaction.commit();
            }
            else {
                fragmentTransaction = fragmentManager.beginTransaction();
                fragmentTransaction.replace(R.id.fragment_main, new FragmentHome());
                fragmentTransaction.commit();
            }
        });

    }
}
</PRE>
<HR>
<H3><CENTER>Benh\FragmentBenhEdit.java</CENTER></H3><HR>
<PRE>
<A NAME="81"></A>package com.example.basa.Benh;

<FONT color="#f660ab"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#81',2,'match0-top.html#81',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.annotation.SuppressLint;
import android.app.AlertDialog;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.ListView;
import android.widget.SearchView;
import android.widget.TextView;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;

import com.example.basa.Class.ClassConnect;
import com.example.basa.Class.ClassPublic;
import com.example.basa.Home.FragmentHome;
import com.example.basa.R;

import java.sql.ResultSet;
import java.util.ArrayList;

public class FragmentBenhEdit extends Fragment implements SearchView.OnQueryTextListener {
    //Khai báo
    private View view;
    private SearchView searchTen</B></FONT>;
    private ImageButton btnQuayLai;
    private ListView listView;
    private ClassConnect classConnect;
    public static FragmentManager fragmentManager; //Tạo Fragment
    public static FragmentTransaction fragmentTransaction;
<A NAME="297"></A>    private final ClassPublic classPublic = new ClassPublic();
    private ListViewBenhEdit adapterBenh;
    private ImageButton btnThemMoi;
    public static ArrayList&lt;ClassBenhEdit&gt; <FONT color="#c58917"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#297',2,'match0-top.html#297',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>arrayListBenh;
    //Khai báo các đối tượng trên dialog
    private TextView textTieuDe;
    private EditText editMaBenh, editTenBenh, editPhongTri;
    private Button btnDong, btnLuuLai, btnXoa;
    int intDieuKienGan;
    @SuppressLint(&quot;NewApi&quot;)
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);
        view = inflater</B></FONT>.inflate(R.layout.fragment_benh_edit, container, false);
        layoutAnhXa(); //Ánh xạ các đối tượng Layout
        loadBenh();
        clickButton();
        //clickListView();
        return view;
    }

<A NAME="472"></A>

    @SuppressLint(&quot;NewApi&quot;)
    private <FONT color="#bce954"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#472',2,'match0-top.html#472',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>void layoutAnhXa() {
        btnQuayLai = view.findViewById(R.id.btnQuayLai);
        searchTen = view.findViewById(R.id.searchTen);
        btnThemMoi = view.findViewById(R.id.btnThemMoi);
        listView = view.findViewById(R.id.listView);
<A NAME="246"></A>        fragmentManager = requireActivity</B></FONT>().getSupportFragmentManager();
    }

    private <FONT color="#f52887"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#246',2,'match0-top.html#246',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>void loadBenh() {
        arrayListBenh = new ArrayList&lt;&gt;();
        arrayListBenh.clear();
            try {
                classConnect = new ClassConnect(); //Mở kết nối đến SQL
                String sqlBenh = &quot;select MaBenh, TenBenh, Anh, PhongTri from TB_Benh order by MaBenh desc&quot;;
                ResultSet resultSetBenh = classConnect.selectData(getActivity(), sqlBenh);
<A NAME="692"></A>                if (resultSetBenh != null){
                    while (resultSetBenh.next()) {
                        arrayListBenh.add(new ClassBenhEdit(resultSetBenh.getString(&quot;MaBenh&quot;),resultSetBenh</B></FONT>.getString(&quot;TenBenh&quot;),
                                <FONT color="#4e8975"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#692',2,'match0-top.html#692',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>resultSetBenh.getString(&quot;Anh&quot;),resultSetBenh.getString(&quot;PhongTri&quot;)));
                    }
<A NAME="563"></A>                }
                classConnect.CONN(getActivity()).close(); //Đóng kết nối đến SQL
            }catch (Exception e){
                Log</B></FONT>.e(&quot;TAG&quot;, <FONT color="#f87a17"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#563',2,'match0-top.html#563',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>e.getMessage());
            }
        adapterBenh = new ListViewBenhEdit(getContext());
        listView.setAdapter(adapterBenh);
        //Xử lí khi nhập vào ô tìm kiếm
        searchTen.setOnQueryTextListener(this);
    }
    private void clickButton() {
        btnThemMoi</B></FONT>.setOnClickListener(view -&gt; {
            insertBenh(-1);
            intDieuKienGan = 0;
        });
        btnQuayLai.setOnClickListener(v -&gt; {
            fragmentTransaction = fragmentManager.beginTransaction();
            fragmentTransaction.replace(R.id.fragment_main, new FragmentHome());
            fragmentTransaction.commit();
        });
    }
    private void clickListView() {
        listView.setOnItemClickListener((parent, view, position, id) -&gt; insertBenh(position));
    }
    private void insertBenh(final int intChiSo) {
        LayoutInflater inflater = getLayoutInflater();
        @SuppressLint(&quot;InflateParams&quot;) View alertLayout = inflater.inflate(R.layout.dialog_benh, null);
        textTieuDe = alertLayout.findViewById(R.id.textTieuDe);
        editMaBenh = alertLayout.findViewById(R.id.editMaBenh);
        editTenBenh = alertLayout.findViewById(R.id.editTenBenh);
        editPhongTri = alertLayout.findViewById(R.id.editPhongTri);
        btnLuuLai = alertLayout.findViewById(R.id.btnLuuLai);
        btnDong = alertLayout.findViewById(R.id.btnDong);
        btnXoa = alertLayout.findViewById(R.id.btnXoa);
        final AlertDialog.Builder alert = new AlertDialog.Builder(getActivity());
        intDieuKienGan = 1;
        alert.setView(alertLayout);
        alert.setCancelable(false);
        final AlertDialog dialog = alert.create();
        if (intChiSo == -1) {
            btnXoa.setEnabled(false);//Không cho phép ấn nút xóa
            String strTieuDe = &quot;THÊM MỚI BỆNH Ở CÁ&quot;;
            textTieuDe.setText(strTieuDe);
<A NAME="480"></A>            editMaBenh.setText(&quot;&quot;);
            String strNut = &quot;THÊM MỚI&quot;; //Đổi text nút lưu lại thành thêm mới
            btnLuuLai.setText(strNut);
        } <FONT color="#3090c7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#480',2,'match0-top.html#480',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>else {
            btnXoa.setEnabled(true);//Cho phép ấn nút xóa
            String strTieuDe = &quot;CẬP NHẬT BỆNH Ở CÁ&quot;;
            textTieuDe.setText(strTieuDe);
            String strNut = &quot;CẬP NHẬT&quot;;
            btnLuuLai.setText(strNut);//Đổi text nút lưu lại thành cập nhật
            editMaBenh.setText(arrayListBenh.get(intChiSo).getStrMaBenh()); //Gán giá trị mã kt
            editTenBenh.setText(arrayListBenh</B></FONT>.get(intChiSo).getStrTenBenh()); //Gán giá trị tên kt
            editPhongTri.setText(arrayListBenh.get(intChiSo).getStrPhongTri());//Gán giá trị th
        }
        btnLuuLai.setOnClickListener(v -&gt; {
            try {
                if (editTenBenh.getText().length()!= 0){
                    if (editPhongTri.getText().length()!= 0){
                        String sqlBenh;
                        if (intChiSo == -1) { //Thêm mới
                            sqlBenh = &quot;insert into TB_Benh (TenBenh, PhongTri) values &quot; +
                                    &quot;(N'&quot; + editTenBenh.getText() + &quot;', N'&quot; + editPhongTri.getText() + &quot;')&quot;;
                        } else {
                            sqlBenh = &quot;update TB_Benh set TenBenh = N'&quot;+editTenBenh.getText()+&quot;', PhongTri = N'&quot;+editPhongTri.getText()+&quot;' where MaBenh = '&quot;+editMaBenh.getText()+&quot;'&quot;;
                        }
                        classConnect = new ClassConnect(); //Mở kết nối SQL
                        if (classConnect.updateData(getActivity(), sqlBenh) == 1) {
                            if (intChiSo == -1) {
                                classPublic.ThongBao(getActivity(), &quot;Thông báo! Thêm mới bệnh ở cá thành công&quot;);
                            } else {
                                classPublic.ThongBao(getActivity(), &quot;Thông báo! Cập nhật bệnh ở cá thành công&quot;);
                            }
                            dialog.cancel(); //Đóng dialog sau đó gọi load mới danh sách
                           loadBenh();
                        }
                    }
                    else {
                        classPublic.ThongBao(getActivity(),&quot;Vui lòng nhập giải pháp&quot;);
                    }
                }
                else {
                    classPublic.ThongBao(getActivity(),&quot;Vui lòng nhập tên kinh nghiệm&quot;);
                }
                classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
            } catch (Exception e){
                Log.e(&quot;TAG&quot;, e.getMessage());
<A NAME="484"></A>            }
        });
        btnXoa.setOnClickListener(v -&gt; {
            <FONT color="#d4a017"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#484',2,'match0-top.html#484',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>if (editMaBenh.getText().length() != 0) {
                dialogXoa(editMaBenh.getText().toString(), editTenBenh.getText().toString());
                dialog.cancel();
            }
            else {
                classPublic.ThongBao(getActivity(),&quot;Không tìm thấy bệnh để xóa&quot;);
<A NAME="635"></A>            }</B></FONT>
        });
        btnDong.setOnClickListener(v -&gt; dialog.cancel());
        <FONT color="#4863a0"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#635',2,'match0-top.html#635',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>dialog.show(); //Show giao diện thêm mới kỹ thuật
    }
    private void dialogXoa(final String maBenh, final String tenBenh){
        //Hiện hộp thoại thông báo xóa tỉnh
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        builder.setTitle(&quot;XÓA BỆNH Ở CÁ&quot;);
        builder.setIcon(R.drawable.ic_delete);
<A NAME="486"></A>        builder.setMessage(&quot;Bạn có muốn xóa bệnh &quot;+tenBenh+&quot; không?&quot;);
        builder</B></FONT>.setCancelable(false);
        builder.setPositiveButton(&quot;Đồng ý&quot;, (dialogInterface, i) -&gt; {
            <FONT color="#4cc417"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#486',2,'match0-top.html#486',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>try {
                classConnect = new ClassConnect(); //Mở kết nối SQL
                String sqlTinh = &quot;delete TB_Benh where MaBenh = '&quot;+ maBenh +&quot;'&quot;;
                if (classConnect.updateData(getActivity(), sqlTinh) == 1){
                    classPublic.ThongBao(getActivity(),&quot;Thông báo! Xóa bệnh thành công&quot;);
                    loadBenh();
                }
                else {
                    classPublic.ThongBao(getActivity(),&quot;Thông báo! Không xóa được bệnh&quot;);
                }
                classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
            }catch (Exception e){
                Log.e(&quot;TAG&quot;, e</B></FONT>.getMessage());
            }
        });
        builder.setNegativeButton(&quot;Hủy bỏ&quot;, (dialogInterface, i) -&gt; dialogInterface.dismiss());
<A NAME="203"></A>        AlertDialog alertDialog = builder.create();
        alertDialog.show();
    }
    <FONT color="#faafba"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#203',2,'match0-top.html#203',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>@Override
    public boolean onQueryTextSubmit(String query) {
        return false;
    }

    @Override
    public boolean onQueryTextChange(String newText) { //Tìm theo tên bệnh
        adapterBenh.filter(newText);
        return false;
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>Benh\FragmentBenhView.java</CENTER></H3><HR>
<PRE>
<A NAME="168"></A><FONT color="#2b60de"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#168',2,'match0-top.html#168',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.Benh;

import android.annotation.SuppressLint;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ImageButton;
import android.widget.ListView;
import android.widget.SearchView;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;

import com.example.basa.Class.ClassConnect;
import com.example.basa.Home.FragmentHome;
import com.example.basa.R;

import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.Objects;

public class FragmentBenhView extends Fragment implements SearchView.OnQueryTextListener {
    //Khai báo
    private View view;
    private ImageButton btnQuayLai</B></FONT>;
    private SearchView searchTen;
    private ListView listView;
    public static FragmentManager fragmentManager; //Tạo Fragment
<A NAME="507"></A>    public static FragmentTransaction fragmentTransaction;
    private ClassConnect classConnect;
    private ListViewBenhView adapterBenh;
    public static ArrayList&lt;ClassBenhView&gt; <FONT color="#c22817"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#507',2,'match0-top.html#507',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>arrayListBenh;

    @SuppressLint({&quot;NewApi&quot;, &quot;UseRequireInsteadOfGet&quot;})
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);
        view = inflater.inflate(R.layout.fragment_benh_view, container, false);
        fragmentManager = Objects.requireNonNull(getActivity()).getSupportFragmentManager();
        Bundle bundle = this</B></FONT>.getArguments();
        layoutAnhXa(); //Ánh xạ các đối tượng Layout
        return view;
    }

    @SuppressLint(&quot;NewApi&quot;)
    private void layoutAnhXa() {
        btnQuayLai = view.findViewById(R.id.btnQuayLai);
        searchTen = view.findViewById(R.id.searchTen);
        listView = view.findViewById(R.id.listView);
        loadBenh();
        clickButton();
    }

    private void loadBenh() {
        arrayListBenh = new ArrayList&lt;&gt;();
        arrayListBenh.clear();
        try {
            int intSTT = 0;
            classConnect = new ClassConnect(); //Mở kết nối đến SQL
            String sqlBenh = &quot;select MaBenh, TenBenh, Anh from TB_Benh&quot;;
            ResultSet resultSetBenh = classConnect.selectData(getActivity(), sqlBenh);
            if (resultSetBenh != null){
                while (resultSetBenh.next()) {
                    arrayListBenh.add(new ClassBenhView(++intSTT,resultSetBenh.getString(&quot;MaBenh&quot;),resultSetBenh.getString(&quot;TenBenh&quot;),
                            resultSetBenh.getString(&quot;Anh&quot;)));
                }
<A NAME="33"></A>            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối đến SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, <FONT color="#736aff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#33',2,'match0-top.html#33',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>e.getMessage());
        }
        adapterBenh = new ListViewBenhView(getContext());
        listView.setAdapter(adapterBenh);
        //Xử lí khi nhập vào ô tìm kiếm
        searchTen.setOnQueryTextListener(this);
    }
    @Override
    public boolean onQueryTextSubmit(String query) {
        return false;
    }

    @Override
    public boolean onQueryTextChange(String newText) { //Tìm theo tên bệnh
        adapterBenh.filter(newText);
        return false;
    }

    private void clickButton() {
        btnQuayLai</B></FONT>.setOnClickListener(view -&gt; {
            fragmentTransaction = fragmentManager.beginTransaction();
            fragmentTransaction.replace(R.id.fragment_main, new FragmentHome());
            fragmentTransaction.commit();
        });
    }
}
</PRE>
<HR>
<H3><CENTER>Benh\FragmentThongTinBenh.java</CENTER></H3><HR>
<PRE>
<A NAME="375"></A><FONT color="#e77471"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#375',2,'match0-top.html#375',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.Benh;

import android.annotation.SuppressLint;
import android.os.Bundle;
import android.speech.tts.TextToSpeech;
import android.text.Html;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ImageButton;
import android.widget.TextView;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;

import com.example.basa.Class.ClassConnect;
import com.example.basa.Class.ClassPublic;
import com.example.basa.R;

import java.sql.ResultSet;
import java.util.Objects;


public class FragmentThongTinBenh extends Fragment {
    //Khai báo
    private View view;
    private ImageButton btnQuayLai, btnVolumeUp, btnVolumeOff,
            btnVolumeUp2, btnVolumeOff2, btnVolumeUp3, btnVolumeOff3;
    private TextView textTenBenh, textThoiDiem</B></FONT>, textDauHieu, textPhongTri ;
<A NAME="414"></A>    public static FragmentManager fragmentManager; //Tạo Fragment
    public static FragmentTransaction fragmentTransaction;
    private final ClassPublic classPublic = new ClassPublic();
    private ClassConnect <FONT color="#bce954"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#414',2,'match0-top.html#414',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>classConnect;
    private TextToSpeech tts;
    public static Integer mMaBenh, mDieuKien, mLoaiCa, mTrongLuong;

    @SuppressLint({&quot;NewApi&quot;, &quot;UseRequireInsteadOfGet&quot;})
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);
        view = inflater.inflate(R.layout.fragment_thong_tin_benh, container, false);
        fragmentManager = Objects.requireNonNull(getActivity()).getSupportFragmentManager();
        Bundle bundle = this.getArguments();
        if (bundle != null) {
            mLoaiCa = bundle.getInt(&quot;LoaiCa&quot;);
<A NAME="14"></A>            mTrongLuong = bundle.getInt(&quot;TrongLuong&quot;);
            mMaBenh = bundle.getInt(&quot;MaBenh&quot;);
            mDieuKien = bundle</B></FONT>.getInt(&quot;DieuKien&quot;);
        <FONT color="#f52887"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#14',2,'match0-top.html#14',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
        layoutAnhXa();
        return view;
    }

    private void layoutAnhXa() {
        btnQuayLai = view.findViewById(R.id.btnQuayLai);
        btnVolumeUp = view.findViewById(R.id.btnVolumeUp);
        btnVolumeOff = view.findViewById(R.id.btnVolumeOff);
        btnVolumeUp2 = view.findViewById(R.id.btnVolumeUp2);
        btnVolumeOff2 = view.findViewById(R.id.btnVolumeOff2);
        btnVolumeUp3 = view.findViewById(R.id.btnVolumeUp3);
        btnVolumeOff3 = view</B></FONT>.findViewById(R.id.btnVolumeOff3);
        textTenBenh = view.findViewById(R.id.textTenBenh);
        textThoiDiem = view.findViewById(R.id.textThoiDiem);
        textDauHieu = view.findViewById(R.id.textDauHieu);
<A NAME="423"></A>        textPhongTri = view.findViewById(R.id.textPhongTri);
        btnQuayLai.setOnClickListener(view -&gt; {
            if (mDieuKien == 1){
                <FONT color="#800517"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#423',2,'match0-top.html#423',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>fragmentTransaction = fragmentManager.beginTransaction();
                FragmentBenhAoNuoi fragment = new FragmentBenhAoNuoi();
                Bundle bundle = new Bundle();
                bundle.putInt(&quot;LoaiCa&quot;, FragmentBenhAoNuoi.mLoaiCa);
                bundle.putInt(&quot;TrongLuong&quot;, FragmentBenhAoNuoi.mTrongLuong);
                fragment.setArguments(bundle);
                fragmentTransaction.replace(R.id.fragment_main, fragment);
                fragmentTransaction</B></FONT>.commit();
            } else {
                fragmentTransaction = fragmentManager.beginTransaction();
                fragmentTransaction.replace(R.id.fragment_main, new FragmentBenhView());
                fragmentTransaction.commit();
<A NAME="128"></A>            }
        } );
        loadThongTinBenh(mMaBenh);
    <FONT color="#3b9c9c"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#128',2,'match0-top.html#128',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}

    private void loadThongTinBenh(Integer maBenh) {
        try {
            classConnect = new ClassConnect(); //Mở kết nối SQL
<A NAME="208"></A>            String sqlBenh = &quot;select TenBenh, ThoiDiem, DauHieu, PhongTri from TB_Benh &quot; +
                    &quot;where MaBenh = '&quot;+ maBenh +&quot;'&quot;;
            ResultSet resultSetBenh = classConnect.selectData(getActivity</B></FONT>(), sqlBenh);
            if (resultSetBenh != null &amp;&amp; <FONT color="#827d6b"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#208',2,'match0-top.html#208',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>resultSetBenh.next()){
                //Gán biến nội dung
                String strThoiDiem = resultSetBenh.getString(&quot;ThoiDiem&quot;);
                String strDauHieu = resultSetBenh.getString(&quot;DauHieu&quot;);
<A NAME="518"></A>                String strPhongTri = resultSetBenh</B></FONT>.getString(&quot;PhongTri&quot;);
                //Rút gọn nội dung
                textTenBenh.setText(resultSetBenh.getString(&quot;TenBenh&quot;));
                String [] thoidiem = <FONT color="#4e8975"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#518',2,'match0-top.html#518',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>resultSetBenh.getString(&quot;ThoiDiem&quot;).split(&quot;\\.&quot;);
                textThoiDiem.setText(Html.fromHtml(thoidiem[0] + &quot;... &lt;font color='blue'&gt;&lt;b&gt;Xem thêm &gt;&gt;&lt;/b&gt;&lt;/font&gt;&quot;),TextView.BufferType.SPANNABLE);
                textThoiDiem.setOnClickListener(v -&gt; textThoiDiem.setText(strThoiDiem));
                String [] dauhieu = resultSetBenh</B></FONT>.getString(&quot;DauHieu&quot;).split(&quot;\\.&quot;);
                textDauHieu.setText(Html.fromHtml(dauhieu[0] + &quot;... &lt;font color='blue'&gt;&lt;b&gt;Xem thêm &gt;&gt;&lt;/b&gt;&lt;/font&gt;&quot;),TextView.BufferType.SPANNABLE);
<A NAME="541"></A>                textDauHieu.setOnClickListener(v -&gt; textDauHieu.setText(strDauHieu));
                String [] phongtri = resultSetBenh.getString(&quot;PhongTri&quot;).split(&quot;\\.&quot;);
                textPhongTri.setText(Html.fromHtml(phongtri[0] + &quot;... &lt;font color='blue'&gt;&lt;b&gt;Xem thêm &gt;&gt;&lt;/b&gt;&lt;/font&gt;&quot;),TextView.BufferType.SPANNABLE);
                textPhongTri.setOnClickListener(v -&gt; <FONT color="#4e9258"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#541',2,'match0-top.html#541',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>textPhongTri.setText(strPhongTri));
                //Click button
                btnVolumeUp.setOnClickListener(v -&gt; tts = classPublic.DocVanBan(getActivity(),&quot;Thời điểm gây bệnh, &quot;+strThoiDiem));
                btnVolumeOff.setOnClickListener(v -&gt; tts.stop()); //Tắt chức năng đọc tin tức
                btnVolumeUp2.setOnClickListener(v -&gt; tts = classPublic.DocVanBan(getActivity(),&quot;Dấu hiệu nhận biết, &quot;+strDauHieu));
                btnVolumeOff2.setOnClickListener(v -&gt; tts.stop()); //Tắt chức năng đọc tin tức
                btnVolumeUp3</B></FONT>.setOnClickListener(v -&gt; tts = classPublic.DocVanBan(getActivity(),&quot;Phương pháp phòng trị, &quot;+strPhongTri));
                btnVolumeOff3.setOnClickListener(v -&gt; tts.stop()); //Tắt chức năng đọc tin tức
            }
            else {
                //Quay lại trang home
<A NAME="195"></A>                fragmentTransaction = fragmentManager.beginTransaction();
                fragmentTransaction.replace(R.id.fragment_main, new FragmentBenhView());
                fragmentTransaction.commit();
            <FONT color="#00ff00"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#195',2,'match0-top.html#195',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
            classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;,e.getMessage());
        }
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>Benh\ListViewBenhAoNuoi.java</CENTER></H3><HR>
<PRE>
<A NAME="530"></A>package com.example.basa.Benh;

<FONT color="#bce954"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#530',2,'match0-top.html#530',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.annotation.SuppressLint;
import android.content.Context;
import android.net.ConnectivityManager;
import android.os.Bundle;
import android.speech.tts.TextToSpeech;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.TextView;

import com.example.basa.Class.ClassPublic;
import com.example.basa.R;
import com.example.basa.CtyThuY.FragmentThuocAoNuoi;

import java.util.ArrayList;
import java.util.Locale;
import java.util.Objects;

public class ListViewBenhAoNuoi extends BaseAdapter {
    private final Context mContext;
    private final LayoutInflater inflater;
    private final ArrayList &lt;ClassBenhAoNuoi&gt; arraylist;
    private ClassPublic classPublic;
    private TextToSpeech tts;
    public ListViewBenhAoNuoi(Context context) {
        mContext = context;
        inflater = LayoutInflater.from(mContext);
        this.arraylist = new ArrayList&lt;&gt;();
        this.arraylist.addAll(FragmentBenhAoNuoi.arrayListBenh);
    }

    public static class ViewHolder {
        TextView textSTT, textTenBenh;
        ImageView imageBenh;
        ImageButton btnView, btnThuoc</B></FONT>;
    }
    @Override
    public int getCount() {
        return FragmentBenhAoNuoi.arrayListBenh.size();
    }

    @Override
    public Object getItem(int position) {
        return FragmentBenhAoNuoi.arrayListBenh.get(position);
    }
    @Override
    public long getItemId(int position) {
        return position;
    }

    @SuppressLint({&quot;InflateParams&quot;, &quot;SetTextI18n&quot;, &quot;NewApi&quot;, &quot;MissingPermission&quot;})
    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
<A NAME="532"></A>        final ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            <FONT color="#b041ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#532',2,'match0-top.html#532',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>convertView = inflater.inflate(R.layout.listview_benh_ao_nuoi, null);
            holder.textSTT = convertView.findViewById(R.id.textSTT);
            holder.textTenBenh = convertView.findViewById(R.id.textTenBenh);
            holder.imageBenh = convertView.findViewById(R.id.imageBenh);
            holder.btnView = convertView.findViewById(R.id.btnView);
            holder.btnThuoc = convertView.findViewById(R.id.btnThuoc);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }</B></FONT>

        String strAnh = FragmentBenhAoNuoi.arrayListBenh.get(position).getStrAnh();
        if (strAnh.equals(&quot;&quot;)){
            holder.imageBenh.setImageResource(R.drawable.img_no_image);
<A NAME="350"></A>        }
        else {
            //Kiểm tra kết nối đến hosting
            ConnectivityManager <FONT color="#77bfc7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#350',2,'match0-top.html#350',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>connectivityManager = (ConnectivityManager) mContext.getSystemService (Context.CONNECTIVITY_SERVICE);
            if(Objects.requireNonNull(connectivityManager).getActiveNetworkInfo() != null &amp;&amp; Objects.requireNonNull(connectivityManager.getActiveNetworkInfo()).isAvailable()
                    &amp;&amp; connectivityManager.getActiveNetworkInfo().isConnected()) {
                classPublic = new ClassPublic();
                classPublic.downloadImage(&quot;http://hoclamaimai.com/&quot; + strAnh, holder.imageBenh); //Load ảnh từ host
            }
            else {
                Log.d(&quot;TAG&quot;,&quot;LỖI! Kết nối đến hosting.&quot;);
            }</B></FONT>
        }
<A NAME="351"></A>        holder.textSTT.setText(FragmentBenhAoNuoi.arrayListBenh.get(position).getIntSTT()+&quot;. &quot;);
        holder.textTenBenh.setText(FragmentBenhAoNuoi.arrayListBenh.get(position).getStrTenBenh());
        holder.btnThuoc.setOnClickListener(v -&gt; {
            <FONT color="#6cc417"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#351',2,'match0-top.html#351',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>FragmentBenhAoNuoi.fragmentTransaction = FragmentBenhAoNuoi.fragmentManager.beginTransaction();
            FragmentThuocAoNuoi fragment = new FragmentThuocAoNuoi();
            Bundle bundle = new Bundle();
            bundle.putInt(&quot;MaBenh&quot;, Integer.parseInt(FragmentBenhAoNuoi.arrayListBenh.get(position).getStrMaBenh()));
            bundle.putInt(&quot;LoaiCa&quot;, FragmentBenhAoNuoi.mLoaiCa);
            bundle.putInt(&quot;TrongLuong&quot;, FragmentBenhAoNuoi.mTrongLuong);
            fragment.setArguments(bundle);
            FragmentBenhAoNuoi.fragmentTransaction.replace(R.id.fragment_main, fragment);
<A NAME="366"></A>            FragmentBenhAoNuoi</B></FONT>.fragmentTransaction.commit();
        });
        holder.btnView.setOnClickListener(v -&gt; {
            <FONT color="#f62817"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#366',2,'match0-top.html#366',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>FragmentBenhAoNuoi.fragmentTransaction = FragmentBenhAoNuoi.fragmentManager.beginTransaction();
            FragmentThongTinBenh fragment = new FragmentThongTinBenh();
            Bundle bundle = new Bundle();
            bundle.putInt(&quot;LoaiCa&quot;, FragmentBenhAoNuoi.mLoaiCa);
            bundle.putInt(&quot;TrongLuong&quot;, FragmentBenhAoNuoi.mTrongLuong);
            bundle.putInt(&quot;MaBenh&quot;, Integer.parseInt(FragmentBenhAoNuoi.arrayListBenh.get(position).getStrMaBenh()));
            bundle.putInt(&quot;DieuKien&quot;, 1);
            fragment.setArguments(bundle);
<A NAME="665"></A>            FragmentBenhAoNuoi</B></FONT>.fragmentTransaction.replace(R.id.fragment_main, fragment);
            FragmentBenhAoNuoi.fragmentTransaction.commit();
        });
        <FONT color="#e77471"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#665',2,'match0-top.html#665',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>return convertView;
    }

    public void filter(String charText) {
        charText = charText.toLowerCase(Locale.getDefault());
        FragmentBenhAoNuoi.arrayListBenh.clear();
        if (charText.length() == 0) {
            FragmentBenhAoNuoi.arrayListBenh.addAll(arraylist);
        } else {
            for (ClassBenhAoNuoi wp : arraylist) {
                if (wp.getStrTenBenh().toLowerCase(Locale.getDefault()).contains(charText)
                ||wp</B></FONT>.getStrPhongTri().toLowerCase(Locale.getDefault()).contains(charText)) {
                    FragmentBenhAoNuoi.arrayListBenh.add(wp);
                }
            }
        }
        notifyDataSetChanged();
    }
}
</PRE>
<HR>
<H3><CENTER>Benh\ListViewBenhEdit.java</CENTER></H3><HR>
<PRE>
package com.example.basa.Benh;

import android.annotation.SuppressLint;
import android.content.Context;
import android.net.ConnectivityManager;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;
import com.example.basa.Class.ClassPublic;
import com.example.basa.R;
import java.util.ArrayList;
import java.util.Locale;
import java.util.Objects;

public class ListViewBenhEdit extends BaseAdapter {
<A NAME="720"></A>    private final Context mContext;
    private final LayoutInflater inflater;
    private ClassPublic classPublic;
    private final ArrayList &lt;ClassBenhEdit&gt; <FONT color="#ada96e"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#720',2,'match0-top.html#720',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>arraylist;
    public ListViewBenhEdit(Context context) {
        mContext = context;
        inflater = LayoutInflater.from(mContext);
        //Khởi tạo đọc văn bản
        this.arraylist = new ArrayList&lt;&gt;();
        this.arraylist.addAll(FragmentBenhEdit.arrayListBenh);
    }
<A NAME="284"></A>
    public static class</B></FONT> ViewHolder {
        TextView textSTT, textPhongTri, textTenBenh, textMaBenh;
        ImageView <FONT color="#2b60de"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#284',2,'match0-top.html#284',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>imgIcon;
    }
    @Override
    public int getCount() {
        return FragmentBenhEdit.arrayListBenh.size();
    }

    @Override
    public Object getItem(int position) {
        return FragmentBenhEdit.arrayListBenh.get(position);
    }
    @Override
    public long getItemId(int position) {
        return position;
    }

    @SuppressLint({&quot;InflateParams&quot;, &quot;SetTextI18n&quot;, &quot;NewApi&quot;})
    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.listview_benh_edit, null);
<A NAME="660"></A>            holder.textSTT = convertView</B></FONT>.findViewById(R.id.textSTT);
            holder.textPhongTri = convertView.findViewById(R.id.textPhongTri);
            holder.textTenBenh = convertView.findViewById(R.id.textTenBenh);
            <FONT color="#4cc417"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#660',2,'match0-top.html#660',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>holder.imgIcon = convertView.findViewById(R.id.imgIcon);
            holder.textMaBenh = convertView.findViewById(R.id.textMaBenh);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
<A NAME="515"></A>        }</B></FONT>
        //Kiểm tra kết nối đến hosting
        ConnectivityManager connectivityManager = (ConnectivityManager) mContext.getSystemService (Context.CONNECTIVITY_SERVICE);
<A NAME="710"></A>        if(Objects.requireNonNull(connectivityManager).getActiveNetworkInfo() != null &amp;&amp; <FONT color="#b38481"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#515',2,'match0-top.html#515',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>Objects.requireNonNull(connectivityManager.getActiveNetworkInfo()).isAvailable()
                &amp;&amp; connectivityManager.getActiveNetworkInfo().isConnected()) {
            String strAnh = FragmentBenhEdit.arrayListBenh.get(position).getStrAnh();
            if</B></FONT> (!<FONT color="#f52887"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#710',2,'match0-top.html#710',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>strAnh.isEmpty() || !strAnh.equals(&quot;&quot;)){
                classPublic = new ClassPublic();
                classPublic.downloadImage(&quot;http://hoclamaimai.com/&quot; + strAnh, holder.imgIcon); //Load ảnh từ host
            }
            else {
                holder.imgIcon.setImageResource(R.drawable.img_no_image);
            }
        }
        else {
<A NAME="588"></A>            Log.e(&quot;TAG&quot;,&quot;LỖI! Kết nối đến hosting.&quot;);
        }
        holder.textMaBenh.setText(FragmentBenhEdit.arrayListBenh.get(position).getStrMaBenh());
        holder.textTenBenh.setText(<FONT color="#bce954"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#588',2,'match0-top.html#588',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>FragmentBenhEdit</B></FONT>.arrayListBenh.get(position).getStrTenBenh());
        holder.textPhongTri.setText(FragmentBenhEdit.arrayListBenh.get(position).getStrPhongTri());
        return convertView;
    }

    public void filter(String charText) {
        charText = charText.toLowerCase(Locale.getDefault());
        FragmentBenhEdit.arrayListBenh.clear();
        if (charText.length() == 0) {
            FragmentBenhEdit.arrayListBenh.addAll(arraylist);
        } else {
            for (ClassBenhEdit wp : arraylist) {
                if (wp.getStrTenBenh().toLowerCase(Locale.getDefault()).contains(charText)) {
                    FragmentBenhEdit.arrayListBenh.add(wp);
                }
            }
        }
        notifyDataSetChanged();
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>Benh\ListViewBenhView.java</CENTER></H3><HR>
<PRE>
package com.example.basa.Benh;
<A NAME="527"></A>
import android.annotation.SuppressLint;
import android.content.Context;
<FONT color="#c8c2a7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#527',2,'match0-top.html#527',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.net.ConnectivityManager;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.TextView;

import com.example.basa.Class.ClassPublic;
import com.example.basa.R;

import java.util.ArrayList;
import java.util.Locale;
import java.util.Objects;

public class ListViewBenhView extends BaseAdapter {
    private final Context mContext;
    private final LayoutInflater inflater;
    private final ArrayList&lt;ClassBenhView&gt; arraylist;
    private ClassPublic classPublic;
    public ListViewBenhView(Context context) {
        mContext = context;
        inflater = LayoutInflater.from(mContext);
        this.arraylist = new ArrayList&lt;&gt;();
        this.arraylist.addAll(FragmentBenhView.arrayListBenh);
    }

    public static class ViewHolder {
        TextView textSTT, textTenBenh;
        ImageView imageBenh;
        ImageButton btnView;
    }
    @Override
    public int getCount() {
        return FragmentBenhView.arrayListBenh.size();
    }

    @Override
    public Object getItem(int position) {
        return FragmentBenhView.arrayListBenh.get(position);
    }
    @Override
    public long getItemId(int position) {
        return position;
    }

    @SuppressLint({&quot;InflateParams&quot;, &quot;SetTextI18n&quot;, &quot;NewApi&quot;, &quot;MissingPermission&quot;})
    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.listview_benh_view, null);
            holder.textSTT = convertView.findViewById(R.id.textSTT);
            holder.textTenBenh = convertView.findViewById(R.id.textTenBenh);
            holder.imageBenh = convertView.findViewById(R.id.imageBenh);
            holder.btnView = convertView.findViewById(R.id.btnView);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }</B></FONT>

        String strAnh = FragmentBenhView.arrayListBenh.get(position).getStrAnh();
        if (strAnh.equals(&quot;&quot;)){
            holder.imageBenh.setImageResource(R.drawable.img_no_image);
<A NAME="360"></A>        }
        else {
            //Kiểm tra kết nối đến hosting
            ConnectivityManager <FONT color="#3b9c9c"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#360',2,'match0-top.html#360',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>connectivityManager = (ConnectivityManager) mContext.getSystemService (Context.CONNECTIVITY_SERVICE);
            if(Objects.requireNonNull(connectivityManager).getActiveNetworkInfo() != null &amp;&amp; Objects.requireNonNull(connectivityManager.getActiveNetworkInfo()).isAvailable()
                    &amp;&amp; connectivityManager.getActiveNetworkInfo().isConnected()) {
                classPublic = new ClassPublic();
                classPublic.downloadImage(&quot;http://hoclamaimai.com/&quot; + strAnh, holder.imageBenh); //Load ảnh từ host
            }
            else {
                Log.d(&quot;TAG&quot;,&quot;LỖI! Kết nối đến hosting.&quot;);
            }</B></FONT>
        }
<A NAME="424"></A>        holder.textSTT.setText(FragmentBenhView.arrayListBenh.get(position).getIntSTT()+&quot;. &quot;);
        holder.textTenBenh.setText(FragmentBenhView.arrayListBenh.get(position).getStrTenBenh());
        holder.btnView.setOnClickListener(v -&gt; {
<A NAME="593"></A>            <FONT color="#f62817"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#424',2,'match0-top.html#424',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>FragmentBenhView.fragmentTransaction = FragmentBenhView.fragmentManager.beginTransaction();
            FragmentThongTinBenh fragment = new FragmentThongTinBenh();
            Bundle bundle = new Bundle();
            bundle.putInt(&quot;MaBenh&quot;, Integer.parseInt(<FONT color="#842dce"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#593',2,'match0-top.html#593',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>FragmentBenhView</B></FONT>.arrayListBenh.get(position).getStrMaBenh()));
            fragment.setArguments(bundle);
            FragmentBenhView.fragmentTransaction.replace(R.id.fragment_main, fragment);
            FragmentBenhView.fragmentTransaction.commit();
        });


        return convertView;
    }

    public void filter(String charText) {
        charText = charText.toLowerCase(Locale.getDefault());
        FragmentBenhView.arrayListBenh.clear();
        if (charText.length() == 0) {
            FragmentBenhView.arrayListBenh.addAll(arraylist);
        } else {
            for (ClassBenhView wp : arraylist) {
                if (wp.getStrTenBenh().toLowerCase(Locale.getDefault()).contains(charText)) {
                    FragmentBenhView.arrayListBenh.add(wp);
                }
            }
        }
        notifyDataSetChanged();
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>BinhLuan\FragmentBinhLuan.java</CENTER></H3><HR>
<PRE>
<A NAME="725"></A>package com.example.basa.BinhLuan;

import android.annotation.SuppressLint;
<FONT color="#faafba"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#725',2,'match0-top.html#725',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.content.Context;
import android.content.SharedPreferences;
import android.os.Bundle;
import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.ListView;
import android.widget.TextView;

import com.example.basa.Class.ClassConnect;
import com.example.basa.Class.ClassPublic;
import com.example.basa.CtyCheBien.FragmentCtyCheBienThuySan;
import com.example.basa.CtyThuY.FragmentCtyThuY;
import com.example.basa.CtyThuY.FragmentThuocView;
import com.example.basa.CtyThucAn.FragmentCtyThucAn;
import com.example.basa.R;
import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.Objects;
import static com.example.basa.Home.MainActivity.MyPREFERENCES;
import static com.example.basa.Home.MainActivity.User;

public class FragmentBinhLuan extends Fragment {
<A NAME="701"></A>    //Khai báo
    private View view;
    public static Integer mDieuKien</B></FONT>;
    public static String <FONT color="#c8c2a7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#701',2,'match0-top.html#701',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>mTaiKhoan, mTenCty, strTaiKhoan, mDiaChi;
    public static FragmentManager fragmentManager; //Tạo Fragment
    public static FragmentTransaction fragmentTransaction;
    private SharedPreferences sharedpreferences; //Nhớ tài khoản
    private SharedPreferences.Editor editor;
    public static ArrayList&lt;ClassBinhLuan&gt; arrayListBinhLuan;
    private ListViewBinhLuan adapterBinhLuan;
    private ImageButton btnQuayLai, btnGui;
    private TextView textTenCty, textDiaChi;
    private EditText editNoiDung;
<A NAME="44"></A>    private ListView listView;
    private ClassConnect classConnect;
    private final ClassPublic classPublic = new ClassPublic</B></FONT>();
    <FONT color="#e57ded"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#44',2,'match0-top.html#44',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>@SuppressLint({&quot;NewApi&quot;, &quot;UseRequireInsteadOfGet&quot;})
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);
        view = inflater.inflate(R.layout.fragment_binh_luan, container, false);
        fragmentManager = Objects.requireNonNull(getActivity()).getSupportFragmentManager();
        sharedpreferences = Objects.requireNonNull(this.getActivity()).getSharedPreferences(MyPREFERENCES, Context.MODE_PRIVATE);
        editor = sharedpreferences.edit();
        editor</B></FONT>.apply();
        strTaiKhoan = sharedpreferences.getString(User,&quot;&quot;);
        Bundle bundle = this.getArguments();
        if (bundle != null) {
            mDieuKien = bundle.getInt(&quot;DieuKien&quot;);
            mTaiKhoan = bundle.getString(&quot;TaiKhoan&quot;);
            mDiaChi = bundle.getString(&quot;DiaChi&quot;);
            mTenCty = bundle.getString(&quot;CongTy&quot;);
<A NAME="430"></A>        }
        layoutAnhXa();
        return view;
    <FONT color="#ada96e"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#430',2,'match0-top.html#430',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
    private void layoutAnhXa() {
        btnQuayLai = view.findViewById(R.id.btnQuayLai);
        textTenCty = view.findViewById(R.id.textTenCty);
        textDiaChi = view.findViewById(R.id.textDiaChi);
        listView = view.findViewById(R.id.listView);
        editNoiDung = view.findViewById(R.id.editNoiDung);
        btnGui = view.findViewById(R.id.btnGui);
        setTenCty();
        loadDanhSachBinhLuan(mTaiKhoan);
        clickButton</B></FONT>();
    }
    @SuppressLint(&quot;NewApi&quot;)
    private void setTenCty() {
        if (!mTaiKhoan.equals(&quot;&quot;)){
<A NAME="731"></A>            textTenCty.setText(mTenCty);
            textDiaChi.setText(mDiaChi);
        }
    <FONT color="#41a317"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#731',2,'match0-top.html#731',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
    @SuppressLint(&quot;NewApi&quot;)
    private void loadDanhSachBinhLuan(String taiKhoan) {
        arrayListBinhLuan = new ArrayList&lt;&gt;();
        arrayListBinhLuan.clear();
        try{
            classConnect = new ClassConnect(); //Mở kết nối đến SQL
            String sqlBinhLuan = &quot;select MaBinhLuan, HoTen, NoiDung, TaiKhoanBinhLuan from TB_BinhLuan bl, TB_NguoiDung nd where bl.TaiKhoanBinhLuan = nd.TaiKhoan and bl.TaiKhoan = '&quot;+ taiKhoan +&quot;' order by MaBinhLuan desc&quot;;
            ResultSet resultSetBinhLuan = classConnect.selectData(getActivity(), sqlBinhLuan);
            if (resultSetBinhLuan != null){
                while (resultSetBinhLuan.next()){
                    arrayListBinhLuan.add(new ClassBinhLuan(Integer.parseInt(resultSetBinhLuan.getString(&quot;MaBinhLuan&quot;)),
                            resultSetBinhLuan.getString(&quot;HoTen&quot;), resultSetBinhLuan.getString(&quot;NoiDung&quot;), resultSetBinhLuan.getString(&quot;TaiKhoanBinhLuan&quot;)));
                }
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối đến SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
        }
        adapterBinhLuan = new ListViewBinhLuan(getContext());
        listView.setAdapter(adapterBinhLuan);
    }
    private void clickButton() {
        btnQuayLai</B></FONT>.setOnClickListener(v -&gt; {
            if (mDieuKien == 1) {
                fragmentTransaction = fragmentManager.beginTransaction();
                FragmentCtyThucAn fragment = new FragmentCtyThucAn();
                fragmentTransaction.replace(R.id.fragment_main, fragment);
                fragmentTransaction.commit();
            }
            else if (mDieuKien == 2){
                fragmentTransaction = fragmentManager.beginTransaction();
                FragmentCtyCheBienThuySan fragment = new FragmentCtyCheBienThuySan();
                fragmentTransaction.replace(R.id.fragment_main, fragment);
                fragmentTransaction.commit();
            }
            else if (mDieuKien == 3) {
                fragmentTransaction = fragmentManager.beginTransaction();
                FragmentCtyThuY fragment = new FragmentCtyThuY();
                fragmentTransaction.replace(R.id.fragment_main, fragment);
                fragmentTransaction.commit();
            }
            else {
                fragmentTransaction = fragmentManager.beginTransaction();
                FragmentThuocView fragment = new FragmentThuocView();
                fragmentTransaction.replace(R.id.fragment_main, fragment);
                fragmentTransaction.commit();
<A NAME="694"></A>            }
        });
        btnGui.setOnClickListener(v -&gt; {
        <FONT color="#52d017"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#694',2,'match0-top.html#694',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>if (editNoiDung.getText().length() != 0){
            try {
                classConnect = new ClassConnect(); //Mở kết nối đến SQL
                String sqlBinhLuan = &quot;insert into TB_BinhLuan(TaiKhoanBinhLuan, TaiKhoan, NoiDung) values('&quot;+strTaiKhoan+&quot;', '&quot;+mTaiKhoan+&quot;', N'&quot;+editNoiDung.getText().toString()+&quot;')&quot;;
                if (classConnect.updateData(getActivity(), sqlBinhLuan) == 1){
                    classPublic.ThongBao(getActivity(), &quot;Thông báo! Gửi thành công&quot;);
                    editNoiDung.setText(&quot;&quot;);
                    loadDanhSachBinhLuan(mTaiKhoan);
                }
                else {
                    classPublic.ThongBao(getActivity(), &quot;Lỗi! Không gửi được&quot;);
                }
                classConnect.CONN(getActivity()).close(); //Đóng kết nối đến SQL
            }catch (Exception e){
                Log.d(&quot;TAG&quot;, e.getMessage());
            }
        }
        else {
            classPublic.ThongBao(getActivity(), &quot;Thông báo! Vui lòng nhập nội dung&quot;);
        }
        });
    }</B></FONT>
}
</PRE>
<HR>
<H3><CENTER>BinhLuan\ListViewBinhLuan.java</CENTER></H3><HR>
<PRE>
<A NAME="707"></A>package com.example.basa.BinhLuan;

<FONT color="#571b7e"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#707',2,'match0-top.html#707',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.annotation.SuppressLint;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;

import com.example.basa.Class.ClassConnect;
import com.example.basa.Class.ClassPublic;
import com.example.basa.R;

import java.util.ArrayList;
import java.util.Objects;

public class ListViewBinhLuan extends BaseAdapter {
    private final Context mContext;
    private final LayoutInflater inflater;
    private final ArrayList&lt;ClassBinhLuan&gt; arraylist;
    private ClassPublic classPublic;
    private ClassConnect classConnect;
    public ListViewBinhLuan(Context context) {
        mContext = context;
        inflater = LayoutInflater.from(mContext);
        this.arraylist = new ArrayList&lt;&gt;();
        this.arraylist.addAll(FragmentBinhLuan.arrayListBinhLuan);
    }
    public static class ViewHolder {
        ImageView imageXoa;
        TextView textHoTen, textNoiDung</B></FONT>;
    }
    @Override
    public int getCount() {
        return FragmentBinhLuan.arrayListBinhLuan.size();
    }

    @Override
    public Object getItem(int position) {
        return FragmentBinhLuan.arrayListBinhLuan.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @SuppressLint({&quot;InflateParams&quot;, &quot;SetTextI18n&quot;, &quot;NewApi&quot;})
    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.listview_binhluan, null);
            holder.textHoTen = convertView.findViewById(R.id.textHoTen);
            holder.textNoiDung = convertView.findViewById(R.id.textNoiDung);
<A NAME="698"></A>            holder.imageXoa = convertView.findViewById(R.id.imageXoa);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) <FONT color="#77bfc7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#698',2,'match0-top.html#698',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>convertView.getTag();
        }
        holder.textHoTen.setText(FragmentBinhLuan.arrayListBinhLuan.get(position).getStrHoTen());
        holder.textNoiDung.setText(FragmentBinhLuan.arrayListBinhLuan.get(position).getStrNoiDung());
        if (FragmentBinhLuan.strTaiKhoan.equals(FragmentBinhLuan.arrayListBinhLuan.get(position).getStrTaiKhoan()))
        {
            holder.imageXoa.setVisibility(View.VISIBLE);//Hiện lên nếu là người viết cmt
        }
        else {
<A NAME="662"></A>            holder.imageXoa.setVisibility(View.GONE);//Ngược lại
        }
        holder</B></FONT>.imageXoa.setOnClickListener(v -&gt; {
            AlertDialog.Builder <FONT color="#ada96e"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#662',2,'match0-top.html#662',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>builder = new AlertDialog.Builder(mContext);
            builder.setTitle(&quot;THÔNG BÁO&quot;);
            builder.setIcon(R.drawable.ic_thongbao);
<A NAME="699"></A>            builder.setMessage(&quot;Bạn có muốn xóa bình luận này không?&quot;);
            builder.setCancelable(false);
            builder</B></FONT>.setPositiveButton(&quot;Đồng ý&quot;, (dialogInterface, i) -&gt; {
                <FONT color="#6cc417"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#699',2,'match0-top.html#699',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>try{
                    Integer intMaBinhLuan = FragmentBinhLuan.arrayListBinhLuan.get(position).getIntMaBinhLuan();
                    classConnect = new ClassConnect(); //Mở kết nối đến SQL
                    classPublic = new ClassPublic();
                    String sqlBinhLuan = &quot;delete TB_BinhLuan where MaBinhLuan = '&quot;+intMaBinhLuan+&quot;'&quot;;
<A NAME="87"></A>                    if (classConnect.updateData((Activity)mContext, sqlBinhLuan) == 1){
                        classPublic</B></FONT>.ThongBao((Activity)mContext, &quot;Thông báo! Xóa bình luận thành công&quot;);
                        if (FragmentBinhLuan.mDieuKien == 1){
                            <FONT color="#faafba"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#87',2,'match0-top.html#87',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>FragmentBinhLuan.fragmentTransaction = FragmentBinhLuan.fragmentManager.beginTransaction();
                            FragmentBinhLuan fragment = new FragmentBinhLuan();
                            Bundle bundle = new Bundle();
                            bundle.putString(&quot;TaiKhoan&quot;, FragmentBinhLuan.mTaiKhoan);
                            bundle.putString(&quot;DiaChi&quot;, FragmentBinhLuan.mDiaChi);
                            bundle.putString(&quot;CongTy&quot;, FragmentBinhLuan.mTenCty);
                            bundle.putInt(&quot;DieuKien&quot;,1);
                            fragment.setArguments(bundle);
<A NAME="363"></A>                            FragmentBinhLuan.fragmentTransaction.replace(R.id.fragment_main, fragment);
                            FragmentBinhLuan</B></FONT>.fragmentTransaction.commit();
                        } else if (FragmentBinhLuan.mDieuKien == 2){
                            <FONT color="#3bb9ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#363',2,'match0-top.html#363',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>FragmentBinhLuan.fragmentTransaction = FragmentBinhLuan.fragmentManager.beginTransaction();
                            FragmentBinhLuan fragment = new FragmentBinhLuan();
                            Bundle bundle = new Bundle();
                            bundle.putString(&quot;TaiKhoan&quot;, FragmentBinhLuan.mTaiKhoan);
                            bundle.putString(&quot;DiaChi&quot;, FragmentBinhLuan.mDiaChi);
                            bundle.putString(&quot;CongTy&quot;, FragmentBinhLuan.mTenCty);
                            bundle.putInt(&quot;DieuKien&quot;,2);
                            fragment.setArguments(bundle);
<A NAME="405"></A>                            FragmentBinhLuan.fragmentTransaction.replace(R.id.fragment_main, fragment);
                            FragmentBinhLuan</B></FONT>.fragmentTransaction.commit();
                        } else if (FragmentBinhLuan.mDieuKien == 3){
                            <FONT color="#980517"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#405',2,'match0-top.html#405',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>FragmentBinhLuan.fragmentTransaction = FragmentBinhLuan.fragmentManager.beginTransaction();
                            FragmentBinhLuan fragment = new FragmentBinhLuan();
                            Bundle bundle = new Bundle();
                            bundle.putString(&quot;TaiKhoan&quot;, FragmentBinhLuan.mTaiKhoan);
                            bundle.putString(&quot;DiaChi&quot;, FragmentBinhLuan.mDiaChi);
                            bundle.putString(&quot;CongTy&quot;, FragmentBinhLuan.mTenCty);
                            bundle.putInt(&quot;DieuKien&quot;,3);
                            fragment.setArguments(bundle);
                            FragmentBinhLuan.fragmentTransaction.replace(R.id.fragment_main, fragment);
<A NAME="176"></A>                            FragmentBinhLuan</B></FONT>.fragmentTransaction.commit();
                        }
                    }
                    <FONT color="#77bfc7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#176',2,'match0-top.html#176',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>else {
                        classPublic.ThongBao((Activity)mContext, &quot;Lỗi! Không xóa được tài khoản&quot;);
                    }
                    classConnect.CONN((Activity)mContext).close(); //Đóng kết nối đến SQL
                }catch (Exception e){
                    Log.d(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
                }</B></FONT>
            });
            builder.setNegativeButton(&quot;Hủy bỏ&quot;, (dialogInterface, i) -&gt; dialogInterface.dismiss());
            AlertDialog alertDialog = builder.create();
            alertDialog.show();
        });

        return convertView;
    }
}
</PRE>
<HR>
<H3><CENTER>ChamSoc\ClassChamSocEdit.java</CENTER></H3><HR>
<PRE>
<A NAME="686"></A><FONT color="#c57726"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#686',2,'match0-top.html#686',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.ChamSoc;

public class ClassChamSocEdit {
    private final String strMaKyThuat, strTenKyThuat, strTuNgay, strDenNgay, strThucHien;
    public ClassChamSocEdit(String strMaKyThuat, String strTenKyThuat,
                            String strTuNgay, String strDenNgay, String strThucHien){
        this.strMaKyThuat = strMaKyThuat;
        this.strTenKyThuat = strTenKyThuat;
        this.strTuNgay = strTuNgay;
        this.strDenNgay = strDenNgay;
        this.strThucHien = strThucHien;
    }
    public String getStrMaKyThuat() {
        return strMaKyThuat;
    }

    public String getStrTenKyThuat() {
        return strTenKyThuat;
    }

    public String getStrTuNgay() {
        return strTuNgay;
    }

    public String getStrDenNgay() {
        return strDenNgay;
    }

    public String getStrThucHien() {
        return strThucHien;
    }

}</B></FONT>
</PRE>
<HR>
<H3><CENTER>ChamSoc\FragmentChamSocEdit.java</CENTER></H3><HR>
<PRE>
<A NAME="600"></A><FONT color="#d4a017"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#600',2,'match0-top.html#600',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.ChamSoc;

import android.annotation.SuppressLint;
import android.app.AlertDialog;
import android.content.Context;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.ListView;
import android.widget.SearchView;
import android.widget.Spinner;
import android.widget.TextView;
import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;

import com.example.basa.Home.FragmentHome;
import com.example.basa.Menu.FragmentMenu;
import com.example.basa.R;
import com.example.basa.Class.ClassConnect;
import com.example.basa.Class.ClassPublic;
import java.sql.ResultSet;
import java.util.ArrayList;
import static com.example.basa.Home.MainActivity.MyPREFERENCES;
import static com.example.basa.Home.MainActivity.User;

public class FragmentChamSocEdit extends Fragment implements SearchView.OnQueryTextListener {
    //Khai báo
    String strTaiKhoan, strLoaiCa, ganMaTinh;
    private View view;
    private SearchView searchView;
    private ListView listView;
    private ImageButton btnThemMoi, btnQuayLai;
    private Spinner cmdLoaiCa;
    private final ClassPublic classPublic</B></FONT> = new ClassPublic();
    private ClassConnect classConnect;
<A NAME="459"></A>    private ListViewChamSocEdit adapterChamSoc;
    public static ArrayList &lt;ClassChamSocEdit&gt; arrayListChamSoc;
    private final ArrayList&lt;String&gt; listMaLoaiCa = new ArrayList&lt;&gt;(); //Khai báo danh sách loại cá
    private final ArrayList&lt;String&gt; listTenLoaiCa = new <FONT color="#f88158"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#459',2,'match0-top.html#459',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>ArrayList&lt;&gt;();
    SharedPreferences sharedpreferences; //Nhớ tài khoản
    SharedPreferences.Editor editor;
    public static FragmentManager fragmentManager; //Fragment trang chủ
    public static FragmentTransaction fragmentTransaction;
    //Khai báo các đối tượng trên dialog
    private TextView textTieuDe;
    private EditText editMaKyThuat, editTenKyThuat, editTuNgay, editDenNgay</B></FONT>, editThucHien;
    private Button btnDong, btnLuuLai, btnXoa;
<A NAME="610"></A>    int intDieuKienGan;
    @SuppressLint({&quot;CommitPrefEdits&quot;, &quot;NewApi&quot;})
    @Nullable
    <FONT color="#f9966b"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#610',2,'match0-top.html#610',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>@Override
<A NAME="429"></A>    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);
        view = inflater.inflate(R.layout.fragment_cham_soc_edit, container, false);
        sharedpreferences</B></FONT> = <FONT color="#f660ab"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#429',2,'match0-top.html#429',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>this.requireActivity().getSharedPreferences(MyPREFERENCES, Context.MODE_PRIVATE);
        editor = sharedpreferences.edit();
        editor.apply();
        strTaiKhoan = sharedpreferences.getString(User,&quot;&quot;);
        layTinh(strTaiKhoan);
        layoutAnhXa(); //Ánh xạ các đối tượng trên layout
        return view ;
    }
    private void layTinh(String taikhoan) {
        try {
            classConnect = new ClassConnect();
            String sqlTinhHuyenXa = &quot;select MaTinh from TB_NguoiDung where TaiKhoan = '&quot;+taikhoan+&quot;'&quot;;
            ResultSet resultSetTinhHuyenXa = classConnect.selectData(getActivity</B></FONT>(), sqlTinhHuyenXa);
            if (resultSetTinhHuyenXa != null &amp;&amp; resultSetTinhHuyenXa.next()){
                ganMaTinh = resultSetTinhHuyenXa.getString(&quot;MaTinh&quot;);
            }
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, e.getMessage());
<A NAME="715"></A>        }
    }
    @SuppressLint(&quot;NewApi&quot;)
    private <FONT color="#4e9258"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#715',2,'match0-top.html#715',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>void layoutAnhXa() {
        searchView = view.findViewById(R.id.searchTen);
        btnThemMoi = view.findViewById(R.id.btnThemMoi);
        cmdLoaiCa = view.findViewById(R.id.cmdLoaiCa);
        listView = view.findViewById(R.id.listView);
        btnQuayLai = view.findViewById(R.id.btnQuayLai);
        fragmentManager = requireActivity().getSupportFragmentManager();
        loadLoaiCa();
        clickButton();
        clickListView();//Nhấn kỹ thuật trên listView
    }
    private void loadKyThuat(String maLoaiCa) {
        arrayListChamSoc = new ArrayList&lt;&gt;();
        arrayListChamSoc.clear();
        try {
<A NAME="302"></A>            classConnect = new ClassConnect(); //Mở kết nối đến SQL
            String sqlChamSoc = &quot;select MaKyThuat, TenKyThuat, TuNgay, DenNgay, ThucHien from TB_ChamSoc &quot;</B></FONT> +
                    &quot;where LoaiCa = '&quot;+Integer.parseInt(maLoaiCa)+&quot;' and MaTinh = '&quot;+ganMaTinh+&quot;'&quot;;
            ResultSet <FONT color="#3b9c9c"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#302',2,'match0-top.html#302',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>resultSetChamSoc = classConnect.selectData(getActivity(), sqlChamSoc);
            if (resultSetChamSoc != null) {
                while (resultSetChamSoc.next()) {
                    arrayListChamSoc.add(new ClassChamSocEdit(resultSetChamSoc.getString(&quot;MaKyThuat&quot;),
                            resultSetChamSoc.getString(&quot;TenKyThuat&quot;), resultSetChamSoc.getString(&quot;TuNgay&quot;),
                            resultSetChamSoc.getString(&quot;DenNgay&quot;),resultSetChamSoc.getString(&quot;ThucHien&quot;)));
                }
            }
            if (arrayListChamSoc.isEmpty()){
                classPublic.ThongBao(getActivity(),&quot;Thông báo! Đang cập nhật kỹ thuật&quot;);
            }
<A NAME="303"></A>            classConnect.CONN(getActivity()).close(); //Đóng kết nối đến SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, e</B></FONT>.getMessage());
        <FONT color="#842dce"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#303',2,'match0-top.html#303',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
        adapterChamSoc = new ListViewChamSocEdit(getContext());
        listView.setAdapter(adapterChamSoc);
        searchView.setOnQueryTextListener(this);
    }
    @Override
    public boolean onQueryTextSubmit(String query) {
        return false;
    }

    @Override
    public boolean onQueryTextChange(String newText) { //Tìm theo tên kinh nghiệm
        adapterChamSoc.filter(newText);
        return false;
    }

    private void clickButton() {
        btnThemMoi</B></FONT>.setOnClickListener(v -&gt; {
            insertKyThuat(-1);
            intDieuKienGan = 0;
        });
        btnQuayLai.setOnClickListener(v -&gt; {
            FragmentChamSocEdit.fragmentTransaction = FragmentChamSocEdit.fragmentManager.beginTransaction();
            FragmentChamSocEdit.fragmentTransaction.replace(R.id.fragment_main,new FragmentMenu());
            FragmentChamSocEdit.fragmentTransaction.commit();
<A NAME="380"></A>        });
    }
    private void clickListView() {
        <FONT color="#82cafa"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#380',2,'match0-top.html#380',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>listView.setOnItemClickListener((parent, view, position, id) -&gt; insertKyThuat(position));
    }
    private void insertKyThuat(final int intChiSo) {
        LayoutInflater inflater = getLayoutInflater</B></FONT>();
        @SuppressLint(&quot;InflateParams&quot;) View alertLayout = inflater.inflate(R.layout.dialog_cham_soc, null);
        textTieuDe = alertLayout.findViewById(R.id.textTieuDe);
        editMaKyThuat = alertLayout.findViewById(R.id.editMaKyThuat);
        editTenKyThuat = alertLayout.findViewById(R.id.editTenKyThuat);
        editThucHien = alertLayout.findViewById(R.id.editThucHien);
        editTuNgay = alertLayout.findViewById(R.id.editTuNgay);
        editDenNgay = alertLayout.findViewById(R.id.editDenNgay);
        btnLuuLai = alertLayout.findViewById(R.id.btnLuuLai);
        btnDong = alertLayout.findViewById(R.id.btnDong);
<A NAME="629"></A>        btnXoa = alertLayout.findViewById(R.id.btnXoa);
        final AlertDialog.Builder alert = new AlertDialog.Builder(getActivity());
        intDieuKienGan = 1;
        <FONT color="#8e35ef"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#629',2,'match0-top.html#629',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>alert.setView(alertLayout);
        alert.setCancelable(false);
        final AlertDialog dialog = alert.create();
        if (intChiSo == -1) {
            btnXoa.setEnabled(false);//Không cho phép ấn nút xóa
            String strTieuDe = &quot;THÊM MỚI KỸ THUẬT CHĂM SÓC CÁ&quot;</B></FONT>;
            textTieuDe.setText(strTieuDe);
            editMaKyThuat.setText(&quot;&quot;);
            String strNut = &quot;THÊM MỚI&quot;; //Đổi text nút lưu lại thành thêm mới
            btnLuuLai.setText(strNut);
        } else {
            btnXoa.setEnabled(true);//Cho phép ấn nút xóa
            String strTieuDe = &quot;CẬP NHẬT KỸ THUẬT CHĂM SÓC CÁ&quot;;
<A NAME="481"></A>            textTieuDe.setText(strTieuDe);
            String strNut = &quot;CẬP NHẬT&quot;;
            btnLuuLai.setText(strNut);//Đổi text nút lưu lại thành cập nhật
            editMaKyThuat.setText(<FONT color="#800517"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#481',2,'match0-top.html#481',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>arrayListChamSoc.get(intChiSo).getStrMaKyThuat()); //Gán giá trị mã kt
            editTenKyThuat.setText(arrayListChamSoc.get(intChiSo).getStrTenKyThuat()); //Gán giá trị tên kt
            editTuNgay.setText(arrayListChamSoc.get(intChiSo).getStrTuNgay()); //Gán giá trị tên kt
            editDenNgay.setText(arrayListChamSoc.get(intChiSo).getStrDenNgay()); //Gán giá trị tên kt
<A NAME="36"></A>            editThucHien.setText(arrayListChamSoc.get(intChiSo).getStrThucHien());//Gán giá trị th
        }
        btnLuuLai</B></FONT>.setOnClickListener(v -&gt; {
            <FONT color="#ff00ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#36',2,'match0-top.html#36',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>try {
                if (editTenKyThuat.getText().length()!= 0){
                    if (editThucHien.getText().length()!= 0){
<A NAME="444"></A>                        String sqlChamSoc;
                        if (intChiSo == -1) { //Thêm mới
                            sqlChamSoc</B></FONT> = &quot;insert into TB_ChamSoc (TenKyThuat, TuNgay, DenNgay, ThucHien, LoaiCa, MaTinh) values &quot; +
                                    &quot;(N'&quot; + editTenKyThuat.getText() + &quot;', '&quot; + editTuNgay.getText() + &quot;', '&quot; + editDenNgay.getText() + &quot;',N'&quot; + <FONT color="#348781"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#444',2,'match0-top.html#444',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>editThucHien.getText() + &quot;', '&quot; + Integer.parseInt(strLoaiCa) + &quot;', &quot; +
                                    &quot;'&quot;+Integer.parseInt(ganMaTinh)+&quot;')&quot;;
                        } else {
                            sqlChamSoc = &quot;update TB_ChamSoc set TenKyThuat = N'&quot;+editTenKyThuat.getText()+&quot;', TuNgay = '&quot;+editTuNgay.getText()+&quot;',&quot; +
                                    &quot;DenNgay = '&quot;+editDenNgay.getText()+&quot;', ThucHien = N'&quot;+editThucHien.getText()+&quot;' where MaKyThuat = '&quot;+editMaKyThuat.getText()+&quot;' and LoaiCa = '&quot;+Integer.parseInt(strLoaiCa)+&quot;'&quot;;
                        }
                        classConnect = new ClassConnect(); //Mở kết nối SQL
                        if (classConnect.updateData(getActivity(), sqlChamSoc) == 1) {
                            if (intChiSo == -1) {
                                classPublic.ThongBao(getActivity(), &quot;Thông báo! Thêm mới kỹ thuật thành công&quot;);
                            } else {
                                classPublic.ThongBao(getActivity(), &quot;Thông báo! Cập nhật kỹ thuật thành công&quot;);
                            }
                            dialog.cancel(); //Đóng dialog sau đó gọi load mới danh sách
                            loadKyThuat</B></FONT>(strLoaiCa); //Load lại danh sách
                        }
                    }
                    else {
                        classPublic.ThongBao(getActivity(),&quot;Vui lòng nhập giải pháp&quot;);
                    }
                }
                else {
                    classPublic.ThongBao(getActivity(),&quot;Vui lòng nhập tên kinh nghiệm&quot;);
                }
                classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
            } catch (Exception e){
                Log.e(&quot;TAG&quot;, e.getMessage());
<A NAME="446"></A>            }
        });
        btnXoa.setOnClickListener(v -&gt; {
            <FONT color="#347235"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#446',2,'match0-top.html#446',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>if (editMaKyThuat.getText().length() != 0) {
                dialogXoa(editMaKyThuat.getText().toString(), editTenKyThuat.getText().toString());
                dialog.cancel();
            }
            else {
<A NAME="463"></A>                classPublic.ThongBao(getActivity(),&quot;Không tìm thấy mã kỹ thuật để xóa&quot;);
            }</B></FONT>
        });
        btnDong.setOnClickListener(v -&gt; <FONT color="#980517"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#463',2,'match0-top.html#463',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>dialog.cancel());
        dialog.show(); //Show giao diện thêm mới kỹ thuật
    }
    private void loadLoaiCa() {
        listMaLoaiCa.clear(); //Xóa danh sách đang có
        listTenLoaiCa.clear();
        listMaLoaiCa.add(&quot;1&quot;);
<A NAME="502"></A>        listTenLoaiCa.add(&quot;Cá giống&quot;);
        listMaLoaiCa.add(&quot;2&quot;);
        listTenLoaiCa</B></FONT>.add(&quot;Cá thịt&quot;);
        ArrayAdapter&lt;String&gt; dataTrangThai = new ArrayAdapter&lt;&gt;(<FONT color="#348781"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#502',2,'match0-top.html#502',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>getActivity(), android.R.layout.simple_spinner_item,listTenLoaiCa);
        dataTrangThai.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
        cmdLoaiCa.setAdapter(dataTrangThai);
        cmdLoaiCa.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaLoaiCa.isEmpty()) {
                    strLoaiCa = listMaLoaiCa.get(position);
                    loadKyThuat(strLoaiCa); //Load kỹ thuật
                }
            }
            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

<A NAME="684"></A>            }
        });
    }</B></FONT>
    private <FONT color="#92c7c7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#684',2,'match0-top.html#684',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>void dialogXoa(final String maKyThuat, final String tenKyThuat){
        //Hiện hộp thoại thông báo xóa tỉnh
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        builder.setTitle(&quot;XÓA KỸ THUẬT&quot;);
        builder.setIcon(R.drawable.ic_delete);
<A NAME="448"></A>        builder.setMessage(&quot;Bạn có muốn xóa kỹ thuật &quot;+tenKyThuat+&quot; không?&quot;);
        builder.setCancelable(false);
        builder</B></FONT>.setPositiveButton(&quot;Đồng ý&quot;, (dialogInterface, i) -&gt; {
            <FONT color="#c57717"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#448',2,'match0-top.html#448',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>try {
                classConnect = new ClassConnect(); //Mở kết nối SQL
                String sqlTinh = &quot;delete TB_ChamSoc where MaKyThuat= '&quot;+ maKyThuat +&quot;'&quot;;
                if (classConnect.updateData(getActivity(), sqlTinh) == 1){
                    classPublic.ThongBao(getActivity(),&quot;Thông báo! Xóa kỹ thuật thành công&quot;);
                    loadKyThuat(strLoaiCa);
                }
                else {
                    classPublic.ThongBao(getActivity(),&quot;Thông báo! Không xóa được kỹ thuật&quot;);
                }
                classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
            }catch (Exception e){
                Log.e(&quot;TAG&quot;, e</B></FONT>.getMessage());
            }
        });
        builder.setNegativeButton(&quot;Hủy bỏ&quot;, (dialogInterface, i) -&gt; dialogInterface.dismiss());
        AlertDialog alertDialog = builder.create();
        alertDialog.show();
    }
}
</PRE>
<HR>
<H3><CENTER>ChamSoc\FragmentChamSocView.java</CENTER></H3><HR>
<PRE>
<A NAME="52"></A>package com.example.basa.ChamSoc;

import android.annotation.SuppressLint;
<FONT color="#2b60de"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#52',2,'match0-top.html#52',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.content.Context;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ImageButton;
import android.widget.ListView;
import android.widget.SearchView;
import android.widget.Spinner;
import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;

import com.example.basa.AoNuoi.FragmentQuanLiAoNuoi;
import com.example.basa.Home.FragmentHome;
import com.example.basa.R;
import com.example.basa.Class.ClassConnect;
import com.example.basa.Class.ClassPublic;
import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.Objects;

import static com.example.basa.Home.MainActivity.MyPREFERENCES;
import static com.example.basa.Home.MainActivity.User;

public class FragmentChamSocView extends Fragment implements SearchView.OnQueryTextListener {

    //Khai báo
    String strTaiKhoan, strLoaiCa</B></FONT>;
    View view;
    ListView listView;
    SearchView searchView;
    Spinner cmdLoaiCa;
    ImageButton btnQuayLai;
    ClassPublic classPublic = new ClassPublic();
    ClassConnect classConnect;
    ListViewChamSocView adapterChamSoc;
    public static ArrayList &lt;ClassChamSocView&gt; arrayListChamSoc;
    ArrayList&lt;String&gt; listMaLoaiCa = new ArrayList&lt;&gt;(); //Khai báo danh sách loại cá
    ArrayList&lt;String&gt; listTenLoaiCa = new ArrayList&lt;&gt;();
    SharedPreferences sharedpreferences; //Nhớ tài khoản
    SharedPreferences.Editor editor;
    public static FragmentManager fragmentManager; //Fragment trang chủ
    public static FragmentTransaction fragmentTransaction;
    String ganLoaiCa;
<A NAME="729"></A>    Integer mDieuKien, mNgay;

    @SuppressLint({&quot;CommitPrefEdits&quot;, &quot;NewApi&quot;, &quot;UseRequireInsteadOfGet&quot;})
    <FONT color="#736aff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#729',2,'match0-top.html#729',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>@Override
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);
        view = inflater.inflate(R.layout.fragment_cham_soc_view, container, false);
        fragmentManager = Objects.requireNonNull(getActivity()).getSupportFragmentManager();
        sharedpreferences = Objects.requireNonNull(this.getActivity()).getSharedPreferences(MyPREFERENCES, Context.MODE_PRIVATE);
        editor = sharedpreferences.edit();
        editor.apply();
        strTaiKhoan = sharedpreferences</B></FONT>.getString(User,&quot;&quot;);
        Bundle bundle = this.getArguments();
        if (bundle != null) {
            ganLoaiCa = bundle.getString(&quot;LoaiCa&quot;);
            mDieuKien = bundle.getInt(&quot;DieuKien&quot;);
            mNgay = bundle.getInt(&quot;Ngay&quot;);
        }
        else {
            ganLoaiCa = &quot;&quot;;
            mDieuKien = 0;
            mNgay = 0;
        }
        layoutAnhXa(); //Ánh xạ các đối tượng trên layout
        return view ;
    }
<A NAME="299"></A>
    @SuppressLint({&quot;NewApi&quot;, &quot;UseRequireInsteadOfGet&quot;})
    private void layoutAnhXa() {
        <FONT color="#f88017"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#299',2,'match0-top.html#299',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>btnQuayLai = view.findViewById(R.id.btnQuayLai);
        cmdLoaiCa = view.findViewById(R.id.cmdLoaiCa);
        listView = view.findViewById(R.id.listView);
        searchView = view.findViewById(R.id.searchTen);
        setSpinner();
        loadLoaiCa();
        clickButton();
    }

    private void setSpinner() {
        cmdLoaiCa</B></FONT>.setEnabled(mDieuKien == 0);
    }

    private void clickButton() {
        btnQuayLai.setOnClickListener(view -&gt; {
            if (mDieuKien == 1){
                FragmentChamSocView.fragmentTransaction = FragmentChamSocView.fragmentManager.beginTransaction();
                FragmentChamSocView.fragmentTransaction.replace(R.id.fragment_main,new FragmentQuanLiAoNuoi());
                FragmentChamSocView.fragmentTransaction.commit();
            }
            else {
                FragmentChamSocView.fragmentTransaction = FragmentChamSocView.fragmentManager.beginTransaction();
                FragmentChamSocView.fragmentTransaction.replace(R.id.fragment_main,new FragmentHome());
                FragmentChamSocView.fragmentTransaction.commit();
            }
<A NAME="19"></A>        });
    }

    private <FONT color="#4e9258"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#19',2,'match0-top.html#19',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>void loadKyThuat(String maLoaiCa) {
        arrayListChamSoc = new ArrayList&lt;&gt;();
        arrayListChamSoc.clear();
        try {
            classConnect = new ClassConnect(); //Mở kết nối đến SQL
            String sqlChamSoc;
            if</B></FONT> (mNgay == 0) {
<A NAME="20"></A>                sqlChamSoc = &quot;select MaKyThuat, TenKyThuat, TuNgay, DenNgay, ThucHien from TB_ChamSoc &quot; +
                        &quot;where LoaiCa = '&quot; + Integer.parseInt(maLoaiCa) + &quot;'&quot;;
            }
            <FONT color="#d4a017"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#20',2,'match0-top.html#20',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>else {
                sqlChamSoc = &quot;select MaKyThuat, TenKyThuat, TuNgay, DenNgay, ThucHien from TB_ChamSoc &quot; +
                        &quot;where LoaiCa = '&quot; + Integer.parseInt(maLoaiCa) + &quot;' and (TuNgay &gt;= '&quot;+mNgay+&quot;' or DenNgay &gt;= '&quot;+mNgay+&quot;')&quot;;
            }
<A NAME="583"></A>            ResultSet resultSetChamSoc = classConnect.selectData(getActivity(), sqlChamSoc);
            if (resultSetChamSoc != null) {
                while (resultSetChamSoc</B></FONT>.next()) {
                    <FONT color="#6cc417"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#583',2,'match0-top.html#583',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>arrayListChamSoc.add(new ClassChamSocView(resultSetChamSoc.getString(&quot;MaKyThuat&quot;),resultSetChamSoc.getString(&quot;TenKyThuat&quot;),
                            &quot;Từ &quot;+resultSetChamSoc.getString(&quot;TuNgay&quot;).concat(&quot; - &quot;+resultSetChamSoc.getString(&quot;DenNgay&quot;)+&quot; ngày&quot;),resultSetChamSoc.getString(&quot;ThucHien&quot;)));
                }
            }
            if (arrayListChamSoc.isEmpty()){
                classPublic.ThongBao(getActivity(),&quot;Thông báo! Đang cập nhật kỹ thuật chăm sóc cá&quot;);
            }
<A NAME="439"></A>            classConnect.CONN(getActivity()).close(); //Đóng kết nối đến SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, e</B></FONT>.getMessage());
        <FONT color="#736aff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#439',2,'match0-top.html#439',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
        adapterChamSoc = new ListViewChamSocView(getContext());
        listView.setAdapter(adapterChamSoc);
        searchView.setOnQueryTextListener(this);
    }
    @Override
    public boolean onQueryTextSubmit(String query) {
        return false;
    }

    @Override
    public boolean onQueryTextChange(String newText) { //Tìm theo tên kinh nghiệm
        adapterChamSoc.filter(newText);
        return false;
<A NAME="394"></A>    }
    private void loadLoaiCa() {
        listMaLoaiCa</B></FONT>.clear(); //Xóa danh sách đang có
        <FONT color="#92c7c7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#394',2,'match0-top.html#394',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>listTenLoaiCa.clear();
        listMaLoaiCa.add(&quot;1&quot;);
        listTenLoaiCa.add(&quot;Cá giống&quot;);
        listMaLoaiCa.add(&quot;2&quot;);
        listTenLoaiCa.add(&quot;Cá thịt&quot;);
<A NAME="232"></A>        ArrayAdapter&lt;String&gt; dataTrangThai = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenLoaiCa);
        dataTrangThai.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
        cmdLoaiCa</B></FONT>.setAdapter(dataTrangThai);
        <FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#232',2,'match0-top.html#232',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>cmdLoaiCa.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaLoaiCa.isEmpty()) {
                    strLoaiCa = listMaLoaiCa.get(position);
                    if (!ganLoaiCa.equals(&quot;&quot;)){
                        cmdLoaiCa.setSelection(listMaLoaiCa.indexOf(ganLoaiCa));
<A NAME="192"></A>                        strLoaiCa</B></FONT> = ganLoaiCa;
                        ganLoaiCa = &quot;&quot;;
                    }
                    <FONT color="#f62817"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#192',2,'match0-top.html#192',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>loadKyThuat(strLoaiCa);
                }
            }
            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }</B></FONT>
}
</PRE>
<HR>
<H3><CENTER>ChamSoc\ListViewChamSocEdit.java</CENTER></H3><HR>
<PRE>
<A NAME="282"></A><FONT color="#ff0000"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#282',2,'match0-top.html#282',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.ChamSoc;

import android.annotation.SuppressLint;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.TextView;
import com.example.basa.R;
import java.util.ArrayList;
import java.util.Locale;

<A NAME="586"></A>public class ListViewChamSocEdit extends BaseAdapter {
    private final Context mContext;
    private final LayoutInflater inflater;
    private final ArrayList&lt;ClassChamSocEdit</B></FONT>&gt; <FONT color="#50ebec"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#586',2,'match0-top.html#586',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>arraylist;
    public ListViewChamSocEdit(Context context){
        mContext = context;
        inflater = LayoutInflater.from(mContext);
        this.arraylist = new ArrayList&lt;&gt;();
        this.arraylist.addAll(FragmentChamSocEdit.arrayListChamSoc);
    }
    public static class ViewHolder {
        TextView textMaKyThuat;
        TextView textTenKyThuat;
        TextView textGiaiDoan;
        TextView textThucHien;
    }
    @Override
    public int getCount() {
        return FragmentChamSocEdit.arrayListChamSoc.size();
    }
    @Override
    public Object getItem(int position) {
        return FragmentChamSocEdit.arrayListChamSoc.get(position);
    }
    @Override
    public long getItemId(int position) {
        return position;
    }
    @Override
    @SuppressLint({&quot;InflateParams&quot;, &quot;SetTextI18n&quot;, &quot;NewApi&quot;})
    public View getView(final int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.listview_cham_soc_edit, null);
            holder.textMaKyThuat = convertView.findViewById(R.id.textMaKyThuat);
            holder.textTenKyThuat = convertView.findViewById(R.id.textTenKyThuat);
            holder.textGiaiDoan = convertView.findViewById(R.id.textGiaiDoan);
            holder.textThucHien = convertView.findViewById(R.id.textThucHien);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        holder.textMaKyThuat.setText(FragmentChamSocEdit.arrayListChamSoc.get(position).getStrMaKyThuat());
<A NAME="542"></A>        holder</B></FONT>.textTenKyThuat.setText(FragmentChamSocEdit.arrayListChamSoc.get(position).getStrTenKyThuat());
        holder.textGiaiDoan.setText(&quot;Giai đoạn : Từ &quot;+FragmentChamSocEdit.arrayListChamSoc.get(position).getStrTuNgay().concat(&quot;-&quot;+FragmentChamSocEdit.arrayListChamSoc.get(position).getStrDenNgay()+&quot; ngày&quot;));
        holder.textThucHien.setText(FragmentChamSocEdit.arrayListChamSoc.get(position).getStrThucHien());
        <FONT color="#d4a017"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#542',2,'match0-top.html#542',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>return convertView;
    }
    public void filter(String charText) {
        charText = charText.toLowerCase(Locale.getDefault());
        FragmentChamSocEdit.arrayListChamSoc.clear();
        if (charText.length() == 0) {
            FragmentChamSocEdit.arrayListChamSoc.addAll(arraylist);
        } else {
            for (ClassChamSocEdit wp : arraylist) {
                if (wp.getStrTenKyThuat().toLowerCase(Locale.getDefault()).contains(charText)||wp</B></FONT>.getStrTuNgay().toLowerCase(Locale.getDefault()).contains(charText)||wp.getStrDenNgay().toLowerCase(Locale.getDefault()).contains(charText)) {
                    FragmentChamSocEdit.arrayListChamSoc.add(wp);
                }
            }
        }
        notifyDataSetChanged();
    }
}
</PRE>
<HR>
<H3><CENTER>ChamSoc\ListViewChamSocView.java</CENTER></H3><HR>
<PRE>
package com.example.basa.ChamSoc;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.content.Context;
import android.speech.tts.TextToSpeech;
import android.text.Html;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageButton;
import android.widget.TextView;
import com.example.basa.R;
import com.example.basa.Class.ClassPublic;
import java.util.ArrayList;
import java.util.Locale;

public class ListViewChamSocView extends BaseAdapter {

    ClassPublic classPublic = new ClassPublic();
    Context mContext;
    TextToSpeech tts;
    LayoutInflater inflater;
    ArrayList&lt;ClassChamSocView&gt; arraylist;

    public ListViewChamSocView(Context context){
        mContext = context;
        inflater = LayoutInflater.from(mContext);
        //Khởi tạo đọc văn bản
        tts = classPublic.DocVanBan((Activity)mContext,&quot;&quot;);
        this.arraylist = new ArrayList&lt;&gt;();
        this.arraylist.addAll(FragmentChamSocView.arrayListChamSoc);
<A NAME="280"></A>    }
    public static class ViewHolder {
        TextView textTenKyThuat, textGiaiDoan, textThucHien;
        ImageButton btnVolumeUp, <FONT color="#c57726"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#280',2,'match0-top.html#280',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>btnVolumeOff;
    }
    @Override
    public int getCount() {
        return FragmentChamSocView.arrayListChamSoc.size();
    }
    @Override
    public Object getItem(int position) {
        return FragmentChamSocView.arrayListChamSoc.get(position);
    }
    @Override
    public long getItemId(int position) {
        return position;
    }
    @Override
    @SuppressLint({&quot;InflateParams&quot;, &quot;SetTextI18n&quot;, &quot;NewApi&quot;})
    public View getView(final int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.listview_cham_soc_view, null);
<A NAME="349"></A>            holder.textTenKyThuat = convertView</B></FONT>.findViewById(R.id.textTenKyThuat);
            holder.textGiaiDoan = convertView.findViewById(R.id.textGiaiDoan);
            holder.textThucHien = convertView.findViewById(R.id.textThucHien);
            <FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#349',2,'match0-top.html#349',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>holder.btnVolumeUp = convertView.findViewById(R.id.btnVolumeUp);
            holder.btnVolumeOff = convertView.findViewById(R.id.btnVolumeOff);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.textTenKyThuat.setText((position + 1) + &quot;. &quot; + FragmentChamSocView.arrayListChamSoc.get(position).getStrTenKyThuat());
        holder</B></FONT>.textGiaiDoan.setText(&quot;Giai đoạn : &quot;+FragmentChamSocView.arrayListChamSoc.get(position).getStrGiaiDoan());
<A NAME="173"></A>        String [] strText = FragmentChamSocView.arrayListChamSoc.get(position).getStrThucHien().split(&quot;\\.&quot;);
        holder.textThucHien.setText(Html.fromHtml(strText[0] + &quot;... &lt;font color='blue'&gt;&lt;b&gt;Xem thêm &gt;&gt;&lt;/b&gt;&lt;/font&gt;&quot;),TextView.BufferType.SPANNABLE);

        holder.textThucHien.setOnClickListener(v -&gt; holder.textThucHien.setText(<FONT color="#980517"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#173',2,'match0-top.html#173',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>FragmentChamSocView.arrayListChamSoc.get(position).getStrThucHien()));

        holder.btnVolumeUp.setOnClickListener(v -&gt;  {
            String strKyThuat = arraylist.get(position).getStrThucHien();
<A NAME="411"></A>            String strTenKyThuat = arraylist.get(position).getStrTenKyThuat();
            String strGiaiDoan = arraylist</B></FONT>.get(position).getStrGiaiDoan().replace(&quot;-&quot;,&quot;đến&quot;);
            String strDelay = &quot;,&quot;;
            if (!arraylist.get(position).getStrThucHien().equals(&quot;&quot;)||!<FONT color="#c8c2a7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#411',2,'match0-top.html#411',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>arraylist.get(position).getStrTenKyThuat().equals(&quot;&quot;)||!arraylist.get(position).getStrGiaiDoan().equals(&quot;&quot;)) {
                tts = classPublic.DocVanBan((Activity)mContext, strTenKyThuat</B></FONT>.concat(strDelay).concat(&quot;Giai đoạn &quot;+strGiaiDoan).concat(strDelay).concat(strKyThuat).
                        replace(&quot;+&quot;, &quot;&quot;).replace(&quot;m2&quot;,&quot;mét vuông&quot;).replace(&quot;/&quot;,&quot;trên&quot;));
            }
        });
<A NAME="657"></A>
        holder.btnVolumeOff.setOnClickListener(v -&gt;  tts.stop()); //Tắt đọc văn bản

        <FONT color="#4e9258"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#657',2,'match0-top.html#657',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>return convertView;
    }

    public void filter(String charText) {
        charText = charText.toLowerCase(Locale.getDefault());
        FragmentChamSocView.arrayListChamSoc.clear();
        if (charText.length() == 0) {
            FragmentChamSocView.arrayListChamSoc.addAll(arraylist);
        } else {
            for (ClassChamSocView wp : arraylist) {
                if (wp.getStrTenKyThuat().toLowerCase(Locale.getDefault()).contains(charText)||wp</B></FONT>.getStrGiaiDoan().toLowerCase(Locale.getDefault()).contains(charText)) {
                    FragmentChamSocView.arrayListChamSoc.add(wp);
                }
            }
        }
        notifyDataSetChanged();
    }
}
</PRE>
<HR>
<H3><CENTER>Class\CircleImage.java</CENTER></H3><HR>
<PRE>
<A NAME="674"></A><FONT color="#ff00ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#674',2,'match0-top.html#674',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.Class;

import android.annotation.SuppressLint;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.PorterDuff;
import android.graphics.PorterDuffXfermode;
import android.graphics.Rect;
import android.graphics.drawable.BitmapDrawable;
import android.graphics.drawable.Drawable;
import android.util.AttributeSet;
import android.widget.ImageView;

@SuppressLint(&quot;AppCompatCustomView&quot;)
public class CircleImage extends ImageView {
    public CircleImage(Context context) {
        super(context);
    }

    public CircleImage(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public CircleImage(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        Drawable drawable = getDrawable();
        if (drawable == null) {
            return;
        }
        if (getWidth() == 0 || getHeight() == 0) {
            return;
        }
        Bitmap b = ((BitmapDrawable) drawable).getBitmap();
        Bitmap bitmap = b.copy(Bitmap.Config.ARGB_8888, true);
        int w = getWidth();
        Bitmap roundBitmap = getCroppedBitmap(bitmap, w);
        canvas.drawBitmap(roundBitmap, 0, 0, null);
    }

    public static Bitmap getCroppedBitmap(Bitmap bmp, int radius) {
        Bitmap sbmp;
        if (bmp.getWidth() != radius || bmp.getHeight() != radius){
            sbmp = Bitmap.createScaledBitmap(bmp, radius, radius, false);
        }
        else {
            sbmp = bmp;
        }
        Bitmap output = Bitmap.createBitmap(sbmp.getWidth(), sbmp.getHeight(), Bitmap.Config.ARGB_8888);
        Canvas canvas = new Canvas(output);
        final Paint paint = new Paint();
        final Rect rect = new Rect(0, 0, sbmp.getWidth(), sbmp.getHeight());
        paint.setAntiAlias(true);
        paint.setFilterBitmap(true);
        paint.setDither(true);
        canvas.drawARGB(0, 0, 0, 0);
        paint.setColor(Color.parseColor(&quot;#BAB399&quot;));
        canvas.drawCircle(sbmp.getWidth() / 2 + 0.7f,sbmp.getHeight() / 2 + 0.7f, sbmp.getWidth() / 2 + 0.1f, paint);
        paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC_IN));
        canvas.drawBitmap(sbmp, rect, rect, paint);
        return output;
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>Class\ClassConnect.java</CENTER></H3><HR>
<PRE>
<A NAME="675"></A><FONT color="#810541"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#675',2,'match0-top.html#675',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.Class;

import android.app.Activity;
import android.os.StrictMode;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

public class ClassConnect {
    private final String stringHostName = &quot;&quot;; //Địa chỉ IP khi kết nối internet
    private final String stringDataBase = &quot;&quot;; //Tên CSDL trong SQL Server
    private final String stringUser = &quot;&quot;; //Tên đăng nhập vào SQL Server
    private final String stringPass = &quot;&quot;; //Mật khẩu đăng nhập vào SQL Server
    private Connection connection = null; //Khai báo biến kết nối
    private final ClassPublic classPublic = new ClassPublic();

    //=====================================HÀM KẾT NỐI=====================================
    public Connection CONN(Activity activity){
        try {
            StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
            StrictMode.setThreadPolicy(policy);
            Class.forName(&quot;net.sourceforge.jtds.jdbc.Driver&quot;).newInstance();
            //Khai báo chuỗi kết nối
            String stringURL = &quot;jdbc:jtds:sqlserver://&quot; + stringHostName + &quot;;&quot;
                    + &quot;databaseName=&quot; + stringDataBase + &quot;;user=&quot; + stringUser + &quot;;password=&quot;
                    + stringPass + &quot;;&quot;;
            connection = DriverManager.getConnection(stringURL); //Mở kết nối đến SQL Server
        } catch (SQLException se) {
            classPublic.ThongBao(activity,se.getMessage());
        } catch (ClassNotFoundException e) {
            classPublic.ThongBao(activity,e.getMessage());
        } catch (Exception e) {
            classPublic.ThongBao(activity,e.getMessage());
        }
        return connection;
    }

    //=====================================HÀM LẤY DỮ LIỆU=====================================
    public ResultSet selectData(Activity activity, String stringSQL){
        ResultSet resultSet = null;
        try {
            connection = CONN(activity); //Mở kết nối
            Statement statement = connection.createStatement();
            resultSet = statement.executeQuery(stringSQL); //Lấy danh sách kết quả

        } catch (Exception e){
            classPublic.ThongBao(activity,e.getMessage());
        }
        return resultSet;
    }

    //=====================================HÀM CẬP NHẬT DỮ LIỆU=====================================
    public int updateData(Activity activity, String stringSQL){
        int i;
        try {
            connection = CONN(activity); //Mở kết nối
            Statement statement = connection.createStatement();
            if (statement.executeUpdate(stringSQL) &gt; 0) {
                i = 1;
            }
            else{
                i = 0;
            }
            statement.close();
            connection.close(); //Đóng kết nối
        } catch (Exception e){
            classPublic.ThongBao(activity,e.getMessage());
            i = 0;
        }
        return i;
    }
}</B></FONT>

</PRE>
<HR>
<H3><CENTER>Class\ClassPublic.java</CENTER></H3><HR>
<PRE>
<A NAME="71"></A>package com.example.basa.Class;

<FONT color="#842dce"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#71',2,'match0-top.html#71',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.annotation.SuppressLint;
import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.speech.tts.TextToSpeech;
import android.util.Log;
import android.widget.ImageView;
import android.widget.Toast;

import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;
import java.sql.ResultSet;
import java.text.DateFormat;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Locale;
import java.util.Objects;

public class ClassPublic {
    //Các khai báo
    private TextToSpeech tts;
    private ImageView imageView</B></FONT>;
    private Bitmap bitmap;
    private InputStream in;
    private ClassConnect classConnect;
    private String strTaiKhoan;

    //=====================================HÀM THÔNG BÁO=====================================//
    //Thông báo
    public void ThongBao(Activity activity, String string) {
        Toast.makeText(activity, string, Toast.LENGTH_SHORT).show();
    }

    //=====================================HÀM ĐỌC VĂN BẢN=====================================//
    //Đọc văn bản
    public TextToSpeech DocVanBan(Activity activity, final String st) {
        tts = new TextToSpeech(activity, status -&gt; {
            if (status == TextToSpeech.SUCCESS) {
                if (!st.equals(&quot;&quot;)) {
                    tts.speak(st, TextToSpeech.QUEUE_FLUSH, null);
                }
            }
            tts.setPitch(1.0f);
            tts.setSpeechRate(1.0f);
        });
        return tts;
<A NAME="679"></A>    }

    //=====================================TÍNH SỐ NGÀY TĂNG TRƯỞNG CHO CÁ=====================================//
    public <FONT color="#f87a17"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#679',2,'match0-top.html#679',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>String soNgay(String strNgayThaCa) {
        DateFormat simpleDateFormat = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;, Locale.getDefault());
        Date currentDate = new Date();
        Date date1, date2;
        long getDaysDiff = 0;
        try {
            //Lấy ngày thả giống
            String endDate = simpleDateFormat.format(currentDate);
            date2 = simpleDateFormat.parse(endDate);
            //Lấy ngày xuống giống
            date1 = simpleDateFormat</B></FONT>.parse(strNgayThaCa);
            assert date2 != null;
            assert date1 != null;
            long getDiff = date2.getTime() - date1.getTime();
            getDaysDiff = getDiff / (24 * 60 * 60 * 1000);
        } catch (Exception e) {
<A NAME="677"></A>            e.printStackTrace();
        }
        return String.valueOf(getDaysDiff);
    <FONT color="#152dc6"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#677',2,'match0-top.html#677',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}

    //=====================================LOAD ẢNH TỪ HOSTING=====================================//
    public void downloadImage(String urlStr, final ImageView img) {
        imageView = img;
        final String url = urlStr;
        new Thread() {
            public void run() {
                Message msg = Message.obtain();
                msg.what = 1;
                try {
                    in = openHttpConnection(url);
                    bitmap = BitmapFactory.decodeStream(in);
                    Bundle b = new Bundle();
                    b.putParcelable(&quot;bitmap&quot;, bitmap);
                    msg.setData(b);
                    in.close();
                } catch (IOException e1) {
                    e1.printStackTrace();
                }
                messageHandler.sendMessage(msg);
            }
        }.start();
    }

    private InputStream openHttpConnection(String urlStr) {
        InputStream in = null;
        int resCode;
        try {
            URL url = new URL(urlStr);
            URLConnection urlConn = url.openConnection();
            if (!(urlConn instanceof HttpURLConnection)) {
                throw new IOException(&quot;URL is not an Http URL&quot;);
            }
            HttpURLConnection httpConn = (HttpURLConnection) urlConn;
            httpConn.setAllowUserInteraction(false);
            httpConn.setInstanceFollowRedirects(true);
            httpConn.setRequestMethod(&quot;GET&quot;);
            httpConn.connect();
            resCode = httpConn.getResponseCode();
            if (resCode == HttpURLConnection.HTTP_OK) {
                in = httpConn.getInputStream();
            }
        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return in;
    }

    @SuppressLint(&quot;HandlerLeak&quot;)
    private final Handler messageHandler = new Handler() {
        public void handleMessage(Message msg) {
            super.handleMessage(msg);
            imageView.setImageBitmap(msg.getData().getParcelable(&quot;bitmap&quot;));
        }
<A NAME="680"></A>    }</B></FONT>;

    //=====================================LẤY LOẠI TÀI KHOẢN=====================================//
    public <FONT color="#c57717"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#680',2,'match0-top.html#680',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>String layLoaiTaiKhoan(String taiKhoan, Activity activity) {
        String strLoaiTaiKhoan = null;
        try {
            //Liên kết bảng trên SQL
            classConnect = new ClassConnect();//Mở kết nối SQL
            String sqlLoaiTaiKhoan = &quot;select LoaiTaiKhoan from TB_NguoiDung where TaiKhoan = '&quot;+taiKhoan+&quot;'&quot;;
            ResultSet resultSetLoaiTaiKhoan = classConnect.selectData(activity, sqlLoaiTaiKhoan);
            if (resultSetLoaiTaiKhoan != null &amp;&amp; resultSetLoaiTaiKhoan.next()) {
                strLoaiTaiKhoan = resultSetLoaiTaiKhoan.getString(&quot;LoaiTaiKhoan&quot;);
            }
            classConnect.CONN(activity).close(); //Đóng kết nối đến SQL
        } catch (Exception e) {
            Log.e(&quot;TAG&quot;, e</B></FONT>.getMessage());
        }
<A NAME="681"></A>        return strLoaiTaiKhoan;
    }
    //=====================================LẤY CƠ QUAN=====================================//
    public <FONT color="#c22817"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#681',2,'match0-top.html#681',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>String layCoQuan(String taiKhoan, Activity activity) {
        String strCoQuan = null;
        try {
            //Liên kết bảng trên SQL
            classConnect = new ClassConnect();//Mở kết nối SQL
            String sqlCoQuan = &quot;select MaCoQuan from TB_NguoiDung where TaiKhoan = '&quot;+taiKhoan+&quot;' and LoaiTaiKhoan = 5&quot;;
            ResultSet resultSetCoQuan = classConnect.selectData(activity, sqlCoQuan);
            if (resultSetCoQuan != null &amp;&amp; resultSetCoQuan.next()) {
                strCoQuan = resultSetCoQuan.getString(&quot;MaCoQuan&quot;);
            }
            classConnect.CONN(activity).close(); //Đóng kết nối đến SQL
        } catch (Exception e) {
            Log.e(&quot;TAG&quot;, e</B></FONT>.getMessage());
        }
<A NAME="678"></A>        return strCoQuan;
    }
    //=====================================KIỂM TRA ĐỊNH DẠNG NGÀY THÁNG NĂM=====================================//
    <FONT color="#347235"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#678',2,'match0-top.html#678',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>@SuppressLint(&quot;NewApi&quot;)
    public boolean isValidDate(String date) {
        DateFormat sdf = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;, Locale.getDefault());
        Date testDate;
        try {

            testDate = sdf.parse(date);
        } catch (ParseException e) {
            return false;
        }</B></FONT>
        return sdf.format(Objects.requireNonNull(testDate)).equals(date);
    }

}

</PRE>
<HR>
<H3><CENTER>Class\ConnectionReceiver.java</CENTER></H3><HR>
<PRE>
<A NAME="682"></A><FONT color="#e57ded"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#682',2,'match0-top.html#682',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.Class;

import android.annotation.SuppressLint;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;

public class ConnectionReceiver extends BroadcastReceiver {
    @SuppressLint(&quot;UnsafeProtectedBroadcastReceiver&quot;)
    @Override
    public void onReceive(Context context, Intent intent) {
    }
    public static boolean isConnected() {
        ConnectivityManager
                cm = (ConnectivityManager) WifiApp.getInstance().getApplicationContext()
                .getSystemService(Context.CONNECTIVITY_SERVICE);
        assert cm != null;
        NetworkInfo ni = cm.getActiveNetworkInfo();
        return ni != null &amp;&amp; ni.isConnectedOrConnecting();
    }
}</B></FONT>

</PRE>
<HR>
<H3><CENTER>Class\WifiApp.java</CENTER></H3><HR>
<PRE>
<A NAME="685"></A><FONT color="#d16587"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#685',2,'match0-top.html#685',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.Class;

import android.annotation.SuppressLint;
import android.app.Application;

@SuppressLint(&quot;Registered&quot;)
public class WifiApp extends Application {
    static WifiApp wifiInstance;
    @Override
    public void onCreate() {
        super.onCreate();
        wifiInstance = this;
    }
    public static synchronized WifiApp getInstance() {
        return wifiInstance;
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>CtyCheBien\ClassCtyCheBienThuySan.java</CENTER></H3><HR>
<PRE>
<A NAME="386"></A><FONT color="#348781"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#386',2,'match0-top.html#386',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.CtyCheBien;
public class ClassCtyCheBienThuySan {
    private final Integer intSTT, intLuotThich, intBinhLuan;
    private final String strTaiKhoan, strCoQuan, strSoDienThoai,
            strEmail, strDiaChi, strTenNguoiDung, strMaTinh</B></FONT>, strMaHuyen, strAnh;
    public ClassCtyCheBienThuySan(Integer intSTT ,String strTaiKhoan, String strCoQuan,
                                  String strEmail, String strSoDienThoai,
                                  String strDiaChi, String strTenNguoiDung,
                                  String strMaTinh, String strMaHuyen,
<A NAME="387"></A>                                  Integer intLuotThich, Integer intBinhLuan, String strAnh){
        this.intSTT = intSTT;
        this.strTaiKhoan = strTaiKhoan;
        <FONT color="#152dc6"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#387',2,'match0-top.html#387',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>this.strCoQuan = strCoQuan;
        this.strEmail = strEmail;
        this.strSoDienThoai = strSoDienThoai;
        this.strDiaChi = strDiaChi;
        this.strTenNguoiDung = strTenNguoiDung;
        this.strMaTinh = strMaTinh;
        this.strMaHuyen = strMaHuyen;
        this.intLuotThich = intLuotThich;
        this.intBinhLuan = intBinhLuan;
        this.strAnh = strAnh;
    }
    public Integer getIntSTT() {
        return intSTT;
    }

    public String getStrTaiKhoan() {
        return strTaiKhoan;
    }

    public String getStrCoQuan() {
        return strCoQuan;
    }

    public String getStrEmail() {
        return strEmail;
    }

    public String getStrSoDienThoai() {
        return strSoDienThoai;
    }

    public String getStrDiaChi() {
        return strDiaChi;
    }

    public String getStrTenNguoiDung() {
        return strTenNguoiDung;
    }

    public String getStrMaTinh() {
        return strMaTinh;
    }

    public String getStrMaHuyen() {
        return strMaHuyen;
    }

    public Integer getIntLuotThich() {
        return intLuotThich;
    }</B></FONT>

    public Integer getIntBinhLuan() {
        return intBinhLuan;
    }

    public String getStrAnh() {
        return strAnh;
    }
}
</PRE>
<HR>
<H3><CENTER>CtyCheBien\ClassSanPhamEdit.java</CENTER></H3><HR>
<PRE>
<A NAME="595"></A><FONT color="#3bb9ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#595',2,'match0-top.html#595',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.CtyCheBien;


public class ClassSanPhamEdit {
    private final String imgAnh, strMaSanPham, strTenSanPham, strGiaBan, strDonViTinh ,strGioiThieu;
    private final Integer intSTT;
    public ClassSanPhamEdit(Integer intSTT, String imgAnh, String strMaSanPham,
                            String strTenSanPham, String strGiaBan, String strDonViTinh,
                            String strGioiThieu){
        this.intSTT = intSTT;
        this.imgAnh = imgAnh;
        this.strMaSanPham = strMaSanPham;
        this.strTenSanPham = strTenSanPham;
        this.strGiaBan = strGiaBan;
        this.strDonViTinh = strDonViTinh;
        this.strGioiThieu = strGioiThieu;
    }

    public Integer getIntSTT() {
        return intSTT;
    }

    public String getImgAnh() {
        return imgAnh;
    }

    public String getStrMaSanPham() {
        return strMaSanPham;
    }

    public String getStrTenSanPham() {
        return strTenSanPham;
    }

    public String getStrGiaBan() {
        return strGiaBan;
    }

    public String getStrDonViTinh() {
        return strDonViTinh;
    }

    public String getStrGioiThieu() {
        return strGioiThieu;
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>CtyCheBien\ClassSanPhamView.java</CENTER></H3><HR>
<PRE>
package com.example.basa.CtyCheBien;

public class ClassSanPhamView {
    private final String ImgAnh, strTenSanPham, strGiaBan, strDonViTinh ,strGioiThieu;
<A NAME="551"></A>    private final Integer IntSTT;
    public ClassSanPhamView(Integer IntSTT, String ImgAnh, String strTenSanPham,
                            String strGiaBan, String strDonViTinh , String strGioiThieu){
        <FONT color="#faafba"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#551',2,'match0-top.html#551',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>this.IntSTT = IntSTT;
        this.ImgAnh = ImgAnh;
        this.strTenSanPham = strTenSanPham;
        this.strGiaBan = strGiaBan;
        this.strDonViTinh = strDonViTinh;
        this.strGioiThieu = strGioiThieu;
    }

    public Integer getIntSTT() {
        return IntSTT;
    }

    public String getImgAnh() {
        return ImgAnh;
    }

    public String getStrTenSanPham() {
        return strTenSanPham;
    }

    public String getStrGiaBan() {
        return strGiaBan;
    }

    public String getStrDonViTinh() {
        return strDonViTinh;
    }

    public String getStrGioiThieu() {
        return strGioiThieu;
    }</B></FONT>
}
</PRE>
<HR>
<H3><CENTER>CtyCheBien\FragmentCtyCheBienThuySan.java</CENTER></H3><HR>
<PRE>
<A NAME="10"></A><FONT color="#b041ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#10',2,'match0-top.html#10',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.CtyCheBien;

import android.annotation.SuppressLint;
import android.content.Context;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.speech.tts.TextToSpeech;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ImageButton;
import android.widget.ListView;
import android.widget.SearchView;
import android.widget.Spinner;
import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;

import com.example.basa.Class.ClassConnect;
import com.example.basa.Class.ClassPublic;
import com.example.basa.Home.FragmentHome;
import com.example.basa.R;
import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.Objects;

import static com.example.basa.Home.MainActivity.MyPREFERENCES;
import static com.example.basa.Home.MainActivity.User;

public class FragmentCtyCheBienThuySan extends Fragment implements SearchView.OnQueryTextListener {
    //Khai Báo
    String strTaiKhoan;
    private ListView listView</B></FONT>;
    private SearchView searchTen;
<A NAME="609"></A>    private ImageButton btnQuayLai;
    private final ClassPublic classPublic = new ClassPublic();
    private final ArrayList&lt;String&gt; listMaTinh = new ArrayList&lt;&gt;(); //Khai báo danh sách tỉnh
    private final ArrayList&lt;<FONT color="#faafba"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#609',2,'match0-top.html#609',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>String&gt; listTenTinh = new ArrayList&lt;&gt;();
    private final ArrayList&lt;String&gt; listMaHuyen = new ArrayList&lt;&gt;(); //Khai báo danh sách huyện
    private final ArrayList&lt;String&gt; listTenHuyen = new ArrayList&lt;&gt;();
    public static FragmentManager fragmentManager; //Fragment trang chủ
<A NAME="296"></A>    public static FragmentTransaction fragmentTransaction;
    private ClassConnect classConnect;
    private ListViewCtyCheBienThuySan adapterCtyCheBienThuySan;
    private Spinner cmdTinh</B></FONT>, <FONT color="#50ebec"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#296',2,'match0-top.html#296',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>cmdHuyen;
    String strMaTinh, ganMaTinh, strMaHuyen, ganMaHuyen;
    int intDieuKienGan;
    TextToSpeech tts;//Thông báo
    SharedPreferences sharedpreferences; //Nhớ tài khoản
    SharedPreferences.Editor editor;
    public static ArrayList&lt;ClassCtyCheBienThuySan&gt; arrayListCtyCheBienThuySan;
    private View view</B></FONT>;
<A NAME="113"></A>    @SuppressLint(&quot;NewApi&quot;)
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);
        view = <FONT color="#4863a0"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#113',2,'match0-top.html#113',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>inflater.inflate(R.layout.fragment_cty_chebien_thuysan, container, false);
        sharedpreferences = this.requireActivity().getSharedPreferences(MyPREFERENCES, Context.MODE_PRIVATE);
        editor = sharedpreferences.edit();
        editor.apply();
        tts = classPublic.DocVanBan(getActivity(),&quot;&quot;);
        strTaiKhoan = sharedpreferences.getString(User,&quot;&quot;);
        layTinhHuyenXa</B></FONT>(strTaiKhoan);
        Bundle bundle = this.getArguments();
        if (bundle != null) {
            intDieuKienGan = 1;
            ganMaTinh = bundle.getString(&quot;MaTinh&quot;);//Lấy mã tỉnh để chuyển về đúng vị trí
            ganMaHuyen = bundle.getString(&quot;MaHuyen&quot;);//Lấy mã huyện để chuyển về đúng vị trí
        }
        else {
            intDieuKienGan = 0;
        }
        layoutAnhXa(); //Ánh xạ các đối tượng trên layout
<A NAME="647"></A>        return view;
    }

    private <FONT color="#f88017"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#647',2,'match0-top.html#647',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>void layTinhHuyenXa(String taikhoan) {
        try {
            classConnect = new ClassConnect();
            String sqlTinhHuyenXa = &quot;select MaTinh, MaHuyen from TB_NguoiDung where TaiKhoan = '&quot;+taikhoan+&quot;'&quot;;
            ResultSet resultSetTinhHuyenXa = classConnect.selectData(getActivity(), sqlTinhHuyenXa);
            if (resultSetTinhHuyenXa != null &amp;&amp; resultSetTinhHuyenXa.next()){
<A NAME="129"></A>                ganMaTinh = resultSetTinhHuyenXa</B></FONT>.getString(&quot;MaTinh&quot;);
                ganMaHuyen = resultSetTinhHuyenXa.getString(&quot;MaHuyen&quot;);
            }
        }<FONT color="#842dce"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#129',2,'match0-top.html#129',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>catch (Exception e){
            Log.e(&quot;TAG&quot;, e.getMessage());
        }
    }

    @SuppressLint({&quot;NewApi&quot;, &quot;UseRequireInsteadOfGet&quot;})
    private void layoutAnhXa() {
        cmdTinh = view.findViewById(R.id.cmdTinh);
        cmdHuyen = view.findViewById(R.id.cmdHuyen);
        listView = view.findViewById(R.id.listView);
        searchTen = view.findViewById(R.id.searchTen);
        btnQuayLai = view.findViewById(R.id.btnQuayLai);
        btnQuayLai</B></FONT>.setOnClickListener(view -&gt; {
            fragmentTransaction = fragmentManager.beginTransaction();
            fragmentTransaction.replace(R.id.fragment_main, new FragmentHome());
            fragmentTransaction.commit();
<A NAME="431"></A>        });
        fragmentManager = Objects.requireNonNull(Objects.requireNonNull(getActivity()).getSupportFragmentManager());//Chuyển đổi giữa các fragment
        loadTinh();
        <FONT color="#87f717"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#431',2,'match0-top.html#431',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>intDieuKienGan = 1;
    }
    @SuppressLint(&quot;NewApi&quot;)
    private void loadTinh() {
        //Danh sách tỉnh
        listMaTinh.clear(); // Xóa danh sách tỉnh
        listTenTinh.clear();
        try {
            classConnect = new ClassConnect(); //Mở kết nối SQL
            String sqlTinh = &quot;select MaTinh, TenTinh from TB_Tinh&quot;;
            ResultSet resultSetTinh = classConnect.selectData(getActivity(), sqlTinh);
            if (resultSetTinh != null) {
                while (resultSetTinh.next()) {
                    listMaTinh.add(resultSetTinh.getString(&quot;MaTinh&quot;));
                    listTenTinh.add(resultSetTinh.getString(&quot;TenTinh&quot;));
<A NAME="491"></A>                }</B></FONT>
                ArrayAdapter dataTinh = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item, listTenTinh);
                dataTinh.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
                <FONT color="#e77471"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#491',2,'match0-top.html#491',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>cmdTinh.setAdapter(dataTinh);
            } else {
                Log.e(&quot;TAG&quot;, &quot;Chưa cập nhật danh sách tỉnh&quot;);
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
        } catch (Exception e) {
            Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
        }
        cmdTinh.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaTinh.isEmpty()) {
<A NAME="233"></A>                    strMaTinh = listMaTinh.get(position);
                    if (intDieuKienGan == 1) {
                        cmdTinh.setSelection(listMaTinh</B></FONT>.indexOf(ganMaTinh));
                        <FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#233',2,'match0-top.html#233',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>strMaTinh = ganMaTinh;
                    }
                    loadHuyen(strMaTinh);//Load huyện theo tỉnh
                }
            }

            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }
    @SuppressLint(&quot;NewApi&quot;)
    private void loadHuyen(String maTinh){
        //Danh sách huyện
        listMaHuyen.clear(); // Xóa danh sách huyện
        listTenHuyen.clear();
        try {
            classConnect = new ClassConnect(); //Mở kết nối SQL
            String sqlHuyen = &quot;select MaHuyen, TenHuyen from TB_Huyen where MaTinh = '&quot;+maTinh+&quot;'&quot;;
            ResultSet resultSetHuyen = classConnect.selectData(getActivity(), sqlHuyen);
            if (resultSetHuyen != null){
                while (resultSetHuyen.next()){
                    listMaHuyen.add(resultSetHuyen.getString(&quot;MaHuyen&quot;));
                    listTenHuyen.add(resultSetHuyen.getString(&quot;TenHuyen&quot;));
                }
                ArrayAdapter&lt;String&gt; dataHuyen = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenHuyen);
                dataHuyen.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
<A NAME="131"></A>                cmdHuyen</B></FONT>.setAdapter(dataHuyen);
            }
            else {
                <FONT color="#3bb9ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#131',2,'match0-top.html#131',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>Log.e(&quot;TAG&quot;, &quot;Chưa cập nhật danh sách huyện&quot;);
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
        }
        cmdHuyen.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaHuyen</B></FONT>.isEmpty()) {
                    strMaHuyen = listMaHuyen.get(position);
                    if (intDieuKienGan == 1) {
                        cmdHuyen.setSelection(listMaHuyen.indexOf(ganMaHuyen));
                        strMaHuyen = ganMaHuyen;
                    }
<A NAME="580"></A>                    loadCtyCheBienThuySan(strMaHuyen);//Load huyện theo tỉnh
                }
                intDieuKienGan = 0;
            <FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#580',2,'match0-top.html#580',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}

            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }
    private void</B></FONT> loadCtyCheBienThuySan(String maHuyen) {
        arrayListCtyCheBienThuySan = new ArrayList&lt;&gt;();
        arrayListCtyCheBienThuySan.clear();
        int intSTT = 1;
        try {
<A NAME="503"></A>            classConnect = new ClassConnect();//Mở kết nối SQL
            String sqlCtyCheBienThuySan = &quot;select Anh, TaiKhoan, LuotThich, CongTy, SoDienThoai, Email, TenTinh, TenHuyen, TenXa, TaiKhoan, nd.MaTinh, nd.MaHuyen from TB_NguoiDung nd, TB_Tinh t, TB_Huyen h, TB_Xa x&quot; +
                    &quot; where nd.MaTinh = t.MaTinh and nd.MaHuyen = h.MaHuyen and nd.MaXa = x.MaXa and nd.LoaiTaiKhoan = 4 and nd.MaHuyen= '&quot;+maHuyen+&quot;' order by nd.LuotThich desc&quot;;
            ResultSet <FONT color="#152dc6"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#503',2,'match0-top.html#503',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>resultSetCtyCheBienThuySan= classConnect.selectData(getActivity(),sqlCtyCheBienThuySan);
            if (resultSetCtyCheBienThuySan != null){
                while (resultSetCtyCheBienThuySan.next()){
                    int intBinhLuan = 0;
                    String sqlBinhLuan = &quot;select count(*) as binhluan from TB_BinhLuan where TaiKhoan = '&quot;+resultSetCtyCheBienThuySan.getString(&quot;TaiKhoan&quot;)+&quot;'&quot;;
                    ResultSet resultSetBinhLuan = classConnect.selectData(getActivity(),sqlBinhLuan);
                    if (resultSetBinhLuan !=null &amp;&amp; resultSetBinhLuan.next()){
                        intBinhLuan = Integer.parseInt(resultSetBinhLuan.getString(&quot;binhluan&quot;));
                    }
<A NAME="247"></A>                    arrayListCtyCheBienThuySan.add(new ClassCtyCheBienThuySan(intSTT ++,resultSetCtyCheBienThuySan.getString(&quot;TaiKhoan&quot;) ,resultSetCtyCheBienThuySan.getString(&quot;CongTy&quot;), resultSetCtyCheBienThuySan.getString(&quot;Email&quot;),
                        resultSetCtyCheBienThuySan.getString(&quot;SoDienThoai&quot;),resultSetCtyCheBienThuySan.getString(&quot;TenXa&quot;).concat(&quot;-&quot;+resultSetCtyCheBienThuySan.getString(&quot;TenHuyen&quot;).concat(&quot;-&quot;+resultSetCtyCheBienThuySan</B></FONT>.getString(&quot;TenTinh&quot;))),
                            resultSetCtyCheBienThuySan.getString(&quot;TaiKhoan&quot;),resultSetCtyCheBienThuySan.getString(&quot;MaTinh&quot;),resultSetCtyCheBienThuySan.getString(&quot;MaHuyen&quot;),resultSetCtyCheBienThuySan.getInt(&quot;LuotThich&quot;),intBinhLuan, resultSetCtyCheBienThuySan.getString(&quot;Anh&quot;)));
                <FONT color="#3bb9ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#247',2,'match0-top.html#247',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
            }
            if (arrayListCtyCheBienThuySan.isEmpty()){
                classPublic.ThongBao(getActivity(), &quot;Chưa cập nhật danh sách cty chế biến thủy sản&quot;);
<A NAME="323"></A>            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối đến SQL
        }catch (Exception e){
            Log</B></FONT>.e(&quot;TAG&quot;, <FONT color="#736aff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#323',2,'match0-top.html#323',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>e.getMessage() );
        }
        adapterCtyCheBienThuySan = new ListViewCtyCheBienThuySan(getContext());
        listView.setAdapter(adapterCtyCheBienThuySan);
        //Xử lí khi nhập vào ô tìm kiếm
        searchTen.setOnQueryTextListener(this);
    }
    @Override
    public boolean onQueryTextSubmit(String query) {
        return false;
    }

    @Override
    public boolean onQueryTextChange(String newText) { //Tìm theo tên cty chế biến
        adapterCtyCheBienThuySan.filter(newText);
        return false;
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>CtyCheBien\FragmentSanPhamEdit.java</CENTER></H3><HR>
<PRE>
<A NAME="220"></A>package com.example.basa.CtyCheBien;

<FONT color="#92c7c7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#220',2,'match0-top.html#220',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.annotation.SuppressLint;
import android.app.AlertDialog;
import android.content.Context;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.ListView;
import android.widget.TextView;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;

import com.example.basa.Class.ClassConnect;
import com.example.basa.Class.ClassPublic;
import com.example.basa.Home.FragmentHome;
import com.example.basa.Menu.FragmentMenu;
import com.example.basa.R;

import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.Objects;

import static com.example.basa.Home.MainActivity.MyPREFERENCES;
import static com.example.basa.Home.MainActivity.User;

public class FragmentSanPhamEdit extends Fragment {
    //Khai báo
    String strTaiKhoan;
    private View view;
    private ImageButton btnAdd, btnQuayLai;
    private ListView listView;
    private final ClassPublic classPublic = new ClassPublic();
    private ClassConnect classConnect;
    private ListViewSanPhamEdit adapterSanPham</B></FONT>;
    public static ArrayList&lt;ClassSanPhamEdit&gt; arrayListSanPham;
    public static FragmentManager fragmentManager; //Fragment trang chủ
    public static FragmentTransaction fragmentTransaction;
    SharedPreferences sharedpreferences; //Nhớ tài khoản
    SharedPreferences.Editor editor;
    //Khai báo các đối tượng trên dialog
    private TextView textTieuDe;
    private EditText editMaSanPham, editTenSanPham, editGiaBan, editDonViTinh, editGioiThieu;
    private Button btnLuuLai, btnXoa, btnDong;
<A NAME="547"></A>    int intDieuKienGan;
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);
        view = <FONT color="#87f717"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#547',2,'match0-top.html#547',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>inflater.inflate(R.layout.fragment_san_pham_edit, container, false);
        sharedpreferences = this.requireActivity().getSharedPreferences(MyPREFERENCES, Context.MODE_PRIVATE);
        editor = sharedpreferences.edit();
        editor.apply();
        strTaiKhoan = sharedpreferences.getString(User,&quot;&quot;);
        layoutAnhXa</B></FONT>(); //Ánh xạ các đối tượng trên layout   loadLoai();
<A NAME="548"></A>        return view;
    }
    @SuppressLint(&quot;NewApi&quot;)
    private <FONT color="#95b9c7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#548',2,'match0-top.html#548',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>void layoutAnhXa() {
        btnAdd = view.findViewById(R.id.btnAdd);
        btnQuayLai = view.findViewById(R.id.btnQuayLai);
        listView = view.findViewById(R.id.listView);
        fragmentManager = Objects.requireNonNull(requireActivity</B></FONT>().getSupportFragmentManager());//Chuyển đổi giữa các fragment
        clickListView();//Sản phẩm trên clickview
        clickButton();
        loadSanPham();
    }
    private void loadSanPham() {
        intDieuKienGan = 0;
        arrayListSanPham = new ArrayList&lt;&gt;();
        arrayListSanPham.clear();
        int intSTT = 1;
        try {
            classConnect = new ClassConnect();//Mở kết nối SQL
            //Liên kết bảng trên SQL
            String strsqlSanPham = &quot;select Anh, TenSanPham, GiaBan, DonViTinh, MaSanPham, GioiThieu from TB_SanPham where TaiKhoan = '&quot;+strTaiKhoan+&quot;' order by masanpham desc&quot;;
<A NAME="562"></A>            ResultSet resultSetSanPham = classConnect.selectData(getActivity(),strsqlSanPham);
            if (resultSetSanPham != null){
                while (resultSetSanPham.next()){
                    <FONT color="#347235"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#562',2,'match0-top.html#562',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>arrayListSanPham.add(new ClassSanPhamEdit(intSTT++, resultSetSanPham.getString(&quot;Anh&quot;), resultSetSanPham.getString(&quot;MaSanPham&quot;),resultSetSanPham.getString(&quot;TenSanPham&quot;),
                            resultSetSanPham.getString(&quot;GiaBan&quot;),resultSetSanPham.getString(&quot;DonViTinh&quot;),
                            resultSetSanPham.getString(&quot;GioiThieu&quot;)));
                }
            }
            if (arrayListSanPham.isEmpty()){
                classPublic.ThongBao(getActivity(),&quot;Bạn chưa thêm bất kì sản phẩm nào&quot;);
            }
<A NAME="704"></A>            classConnect.CONN(getActivity()).close(); //Đóng kết nối đến SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, e</B></FONT>.getMessage() );
        <FONT color="#bce954"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#704',2,'match0-top.html#704',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
        adapterSanPham = new ListViewSanPhamEdit(getContext());
        listView.setAdapter(adapterSanPham);
    }

    private void clickListView() {
        listView</B></FONT>.setOnItemClickListener((parent, view, position, id) -&gt; updateSanPham(position));
    }

    private void clickButton() {
        btnAdd.setOnClickListener(v -&gt; updateSanPham(-1));
        btnQuayLai.setOnClickListener(view -&gt; {
            fragmentTransaction = fragmentManager.beginTransaction();
<A NAME="628"></A>            fragmentTransaction.replace(R.id.fragment_main, new FragmentMenu());
            fragmentTransaction.commit();
        });
    <FONT color="#c57726"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#628',2,'match0-top.html#628',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}

    private void updateSanPham(final int intChiSo) {
        LayoutInflater inflater = getLayoutInflater();
        @SuppressLint(&quot;InflateParams&quot;) View alertLayout = inflater.inflate(R.layout.dialog_san_pham, null);
        textTieuDe = alertLayout.findViewById(R.id.textTieuDe);
        editMaSanPham = alertLayout.findViewById(R.id.editMaSanPham);
        editTenSanPham = alertLayout.findViewById(R.id.editTenSanPham);
        editGiaBan = alertLayout.findViewById(R.id.editGiaBan);
        editDonViTinh = alertLayout.findViewById(R.id.editDonViTinh);
        editGioiThieu = alertLayout.findViewById(R.id.editGioiThieu);
        btnLuuLai = alertLayout.findViewById(R.id.btnLuuLai);
        btnXoa = alertLayout</B></FONT>.findViewById(R.id.btnXoa);
<A NAME="565"></A>        btnDong = alertLayout.findViewById(R.id.btnDong);
        final AlertDialog.Builder alert = new AlertDialog.Builder(getActivity());
        intDieuKienGan = 1;
        <FONT color="#c22817"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#565',2,'match0-top.html#565',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>alert.setView(alertLayout);
        alert.setCancelable(false);
        final AlertDialog dialog = alert.create();
        if (intChiSo == -1) {
            btnXoa.setEnabled(false); //Không cho phép nhấn nút xóa
<A NAME="442"></A>            String strTieuDe = &quot;THÊM MỚI SẢN PHẨM THỦY SẢN&quot;</B></FONT>;
            textTieuDe.setText(strTieuDe);
            editMaSanPham.setText(&quot;&quot;);
            String <FONT color="#ff00ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#442',2,'match0-top.html#442',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>strNut = &quot;THÊM MỚI&quot;; //Đổi text nút lưu lại thành thêm mới
            btnLuuLai.setText(strNut);
        } else {
            btnXoa.setEnabled(true); //Cho phép nhấn nút xóa
            String strTieuDe = &quot;CẬP NHẬT THÔNG TIN SẢN PHẨM THỦY SẢN&quot;;
            textTieuDe.setText(strTieuDe);
            String strNut = &quot;CẬP NHẬT&quot;; //Đổi text nút lưu lại thành cập nhật
            btnLuuLai.setText(strNut);
            editMaSanPham.setText(arrayListSanPham.get(intChiSo).getStrMaSanPham());//Gán mã sản phẩm
            editTenSanPham</B></FONT>.setText(arrayListSanPham.get(intChiSo).getStrTenSanPham()); //Gán tên sản phẩm
            editGiaBan.setText(arrayListSanPham.get(intChiSo).getStrGiaBan());//Gán giá bán
            editDonViTinh.setText(arrayListSanPham.get(intChiSo).getStrDonViTinh());//Gán đơn vị tính
            editGioiThieu.setText(arrayListSanPham.get(intChiSo).getStrGioiThieu());//Gán giới thiệu về sản phẩm
        }
        btnLuuLai.setOnClickListener(v -&gt; {
<A NAME="567"></A>            try {
                if (editTenSanPham.getText().length() != 0) {
                    if (editGiaBan.getText().length() != 0) {
                        <FONT color="#79d867"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#567',2,'match0-top.html#567',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>if (editDonViTinh.getText().length() != 0) {
                            if (editGioiThieu.getText().length() != 0) {
                                String sqlSanPham;
                                if (intChiSo == -1) { //Thêm mới
                                    sqlSanPham = &quot;insert into TB_SanPham(TaiKhoan, TenSanPham, GiaBan, DonViTinh, GioiThieu) values ('&quot;+strTaiKhoan+&quot;',&quot; +
                                            &quot;N'&quot;+editTenSanPham.getText()+&quot;', '&quot;+editGiaBan.getText()+&quot;', N'&quot;+editDonViTinh.getText()+&quot;',&quot; +
                                            &quot;N'&quot;+editGioiThieu.getText()+&quot;')&quot;;
                                } else { //Cập nhật
                                    sqlSanPham = &quot;update TB_SanPham set TenSanPham = N'&quot;+editTenSanPham.getText()+&quot;',&quot; +
                                            &quot;GiaBan = '&quot;+editGiaBan.getText()+&quot;', DonViTinh = N'&quot;+editDonViTinh.getText()+&quot;', GioiThieu = N'&quot;+editGioiThieu.getText()+&quot;' &quot; +
                                            &quot; where MaSanPham = '&quot;+editMaSanPham.getText()+&quot;' &quot;;
                                }
                                classConnect = new ClassConnect(); //Mở kết nối SQL
                                if (classConnect.updateData(getActivity(), sqlSanPham) == 1) {
                                    if (intChiSo == -1) {
                                        classPublic.ThongBao(getActivity(), &quot;Thêm mới sản phẩm thủy sản thành công&quot;);
                                    } else {
                                        classPublic.ThongBao(getActivity(), &quot;Cập nhật sản phẩm thủy sản thành công&quot;);
                                    }
                                    dialog.cancel(); //Đóng dialog sau đó gọi load mới danh sách
                                    loadSanPham</B></FONT>(); //Load lại danh sách
                                }
                            } else {
                                classPublic.ThongBao(getActivity(), &quot;Vui lòng nhập giới thiệu về sản phẩm&quot;);
                            }
                        } else {
                            classPublic.ThongBao(getActivity(), &quot;Vui lòng nhập đơn vị tính&quot;);
                        }
                    } else {
                        classPublic.ThongBao(getActivity(), &quot;Vui lòng nhập giá bán&quot;);
                    }
                } else {
                    classPublic.ThongBao(getActivity(), &quot;Vui lòng nhập tên sản phẩm&quot;);
                }
                classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
            } catch (Exception e) {
                Log.e(&quot;TAG&quot;, e.getMessage());
            }
        });
        btnXoa.setOnClickListener(v -&gt; {
            dialogXoa(arrayListSanPham.get(intChiSo).getStrMaSanPham(), arrayListSanPham.get(intChiSo).getStrTenSanPham());
<A NAME="570"></A>            dialog.cancel();
        });
        btnDong.setOnClickListener(v -&gt; dialog.cancel());
        <FONT color="#c57726"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#570',2,'match0-top.html#570',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>dialog.show(); //Show giao diện cập nhật danh sách sản phẩm
    }
    private void dialogXoa(final String maSanPham, final String tenSanPham){
        //Hiện hộp thoại thông báo xóa sản phẩm
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        builder.setTitle(&quot;XÓA SẢN PHẨM&quot;);
        builder.setMessage(&quot;Bạn có muốn xóa &quot;+tenSanPham+&quot; không?&quot;);
        builder.setIcon(R.drawable.ic_delete);
        builder</B></FONT>.setCancelable(false);
        builder.setPositiveButton(&quot;Đồng ý&quot;, (dialogInterface, i) -&gt; {
            try {
                classConnect = new ClassConnect();
                String sqlAoNuoi = &quot;delete TB_SanPham where MaSanPham = '&quot;+maSanPham+&quot;'&quot;;
                if (classConnect.updateData(getActivity(),sqlAoNuoi)== 1){
                    classPublic.ThongBao(getActivity(),&quot;Xóa sản phẩm &quot;+tenSanPham+&quot; thành công&quot;);
                    loadSanPham();
                }else {
                    classPublic.ThongBao(getActivity(),&quot;Không xóa được &quot;+tenSanPham+&quot; thức ăn&quot;);
                }
            }catch (Exception e){
                Log.e(&quot;TAG&quot;, e.getMessage());
            }
        });
        builder.setNegativeButton(&quot;Hủy bỏ&quot;, (dialogInterface, i) -&gt; dialogInterface.dismiss());
        AlertDialog alertDialog = builder.create();
        alertDialog.show();
    }
}
</PRE>
<HR>
<H3><CENTER>CtyCheBien\FragmentSanPhamView.java</CENTER></H3><HR>
<PRE>
<A NAME="687"></A><FONT color="#8e35ef"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#687',2,'match0-top.html#687',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.CtyCheBien;

import android.annotation.SuppressLint;
import android.app.AlertDialog;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ImageButton;
import android.widget.ListView;
import android.widget.SearchView;
import android.widget.TextView;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;

import com.example.basa.Class.ClassConnect;
import com.example.basa.Class.ClassPublic;
import com.example.basa.R;

import java.sql.ResultSet;
import java.util.ArrayList;

public class FragmentSanPhamView extends Fragment implements SearchView.OnQueryTextListener {
    //Khai báo
    private View view</B></FONT>;
    private TextView textTieuDe, textDiaChi;
    private SearchView searchTen;
    private ListView listView;
    private ImageButton btnCall, btnReturn;
    private String strTaiKhoan, strSoDienThoai, strCoQuan, strMaTinh, strMaHuyen;
    private ListViewSanPhamView adapterSanPhamView;
    private FragmentManager fragmentManager; //Tạo Fragment
    private FragmentTransaction fragmentTransaction;
    private ClassConnect classConnect;
    private final ClassPublic classPublic = new ClassPublic();
    public static ArrayList&lt;ClassSanPhamView&gt; arrayListSanPhamView;
<A NAME="602"></A>    int intDieuKienGan;
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);
        view = <FONT color="#4cc417"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#602',2,'match0-top.html#602',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>inflater.inflate(R.layout.fragment_san_pham_view, container, false);
        Bundle bundle = this.getArguments();
        if (bundle != null) {
            strTaiKhoan = bundle.getString(&quot;TaiKhoan&quot;); //Lấy tên tài khoản được gửi qua từ FragmentCtyCBTS
            strSoDienThoai = bundle</B></FONT>.getString(&quot;SoDienThoai&quot;);//Lấy số điện thoại được gửi qua từ FragmentCtyCBTS
            strCoQuan = bundle.getString(&quot;CongTy&quot;);//Lấy tên cơ quan được gửi quan từ FragmentCtyCBTS
            strMaTinh = bundle.getString(&quot;MaTinh&quot;);//Lấy mã tỉnh để chuyển về đúng vị trí
            strMaHuyen = bundle.getString(&quot;MaHuyen&quot;);//Lẩy mã huyện để chuyển về đúng vị trí
        }
        layoutAnhXa(); //Ánh xạ các đối tượng Layout
<A NAME="646"></A>        return view;
    }
    @SuppressLint(&quot;NewApi&quot;)
    private <FONT color="#bce954"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#646',2,'match0-top.html#646',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>void layoutAnhXa() {
        textTieuDe = view.findViewById(R.id.textTieuDe);
        textDiaChi = view.findViewById(R.id.textDiaChi);
        btnCall = view.findViewById(R.id.btnCall);
        btnReturn = view.findViewById(R.id.btnReturn);
        searchTen = view.findViewById(R.id.searchTen);
        listView = view.findViewById(R.id.listView);
        fragmentManager = requireActivity().getSupportFragmentManager();
        loadTenCty(strTaiKhoan); //Lấy tên Cty theo tên tài khoản
        clickButton();
    }</B></FONT>
    private void clickButton() {
<A NAME="344"></A>        //Liên hệ cơ quan
        btnCall.setOnClickListener(v -&gt; {
        if (strSoDienThoai.length() != 0) {
            <FONT color="#4e8975"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#344',2,'match0-top.html#344',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>if (strSoDienThoai.length() &gt;= 10) {
                //Hiện hộp thoại thông báo
                AlertDialog.Builder builder = new AlertDialog.Builder(getActivity() );
                builder.setTitle(&quot;THÔNG BÁO&quot;);
                builder.setIcon(R.drawable.ic_thongbao);
                builder.setMessage(&quot;Bạn muốn gọi cho &quot; + strCoQuan +&quot; không?&quot;);
                builder</B></FONT>.setCancelable(false);
                builder.setPositiveButton(&quot;Đồng ý&quot;, (dialogInterface, i) -&gt; requireActivity().startActivity (new Intent(Intent.ACTION_DIAL, Uri.parse(&quot;tel: &quot; +strSoDienThoai))));
                builder.setNegativeButton(&quot;Hủy bỏ&quot;, (dialogInterface, i) -&gt; {
<A NAME="633"></A>                    //Đóng hộp thoại thông báo
                    dialogInterface.dismiss();
                });
                AlertDialog alertDialog = <FONT color="#f88158"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#633',2,'match0-top.html#633',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>builder.create();
                alertDialog.show();
            } else {
                classPublic.ThongBao(getActivity(), &quot;Số điện thoại không đúng&quot;);
            }
        }
        else {
            classPublic.ThongBao(getActivity(), &quot;Chưa cập nhật số điện thoại&quot;);
<A NAME="417"></A>        }</B></FONT>
        });
        btnReturn.setOnClickListener(v -&gt; {
            <FONT color="#571b7e"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#417',2,'match0-top.html#417',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>fragmentTransaction = fragmentManager.beginTransaction();
            FragmentCtyCheBienThuySan fragment = new FragmentCtyCheBienThuySan();
            Bundle bundle = new Bundle();
            bundle.putString(&quot;MaTinh&quot;, strMaTinh);
            bundle.putString(&quot;MaHuyen&quot;, strMaHuyen);
            fragment.setArguments(bundle);
            fragmentTransaction.replace(R.id.fragment_main, fragment);
            fragmentTransaction</B></FONT>.commit();
        });
    }
    private void loadTenCty(String taiKhoan) {
        if (!taiKhoan.isEmpty()){
            try {
<A NAME="717"></A>                classConnect = new ClassConnect(); //Mở kết nối đến SQL
                String sqlCty = &quot;select CongTy, TenTinh, TenHuyen, TenXa from TB_NguoiDung nd, TB_Tinh t, TB_Huyen h, TB_Xa x&quot; +
                        &quot; where nd.MaTinh = t.MaTinh and nd.MaHuyen = h.MaHuyen and nd.MaXa = x.MaXa and nd.TaiKhoan = '&quot;+taiKhoan+&quot;'&quot;;
<A NAME="396"></A>                ResultSet <FONT color="#00ff00"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#717',2,'match0-top.html#717',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>resultSetCty = classConnect.selectData(getActivity(), sqlCty);
                if (resultSetCty != null &amp;&amp; resultSetCty.next()){
                    textTieuDe.setText(resultSetCty.getString(&quot;CongTy&quot;));
                    textDiaChi.setText(resultSetCty</B></FONT>.getString(&quot;TenXa&quot;).concat(&quot;-&quot;+<FONT color="#c57726"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#396',2,'match0-top.html#396',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>resultSetCty.getString(&quot;TenHuyen&quot;).concat(&quot;-&quot;+resultSetCty.getString(&quot;TenTinh&quot;))));
                }
                classConnect.CONN(getActivity()).close(); //Đóng kết nối đến SQL
            }catch (Exception e){
                Log</B></FONT>.e(&quot;TAG&quot;, e.getMessage());
            }
        }
        else {
            fragmentTransaction = fragmentManager.beginTransaction();
            fragmentTransaction.replace(R.id.fragment_main, new FragmentCtyCheBienThuySan());
            fragmentTransaction.commit();
        }
        loadSanPham();
    }
    private void loadSanPham() {
        intDieuKienGan = 0;
        arrayListSanPhamView = new ArrayList&lt;&gt;();
        arrayListSanPhamView.clear();
        int intSTT = 1;
        try {
<A NAME="32"></A>            classConnect = new ClassConnect();//Mở kết nối SQL
            //Liên kết bảng trên SQL
            String strsqlSanPhamView = &quot;select Anh, TenSanPham, GiaBan, DonViTinh, GioiThieu from TB_SanPham where TaiKhoan = '&quot;+strTaiKhoan+&quot;'order by MaSanPham desc&quot;;
            ResultSet <FONT color="#82cafa"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#32',2,'match0-top.html#32',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>resultSetSanPhamView = classConnect.selectData(getActivity(),strsqlSanPhamView);
            if (resultSetSanPhamView != null){
                while (resultSetSanPhamView.next()){
                    arrayListSanPhamView.add(new ClassSanPhamView(intSTT ++,resultSetSanPhamView.getString(&quot;Anh&quot;),resultSetSanPhamView.getString(&quot;TenSanPham&quot;),
                            resultSetSanPhamView.getString(&quot;GiaBan&quot;),resultSetSanPhamView.getString(&quot;DonViTinh&quot;),
                            resultSetSanPhamView.getString(&quot;GioiThieu&quot;)));
                }
            }
            if (arrayListSanPhamView.isEmpty()){
                classPublic.ThongBao(getActivity(),&quot;Thông báo! Đang cập nhật danh sách sản phẩm&quot;);
            }
<A NAME="627"></A>            classConnect.CONN(getActivity()).close(); //Đóng kết nối đến SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, e</B></FONT>.getMessage() );
        <FONT color="#d16587"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#627',2,'match0-top.html#627',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
        adapterSanPhamView = new ListViewSanPhamView(getContext());
        listView.setAdapter(adapterSanPhamView);
        //Xử lí khi nhập vào ô tìm kiếm
        searchTen.setOnQueryTextListener(this);
    }
    @Override
    public boolean onQueryTextSubmit(String query) {
        return false;
    }

    @Override
    public boolean onQueryTextChange(String newText) { //Tìm theo sản phẩm
        adapterSanPhamView.filter(newText);
        return false;
    }</B></FONT>
}
</PRE>
<HR>
<H3><CENTER>CtyCheBien\ListViewCtyCheBienThuySan.java</CENTER></H3><HR>
<PRE>
<A NAME="608"></A>package com.example.basa.CtyCheBien;

<FONT color="#717d7d"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#608',2,'match0-top.html#608',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.annotation.SuppressLint;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.Intent;
import android.net.ConnectivityManager;
import android.net.Uri;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.TextView;

import com.example.basa.BinhLuan.FragmentBinhLuan;
import com.example.basa.Class.ClassConnect;
import com.example.basa.Class.ClassPublic;
import com.example.basa.R;

import java.util.ArrayList;
import java.util.Locale;
import java.util.Objects;

public class ListViewCtyCheBienThuySan extends BaseAdapter {
    private final Context mContext;
    private final LayoutInflater inflater;
<A NAME="358"></A>    private ClassPublic classPublic = new ClassPublic();
    private ClassConnect classConnect</B></FONT>;
    private final ArrayList&lt;ClassCtyCheBienThuySan&gt; arraylist;
    public <FONT color="#b041ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#358',2,'match0-top.html#358',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>ListViewCtyCheBienThuySan(Context context) {
        mContext = context;
        inflater = LayoutInflater.from(mContext);
        this.arraylist = new ArrayList&lt;&gt;();
<A NAME="356"></A>        this.arraylist.addAll(FragmentCtyCheBienThuySan.arrayListCtyCheBienThuySan);
    }</B></FONT>
    //Hàm tìm kiếm trên listview
    public <FONT color="#bce954"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#356',2,'match0-top.html#356',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>void filter(String charText) {
        charText = charText.toLowerCase(Locale.getDefault());
        FragmentCtyCheBienThuySan.arrayListCtyCheBienThuySan.clear();
        if (charText.length() == 0) {
            FragmentCtyCheBienThuySan.arrayListCtyCheBienThuySan.addAll(arraylist);
        } else {
            for (ClassCtyCheBienThuySan wp : arraylist) {
                if (wp.getStrCoQuan().toLowerCase(Locale.getDefault()).contains(charText)) {
                    FragmentCtyCheBienThuySan.arrayListCtyCheBienThuySan.add(wp);
                }
            }
        }
<A NAME="399"></A>        notifyDataSetChanged();
    }</B></FONT>
    public static class ViewHolder {
        TextView <FONT color="#b38481"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#399',2,'match0-top.html#399',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>textSTT;
        TextView textCoQuan;
        TextView textSoDienThoai;
        TextView textEmail;
        TextView texDiaChi;
        TextView textBinhLuan, textLuotThich;
        ImageButton btnCall;
        ImageButton btnSanPham;
        ImageButton btnBinhLuan, btnLike;
        ImageView imgCty;
    }
    @Override
    public int getCount() {
        return FragmentCtyCheBienThuySan.arrayListCtyCheBienThuySan.size();
    }

    @Override
    public Object getItem(int position) {
        return FragmentCtyCheBienThuySan.arrayListCtyCheBienThuySan.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @SuppressLint({&quot;InflateParams&quot;, &quot;SetTextI18n&quot;})
    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.listview_cty_chebien_thuysan, null);
            holder.textSTT = convertView.findViewById(R.id.textSTT);
            holder.textCoQuan = convertView.findViewById(R.id.textCoQuan);
            holder.textSoDienThoai = convertView.findViewById(R.id.textSoDienThoai);
            holder.textEmail = convertView.findViewById(R.id.textEmail);
            holder.texDiaChi = convertView.findViewById(R.id.textDiaChi);
            holder.textLuotThich =convertView.findViewById(R.id.textLuotThich);
            holder.textBinhLuan = convertView.findViewById(R.id.textBinhLuan);
            holder.btnCall = convertView.findViewById(R.id.btnCall);
            holder.btnSanPham = convertView.findViewById(R.id.btnSanPham);
            holder.btnLike = convertView.findViewById(R.id.btnLike);
            holder.btnBinhLuan = convertView.findViewById(R.id.btnBinhLuan);
            holder.imgCty = convertView</B></FONT>.findViewById(R.id.imgCty);
            convertView.setTag(holder);
<A NAME="67"></A>        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        String <FONT color="#f88017"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#67',2,'match0-top.html#67',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>soDienThoai = &quot;Số điện thoại : &quot;;
        String diaChi = &quot;&quot;;
        String email = &quot;Email : &quot;;
        //Kiểm tra kết nối đến hosting
        ConnectivityManager connectivityManager = (ConnectivityManager) mContext</B></FONT>.getSystemService (Context.CONNECTIVITY_SERVICE);
        if(Objects.requireNonNull(connectivityManager).getActiveNetworkInfo() != null &amp;&amp; Objects.requireNonNull(connectivityManager.getActiveNetworkInfo()).isAvailable()
                &amp;&amp; connectivityManager.getActiveNetworkInfo().isConnected()) {
            String strAnh = FragmentCtyCheBienThuySan.arrayListCtyCheBienThuySan.get(position).getStrAnh();
            classPublic = new ClassPublic();
            if (!strAnh.isEmpty()) {
                classPublic.downloadImage(&quot;http://hoclamaimai.com/&quot; + strAnh, holder.imgCty); //Load ảnh đại diện
            }
            else {
                holder.imgCty.setImageResource(R.drawable.img_no_image);
            }
        }
        else {
            Log.e(&quot;TAG&quot;,&quot;LỖI! Kết nối đến hosting.&quot;);
        }
        holder.textSTT.setText(FragmentCtyCheBienThuySan.arrayListCtyCheBienThuySan.get(position).getIntSTT()+&quot;.&quot;);
        holder.textBinhLuan.setText(FragmentCtyCheBienThuySan.arrayListCtyCheBienThuySan.get(position).getIntBinhLuan()+&quot; Bình luận&quot;);
        holder.textCoQuan.setText(FragmentCtyCheBienThuySan.arrayListCtyCheBienThuySan.get(position).getStrCoQuan().toUpperCase());
        holder.textSoDienThoai.setText(soDienThoai.concat(FragmentCtyCheBienThuySan.arrayListCtyCheBienThuySan.get(position).getStrSoDienThoai()));
        holder.textEmail.setText(email.concat(FragmentCtyCheBienThuySan.arrayListCtyCheBienThuySan.get(position).getStrEmail()));
<A NAME="655"></A>        holder.texDiaChi.setText(diaChi.concat(FragmentCtyCheBienThuySan.arrayListCtyCheBienThuySan.get(position).getStrDiaChi()));
        holder.btnCall.setOnClickListener(v -&gt; {
        if (arraylist.get(position) != null) {
            if (<FONT color="#800517"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#655',2,'match0-top.html#655',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>arraylist.get(position).getStrSoDienThoai().length() != 0) {
                if (arraylist.get(position).getStrSoDienThoai().length() &gt;= 10) {
                    //Hiện hộp thoại thông báo
                    AlertDialog.Builder builder = new AlertDialog.Builder(mContext);
                    builder.setTitle(&quot;THÔNG BÁO&quot;);
                    builder.setIcon(R.drawable.ic_thongbao);
                    builder.setMessage(&quot;Bạn có muốn gọi cho &quot; + arraylist.get(position).getStrCoQuan()+ &quot; không?&quot;);
                    builder</B></FONT>.setCancelable(false);
                    builder.setPositiveButton(&quot;Đồng ý&quot;, (dialogInterface, i) -&gt; mContext.startActivity (new Intent(Intent.ACTION_DIAL, Uri.parse(&quot;tel: &quot; + arraylist.get(position).getStrSoDienThoai()))));
                    builder.setNegativeButton(&quot;Hủy bỏ&quot;, (dialogInterface, i) -&gt; {
<A NAME="656"></A>                        //Đóng hộp thoại thông báo
                        dialogInterface.dismiss();
                    });
                    AlertDialog <FONT color="#f62817"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#656',2,'match0-top.html#656',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>alertDialog = builder.create();
                    alertDialog.show();
                } else {
                    classPublic.ThongBao((Activity) mContext, &quot;Số điện thoại không đúng&quot;);
                }
            }
            else {
                classPublic.ThongBao((Activity) mContext, &quot;Chưa cập nhật số điện thoại&quot;);
            }</B></FONT>
<A NAME="75"></A>        }
        });
        holder.btnSanPham.setOnClickListener(v -&gt; {
            <FONT color="#800517"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#75',2,'match0-top.html#75',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>FragmentCtyCheBienThuySan.fragmentTransaction = FragmentCtyCheBienThuySan.fragmentManager.beginTransaction();
            FragmentSanPhamView fragment = new FragmentSanPhamView();
            Bundle bundle = new Bundle();
            bundle.putString(&quot;TaiKhoan&quot;, FragmentCtyCheBienThuySan.arrayListCtyCheBienThuySan.get(position).getStrTenNguoiDung());
            bundle.putString(&quot;SoDienThoai&quot;, FragmentCtyCheBienThuySan.arrayListCtyCheBienThuySan.get(position).getStrSoDienThoai());
            bundle.putString(&quot;CongTy&quot;,FragmentCtyCheBienThuySan</B></FONT>.arrayListCtyCheBienThuySan.get(position).getStrCoQuan());
            bundle.putString(&quot;MaTinh&quot;,FragmentCtyCheBienThuySan.arrayListCtyCheBienThuySan.get(position).getStrMaTinh());
            bundle.putString(&quot;MaHuyen&quot;,FragmentCtyCheBienThuySan.arrayListCtyCheBienThuySan.get(position).getStrMaHuyen());
            fragment.setArguments(bundle);
            FragmentCtyCheBienThuySan.fragmentTransaction.replace(R.id.fragment_main,fragment);
<A NAME="90"></A>            FragmentCtyCheBienThuySan.fragmentTransaction.commit();
        });
        holder.btnBinhLuan.setOnClickListener(v -&gt; {
            <FONT color="#82cafa"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#90',2,'match0-top.html#90',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>FragmentCtyCheBienThuySan.fragmentTransaction = FragmentCtyCheBienThuySan.fragmentManager.beginTransaction();//Tại trang chính
            FragmentBinhLuan fragment = new FragmentBinhLuan();//Trang chuyển
            Bundle bundle = new Bundle();
<A NAME="65"></A>            bundle.putInt(&quot;DieuKien&quot;, 2);
            bundle.putString(&quot;TaiKhoan&quot;, FragmentCtyCheBienThuySan.arrayListCtyCheBienThuySan.get(position).getStrTenNguoiDung());
            bundle.putString(&quot;CongTy&quot;, FragmentCtyCheBienThuySan.arrayListCtyCheBienThuySan.get(position).getStrCoQuan());
            bundle.putString(&quot;DiaChi&quot;, <FONT color="#c58917"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#65',2,'match0-top.html#65',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>FragmentCtyCheBienThuySan</B></FONT>.arrayListCtyCheBienThuySan.get(position).getStrDiaChi());
            fragment.setArguments(bundle);
            FragmentCtyCheBienThuySan.fragmentTransaction.replace(R.id.fragment_main,fragment);
            FragmentCtyCheBienThuySan.fragmentTransaction.commit();
        });
        final Integer[] intThich = {FragmentCtyCheBienThuySan.arrayListCtyCheBienThuySan.get(position).getIntLuotThich()};
        holder.textLuotThich.setText(intThich[0] +&quot; Lượt thích&quot;);
        //Click nút thích
        holder</B></FONT>.btnLike.setOnClickListener(v -&gt; { //Click nút lượt thích
<A NAME="66"></A>            try{
                classConnect = new ClassConnect(); //Mở kết nối đến SQL
                String sqlThich = &quot;update TB_NguoiDung set LuotThich = '&quot;+(++intThich[0])+&quot;' where TaiKhoan = '&quot;+FragmentCtyCheBienThuySan.arrayListCtyCheBienThuySan.get(position).getStrTaiKhoan()+&quot;'&quot;;
                <FONT color="#bce954"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#66',2,'match0-top.html#66',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>if (classConnect.updateData((Activity)mContext,sqlThich) == 1){
                    holder.textLuotThich.setText(intThich[0] + &quot; Lượt thích&quot;); //Tăng lượt thích lên 1
                }
                classConnect.CONN((Activity)mContext).close(); //Đóng kết nối đến SQL
            }catch (Exception e){
                Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
            }</B></FONT>
        });
        return convertView;
    }
}
</PRE>
<HR>
<H3><CENTER>CtyCheBien\ListViewSanPhamEdit.java</CENTER></H3><HR>
<PRE>
<A NAME="733"></A>package com.example.basa.CtyCheBien;

<FONT color="#810541"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#733',2,'match0-top.html#733',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.annotation.SuppressLint;
import android.content.Context;
import android.net.ConnectivityManager;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;

import com.example.basa.Class.ClassPublic;
import com.example.basa.R;

import java.text.DecimalFormat;
import java.util.ArrayList;
import java.util.Locale;
import java.util.Objects;

public class ListViewSanPhamEdit extends BaseAdapter {
<A NAME="369"></A>    private final Context mContext;
    private final LayoutInflater inflater</B></FONT>;
    private ClassPublic classPublic;
    private final ArrayList&lt;ClassSanPhamEdit&gt; <FONT color="#00ff00"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#369',2,'match0-top.html#369',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>arraylist;
    public ListViewSanPhamEdit(Context context) {
        mContext = context;
        inflater = LayoutInflater.from(mContext);
        this.arraylist = new ArrayList&lt;&gt;();
        this.arraylist.addAll(FragmentSanPhamEdit.arrayListSanPham);

<A NAME="721"></A>    }
    public static class</B></FONT> ViewHolder {
        TextView textSTT;
        TextView <FONT color="#87f717"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#721',2,'match0-top.html#721',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>textTenSanPham;
        TextView textGiaBan;
        TextView textGioiThieu;
        ImageView imgIcon;
    }
    @Override
    public int getCount() {
        return FragmentSanPhamEdit.arrayListSanPham.size();
    }

    @Override
    public Object getItem(int position) {
        return FragmentSanPhamEdit.arrayListSanPham.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @SuppressLint({&quot;InflateParams&quot;, &quot;SetTextI18n&quot;, &quot;NewApi&quot;})
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.listview_sanpham_edit, null);
            holder.textSTT = convertView.findViewById(R.id.textSTT);
            holder.textTenSanPham = convertView.findViewById(R.id.textTenSanPham);
<A NAME="722"></A>            holder.textGiaBan = convertView.findViewById(R.id.textGiaBan);
            holder.textGioiThieu = convertView</B></FONT>.findViewById(R.id.textGioiThieu);
            holder.imgIcon = convertView.findViewById(R.id.imgIcon);
            <FONT color="#95b9c7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#722',2,'match0-top.html#722',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        Integer intSTT = FragmentSanPhamEdit.arrayListSanPham.get(position).getIntSTT();
        if (intSTT &lt; 10){
            holder</B></FONT>.textSTT.setText(&quot;[0&quot;+intSTT+&quot;]&quot;);
        }
        else {
            holder.textSTT.setText(&quot;[&quot;+intSTT+&quot;]&quot;);
<A NAME="361"></A>        }
        //Kiểm tra kết nối đến hosting
        ConnectivityManager connectivityManager = (ConnectivityManager) mContext.getSystemService (Context.CONNECTIVITY_SERVICE);
<A NAME="587"></A>        if(Objects.requireNonNull(connectivityManager).getActiveNetworkInfo() != null &amp;&amp; <FONT color="#842dce"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#361',2,'match0-top.html#361',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>Objects.requireNonNull(connectivityManager.getActiveNetworkInfo()).isAvailable()
                &amp;&amp; connectivityManager.getActiveNetworkInfo().isConnected()) {
            String strAnh = FragmentSanPhamEdit.arrayListSanPham.get(position).getImgAnh();
            if</B></FONT> (!<FONT color="#c58917"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#587',2,'match0-top.html#587',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>strAnh.isEmpty() || !strAnh.equals(&quot;&quot;)){
                classPublic = new ClassPublic();
                classPublic.downloadImage(&quot;http://hoclamaimai.com/&quot; + strAnh, holder.imgIcon); //Load ảnh từ host
            }
            else {
                holder.imgIcon.setImageResource(R.drawable.img_no_image);
            }
        }
        else {
            Log.e(&quot;TAG&quot;,&quot;LỖI! Kết nối đến hosting.&quot;);
<A NAME="524"></A>        }
        //Hiển thị thêm các chữ này lên
<A NAME="70"></A>        String giaBan = &quot;Giá bán : &quot;</B></FONT>;
        DecimalFormat <FONT color="#77bfc7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#524',2,'match0-top.html#524',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>formatter = new DecimalFormat(&quot;###,###,###&quot;);
        holder.textTenSanPham.setText(FragmentSanPhamEdit.arrayListSanPham.get(position).getStrTenSanPham());
        holder.textGiaBan.setText(giaBan.concat(formatter</B></FONT>.format(Integer.parseInt(FragmentSanPhamEdit.arrayListSanPham.get(position).getStrGiaBan()))).concat(&quot;đ/&quot;+ <FONT color="#3b9c9c"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#70',2,'match0-top.html#70',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>FragmentSanPhamEdit.arrayListSanPham.get(position).getStrDonViTinh()));
        holder.textGioiThieu.setText(FragmentSanPhamEdit.arrayListSanPham.get(position).getStrGioiThieu());
        return convertView;
    }
    public void filter(String charText) {
        charText = charText.toLowerCase(Locale.getDefault());
        FragmentSanPhamEdit.arrayListSanPham.clear();
        if (charText.length() == 0) {
            FragmentSanPhamEdit.arrayListSanPham.addAll(arraylist);
        } else {
            for (ClassSanPhamEdit wp : arraylist) {
                if (wp.getStrTenSanPham().toLowerCase(Locale.getDefault()).contains(charText)) {
                    FragmentSanPhamEdit.arrayListSanPham.add(wp);
                }
            }
        }
        notifyDataSetChanged();
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>CtyCheBien\ListViewSanPhamView.java</CENTER></H3><HR>
<PRE>
package com.example.basa.CtyCheBien;

import android.annotation.SuppressLint;
import android.content.Context;
import android.net.ConnectivityManager;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;

import com.example.basa.Class.ClassPublic;
import com.example.basa.R;

import java.text.DecimalFormat;
import java.util.ArrayList;
import java.util.Locale;
import java.util.Objects;

public class ListViewSanPhamView extends BaseAdapter {
<A NAME="590"></A>    private final Context mContext;
    private final LayoutInflater inflater;
    private ClassPublic classPublic;
    private final ArrayList&lt;ClassSanPhamView&gt; <FONT color="#b041ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#590',2,'match0-top.html#590',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>arraylist;
    public ListViewSanPhamView(Context context) {
        mContext = context;
        inflater = LayoutInflater.from(mContext);
        this.arraylist = new ArrayList&lt;&gt;();
        this.arraylist.addAll(FragmentSanPhamView.arrayListSanPhamView);
<A NAME="735"></A>    }
    public static class</B></FONT> ViewHolder {
        TextView textSTT;
        TextView <FONT color="#152dc6"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#735',2,'match0-top.html#735',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>textTenSanPham;
        TextView textGiaBan;
        TextView textGioiThieu;
        ImageView imgIcon;
    }
    @Override
    public int getCount() {
        return FragmentSanPhamView.arrayListSanPhamView.size();
    }

    @Override
    public Object getItem(int position) {
        return FragmentSanPhamView.arrayListSanPhamView.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @SuppressLint({&quot;InflateParams&quot;, &quot;SetTextI18n&quot;, &quot;NewApi&quot;, &quot;MissingPermission&quot;})
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.listview_sanpham_view, null);
            holder.textSTT = convertView.findViewById(R.id.textSTT);
            holder.textTenSanPham = convertView.findViewById(R.id.textTenSanPham);
            holder.textGiaBan = convertView.findViewById(R.id.textGiaBan);
            holder.textGioiThieu = convertView</B></FONT>.findViewById(R.id.textGioiThieu);
            holder.imgIcon = convertView.findViewById(R.id.imgIcon);
            convertView.setTag(holder);
<A NAME="401"></A>        } else {
            holder = (ViewHolder) convertView.getTag();
        }
       holder.textSTT.setText(<FONT color="#f88158"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#401',2,'match0-top.html#401',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>FragmentSanPhamView.arrayListSanPhamView.get(position).getIntSTT() +&quot;. &quot;);
        //Kiểm tra kết nối đến hosting
        ConnectivityManager connectivityManager = (ConnectivityManager) mContext.getSystemService (Context.CONNECTIVITY_SERVICE);
<A NAME="592"></A>        if(Objects.requireNonNull(connectivityManager).getActiveNetworkInfo() != null &amp;&amp; Objects.requireNonNull(connectivityManager.getActiveNetworkInfo()).isAvailable()
                &amp;&amp; connectivityManager</B></FONT>.getActiveNetworkInfo().isConnected()) {
            String strAnh = FragmentSanPhamView.arrayListSanPhamView.get(position).getImgAnh();
            if (!<FONT color="#3b9c9c"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#592',2,'match0-top.html#592',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>strAnh.isEmpty() || !strAnh.equals(&quot;&quot;)){
                classPublic = new ClassPublic();
                classPublic.downloadImage(&quot;http://hoclamaimai.com/&quot; + strAnh, holder.imgIcon); //Load ảnh từ host
            }
            else {
                holder.imgIcon.setImageResource(R.drawable.img_no_image);
            }
        }
        else {
            Log.e(&quot;TAG&quot;,&quot;LỖI! Kết nối đến hosting.&quot;);
        }
<A NAME="525"></A>        //Hiển thị thêm các chữ này lên
        String giaBan = &quot;Giá bán : &quot;</B></FONT>;
        //Khai báo để tính giá tiền
<A NAME="346"></A>        DecimalFormat <FONT color="#6cc417"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#525',2,'match0-top.html#525',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>formatter = new DecimalFormat(&quot;###,###,###&quot;);
        //Lấy giá trị từ csdl
        holder.textTenSanPham.setText(FragmentSanPhamView.arrayListSanPhamView.get(position).getStrTenSanPham());
        holder.textGiaBan.setText(giaBan.concat(formatter</B></FONT>.format(Integer.parseInt(FragmentSanPhamView.arrayListSanPhamView.get(position).getStrGiaBan()))).concat(&quot;đ/&quot;+ <FONT color="#52d017"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#346',2,'match0-top.html#346',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>FragmentSanPhamView.arrayListSanPhamView.get(position).getStrDonViTinh()));
        holder.textGioiThieu.setText(FragmentSanPhamView.arrayListSanPhamView.get(position).getStrGioiThieu());
        return convertView;
    }
    public void filter(String charText) {
        charText = charText.toLowerCase(Locale.getDefault());
        FragmentSanPhamView.arrayListSanPhamView.clear();
        if (charText.length() == 0) {
            FragmentSanPhamView.arrayListSanPhamView.addAll(arraylist);
        } else {
            for (ClassSanPhamView wp : arraylist) {
                if (wp.getStrTenSanPham().toLowerCase(Locale.getDefault()).contains(charText)) {
                    FragmentSanPhamView.arrayListSanPhamView.add(wp);
                }
            }
        }
        notifyDataSetChanged();
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>CtyThuY\ClassCtyThuY.java</CENTER></H3><HR>
<PRE>
<A NAME="385"></A><FONT color="#810541"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#385',2,'match0-top.html#385',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.CtyThuY;
public class ClassCtyThuY {
    private final String  strTaiKhoan, strCoQuan, strSoDienThoai,
            strEmail, strDiaChi, strTenNguoiDung, strMaTinh, strMaHuyen, strAnh;
    private final Integer intSTT, intLuotThich, intBinhLuan;
    public ClassCtyThuY(Integer intSTT , String strTaiKhoan, String strCoQuan, String strEmail,
                        String strSoDienThoai, String strDiaChi, String strTenNguoiDung,
                        String strMaTinh, String strMaHuyen, Integer intLuotThich,
                        Integer intBinhLuan, String strAnh){
        this.intSTT = intSTT;
        this.strTaiKhoan = strTaiKhoan;
        this.strCoQuan = strCoQuan;
        this.strEmail = strEmail;
        this.strSoDienThoai = strSoDienThoai;
        this.strDiaChi = strDiaChi;
        this.strTenNguoiDung = strTenNguoiDung;
        this.strMaTinh = strMaTinh;
        this.strMaHuyen = strMaHuyen;
        this.intLuotThich = intLuotThich;
        this.intBinhLuan = intBinhLuan;
        this.strAnh = strAnh;
    }

    public Integer getIntSTT() {
        return intSTT;
    }

    public String getStrTaiKhoan() {
        return strTaiKhoan;
    }

    public Integer getIntLuotThich() {
        return intLuotThich;
    }

    public String getStrCoQuan() {
        return strCoQuan;
    }

    public String getStrEmail() {
        return strEmail;
    }

    public String getStrSoDienThoai() {
        return strSoDienThoai;
    }

    public String getStrDiaChi() {
        return strDiaChi;
    }

    public String getStrTenNguoiDung() {
        return strTenNguoiDung;
    }

    public String getStrMaTinh() {
        return strMaTinh;
    }

    public String getStrMaHuyen() {
        return strMaHuyen;
    }

    public Integer getIntBinhLuan() {
        return intBinhLuan;
    }

    public String getStrAnh() {
        return strAnh;
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>CtyThuY\ClassThuocAoNuoi.java</CENTER></H3><HR>
<PRE>
<A NAME="8"></A><FONT color="#bce954"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#8',2,'match0-top.html#8',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.CtyThuY;

public class ClassThuocAoNuoi {
    private final Integer intSTT;
    private final String imgAnh, strTenCongTy, strSoDienThoai, strTenThuoc,
            strTrongLuong, strGiaBan, strDonViTinh</B></FONT> ,strGioiThieu;
    public ClassThuocAoNuoi(Integer intSTT, String imgAnh, String strTenCongTy,
                            String strSoDienThoai, String strTenThuoc,
<A NAME="9"></A>                            String strTrongLuong, String strGiaBan, String strDonViTinh,
                            String strGioiThieu){
        this.intSTT = intSTT;
        <FONT color="#f88017"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#9',2,'match0-top.html#9',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>this.imgAnh = imgAnh;
        this.strTenCongTy = strTenCongTy;
        this.strSoDienThoai = strSoDienThoai;
        this.strTenThuoc = strTenThuoc;
        this.strTrongLuong = strTrongLuong;
        this.strGiaBan = strGiaBan;
        this.strDonViTinh = strDonViTinh;
        this.strGioiThieu = strGioiThieu;
    }

    public Integer getIntSTT() {
        return intSTT;
    }

    public String getImgAnh() {
        return imgAnh;
    }

    public String getStrTenCongTy() {
        return strTenCongTy;
    }

    public String getStrSoDienThoai() {
        return strSoDienThoai;
    }

    public String getStrTenThuoc() {
        return strTenThuoc;
    }

    public String getStrTrongLuong() {
        return strTrongLuong;
    }

    public String getStrGiaBan() {
        return strGiaBan;
    }

    public String getStrDonViTinh() {
        return strDonViTinh;
    }</B></FONT>

    public String getStrGioiThieu() {
        return strGioiThieu;
    }
}
</PRE>
<HR>
<H3><CENTER>CtyThuY\ClassThuocEdit.java</CENTER></H3><HR>
<PRE>
<A NAME="93"></A><FONT color="#41a317"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#93',2,'match0-top.html#93',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.CtyThuY;

public class ClassThuocEdit {
    private final Integer intSTT;
    private final String imgAnh, strMaThuoc, strMaBenh, strTenThuoc,
            strTrongLuongTu, strTrongLuongDen, strGiaBan, strDonViTinh ,strGioiThieu;
    public ClassThuocEdit(Integer intSTT, String imgAnh, String strMaThuoc,
                          String strMaBenh, String strTenThuoc,
                          String strTrongLuongTu, String strTrongLuongDen,
                          String strGiaBan, String strDonViTinh, String strGioiThieu){
        this.intSTT = intSTT;
        this.imgAnh = imgAnh;
        this.strMaThuoc = strMaThuoc;
        this.strMaBenh = strMaBenh;
        this.strTenThuoc = strTenThuoc;
        this.strTrongLuongTu = strTrongLuongTu;
        this.strTrongLuongDen = strTrongLuongDen;
        this.strGiaBan = strGiaBan;
        this.strDonViTinh = strDonViTinh;
        this.strGioiThieu = strGioiThieu;
    }

    public Integer getIntSTT() {
        return intSTT;
    }

    public String getImgAnh() {
        return imgAnh;
    }

    public String getStrMaThuoc() {
        return strMaThuoc;
    }

    public String getStrMaBenh() {
        return strMaBenh;
    }

    public String getStrTenThuoc() {
        return strTenThuoc;
    }

    public String getStrTrongLuongTu() {
        return strTrongLuongTu;
    }

    public String getStrTrongLuongDen() {
        return strTrongLuongDen;
    }

    public String getStrGiaBan() {
        return strGiaBan;
    }

    public String getStrDonViTinh() {
        return strDonViTinh;
    }

    public String getStrGioiThieu() {
        return strGioiThieu;
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>CtyThuY\ClassThuocView.java</CENTER></H3><HR>
<PRE>
<A NAME="294"></A><FONT color="#151b8d"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#294',2,'match0-top.html#294',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.CtyThuY;

public class ClassThuocView {
    private final Integer intSTT;
    private final String imgAnh ,strTenThuoc, strTrongLuong, strGiaBan, strDonViTinh ,strGioiThieu;
    public ClassThuocView(Integer intSTT, String imgAnh, String strTenThuoc,
                          String strTrongLuong, String strGiaBan, String strDonViTinh,
                          String strGioiThieu){
        this.intSTT = intSTT;
        this.imgAnh = imgAnh;
        this.strTenThuoc = strTenThuoc;
        this.strTrongLuong = strTrongLuong;
        this.strGiaBan = strGiaBan;
        this.strDonViTinh = strDonViTinh;
        this.strGioiThieu = strGioiThieu;
    }

    public Integer getIntSTT() {
        return intSTT;
    }

    public String getImgAnh() {
        return imgAnh;
    }

    public String getStrTenThuoc() {
        return strTenThuoc;
    }

    public String getStrTrongLuong() {
        return strTrongLuong;
    }

    public String getStrGiaBan() {
        return strGiaBan;
    }

    public String getStrDonViTinh() {
        return strDonViTinh;
    }

    public String getStrGioiThieu() {
        return strGioiThieu;
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>CtyThuY\FragmentCtyThuY.java</CENTER></H3><HR>
<PRE>
<A NAME="324"></A><FONT color="#827d6b"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#324',2,'match0-top.html#324',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.CtyThuY;

import android.annotation.SuppressLint;
import android.content.Context;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ImageButton;
import android.widget.ListView;
import android.widget.SearchView;
import android.widget.Spinner;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;

import com.example.basa.Class.ClassConnect;
import com.example.basa.Class.ClassPublic;
import com.example.basa.Home.FragmentHome;
import com.example.basa.R;

import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.Objects;

import static com.example.basa.Home.MainActivity.MyPREFERENCES;
import static com.example.basa.Home.MainActivity.User;

public class FragmentCtyThuY extends Fragment implements SearchView.OnQueryTextListener {
    //Khai Báo
    private ListView listView;
<A NAME="495"></A>    private SearchView searchView;
    private final ClassPublic classPublic = new ClassPublic</B></FONT>();
    private final ArrayList&lt;String&gt; listMaTinh = new ArrayList&lt;&gt;(); //Khai báo danh sách tỉnh
    private final ArrayList&lt;<FONT color="#3ea99f"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#495',2,'match0-top.html#495',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>String&gt; listTenTinh = new ArrayList&lt;&gt;();
    private final ArrayList&lt;String&gt; listMaHuyen = new ArrayList&lt;&gt;(); //Khai báo danh sách huyện
    private final ArrayList&lt;String&gt; listTenHuyen = new ArrayList&lt;&gt;();
    private ClassConnect classConnect;
<A NAME="726"></A>    private ListViewCtyThuY adapterCtyThuY;
    private Spinner cmdTinh, cmdHuyen;
    private ImageButton btnQuayLai</B></FONT>;
    String <FONT color="#f9966b"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#726',2,'match0-top.html#726',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>strMaTinh, strMaHuyen, ganMaTinh, ganMaHuyen, strTaiKhoan;
    int intDieuKienGan;
    SharedPreferences sharedpreferences; //Nhớ tài khoản
    SharedPreferences.Editor editor;
    //Khai báo chuyển fragment
    public static FragmentManager fragmentManager; //Fragment trang chủ
    public static FragmentTransaction fragmentTransaction;
    public static ArrayList&lt;ClassCtyThuY&gt; arrayListCtyThuY;
<A NAME="184"></A>    private View view</B></FONT>;
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);
        view = <FONT color="#b041ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#184',2,'match0-top.html#184',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>inflater.inflate(R.layout.fragment_ctythuy_thuysan, container, false);
        sharedpreferences = this.requireActivity().getSharedPreferences(MyPREFERENCES, Context.MODE_PRIVATE);
        editor = sharedpreferences.edit();
        editor.apply();
        strTaiKhoan = sharedpreferences.getString(User,&quot;&quot;);
        layTinhHuyenXa</B></FONT>(strTaiKhoan);
        Bundle bundle = this.getArguments();
        if (bundle != null) {
            intDieuKienGan = 1;
            ganMaTinh = bundle.getString(&quot;MaTinh&quot;);//Lấy mã tỉnh để chuyển về đúng vị trí
            ganMaHuyen = bundle.getString(&quot;MaHuyen&quot;);
        }
        else {
            intDieuKienGan = 0;
        }
        layoutAnhXa(); //Ánh xạ các đối tượng trên layout
<A NAME="15"></A>        return view;
    }

    private <FONT color="#3bb9ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#15',2,'match0-top.html#15',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>void layTinhHuyenXa(String taikhoan) {
        try {
            classConnect = new ClassConnect();
            String sqlTinhHuyenXa = &quot;select MaTinh, MaHuyen from TB_NguoiDung where TaiKhoan = '&quot;+taikhoan+&quot;'&quot;;
            ResultSet resultSetTinhHuyenXa = classConnect.selectData(getActivity(), sqlTinhHuyenXa);
            if (resultSetTinhHuyenXa != null &amp;&amp; resultSetTinhHuyenXa.next()){
                ganMaTinh = resultSetTinhHuyenXa</B></FONT>.getString(&quot;MaTinh&quot;);
                ganMaHuyen = resultSetTinhHuyenXa.getString(&quot;MaHuyen&quot;);
            }
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, e.getMessage());
        }
    }
<A NAME="421"></A>
    @SuppressLint({&quot;NewApi&quot;, &quot;UseRequireInsteadOfGet&quot;})
    private void layoutAnhXa() {
        cmdTinh = <FONT color="#3bb9ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#421',2,'match0-top.html#421',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>view.findViewById(R.id.cmdTinh);
        cmdHuyen = view.findViewById(R.id.cmdHuyen);
        btnQuayLai = view.findViewById(R.id.btnQuayLai);
        btnQuayLai.setOnClickListener(view -&gt; {
            fragmentTransaction = fragmentManager.beginTransaction();
<A NAME="151"></A>            fragmentTransaction</B></FONT>.replace(R.id.fragment_main, new FragmentHome());
            fragmentTransaction.commit();
        });
        <FONT color="#41a317"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#151',2,'match0-top.html#151',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>listView = view.findViewById(R.id.listView);
<A NAME="487"></A>        searchView = view.findViewById(R.id.searchTen);
        fragmentManager = Objects.requireNonNull(Objects.requireNonNull(getActivity</B></FONT>()).getSupportFragmentManager());//Chuyển đổi giữa các fragment
        intDieuKienGan = 1;
        <FONT color="#f660ab"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#487',2,'match0-top.html#487',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>loadTinh();
    }

    @SuppressLint(&quot;NewApi&quot;)
    private void loadTinh(){  //Danh sách tỉnh
        listMaTinh.clear(); // Xóa danh sách tỉnh
        listTenTinh.clear();
        try{
            classConnect = new ClassConnect(); //Mở kết nối SQL
            String sqlTinh = &quot;select MaTinh, TenTinh from TB_Tinh&quot;;
            ResultSet resultSetTinh = classConnect.selectData(getActivity(), sqlTinh);
            if (resultSetTinh != null){
                while (resultSetTinh.next()){
                    listMaTinh.add(resultSetTinh.getString(&quot;MaTinh&quot;));
                    listTenTinh.add(resultSetTinh.getString(&quot;TenTinh&quot;));
<A NAME="159"></A>                }</B></FONT>
                ArrayAdapter dataTinh = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenTinh);
                dataTinh.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
                <FONT color="#c22817"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#159',2,'match0-top.html#159',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>cmdTinh.setAdapter(dataTinh);
            }
            if (listMaTinh.isEmpty()){
                classPublic.ThongBao(getActivity(), &quot;Thông báo! Đang cập nhật danh sách tỉnh/thành phố&quot;);
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
        }
        if (listMaTinh.isEmpty()){ //Nếu chưa nhập tỉnh thì không hiển thị huyện
            listMaHuyen.clear(); // Xóa danh sách huyện
            listTenHuyen.clear();
<A NAME="489"></A>            ArrayAdapter&lt;String&gt; dataHuyen = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenHuyen);
            dataHuyen.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
            cmdHuyen</B></FONT>.setAdapter(dataHuyen);
        <FONT color="#87f717"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#489',2,'match0-top.html#489',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
        cmdTinh.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaTinh.isEmpty()){
                    strMaTinh = listMaTinh.get(position);
                    if (intDieuKienGan == 1){
<A NAME="191"></A>                        cmdTinh.setSelection(listMaTinh</B></FONT>.indexOf(ganMaTinh));
                        strMaTinh = ganMaTinh;
                    }
                    <FONT color="#800517"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#191',2,'match0-top.html#191',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>loadHuyen(strMaTinh);
                }
            }

            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }
    @SuppressLint(&quot;NewApi&quot;)
    private void loadHuyen(String maTinh){ //Danh sách huyện
        listMaHuyen.clear(); // Xóa danh sách huyện
        listTenHuyen.clear();
        try {
            classConnect = new ClassConnect(); //Mở kết nối SQL
            String sqlHuyen = &quot;select MaHuyen, TenHuyen from TB_Huyen where MaTinh = '&quot;+maTinh+&quot;'&quot;;
            ResultSet resultSetHuyen = classConnect.selectData(getActivity(), sqlHuyen);
            if (resultSetHuyen != null){
                while (resultSetHuyen.next()){
                    listMaHuyen.add(resultSetHuyen.getString(&quot;MaHuyen&quot;));
                    listTenHuyen.add(resultSetHuyen.getString(&quot;TenHuyen&quot;));
                }
                ArrayAdapter&lt;String&gt; dataHuyen = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenHuyen);
                dataHuyen.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
                cmdHuyen.setAdapter(dataHuyen);
            }
            if (listMaHuyen.isEmpty()){
                classPublic.ThongBao(getActivity(), &quot;Thông báo! Đang cập nhật danh sách quận/huyện&quot;);
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
        }
        cmdHuyen.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaHuyen</B></FONT>.isEmpty()){
                    strMaHuyen = listMaHuyen.get(position);
                    if (intDieuKienGan == 1) {
                        cmdHuyen.setSelection(listMaHuyen.indexOf(ganMaHuyen));
                        strMaHuyen = ganMaHuyen;
                    }
<A NAME="500"></A>                    loadCtyThuY(strMaHuyen);
                }
                intDieuKienGan = 0; //Bỏ gán giá trị theo csdl
            <FONT color="#ff00ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#500',2,'match0-top.html#500',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}

            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }
    private void</B></FONT> loadCtyThuY(String maHuyen) {
        intDieuKienGan = 0;
<A NAME="340"></A>        arrayListCtyThuY = new ArrayList&lt;&gt;();
        arrayListCtyThuY.clear();
        int intSTT = 1;
        <FONT color="#ff0000"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#340',2,'match0-top.html#340',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>try {
            classConnect = new ClassConnect();//Mở kết nối SQL
            //Liên kết bảng trên SQL
            String sqlCtyThuY = &quot;select Anh, TaiKhoan, CongTy, SoDienThoai, Email, TenTinh, TenHuyen, TenXa, TaiKhoan, nd.MaTinh, nd.MaHuyen, LuotThich from TB_NguoiDung nd, TB_Tinh t, TB_Huyen h, TB_Xa x&quot; +
                    &quot; where nd.MaTinh = t.MaTinh and nd.MaHuyen = h.MaHuyen and nd.MaXa = x.MaXa and nd.LoaiTaiKhoan = 6 and nd.MaHuyen = '&quot;+maHuyen+&quot;' order by nd.LuotThich desc&quot;;
            ResultSet resultSetCtyThuY = classConnect.selectData(getActivity(),sqlCtyThuY);
            if (resultSetCtyThuY != null){
                while (resultSetCtyThuY.next()){
                    int intBinhLuan = 0;
                    String sqlBinhLuan = &quot;select count(*) as binhluan from TB_BinhLuan where TaiKhoan = '&quot;+resultSetCtyThuY.getString(&quot;TaiKhoan&quot;)+&quot;'&quot;;
                    ResultSet resultSetBinhLuan = classConnect.selectData(getActivity(),sqlBinhLuan);
                    if (resultSetBinhLuan !=null &amp;&amp; resultSetBinhLuan.next()){
                        intBinhLuan = Integer.parseInt(resultSetBinhLuan.getString(&quot;binhluan&quot;));
<A NAME="649"></A>                    }
                    //Cộng chuỗi các tên tỉnh huyện xã
                    arrayListCtyThuY.add(new ClassCtyThuY(intSTT++, resultSetCtyThuY.getString(&quot;TaiKhoan&quot;),resultSetCtyThuY.getString(&quot;CongTy&quot;), resultSetCtyThuY.getString(&quot;Email&quot;),
                            resultSetCtyThuY.getString(&quot;SoDienThoai&quot;), resultSetCtyThuY</B></FONT>.getString(&quot;TenXa&quot;).concat(&quot;-&quot;+ resultSetCtyThuY.getString(&quot;TenHuyen&quot;).concat(&quot;-&quot;+<FONT color="#571b7e"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#649',2,'match0-top.html#649',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>resultSetCtyThuY.getString(&quot;TenTinh&quot;))),resultSetCtyThuY.getString(&quot;TaiKhoan&quot;),
                            resultSetCtyThuY.getString(&quot;MaTinh&quot;),resultSetCtyThuY.getString(&quot;MaHuyen&quot;),resultSetCtyThuY.getInt(&quot;LuotThich&quot;),intBinhLuan,resultSetCtyThuY.getString(&quot;Anh&quot;)));
                }
            }
            if (arrayListCtyThuY.isEmpty()){
                classPublic.ThongBao(getActivity(),&quot;Chưa cập nhật danh sách cty thú y&quot;);
<A NAME="504"></A>            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối đến SQL
        }catch</B></FONT> (Exception e){
            <FONT color="#347235"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#504',2,'match0-top.html#504',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>Log.e(&quot;TAG&quot;, e.getMessage() );
        }
        adapterCtyThuY = new ListViewCtyThuY(getContext());
        listView.setAdapter(adapterCtyThuY);
        //Xử lí khi nhập vào ô tìm kiếm
        searchView.setOnQueryTextListener(this);
    }
    @Override
    public boolean onQueryTextSubmit(String query) {
        return false;
    }

    @Override
    public boolean onQueryTextChange(String newText) { //Tìm theo tên CTTA
        adapterCtyThuY.filter(newText);
        return false;
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>CtyThuY\FragmentThuocAoNuoi.java</CENTER></H3><HR>
<PRE>
<A NAME="652"></A>package com.example.basa.CtyThuY;

<FONT color="#f52887"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#652',2,'match0-top.html#652',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.annotation.SuppressLint;
import android.os.Bundle;
import android.speech.tts.TextToSpeech;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ImageButton;
import android.widget.ListView;
import android.widget.TextView;
import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;

import com.example.basa.Benh.FragmentBenhAoNuoi;
import com.example.basa.Class.ClassConnect;
import com.example.basa.Class.ClassPublic;
import com.example.basa.R;

import java.sql.ResultSet;
import java.util.ArrayList;

public class FragmentThuocAoNuoi extends Fragment {
    //Khai báo
    private View view;
<A NAME="11"></A>    private ListView listView</B></FONT>;
    private TextToSpeech tts;
    public static FragmentManager fragmentManager; //Tạo Fragment
    public static FragmentTransaction <FONT color="#571b7e"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#11',2,'match0-top.html#11',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>fragmentTransaction;
    private Integer mMaBenh, mLoaiCa, mTrongLuong;
    private TextView textTenBenh, textPhongTri;
    private ImageButton btnQuayLai;
<A NAME="326"></A>    private ClassConnect classConnect;
    private ListViewThuocAoNuoi adapterThuoc;
    public static ArrayList&lt;ClassThuocAoNuoi&gt; arrayListThuoc;
    private final ClassPublic classPublic</B></FONT> = new <FONT color="#ff00ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#326',2,'match0-top.html#326',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>ClassPublic();

    @SuppressLint(&quot;NewApi&quot;)
<A NAME="13"></A>    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);
        view = inflater.inflate(R.layout.fragment_thuoc_ao_nuoi, container, false);
        fragmentManager = <FONT color="#842dce"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#13',2,'match0-top.html#13',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>requireActivity</B></FONT>().getSupportFragmentManager();
        Bundle bundle = this.getArguments();
        if (bundle != null) {
            mMaBenh = bundle.getInt(&quot;MaBenh&quot;);
            mLoaiCa = bundle.getInt(&quot;LoaiCa&quot;);
            mTrongLuong = bundle.getInt(&quot;TrongLuong&quot;);

<A NAME="55"></A>        }
        else</B></FONT> {
            fragmentTransaction = fragmentManager.beginTransaction();
            <FONT color="#4863a0"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#55',2,'match0-top.html#55',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>fragmentTransaction.replace(R.id.fragment_main, new FragmentBenhAoNuoi());
            fragmentTransaction.commit();
        }
        layoutAnhXa(); //Ánh xạ các đối tượng Layout
        return view;
    }

    private void layoutAnhXa() {
        btnQuayLai = view.findViewById(R.id.btnQuayLai);
        textTenBenh = view.findViewById(R.id.textTenBenh);
        textPhongTri = view.findViewById(R.id.textPhongTri);
        listView = view</B></FONT>.findViewById(R.id.listView);
        loadThuoc(mMaBenh);
        loadThuoc(mLoaiCa, mTrongLuong, mMaBenh);
        clickButton();
    }
<A NAME="332"></A>
    private void loadThuoc(Integer maBenh) {
        if (mMaBenh != 0){
            <FONT color="#c57717"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#332',2,'match0-top.html#332',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>try {
                classConnect = new ClassConnect(); //Mở kết nối đến SQL
                String sqlThuoc = &quot;select * from TB_Benh where MaBenh = '&quot;+maBenh+&quot;'&quot;;
                ResultSet resultSetThuoc = classConnect.selectData(getActivity(), sqlThuoc);
                if (resultSetThuoc != null &amp;&amp; resultSetThuoc.next()){
                    textTenBenh.setText(resultSetThuoc.getString(&quot;TenBenh&quot;));
                    textPhongTri</B></FONT>.setText(resultSetThuoc.getString(&quot;PhongTri&quot;));
                }
                classConnect.CONN(getActivity()).close(); //Đóng kết nối đến SQL
            }catch (Exception e){
                Log.d(&quot;TAG&quot;, e.getMessage());
            }
        }
    }

    private void loadThuoc(Integer loaiCa, Integer trongLuong, Integer maBenh) {
        arrayListThuoc = new ArrayList&lt;&gt;();
        arrayListThuoc.clear();
        int intSTT = 1;
        try {
            classConnect = new ClassConnect();//Mở kết nối SQL
            //Liên kết bảng trên SQL
            String strsqlThuoc = &quot;select * from TB_Thuoc t, TB_NguoiDung nd where t.TaiKhoan = nd.TaiKhoan and LoaiCa = '&quot;+loaiCa+&quot;' and TrongLuongCaTu &lt;='&quot;+trongLuong+&quot;' and '&quot;+trongLuong+&quot;' &lt;= TrongLuongCaDen and MaBenh = '&quot;+maBenh+&quot;' order by GiaBan asc&quot;;
<A NAME="466"></A>            ResultSet resultSetThuoc = classConnect.selectData(getActivity(),strsqlThuoc);
            if (resultSetThuoc != null){
                while (resultSetThuoc.next()){
                    arrayListThuoc.add(new ClassThuocAoNuoi(intSTT ++,<FONT color="#77bfc7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#466',2,'match0-top.html#466',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>resultSetThuoc.getString(&quot;Anh&quot;), resultSetThuoc.getString(&quot;CongTy&quot;), resultSetThuoc.getString(&quot;SoDienThoai&quot;), resultSetThuoc.getString(&quot;TenThuoc&quot;), resultSetThuoc.getString(&quot;TrongLuongCaTu&quot;).concat(&quot;-&quot;+resultSetThuoc.getString(&quot;TrongLuongCaDen&quot;)+&quot;g&quot;),
                            resultSetThuoc.getString(&quot;GiaBan&quot;),resultSetThuoc.getString(&quot;DonViTinh&quot;), resultSetThuoc.getString(&quot;GioiThieu&quot;)));
                }
            }
            if (arrayListThuoc.isEmpty()){
                classPublic.ThongBao(getActivity(),&quot;Thông báo! Đang cập nhật danh sách thuốc&quot;);
            }
<A NAME="693"></A>            classConnect.CONN(getActivity()).close(); //Đóng kết nối đến SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, e</B></FONT>.getMessage() );
        <FONT color="#4863a0"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#693',2,'match0-top.html#693',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
        adapterThuoc = new ListViewThuocAoNuoi(getContext());
        listView.setAdapter(adapterThuoc);
    }
<A NAME="651"></A>
    private void clickButton() {
        btnQuayLai</B></FONT>.setOnClickListener(v -&gt; {
            <FONT color="#842dce"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#651',2,'match0-top.html#651',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>FragmentThuocAoNuoi.fragmentTransaction = FragmentThuocAoNuoi.fragmentManager.beginTransaction();//Tại trang chính
            FragmentBenhAoNuoi fragment = new FragmentBenhAoNuoi();//Trang chuyển
            Bundle bundle = new Bundle();
            bundle.putInt(&quot;TrongLuong&quot;, mTrongLuong);
            bundle.putInt(&quot;LoaiCa&quot;, mLoaiCa);
            fragment.setArguments(bundle);
            FragmentThuocAoNuoi.fragmentTransaction.replace(R.id.fragment_main,fragment);
            FragmentThuocAoNuoi.fragmentTransaction.commit();
        });
    }</B></FONT>
}
</PRE>
<HR>
<H3><CENTER>CtyThuY\FragmentThuocEdit.java</CENTER></H3><HR>
<PRE>
package com.example.basa.CtyThuY;

import android.annotation.SuppressLint;
import android.app.AlertDialog;
import android.content.Context;
import android.content.SharedPreferences;
<A NAME="676"></A>import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
<FONT color="#348781"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#676',2,'match0-top.html#676',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.ListView;
import android.widget.Spinner;
import android.widget.TextView;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;

import com.example.basa.Class.ClassConnect;
import com.example.basa.Class.ClassPublic;
import com.example.basa.Home.FragmentHome;
import com.example.basa.Menu.FragmentMenu;
import com.example.basa.R;

import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.Objects;

import static com.example.basa.Home.MainActivity.MyPREFERENCES;
import static com.example.basa.Home.MainActivity.User;

public class FragmentThuocEdit extends Fragment {
    //Khai báo
    private String strTaiKhoan, strLoaiCa, strBenh;
    private View view;
    private ImageButton btnAdd, btnQuayLai</B></FONT>;
    private ListView listView;
    private final ClassPublic classPublic = new ClassPublic();
    private ClassConnect classConnect;
<A NAME="553"></A>    private ListViewThuocEdit adapterThuoc;
    public static ArrayList&lt;ClassThuocEdit&gt; arrayListThuoc;
    private final ArrayList&lt;String&gt; listMaLoaiCa = new ArrayList&lt;&gt;(); //Khai báo danh sách loại cá giống hay cá thịt
    private final ArrayList&lt;<FONT color="#3ea99f"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#553',2,'match0-top.html#553',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>String&gt; listTenLoaiCa = new ArrayList&lt;&gt;();
    private final ArrayList&lt;String&gt; listMaBenh = new ArrayList&lt;&gt;(); //Khai báo danh sách loại cá giống hay cá thịt
    private final ArrayList&lt;String&gt; listTenBenh = new ArrayList&lt;&gt;();
    private Spinner cmdLoaiCa, cmdLoaiBenh;
    SharedPreferences sharedpreferences; //Nhớ tài khoản
    SharedPreferences.Editor editor;
    public static FragmentManager fragmentManager; //Fragment trang chủ
    public static FragmentTransaction fragmentTransaction;
<A NAME="496"></A>    //Khai báo các đối tượng trên dialog
    private TextView textTieuDe;
    private EditText editMaThuoc, editTenThuoc, editTrongLuongTu, editTrongLuongDen, editGiaBan, editDonViTinh, editGioiThieu;
    private Button btnLuuLai, btnXoa</B></FONT>, <FONT color="#82cafa"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#496',2,'match0-top.html#496',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>btnDong;

    @SuppressLint(&quot;NewApi&quot;)
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);
        view = inflater.inflate(R.layout.fragment_thuoc_edit, container, false);
        sharedpreferences = this</B></FONT>.requireActivity().getSharedPreferences(MyPREFERENCES, Context.MODE_PRIVATE);
        editor = sharedpreferences.edit();
        editor.apply();
        strTaiKhoan = sharedpreferences.getString(User,&quot;&quot;);
        layoutAnhXa(); //Ánh xạ các đối tượng trên layout
        return view;
    }
    @SuppressLint(&quot;NewApi&quot;)
    private void layoutAnhXa() {
        fragmentManager = requireActivity().getSupportFragmentManager();//Chuyển đổi giữa các fragment
        btnAdd = view.findViewById(R.id.btnAdd);
<A NAME="378"></A>        listView = view.findViewById(R.id.listView);
        cmdLoaiCa = view.findViewById(R.id.cmdLoaiCa);
        cmdLoaiBenh = view.findViewById(R.id.cmdLoaiBenh);
        btnQuayLai = <FONT color="#f9966b"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#378',2,'match0-top.html#378',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>view.findViewById(R.id.btnQuayLai);
        btnQuayLai.setOnClickListener(view -&gt; {
            fragmentTransaction = fragmentManager.beginTransaction();
            fragmentTransaction.replace(R.id.fragment_main, new FragmentMenu());
            fragmentTransaction.commit();
        });
        loadLoaiCa();
        loadDanhSachBenh();
        clickButton</B></FONT>();
        clickListView();
    }

    private void clickButton() {
        btnAdd.setOnClickListener(view -&gt; insertThuoc(-1));
    }
    private void clickListView() {
        listView.setOnItemClickListener((parent, view, position, id) -&gt; insertThuoc(position));
<A NAME="300"></A>    }

    private void loadLoaiCa(){
        <FONT color="#b041ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#300',2,'match0-top.html#300',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>listMaLoaiCa.clear(); //Xóa danh sách đang có
        listTenLoaiCa.clear();
        listMaLoaiCa.add(&quot;1&quot;);
<A NAME="561"></A>        listTenLoaiCa.add(&quot;Cá giống&quot;);
        listMaLoaiCa.add(&quot;2&quot;);
        listTenLoaiCa.add(&quot;Cá thịt&quot;);
        ArrayAdapter&lt;String&gt; dataLoaiTaiKhoan = new ArrayAdapter</B></FONT>&lt;&gt;(<FONT color="#152dc6"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#561',2,'match0-top.html#561',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>getActivity(), android.R.layout.simple_spinner_item,listTenLoaiCa);
        dataLoaiTaiKhoan.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
        cmdLoaiCa.setAdapter(dataLoaiTaiKhoan);
        cmdLoaiCa.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaLoaiCa.isEmpty()) {
                    strLoaiCa = listMaLoaiCa.get(position);
                    loadThuoc(strLoaiCa, strBenh);
                }
            }
            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }

        });
    }
    private void</B></FONT> loadThuoc(String loaiCa, String loaiBenh) {
        arrayListThuoc = new ArrayList&lt;&gt;();
        arrayListThuoc.clear();
        int intSTT = 1;
        try {
            classConnect = new ClassConnect();//Mở kết nối SQL
<A NAME="626"></A>            //Liên kết bảng trên SQL
            String strsqlThuoc = &quot;select MaThuoc, MaBenh, TenThuoc, TrongLuongCaTu, TrongLuongCaDen, &quot; +
                    &quot;GiaBan, DonViTinh, GioiThieu, Anh from TB_Thuoc where LoaiCa = '&quot;+ Integer.parseInt(loaiCa) +&quot;' and MaBenh = '&quot;+ Integer.parseInt(loaiBenh) +&quot;' and TaiKhoan = '&quot;+strTaiKhoan+&quot;' order by MaThuoc desc&quot;;
            ResultSet <FONT color="#92c7c7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#626',2,'match0-top.html#626',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>resultSetThuoc = classConnect.selectData(getActivity(),strsqlThuoc);
            if (resultSetThuoc != null){
                while (resultSetThuoc.next()){
                    arrayListThuoc.add(new ClassThuocEdit(intSTT ++,resultSetThuoc.getString(&quot;Anh&quot;), resultSetThuoc.getString(&quot;MaThuoc&quot;), resultSetThuoc.getString(&quot;MaBenh&quot;), resultSetThuoc.getString(&quot;TenThuoc&quot;), resultSetThuoc.getString(&quot;TrongLuongCaTu&quot;),resultSetThuoc.getString(&quot;TrongLuongCaDen&quot;),
                            resultSetThuoc.getString(&quot;GiaBan&quot;),resultSetThuoc.getString(&quot;DonViTinh&quot;), resultSetThuoc.getString(&quot;GioiThieu&quot;)));
                }
            }
            if (arrayListThuoc.isEmpty()){
                classPublic.ThongBao(getActivity(),&quot;Thông báo! Đang cập nhật danh sách thuốc&quot;);
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối đến SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, e</B></FONT>.getMessage() );
        }
        adapterThuoc = new ListViewThuocEdit(getContext());
<A NAME="479"></A>        listView.setAdapter(adapterThuoc);
    }

    private <FONT color="#3bb9ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#479',2,'match0-top.html#479',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>void insertThuoc(final int intChiSo) {
        LayoutInflater inflater = getLayoutInflater();
        @SuppressLint(&quot;InflateParams&quot;) View alertLayout = inflater.inflate(R.layout.dialog_thuoc, null);
        textTieuDe = alertLayout.findViewById(R.id.textTieuDe);
        editMaThuoc = alertLayout.findViewById(R.id.editMaThuoc);
        editTenThuoc = alertLayout.findViewById(R.id.editTenThuoc);
        editTrongLuongTu = alertLayout.findViewById(R.id.editTrongLuongTu);
        editTrongLuongDen = alertLayout.findViewById(R.id.editTrongLuongDen);
        editGiaBan = alertLayout.findViewById(R.id.editGiaBan);
        editDonViTinh = alertLayout.findViewById(R.id.editDonViTinh);
        editGioiThieu = alertLayout.findViewById(R.id.editGioiThieu);
        btnLuuLai = alertLayout.findViewById(R.id.btnLuuLai);
        btnXoa = alertLayout.findViewById(R.id.btnXoa);
        btnDong = alertLayout.findViewById(R.id.btnDong);
        final AlertDialog.Builder alert = new AlertDialog.Builder(getActivity());
        alert.setView(alertLayout);
        alert.setCancelable(false);
        final AlertDialog dialog = alert.create();
        if (intChiSo == -1) {
<A NAME="306"></A>            btnXoa.setEnabled(false); //Không cho phép nhấn nút xóa
            String strTieuDe = &quot;THÊM MỚI THUỐC ĐẶC TRỊ&quot;;
            textTieuDe</B></FONT>.setText(strTieuDe);
            <FONT color="#3090c7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#306',2,'match0-top.html#306',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>editMaThuoc.setText(&quot;&quot;);
            String strNut = &quot;THÊM MỚI&quot;; //Đổi text nút lưu lại thành thêm mới
            btnLuuLai.setText(strNut);
        } else {
            btnXoa.setEnabled(true); //Cho phép nhấn nút xóa
            String strTieuDe = &quot;CẬP NHẬT THUỐC ĐẶC TRỊ&quot;;
            textTieuDe.setText(strTieuDe);
            String strNut = &quot;CẬP NHẬT&quot;; //Đổi text nút lưu lại thành cập nhật
            btnLuuLai.setText(strNut);
<A NAME="604"></A>            editMaThuoc.setText(arrayListThuoc.get(intChiSo).getStrMaThuoc());
            editTenThuoc.setText(arrayListThuoc.get(intChiSo).getStrTenThuoc()); //Gán giá trị tên thức ăn
            editTrongLuongTu.setText(arrayListThuoc.get(intChiSo).getStrTrongLuongTu());//Gán giá trị trọng lượng
            editTrongLuongDen.setText(<FONT color="#ada96e"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#604',2,'match0-top.html#604',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>arrayListThuoc</B></FONT>.get(intChiSo).getStrTrongLuongDen());//Gán giá trị trọng lượng
            editGiaBan.setText(arrayListThuoc.get(intChiSo).getStrGiaBan());//Gán giá trị giá bán
            editDonViTinh.setText(arrayListThuoc.get(intChiSo).getStrDonViTinh());//Gán giá trị đơn vị tính
            editGioiThieu.setText(arrayListThuoc</B></FONT>.get(intChiSo).getStrGioiThieu());//Gán giá trị giới thiệu về thức ăn
        }
        btnLuuLai.setOnClickListener(v -&gt; {
            try {
                if (editTenThuoc.getText().length() != 0) {
                    if (editTrongLuongTu.getText().length() != 0) {
                        if (editTrongLuongDen.getText().length() != 0) {
                            if (editGiaBan.getText().length() != 0) {
                                if (editDonViTinh.getText().length() != 0) {
                                    if (editGioiThieu.getText().length() != 0) {
                                        String sqlThuoc;
<A NAME="194"></A>                                        if (intChiSo == -1) { //Thêm mới
                                            sqlThuoc = &quot;insert into TB_Thuoc (TenThuoc, TaiKhoan, MaBenh, LoaiCa, TrongLuongCaTu, TrongLuongCaDen, GiaBan, DonViTinh, GioiThieu) values &quot; +
                                                    &quot;(N'&quot; + editTenThuoc.getText() + &quot;', '&quot; + strTaiKhoan + &quot;', '&quot;+ strBenh +&quot;', '&quot; + Integer.parseInt(strLoaiCa) + &quot;', '&quot;+ editTrongLuongTu.getText() +&quot;',&quot; +
<A NAME="482"></A>                                                    &quot;'&quot;+ <FONT color="#d4a017"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#194',2,'match0-top.html#194',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>editTrongLuongDen.getText().toString() +&quot;', '&quot;+ editGiaBan.getText().toString() +&quot;', N'&quot;+ editDonViTinh.getText().toString() +&quot;', N'&quot;+ editGioiThieu.getText().toString() +&quot;')&quot;;
                                        } else {
                                            sqlThuoc = &quot;update TB_Thuoc set TenThuoc = N'&quot;+editTenThuoc.getText()+&quot;', TrongLuongCaTu = '&quot;+editTrongLuongTu.getText().toString()+&quot;',&quot; +
                                                    &quot; TrongLuongCaDen = '&quot;+ editTrongLuongDen</B></FONT>.getText().toString() +&quot;', GiaBan = '&quot;+ <FONT color="#f62817"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#482',2,'match0-top.html#482',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>editGiaBan.getText().toString() +&quot;', DonViTinh = N'&quot;+ editDonViTinh.getText().toString() +&quot;', GioiThieu = N'&quot;+ editGioiThieu.getText() +&quot;' where MaThuoc = '&quot;+ editMaThuoc.getText() +&quot;' and &quot; +
                                                    &quot;LoaiCa = '&quot;+Integer.parseInt(strLoaiCa)+&quot;' and MaBenh = '&quot;+ Integer.parseInt(strBenh) +&quot;'&quot;;
                                        }
                                        classConnect = new ClassConnect(); //Mở kết nối SQL
                                        if (classConnect.updateData(getActivity(), sqlThuoc) == 1) {
                                            if (intChiSo == -1) {
                                                classPublic.ThongBao(getActivity(), &quot;Thêm mới thức ăn thủy sản thành công&quot;);
                                            } else {
                                                classPublic.ThongBao(getActivity(), &quot;Cập nhật thức ăn thành công&quot;);
                                            }
                                            dialog.cancel(); //Đóng dialog sau đó gọi load mới danh sách
                                            loadThuoc</B></FONT>(strLoaiCa, strBenh);
                                        }
                                    } else {
                                        classPublic.ThongBao(getActivity(), &quot;Vui lòng nhập giới thiệu về thức ăn&quot;);
                                    }
                                } else {
                                    classPublic.ThongBao(getActivity(), &quot;Vui lòng nhập đơn vị tính&quot;);
                                }
                            } else {
                                classPublic.ThongBao(getActivity(), &quot;Vui lòng nhập giá bán&quot;);
                            }
                        } else {
                            classPublic.ThongBao(getActivity(), &quot;Vui lòng nhập trọng lượng&quot;);
                        }
                    } else {
                        classPublic.ThongBao(getActivity(), &quot;Vui lòng nhập trọng lượng&quot;);
                    }
                } else {
                    classPublic.ThongBao(getActivity(), &quot;Vui lòng nhập tên thức ăn&quot;);
                }
                classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
            } catch (Exception e) {
                Log.e(&quot;TAG&quot;, e.getMessage());
            }
        });
        btnXoa.setOnClickListener(v -&gt; {
            dialogXoa(arrayListThuoc.get(intChiSo).getStrMaThuoc(), arrayListThuoc.get(intChiSo).getStrTenThuoc());
<A NAME="447"></A>            dialog.cancel();
        });
        btnDong.setOnClickListener(v -&gt; dialog.cancel());
        <FONT color="#f87a17"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#447',2,'match0-top.html#447',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>dialog.show(); //Show giao diện cập nhật danh sách thức ăn
    }
    private void dialogXoa(final String maThuoc, final String tenThuoc){
        //Hiện hộp thoại thông báo xóa ao nuôi
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        builder.setTitle(&quot;XÓA THUỐC ĐẶC TRỊ&quot;);
        builder.setMessage(&quot;Bạn có muốn xóa &quot;+tenThuoc+&quot; không?&quot;);
<A NAME="571"></A>        builder.setIcon(R.drawable.ic_delete);
        builder</B></FONT>.setCancelable(false);
        builder.setPositiveButton(&quot;Đồng ý&quot;, (dialogInterface, i) -&gt; {
            <FONT color="#8e35ef"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#571',2,'match0-top.html#571',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>try {
                classConnect = new ClassConnect();
                String sqlAoNuoi = &quot;delete TB_Thuoc where MaThuoc = '&quot;+maThuoc+&quot;'&quot;;
                if (classConnect.updateData(getActivity(),sqlAoNuoi)== 1){
                    classPublic.ThongBao(getActivity(),&quot;Thông báo! Xóa thuốc đặc trị thành công&quot;);
                    loadThuoc(strLoaiCa, strBenh);
                }else {
                    classPublic.ThongBao(getActivity(),&quot;Thông báo! Không xóa được thuốc đặc trị&quot;);
                }</B></FONT>
            }catch (Exception e){
                Log.e(&quot;TAG&quot;, e.getMessage());
<A NAME="449"></A>            }
        });
        builder.setNegativeButton(&quot;Hủy bỏ&quot;, (dialogInterface, i) -&gt; dialogInterface.dismiss());
        AlertDialog <FONT color="#c22817"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#449',2,'match0-top.html#449',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>alertDialog = builder.create();
        alertDialog.show();
    }


    @SuppressLint(&quot;NewApi&quot;)
    private void loadDanhSachBenh() {
        listMaBenh.clear(); //Xóa danh sách đang có
        listTenBenh.clear();
        try{
            classConnect = new ClassConnect(); //Mở kết nối SQL
            String sqlAoNuoi = &quot;select MaBenh, TenBenh from TB_Benh&quot;;
            ResultSet resultSetAoNuoi = classConnect.selectData(getActivity(), sqlAoNuoi);
            if (resultSetAoNuoi != null){
                while (resultSetAoNuoi.next()){
                    listMaBenh.add(resultSetAoNuoi.getString(&quot;MaBenh&quot;));
                    listTenBenh.add(resultSetAoNuoi.getString(&quot;TenBenh&quot;));
                }
<A NAME="437"></A>                ArrayAdapter&lt;String&gt; dataAoNuoi = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item, listTenBenh);
                dataAoNuoi.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
                cmdLoaiBenh</B></FONT>.setAdapter(dataAoNuoi);
            <FONT color="#3ea99f"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#437',2,'match0-top.html#437',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
            classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
        }
        cmdLoaiBenh.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaBenh.isEmpty()){
                    strBenh = listMaBenh.get(position);
                    loadThuoc(strLoaiCa, strBenh);
                }
            }

            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }</B></FONT>
}
</PRE>
<HR>
<H3><CENTER>CtyThuY\FragmentThuocView.java</CENTER></H3><HR>
<PRE>
<A NAME="711"></A><FONT color="#3bb9ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#711',2,'match0-top.html#711',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.CtyThuY;

import android.annotation.SuppressLint;
import android.app.AlertDialog;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ImageButton;
import android.widget.ListView;
import android.widget.SearchView;
import android.widget.Spinner;
import android.widget.TextView;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;

import com.example.basa.Class.ClassConnect;
import com.example.basa.Class.ClassPublic;
import com.example.basa.R;

import java.sql.ResultSet;
import java.util.ArrayList;
import</B></FONT> java.util.Objects;
<A NAME="621"></A>
public class FragmentThuocView extends Fragment implements SearchView.OnQueryTextListener {
    //Khai báo
    private View <FONT color="#f87a17"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#621',2,'match0-top.html#621',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>view;
    private TextView textTieuDe, textDiaChi;
    private SearchView searchTen;
    private ListView listView;
    private Spinner cmdLoaiCa, cmdLoaiBenh;
    private ImageButton btnCall, btnReturn;
    private String strTaiKhoan, strLoaiCa, strSoDienThoai, strCoQuan, strMaTinh, strMaHuyen, strTrongLuong, strMaBenh;
    private final ArrayList&lt;String&gt; listMaLoaiCa = new ArrayList&lt;&gt;(); //Khai báo danh sách loại cá giống hay cá thịt
    private final ArrayList&lt;String&gt; listTenLoaiCa = new ArrayList&lt;&gt;();
    private final ArrayList&lt;String&gt; listMaBenh = new ArrayList&lt;&gt;(); //Khai báo danh sách loại cá giống hay cá thịt
    private final ArrayList&lt;String&gt; listTenBenh = new ArrayList</B></FONT>&lt;&gt;();
    private ListViewThuocView adapterThuoc;
    private FragmentManager fragmentManager; //Tạo Fragment
    private FragmentTransaction fragmentTransaction;
    private ClassConnect classConnect;
    private final ClassPublic classPublic = new ClassPublic();
    public static ArrayList&lt;ClassThuocView&gt; arrayListThuoc;
<A NAME="327"></A>    int intDieuKienGan;
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);
        view = <FONT color="#810541"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#327',2,'match0-top.html#327',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>inflater.inflate(R.layout.fragment_thuoc_view, container, false);
        Bundle bundle = this.getArguments();
        if (bundle != null) {
            strTaiKhoan = bundle.getString(&quot;TaiKhoan&quot;); //Lấy tên tài khoản được gửi qua từ FragmentCtyThucAn
            strSoDienThoai = bundle</B></FONT>.getString(&quot;SoDienThoai&quot;);//Lấy số điện thoại được gửi qua từ FragmentCtyThucAn
            strCoQuan = bundle.getString(&quot;CongTy&quot;);//Lấy tên cơ quan được gửi quan từ FragmentCtyThucAn
            strMaTinh = bundle.getString(&quot;MaTinh&quot;);//Lấy mã tỉnh để chuyển về đúng vị trí
            strMaHuyen = bundle.getString(&quot;MaHuyen&quot;);//Lẩy mã huyện để chuyển về đúng vị trí
            strTrongLuong = bundle.getString(&quot;TrongLuong&quot;);
        }
        layoutAnhXa(); //Ánh xạ các đối tượng Layout
        return view;
<A NAME="316"></A>    }

    @SuppressLint({&quot;NewApi&quot;, &quot;UseRequireInsteadOfGet&quot;})
    private <FONT color="#95b9c7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#316',2,'match0-top.html#316',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>void layoutAnhXa() {
        textTieuDe = view.findViewById(R.id.textTieuDe);
<A NAME="603"></A>        textDiaChi = view.findViewById(R.id.textDiaChi);
        btnCall = view.findViewById(R.id.btnCall);
        btnReturn = view</B></FONT>.findViewById(R.id.btnReturn);
        <FONT color="#f660ab"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#603',2,'match0-top.html#603',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>searchTen = view.findViewById(R.id.searchTen);
        listView = view.findViewById(R.id.listView);
        cmdLoaiCa = view.findViewById(R.id.cmdLoaiCa);
        cmdLoaiBenh = view.findViewById(R.id.cmdLoaiBenh);
        fragmentManager = Objects.requireNonNull(getActivity()).getSupportFragmentManager();
        loadTenCtyThuY</B></FONT>(strTaiKhoan); //Lấy tên Cty theo tên tài khoản
        loadLoaiCa();//Load loại cá
        loadDanhSachBenh();
        clickButton();
    }

    private void clickButton() {
        //Liên hệ cơ quan
        btnCall.setOnClickListener(v -&gt; {
<A NAME="538"></A>            if (strSoDienThoai.length() != 0) {
                if (strSoDienThoai.length() &gt;= 10) {
                    //Hiện hộp thoại thông báo
                    AlertDialog.Builder <FONT color="#3090c7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#538',2,'match0-top.html#538',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>builder = new AlertDialog.Builder(getActivity() );
                    builder.setTitle(&quot;THÔNG BÁO&quot;);
                    builder.setIcon(R.drawable.ic_thongbao);
                    builder.setMessage(&quot;Bạn muốn gọi cho &quot; + strCoQuan +&quot; không?&quot;);
                    builder.setCancelable(false);
                    builder.setPositiveButton(&quot;Đồng ý&quot;, (dialogInterface, i) -&gt; Objects</B></FONT>.requireNonNull(getActivity()).startActivity (new Intent(Intent.ACTION_DIAL, Uri.parse(&quot;tel: &quot; +strSoDienThoai))));
                    builder.setNegativeButton(&quot;Hủy bỏ&quot;, (dialogInterface, i) -&gt; {
<A NAME="445"></A>                        //Đóng hộp thoại thông báo
                        dialogInterface.dismiss();
                    });
                    AlertDialog alertDialog = <FONT color="#152dc6"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#445',2,'match0-top.html#445',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>builder.create();
                    alertDialog.show();
                } else {
                    classPublic.ThongBao(getActivity(), &quot;Số điện thoại không đúng&quot;);
                }
            }
            else {
                classPublic.ThongBao(getActivity(), &quot;Chưa cập nhật số điện thoại&quot;);
<A NAME="409"></A>            }</B></FONT>
        });
        btnReturn.setOnClickListener(v -&gt; {
            <FONT color="#6cc417"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#409',2,'match0-top.html#409',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>fragmentTransaction = fragmentManager.beginTransaction();
            FragmentCtyThuY fragment = new FragmentCtyThuY();
            Bundle bundle = new Bundle();
            bundle.putString(&quot;MaTinh&quot;, strMaTinh);
            bundle.putString(&quot;MaHuyen&quot;, strMaHuyen);
            fragment.setArguments(bundle);
            fragmentTransaction.replace(R.id.fragment_main, fragment);
            fragmentTransaction</B></FONT>.commit();
<A NAME="58"></A>        });
    }
    private void loadLoaiCa(){
        <FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#58',2,'match0-top.html#58',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>listMaLoaiCa.clear(); //Xóa danh sách đang có
        listTenLoaiCa.clear();
        listMaLoaiCa.add(&quot;1&quot;);
        listTenLoaiCa.add(&quot;Cá giống&quot;);
        listMaLoaiCa.add(&quot;2&quot;);
        listTenLoaiCa.add(&quot;Cá thịt&quot;);
<A NAME="436"></A>        ArrayAdapter&lt;String&gt; dataLoaiTaiKhoan = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenLoaiCa);
        dataLoaiTaiKhoan.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
        cmdLoaiCa</B></FONT>.setAdapter(dataLoaiTaiKhoan);
        <FONT color="#f9966b"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#436',2,'match0-top.html#436',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>cmdLoaiCa.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaLoaiCa.isEmpty()) {
                    strLoaiCa = listMaLoaiCa.get(position);
                    loadThuoc(); //Load thức ăn
                }
            }
            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }
    @SuppressLint(&quot;NewApi&quot;)
    private void loadDanhSachBenh() {
        listMaBenh.clear(); //Xóa danh sách đang có
        listTenBenh.clear();
        try{
            classConnect = new ClassConnect(); //Mở kết nối SQL
            String sqlAoNuoi = &quot;select MaBenh, TenBenh from TB_Benh&quot;;
            ResultSet resultSetAoNuoi = classConnect.selectData(getActivity(), sqlAoNuoi);
            if (resultSetAoNuoi != null){
                while (resultSetAoNuoi.next()){
                    listMaBenh.add(resultSetAoNuoi.getString(&quot;MaBenh&quot;));
                    listTenBenh.add(resultSetAoNuoi.getString(&quot;TenBenh&quot;));
                }
<A NAME="245"></A>                ArrayAdapter&lt;String&gt; dataAoNuoi = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item, listTenBenh);
                dataAoNuoi.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
                cmdLoaiBenh</B></FONT>.setAdapter(dataAoNuoi);
            <FONT color="#842dce"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#245',2,'match0-top.html#245',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
            classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
        }
        cmdLoaiBenh.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaBenh.isEmpty()){
                    strMaBenh = listMaBenh.get(position);
                    loadThuoc();
                }
            }
            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }
<A NAME="464"></A>
    private void</B></FONT> loadTenCtyThuY(String taiKhoan) {
        if (!taiKhoan.isEmpty()){
            <FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#464',2,'match0-top.html#464',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>try {
                classConnect = new ClassConnect(); //Mở kết nối đến SQL
                String sqlCty = &quot;select CongTy, TenTinh, TenHuyen, TenXa, nd.MaTinh from TB_NguoiDung nd, TB_Tinh t, TB_Huyen h, TB_Xa x&quot; +
                        &quot; where nd.MaTinh = t.MaTinh and nd.MaHuyen = h.MaHuyen and nd.MaXa = x.MaXa and nd.TaiKhoan = '&quot;+taiKhoan+&quot;'&quot;;
<A NAME="435"></A>                ResultSet resultSetCty = classConnect.selectData(getActivity(), sqlCty);
                if (resultSetCty != null &amp;&amp; resultSetCty.next()){
                    textTieuDe.setText(resultSetCty.getString(&quot;CongTy&quot;));
                    textDiaChi</B></FONT>.setText(<FONT color="#faafba"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#435',2,'match0-top.html#435',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>resultSetCty.getString(&quot;TenXa&quot;).concat(&quot;-&quot;+resultSetCty.getString(&quot;TenHuyen&quot;).concat(&quot;-&quot;+resultSetCty.getString(&quot;TenTinh&quot;))));

                }
                classConnect.CONN(getActivity()).close(); //Đóng kết nối đến SQL
            }catch (Exception e){
                Log.e(&quot;TAG&quot;, e</B></FONT>.getMessage());
            }
        }
        else {
            fragmentTransaction = fragmentManager.beginTransaction();
            fragmentTransaction.replace(R.id.fragment_main, new FragmentCtyThuY());
            fragmentTransaction.commit();
        }
    }
    private void loadThuoc() {
        intDieuKienGan = 0;
        arrayListThuoc = new ArrayList&lt;&gt;();
        arrayListThuoc.clear();
        int intSTT = 1;
        try {
            classConnect = new ClassConnect();//Mở kết nối SQL
            //Liên kết bảng trên SQL
            String strsqlThuoc = &quot;select Anh, TenThuoc, TrongLuongCaTu, TrongLuongCaDen, GiaBan, DonViTinh, GioiThieu from TB_Thuoc where TaiKhoan = '&quot;+strTaiKhoan+&quot;' and LoaiCa = '&quot;+strLoaiCa+&quot;'&quot; +
                    &quot;and MaBenh = '&quot;+ Integer.parseInt(strMaBenh) +&quot;' order by mathuoc desc&quot;;
<A NAME="333"></A>            ResultSet resultSetThuoc = classConnect.selectData(getActivity(),strsqlThuoc);
            if (resultSetThuoc != null){
                while (resultSetThuoc.next()){
                    <FONT color="#c22817"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#333',2,'match0-top.html#333',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>arrayListThuoc.add(new ClassThuocView(intSTT ++,resultSetThuoc.getString(&quot;Anh&quot;),resultSetThuoc.getString(&quot;TenThuoc&quot;), resultSetThuoc.getString(&quot;TrongLuongCaTu&quot;).concat(&quot;-&quot;+resultSetThuoc.getString(&quot;TrongLuongCaDen&quot;)+&quot;g&quot;),
                            resultSetThuoc.getString(&quot;GiaBan&quot;),resultSetThuoc.getString(&quot;DonViTinh&quot;), resultSetThuoc.getString(&quot;GioiThieu&quot;)));
                }
            }
            if (arrayListThuoc.isEmpty()){
                classPublic.ThongBao(getActivity(),&quot;Thông báo! Đang cập nhật danh sách thuốc&quot;);
            }
<A NAME="584"></A>            classConnect.CONN(getActivity()).close(); //Đóng kết nối đến SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, e</B></FONT>.getMessage() );
        <FONT color="#151b8d"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#584',2,'match0-top.html#584',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
        adapterThuoc = new ListViewThuocView(getContext());
        listView.setAdapter(adapterThuoc);
        //Xử lí khi nhập vào ô tìm kiếm
        searchTen.setOnQueryTextListener(this);
    }
    @Override
    public boolean onQueryTextSubmit(String query) {
        return false;
    }

    @Override
    public boolean onQueryTextChange(String newText) { //Tìm theo thức ăn
        adapterThuoc.filter(newText);
        return false;
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>CtyThuY\ListViewCtyThuY.java</CENTER></H3><HR>
<PRE>
<A NAME="413"></A>package com.example.basa.CtyThuY;

<FONT color="#c58917"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#413',2,'match0-top.html#413',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.annotation.SuppressLint;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.Intent;
import android.net.ConnectivityManager;
import android.net.Uri;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.TextView;

import com.example.basa.BinhLuan.FragmentBinhLuan;
import com.example.basa.Class.ClassConnect;
import com.example.basa.Class.ClassPublic;
import com.example.basa.R;

import java.util.ArrayList;
import java.util.Locale;
import java.util.Objects;

public class ListViewCtyThuY extends BaseAdapter {
    private final Context mContext;
<A NAME="734"></A>    private final LayoutInflater inflater;
    private ClassPublic classPublic = new ClassPublic();
    private ClassConnect classConnect</B></FONT>;
    private final ArrayList &lt;ClassCtyThuY&gt; <FONT color="#348781"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#734',2,'match0-top.html#734',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>arraylist;
    public ListViewCtyThuY(Context context) {
        mContext = context;
        inflater = LayoutInflater.from(mContext);
        this.arraylist = new ArrayList&lt;&gt;();
<A NAME="80"></A>        this.arraylist.addAll(FragmentCtyThuY.arrayListCtyThuY);
    }</B></FONT>

    public <FONT color="#4cc417"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#80',2,'match0-top.html#80',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>void filter(String charText) {
        charText = charText.toLowerCase(Locale.getDefault());
        FragmentCtyThuY.arrayListCtyThuY.clear();
        if (charText.length() == 0) {
            FragmentCtyThuY.arrayListCtyThuY.addAll(arraylist);
        } else {
            for (ClassCtyThuY wp : arraylist) {
                if (wp.getStrCoQuan().toLowerCase(Locale.getDefault()).contains(charText)) {
                    FragmentCtyThuY.arrayListCtyThuY.add(wp);
                }
            }
        }
<A NAME="83"></A>        notifyDataSetChanged();
    }</B></FONT>

    public static <FONT color="#87f717"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#83',2,'match0-top.html#83',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>class ViewHolder {
        TextView textSTT;
        TextView textCoQuan;
        TextView textSoDienThoai;
        TextView textEmail;
        TextView textDiaChi;
        TextView textBinhLuan, textLuotThich;
        ImageButton btnCall, btnThuoc, btnBinhLuan, btnLike;
        ImageView imgCty;
    }
    @Override
    public int getCount() {
        return FragmentCtyThuY.arrayListCtyThuY.size();
    }

    @Override
    public Object getItem(int position) {
        return FragmentCtyThuY.arrayListCtyThuY.get(position);
    }
    @Override
    public long getItemId(int position) {
        return position;
    }

    @SuppressLint({&quot;InflateParams&quot;, &quot;SetTextI18n&quot;})
    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.listview_cty_thuy, null);
            holder.textSTT = convertView.findViewById(R.id.textSTT);
            holder.textCoQuan = convertView.findViewById(R.id.textCoQuan);
            holder.textSoDienThoai = convertView.findViewById(R.id.textSoDienThoai);
            holder.textEmail = convertView.findViewById(R.id.textEmail);
            holder.textDiaChi = convertView.findViewById(R.id.textDiaChi);
            holder.textLuotThich =convertView.findViewById(R.id.textLuotThich);
            holder.textBinhLuan = convertView.findViewById(R.id.textBinhLuan);
            holder.btnCall = convertView.findViewById(R.id.btnCall);
            holder.btnThuoc = convertView.findViewById(R.id.btnThuoc);
            holder.btnLike = convertView.findViewById(R.id.btnLike);
            holder.btnBinhLuan = convertView.findViewById(R.id.btnBinhLuan);
            holder.imgCty = convertView.findViewById(R.id.imgCty);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        //Kiểm tra kết nối đến hosting
        ConnectivityManager connectivityManager = (ConnectivityManager) mContext</B></FONT>.getSystemService (Context.CONNECTIVITY_SERVICE);
        if(Objects.requireNonNull(connectivityManager).getActiveNetworkInfo() != null &amp;&amp; Objects.requireNonNull(connectivityManager.getActiveNetworkInfo()).isAvailable()
                &amp;&amp; connectivityManager.getActiveNetworkInfo().isConnected()) {
            String strAnh = FragmentCtyThuY.arrayListCtyThuY.get(position).getStrAnh();
            classPublic = new ClassPublic();
            if (!strAnh.isEmpty()) {
                classPublic.downloadImage(&quot;http://hoclamaimai.com/&quot; + strAnh, holder.imgCty); //Load ảnh đại diện
            }
            else {
<A NAME="86"></A>                holder.imgCty.setImageResource(R.drawable.img_no_image);
            }
        }
        <FONT color="#717d7d"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#86',2,'match0-top.html#86',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>else {
            Log.e(&quot;TAG&quot;,&quot;LỖI! Kết nối đến hosting.&quot;);
        }
        holder.textSTT.setText(FragmentCtyThuY.arrayListCtyThuY.get(position).getIntSTT()+&quot;. &quot;);
        holder.textBinhLuan.setText(FragmentCtyThuY.arrayListCtyThuY.get(position).getIntBinhLuan()+&quot; Bình luận&quot;);
        //Hiển thị thêm các chữ này lên
<A NAME="123"></A>        //.toUpperCase : Chuyển sang chữ in hoa hết
        String soDienThoai = &quot;Số điện thoại : &quot;</B></FONT>;
        String email = &quot;Email : &quot;;
        String <FONT color="#c58917"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#123',2,'match0-top.html#123',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>diaChi = &quot;&quot;;
        holder.textDiaChi.setText(diaChi.concat(FragmentCtyThuY.arrayListCtyThuY.get(position).getStrDiaChi()));
        holder.textCoQuan.setText(FragmentCtyThuY.arrayListCtyThuY.get(position).getStrCoQuan().toUpperCase());
        holder.textSoDienThoai.setText(soDienThoai.concat(FragmentCtyThuY</B></FONT>.arrayListCtyThuY.get(position).getStrSoDienThoai()));
<A NAME="76"></A>        holder.textEmail.setText(email.concat(FragmentCtyThuY.arrayListCtyThuY.get(position).getStrEmail()));
        holder.btnCall.setOnClickListener(v -&gt; {
        if (arraylist.get(position) != null) {
            if (<FONT color="#f62817"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#76',2,'match0-top.html#76',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>arraylist.get(position).getStrSoDienThoai().length() != 0) {
                if (arraylist.get(position).getStrSoDienThoai().length() &gt;= 10) {
                    //Hiện hộp thoại thông báo
                    AlertDialog.Builder builder = new AlertDialog.Builder(mContext);
                    builder.setTitle(&quot;THÔNG BÁO&quot;);
                    builder.setIcon(R.drawable.ic_thongbao);
                    builder.setMessage(&quot;Bạn muốn gọi cho &quot; + arraylist.get(position).getStrCoQuan()+&quot; không?&quot;);
                    builder</B></FONT>.setCancelable(false);
                    builder.setPositiveButton(&quot;Đồng ý&quot;, (dialogInterface, i) -&gt; mContext.startActivity (new Intent(Intent.ACTION_DIAL, Uri.parse(&quot;tel: &quot; + arraylist.get(position).getStrSoDienThoai()))));
                    builder.setNegativeButton(&quot;Hủy bỏ&quot;, (dialogInterface, i) -&gt; {
<A NAME="77"></A>                        //Đóng hộp thoại thông báo
                        dialogInterface.dismiss();
                    });
                    AlertDialog <FONT color="#4e9258"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#77',2,'match0-top.html#77',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>alertDialog = builder.create();
                    alertDialog.show();
                } else {
                    classPublic.ThongBao((Activity) mContext, &quot;Số điện thoại không đúng&quot;);
                }
            }
            else {
                classPublic.ThongBao((Activity) mContext, &quot;Chưa cập nhật số điện thoại&quot;);
            }</B></FONT>
<A NAME="78"></A>        }
        });
        holder.btnThuoc.setOnClickListener(v -&gt; {
            <FONT color="#d4a017"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#78',2,'match0-top.html#78',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>FragmentCtyThuY.fragmentTransaction = FragmentCtyThuY.fragmentManager.beginTransaction();//Tại trang chính
            FragmentThuocView fragment = new FragmentThuocView();//Trang chuyển
            Bundle bundle = new Bundle();
            bundle.putString(&quot;TaiKhoan&quot;, FragmentCtyThuY.arrayListCtyThuY.get(position).getStrTenNguoiDung());
            bundle.putString(&quot;SoDienThoai&quot;, FragmentCtyThuY.arrayListCtyThuY.get(position).getStrSoDienThoai());
            bundle.putString(&quot;CongTy&quot;,FragmentCtyThuY.arrayListCtyThuY.get(position).getStrCoQuan());
            bundle.putString(&quot;MaTinh&quot;,FragmentCtyThuY</B></FONT>.arrayListCtyThuY.get(position).getStrMaTinh());
            bundle.putString(&quot;MaHuyen&quot;,FragmentCtyThuY.arrayListCtyThuY.get(position).getStrMaHuyen());
            fragment.setArguments(bundle);
            FragmentCtyThuY.fragmentTransaction.replace(R.id.fragment_main,fragment);
            FragmentCtyThuY.fragmentTransaction.commit();
        });
        holder.btnBinhLuan.setOnClickListener(v -&gt; {
<A NAME="661"></A>            FragmentCtyThuY.fragmentTransaction = FragmentCtyThuY.fragmentManager.beginTransaction();//Tại trang chính
            FragmentBinhLuan fragment = new FragmentBinhLuan();//Trang chuyển
            Bundle bundle = new Bundle();
            <FONT color="#f660ab"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#661',2,'match0-top.html#661',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>bundle.putInt(&quot;DieuKien&quot;, 3);
            bundle.putString(&quot;TaiKhoan&quot;, FragmentCtyThuY.arrayListCtyThuY.get(position).getStrTenNguoiDung());
            bundle.putString(&quot;CongTy&quot;,FragmentCtyThuY.arrayListCtyThuY.get(position).getStrCoQuan());
            bundle.putString(&quot;DiaChi&quot;,FragmentCtyThuY.arrayListCtyThuY.get(position).getStrDiaChi());
            fragment.setArguments(bundle);
            FragmentCtyThuY.fragmentTransaction.replace(R.id.fragment_main,fragment);
            FragmentCtyThuY.fragmentTransaction.commit();
        });
        final Integer[] intThich = {FragmentCtyThuY.arrayListCtyThuY.get(position).getIntLuotThich()};
<A NAME="410"></A>        holder.textLuotThich.setText(intThich[0] +&quot; Lượt thích&quot;);
        //Click nút thích
        holder</B></FONT>.btnLike.setOnClickListener(v -&gt; { //Click nút lượt thích
            <FONT color="#151b8d"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#410',2,'match0-top.html#410',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>try{
                classConnect = new ClassConnect(); //Mở kết nối đến SQL
                String sqlThich = &quot;update TB_NguoiDung set LuotThich = '&quot;+(++intThich[0])+&quot;' where TaiKhoan = '&quot;+FragmentCtyThuY.arrayListCtyThuY.get(position).getStrTaiKhoan()+&quot;'&quot;;
                if (classConnect.updateData((Activity)mContext,sqlThich) == 1){
                    holder.textLuotThich.setText(intThich[0] + &quot; Lượt thích&quot;); //Tăng lượt thích lên 1
                }
                classConnect.CONN((Activity)mContext).close(); //Đóng kết nối đến SQL
            }catch (Exception e){
                Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
            }</B></FONT>
        });
        return convertView;
    }
}
</PRE>
<HR>
<H3><CENTER>CtyThuY\ListViewThuocAoNuoi.java</CENTER></H3><HR>
<PRE>
<A NAME="513"></A><FONT color="#8e35ef"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#513',2,'match0-top.html#513',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.CtyThuY;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.Intent;
import android.net.ConnectivityManager;
import android.net.Uri;
import android.speech.tts.TextToSpeech;
import android.text.Html;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.TextView;

import com.example.basa.Class.ClassPublic;
import com.example.basa.R;

import java.text.DecimalFormat;
import java.util.ArrayList;
import java.util.Objects;

public class ListViewThuocAoNuoi extends BaseAdapter {
    private final Context mContext;
<A NAME="72"></A>    private ClassPublic classPublic</B></FONT>;
    private final LayoutInflater inflater;
    private TextToSpeech tts;
    private final ArrayList&lt;ClassThuocAoNuoi&gt; <FONT color="#f52887"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#72',2,'match0-top.html#72',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>arraylist;
    public ListViewThuocAoNuoi(Context context) {
        mContext = context;
        inflater = LayoutInflater.from(mContext);
        this.arraylist = new ArrayList&lt;&gt;();
        this.arraylist.addAll(FragmentThuocAoNuoi.arrayListThuoc);

    }
    public static class ViewHolder {
        TextView textSTT, textTenCongTy, textTenThuoc, textTrongLuong, textGiaBan, textGioiThieu;
        ImageView imgIcon;
        ImageButton btnCall, btnVolumeUp, btnVolumeOff;
    }
    @Override
    public int getCount() {
        return FragmentThuocAoNuoi.arrayListThuoc.size();
    }

    @Override
    public Object getItem(int position) {
        return FragmentThuocAoNuoi.arrayListThuoc.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @SuppressLint({&quot;InflateParams&quot;, &quot;SetTextI18n&quot;, &quot;NewApi&quot;, &quot;MissingPermission&quot;})
    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.listview_thuoc_aonuoi, null);
            holder.textSTT = convertView.findViewById(R.id.textSTT);
            holder.textTenCongTy = convertView.findViewById(R.id.textTenCty);
            holder.textTenThuoc = convertView.findViewById(R.id.textTenThuoc);
            holder.textTrongLuong = convertView.findViewById(R.id.textTrongLuong);
            holder.textGiaBan = convertView.findViewById(R.id.textGiaBan);
            holder.textGioiThieu = convertView.findViewById(R.id.textGioiThieu);
            holder.imgIcon = convertView.findViewById(R.id.imgIcon);
            holder.btnCall = convertView.findViewById(R.id.btnCall);
            holder.btnVolumeUp = convertView.findViewById(R.id.btnVolumeUp);
            holder.btnVolumeOff = convertView.findViewById(R.id.btnVolumeOff);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }</B></FONT>
        Integer intSTT = FragmentThuocAoNuoi.arrayListThuoc.get(position).getIntSTT();
        if (intSTT &lt; 10){
<A NAME="736"></A>            holder.textSTT.setText(&quot;[0&quot;+intSTT+&quot;]&quot;);
        }
        else {
            <FONT color="#347235"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#736',2,'match0-top.html#736',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>holder.textSTT.setText(&quot;[&quot;+intSTT+&quot;]&quot;);
        }
        String strAnh = FragmentThuocAoNuoi.arrayListThuoc.get(position).getImgAnh();
        if (strAnh.equals(&quot;&quot;)){
            holder</B></FONT>.imgIcon.setImageResource(R.drawable.img_no_image);
<A NAME="64"></A>        }
        else {
            //Kiểm tra kết nối đến hosting
            ConnectivityManager <FONT color="#50ebec"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#64',2,'match0-top.html#64',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>connectivityManager = (ConnectivityManager) mContext.getSystemService(Context.CONNECTIVITY_SERVICE);
            if (Objects.requireNonNull(connectivityManager).getActiveNetworkInfo() != null &amp;&amp; Objects.requireNonNull(connectivityManager.getActiveNetworkInfo()).isAvailable()
                    &amp;&amp; connectivityManager.getActiveNetworkInfo().isConnected()) {
                classPublic = new ClassPublic();
                classPublic.downloadImage(&quot;http://hoclamaimai.com/&quot; + strAnh, holder.imgIcon); //Load ảnh từ host
            } else {
                Log.e(&quot;TAG&quot;, &quot;LỖI! Kết nối đến hosting.&quot;);
            }</B></FONT>
        }
        holder.textTenCongTy.setText(FragmentThuocAoNuoi.arrayListThuoc.get(position).getStrTenCongTy());
<A NAME="539"></A>        //Hiển thị thêm các chữ này lên
        String trongLuong = &quot;Trọng lượng : &quot;;
        String giaBan = &quot;Giá bán : &quot;;
        DecimalFormat <FONT color="#800517"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#539',2,'match0-top.html#539',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>formatter = new DecimalFormat(&quot;###,###,###&quot;);
<A NAME="616"></A>        holder.textTenThuoc.setText(FragmentThuocAoNuoi.arrayListThuoc.get(position).getStrTenThuoc());
        holder.textTrongLuong.setText(trongLuong.concat(FragmentThuocAoNuoi.arrayListThuoc.get(position).getStrTrongLuong()));
        holder.textGiaBan.setText(giaBan</B></FONT>.concat(formatter.format(Integer.parseInt(FragmentThuocAoNuoi.arrayListThuoc.get(position).getStrGiaBan()))).concat(&quot;đ/&quot;+ FragmentThuocAoNuoi.arrayListThuoc.get(position).getStrDonViTinh()));
        String [] strText = <FONT color="#ff00ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#616',2,'match0-top.html#616',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>FragmentThuocAoNuoi.arrayListThuoc.get(position).getStrGioiThieu().split(&quot;\\.&quot;);
        holder.textGioiThieu.setText(Html.fromHtml(strText[0] + &quot;... &lt;font color='blue'&gt;&lt;b&gt;Xem thêm &gt;&gt;&lt;/b&gt;&lt;/font&gt;&quot;),TextView.BufferType.SPANNABLE);
<A NAME="88"></A>        holder.textGioiThieu.setOnClickListener(v -&gt; holder.textGioiThieu.setText(FragmentThuocAoNuoi.arrayListThuoc.get(position).getStrGioiThieu()));
        holder</B></FONT>.btnCall.setOnClickListener(v -&gt; {
            if (arraylist.get(position) != null) {
                if (<FONT color="#f9966b"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#88',2,'match0-top.html#88',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>arraylist.get(position).getStrSoDienThoai().length() != 0) {
                    if (arraylist.get(position).getStrSoDienThoai().length() &gt;= 10) {
                        //Hiện hộp thoại thông báo
                        AlertDialog.Builder builder = new AlertDialog.Builder(mContext);
                        builder.setTitle(&quot;THÔNG BÁO&quot;);
                        builder.setIcon(R.drawable.ic_thongbao);
                        builder.setMessage(&quot;Bạn muốn gọi cho &quot; + arraylist.get(position).getStrTenCongTy()+&quot; không?&quot;);
                        builder</B></FONT>.setCancelable(false);
                        builder.setPositiveButton(&quot;Đồng ý&quot;, (dialogInterface, i) -&gt; mContext.startActivity (new Intent(Intent.ACTION_DIAL, Uri.parse(&quot;tel: &quot; + arraylist.get(position).getStrSoDienThoai()))));
                        builder.setNegativeButton(&quot;Hủy bỏ&quot;, (dialogInterface, i) -&gt; {
<A NAME="89"></A>                            //Đóng hộp thoại thông báo
                            dialogInterface.dismiss();
                        });
                        AlertDialog <FONT color="#3ea99f"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#89',2,'match0-top.html#89',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>alertDialog = builder.create();
                        alertDialog.show();
                    } else {
                        classPublic.ThongBao((Activity) mContext, &quot;Số điện thoại không đúng&quot;);
                    }
                }
                else {
                    classPublic.ThongBao((Activity) mContext, &quot;Chưa cập nhật số điện thoại&quot;);
                }</B></FONT>
<A NAME="91"></A>            }
        });
        holder.btnVolumeUp.setOnClickListener(view -&gt; {
            String <FONT color="#736aff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#91',2,'match0-top.html#91',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>strTenThuoc = arraylist.get(position).getStrTenThuoc();
            String strGioiThieu = arraylist.get(position).getStrGioiThieu();
            String strDelay = &quot;,&quot;</B></FONT>;
            tts = classPublic.DocVanBan((Activity)mContext, &quot;&quot;);
            if (!strTenThuoc.isEmpty()||!strGioiThieu.isEmpty()){
                tts = classPublic.DocVanBan((Activity)mContext, strTenThuoc.concat(strDelay).concat(strGioiThieu));
            }
        });
        holder.btnVolumeOff.setOnClickListener(view -&gt; tts.stop());
        return convertView;
    }
}
</PRE>
<HR>
<H3><CENTER>CtyThuY\ListViewThuocEdit.java</CENTER></H3><HR>
<PRE>
<A NAME="379"></A><FONT color="#3ea99f"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#379',2,'match0-top.html#379',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.CtyThuY;

import android.annotation.SuppressLint;
import android.content.Context;
import android.net.ConnectivityManager;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;

import com.example.basa.Class.ClassPublic;
import com.example.basa.R;

import java.text.DecimalFormat;
import java.util.ArrayList;
import java.util.Objects;

public class ListViewThuocEdit extends BaseAdapter {
<A NAME="670"></A>    private final Context mContext;
    private ClassPublic classPublic;
    private final LayoutInflater inflater</B></FONT>;
    private final ArrayList&lt;ClassThuocEdit&gt; <FONT color="#82cafa"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#670',2,'match0-top.html#670',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>arraylist;
    public ListViewThuocEdit(Context context) {
        mContext = context;
        inflater = LayoutInflater.from(mContext);
        this.arraylist = new ArrayList&lt;&gt;();
        this.arraylist.addAll(FragmentThuocEdit.arrayListThuoc);

    }
    public static class ViewHolder {
        TextView textSTT, textTenThuoc, textTrongLuong, textGiaBan, textGioiThieu;
        ImageView imgIcon;
    }
    @Override
    public int getCount() {
        return FragmentThuocEdit.arrayListThuoc.size();
    }

    @Override
    public Object getItem(int position) {
        return FragmentThuocEdit.arrayListThuoc.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @SuppressLint({&quot;InflateParams&quot;, &quot;SetTextI18n&quot;, &quot;NewApi&quot;})
    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.listview_thuoc_edit, null);
            holder.textSTT = convertView.findViewById(R.id.textSTT);
            holder.textTenThuoc = convertView.findViewById(R.id.textTenThuoc);
            holder.textTrongLuong = convertView.findViewById(R.id.textTrongLuong);
            holder.textGiaBan = convertView.findViewById(R.id.textGiaBan);
            holder.textGioiThieu = convertView.findViewById(R.id.textGioiThieu);
            holder.imgIcon = convertView.findViewById(R.id.imgIcon);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        Integer intSTT = FragmentThuocEdit</B></FONT>.arrayListThuoc.get(position).getIntSTT();
        if (intSTT &lt; 10){
            holder.textSTT.setText(&quot;[0&quot;+intSTT+&quot;]&quot;);
        }
        else {
            holder.textSTT.setText(&quot;[&quot;+intSTT+&quot;]&quot;);
        }
        String strAnh = FragmentThuocEdit.arrayListThuoc.get(position).getImgAnh();
        if (strAnh.equals(&quot;&quot;)){
            holder.imgIcon.setImageResource(R.drawable.img_no_image);
<A NAME="74"></A>        }
        else {
            //Kiểm tra kết nối đến hosting
            ConnectivityManager <FONT color="#3090c7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#74',2,'match0-top.html#74',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>connectivityManager = (ConnectivityManager) mContext.getSystemService(Context.CONNECTIVITY_SERVICE);
            if (Objects.requireNonNull(connectivityManager).getActiveNetworkInfo() != null &amp;&amp; Objects.requireNonNull(connectivityManager.getActiveNetworkInfo()).isAvailable()
                    &amp;&amp; connectivityManager.getActiveNetworkInfo().isConnected()) {
                classPublic = new ClassPublic();
                classPublic.downloadImage(&quot;http://hoclamaimai.com/&quot; + strAnh, holder.imgIcon); //Load ảnh từ host
            } else {
                Log.e(&quot;TAG&quot;, &quot;LỖI! Kết nối đến hosting.&quot;);
            }</B></FONT>
        }
<A NAME="540"></A>        //Hiển thị thêm các chữ này lên
        String trongLuong = &quot;Trọng lượng : &quot;;
<A NAME="648"></A>        String giaBan = &quot;Giá bán : &quot;;
        DecimalFormat <FONT color="#f62817"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#540',2,'match0-top.html#540',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>formatter = new DecimalFormat(&quot;###,###,###&quot;);
        holder.textTenThuoc.setText(FragmentThuocEdit.arrayListThuoc.get(position).getStrTenThuoc());
        holder.textTrongLuong.setText(trongLuong.concat(FragmentThuocEdit.arrayListThuoc.get(position).getStrTrongLuongTu().concat(&quot;-&quot;+<FONT color="#b041ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#648',2,'match0-top.html#648',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>FragmentThuocEdit</B></FONT>.arrayListThuoc.get(position).getStrTrongLuongDen()+&quot;gam&quot;)));
        holder.textGiaBan.setText(giaBan.concat(formatter.format(Integer.parseInt(FragmentThuocEdit.arrayListThuoc.get(position).getStrGiaBan()))).concat(&quot;đ/&quot;+FragmentThuocEdit</B></FONT>.arrayListThuoc.get(position).getStrDonViTinh()));
        holder.textGioiThieu.setText(FragmentThuocEdit.arrayListThuoc.get(position).getStrGioiThieu());
        return convertView;
    }
}
</PRE>
<HR>
<H3><CENTER>CtyThuY\ListViewThuocView.java</CENTER></H3><HR>
<PRE>
<A NAME="62"></A><FONT color="#151b8d"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#62',2,'match0-top.html#62',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.CtyThuY;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.content.Context;
import android.net.ConnectivityManager;
import android.speech.tts.TextToSpeech;
import android.text.Html;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.TextView;

import com.example.basa.Class.ClassPublic;
import com.example.basa.R;

import java.text.DecimalFormat;
import java.util.ArrayList;
import java.util.Locale;
import java.util.Objects;

<A NAME="287"></A>public class ListViewThuocView extends BaseAdapter {
    private final Context mContext;
    private ClassPublic classPublic</B></FONT>;
    private TextToSpeech <FONT color="#4863a0"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#287',2,'match0-top.html#287',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>tts;
    private final LayoutInflater inflater;
    private final ArrayList&lt;ClassThuocView&gt; arraylist;
    public ListViewThuocView(Context context) {
        mContext = context;
        inflater = LayoutInflater.from(mContext);
        this.arraylist = new ArrayList&lt;&gt;();
        this.arraylist.addAll(FragmentThuocView.arrayListThuoc);

<A NAME="370"></A>    }
    public static class</B></FONT> ViewHolder {
        TextView textSTT;
        TextView <FONT color="#4cc417"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#370',2,'match0-top.html#370',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>textTenThuoc;
        TextView textTrongLuong;
        TextView textGiaBan;
        TextView textGioiThieu;
        ImageView imgIcon;
        ImageButton btnVolumeUp, btnVolumeOff;
    }
    @Override
    public int getCount() {
        return FragmentThuocView.arrayListThuoc.size();
    }

    @Override
    public Object getItem(int position) {
        return FragmentThuocView.arrayListThuoc.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @SuppressLint({&quot;InflateParams&quot;, &quot;SetTextI18n&quot;, &quot;NewApi&quot;, &quot;MissingPermission&quot;})
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.listview_thuoc_view, null);
            holder.textSTT = convertView.findViewById(R.id.textSTT);
            holder.textTenThuoc = convertView.findViewById(R.id.textTenThuoc);
            holder.textTrongLuong = convertView.findViewById(R.id.textTrongLuong);
            holder.textGiaBan = convertView.findViewById(R.id.textGiaBan);
            holder.textGioiThieu = convertView.findViewById(R.id.textGioiThieu);
            holder.imgIcon = convertView.findViewById(R.id.imgIcon);
            holder.btnVolumeUp = convertView</B></FONT>.findViewById(R.id.btnVolumeUp);
            holder.btnVolumeOff = convertView.findViewById(R.id.btnVolumeOff);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        /*Integer intSTT = FragmentThuocView.arrayListThuoc.get(position).getIntSTT();
        if (intSTT &lt; 10){
            holder.textSTT.setText(&quot;[0&quot;+intSTT+&quot;]&quot;);
        }
<A NAME="371"></A>        else {
            holder.textSTT.setText(&quot;[&quot;+intSTT+&quot;]&quot;);
        }*/
        holder.textSTT.setText(<FONT color="#f660ab"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#371',2,'match0-top.html#371',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>FragmentThuocView.arrayListThuoc.get(position).getIntSTT() + &quot;. &quot;);
        //Kiểm tra kết nối đến hosting
        ConnectivityManager connectivityManager = (ConnectivityManager) mContext.getSystemService (Context.CONNECTIVITY_SERVICE);
<A NAME="517"></A>        if(Objects.requireNonNull(connectivityManager).getActiveNetworkInfo() != null &amp;&amp; Objects.requireNonNull(connectivityManager.getActiveNetworkInfo()).isAvailable()
                &amp;&amp; connectivityManager</B></FONT>.getActiveNetworkInfo().isConnected()) {
            String strAnh = FragmentThuocView.arrayListThuoc.get(position).getImgAnh();
            if (!<FONT color="#f88158"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#517',2,'match0-top.html#517',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>strAnh.isEmpty() || !strAnh.equals(&quot;&quot;)){
                classPublic = new ClassPublic();
                classPublic.downloadImage(&quot;http://hoclamaimai.com/&quot; + strAnh, holder.imgIcon); //Load ảnh từ host
            }
            else {
                holder.imgIcon.setImageResource(R.drawable.img_no_image);
            }
        }
        else {
            Log.e(&quot;TAG&quot;,&quot;LỖI! Kết nối đến hosting.&quot;);
        }
<A NAME="183"></A>        //Hiển thị thêm các chữ này lên
        String trongLuong = &quot;Trọng lượng : &quot;</B></FONT>;
        String giaBan = &quot;Giá bán : &quot;;
        DecimalFormat <FONT color="#f88017"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#183',2,'match0-top.html#183',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>formatter = new DecimalFormat(&quot;###,###,###&quot;);
        holder.textTenThuoc.setText(FragmentThuocView.arrayListThuoc.get(position).getStrTenThuoc());
<A NAME="355"></A>        holder.textTrongLuong.setText(trongLuong.concat(FragmentThuocView.arrayListThuoc.get(position).getStrTrongLuong()));
        holder</B></FONT>.textGiaBan.setText(giaBan.concat(formatter.format(Integer.parseInt(FragmentThuocView.arrayListThuoc.get(position).getStrGiaBan()))).concat(&quot;đ/&quot;+FragmentThuocView.arrayListThuoc.get(position).getStrDonViTinh()));
        holder.btnVolumeUp.setOnClickListener(view -&gt; {
            String <FONT color="#c58917"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#355',2,'match0-top.html#355',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>strTenThuoc = arraylist.get(position).getStrTenThuoc();
            String strGioiThieu = arraylist.get(position).getStrGioiThieu();
            String strDelay = &quot;,&quot;</B></FONT>;
            tts = classPublic.DocVanBan((Activity)mContext, &quot;&quot;);
            if (!strTenThuoc.isEmpty()||!strGioiThieu.isEmpty()){
                tts = classPublic.DocVanBan((Activity)mContext, strTenThuoc.concat(strDelay).concat(strGioiThieu));
            }
        });
        holder.btnVolumeOff.setOnClickListener(view -&gt; tts.stop());
<A NAME="374"></A>        String [] strText = FragmentThuocView.arrayListThuoc.get(position).getStrGioiThieu().split(&quot;\\.&quot;);
        holder.textGioiThieu.setText(Html.fromHtml(strText[0] + &quot;... &lt;font color='blue'&gt;&lt;b&gt;Xem thêm &gt;&gt;&lt;/b&gt;&lt;/font&gt;&quot;),TextView.BufferType.SPANNABLE);
        holder.textGioiThieu.setOnClickListener(v -&gt; holder.textGioiThieu.setText(FragmentThuocView.arrayListThuoc.get(position).getStrGioiThieu()));
        <FONT color="#95b9c7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#374',2,'match0-top.html#374',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>return convertView;
    }
    public void filter(String charText) {
        charText = charText.toLowerCase(Locale.getDefault());
        FragmentThuocView.arrayListThuoc.clear();
        if (charText.length() == 0) {
            FragmentThuocView.arrayListThuoc.addAll(arraylist);
        } else {
            for (ClassThuocView wp : arraylist) {
                if (wp.getStrTenThuoc().toLowerCase(Locale.getDefault()).contains(charText)||wp</B></FONT>.getStrTrongLuong().toLowerCase(Locale.getDefault()).contains(charText)) {
                    FragmentThuocView.arrayListThuoc.add(wp);
                }
            }
        }
        notifyDataSetChanged();
    }
}
</PRE>
<HR>
<H3><CENTER>CtyThucAn\ClassCtyThucAn.java</CENTER></H3><HR>
<PRE>
<A NAME="383"></A><FONT color="#41a317"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#383',2,'match0-top.html#383',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.CtyThucAn;
public class ClassCtyThucAn {
    private final String   strTaiKhoan, strCoQuan, strSoDienThoai,
            strEmail, strDiaChi, strTenNguoiDung, strMaTinh, strMaHuyen, strAnh;
    private final Integer intSTT</B></FONT>, intLuotThich, intBinhLuan;
    public ClassCtyThucAn(Integer intSTT ,String strTaiKhoan, String strCoQuan,
                          String strEmail, String strSoDienThoai, String strDiaChi,
                          String strTenNguoiDung, String strMaTinh, String strMaHuyen,
<A NAME="384"></A>                          Integer intLuotThich, Integer intBinhLuan, String strAnh){
        this.intSTT = intSTT;
        this.strTaiKhoan = strTaiKhoan;
        <FONT color="#ff00ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#384',2,'match0-top.html#384',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>this.strCoQuan = strCoQuan;
        this.strEmail = strEmail;
        this.strSoDienThoai = strSoDienThoai;
        this.strDiaChi = strDiaChi;
        this.strTenNguoiDung = strTenNguoiDung;
        this.strMaTinh = strMaTinh;
        this.strMaHuyen = strMaHuyen;
        this.intLuotThich = intLuotThich;
        this.intBinhLuan = intBinhLuan;
        this.strAnh = strAnh;
    }

    public Integer getIntSTT() {
        return intSTT;
    }

    public String getStrTaiKhoan() {
        return strTaiKhoan;
    }

    public Integer getIntLuotThich() {
        return intLuotThich;
    }

    public String getStrCoQuan() {
        return strCoQuan;
    }

    public String getStrEmail() {
        return strEmail;
    }

    public String getStrSoDienThoai() {
        return strSoDienThoai;
    }

    public String getStrDiaChi() {
        return strDiaChi;
    }

    public String getStrTenNguoiDung() {
        return strTenNguoiDung;
    }

    public String getStrMaTinh() {
        return strMaTinh;
    }

    public String getStrMaHuyen() {
        return strMaHuyen;
    }</B></FONT>

    public Integer getIntBinhLuan() {
        return intBinhLuan;
    }

    public String getStrAnh() {
        return strAnh;
    }
}
</PRE>
<HR>
<H3><CENTER>CtyThucAn\ClassThucAnAoNuoi.java</CENTER></H3><HR>
<PRE>
<A NAME="178"></A><FONT color="#151b8d"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#178',2,'match0-top.html#178',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.CtyThucAn;

public class ClassThucAnAoNuoi {
    private final Integer intSTT;
    private final String imgAnh, strTenCongTy, strSoDienThoai,
            strTenThucAn, strTrongLuong, strGiaBan, strDonViTinh</B></FONT> ,strGioiThieu;
    public ClassThucAnAoNuoi(Integer intSTT, String imgAnh, String strTenCongTy,
                             String strSoDienThoai, String strTenThucAn,
<A NAME="179"></A>                           String strTrongLuong, String strGiaBan,
                             String strDonViTinh, String strGioiThieu){
        this.intSTT = intSTT;
        <FONT color="#c8c2a7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#179',2,'match0-top.html#179',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>this.imgAnh = imgAnh;
        this.strTenCongTy = strTenCongTy;
        this.strSoDienThoai = strSoDienThoai;
        this.strTenThucAn = strTenThucAn;
        this.strTrongLuong = strTrongLuong;
        this.strGiaBan = strGiaBan;
        this.strDonViTinh = strDonViTinh;
        this.strGioiThieu = strGioiThieu;
    }

    public Integer getIntSTT() {
        return intSTT;
    }

    public String getImgAnh() {
        return imgAnh;
    }

    public String getStrTenCongTy() {
        return strTenCongTy;
    }

    public String getStrSoDienThoai() {
        return strSoDienThoai;
    }

    public String getStrTenThucAn() {
        return strTenThucAn;
    }

    public String getStrTrongLuong() {
        return strTrongLuong;
    }

    public String getStrGiaBan() {
        return strGiaBan;
    }

    public String getStrDonViTinh() {
        return strDonViTinh;
    }</B></FONT>

    public String getStrGioiThieu() {
        return strGioiThieu;
    }
}
</PRE>
<HR>
<H3><CENTER>CtyThucAn\ClassThucAnEdit.java</CENTER></H3><HR>
<PRE>
<A NAME="291"></A><FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#291',2,'match0-top.html#291',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.CtyThucAn;

public class ClassThucAnEdit {
    private final Integer intSTT;
    private final String imgAnh, strTenThucAn, strGioiThieu, strMaThucAn,
            strGiaBan, strTrongLuongCaTu, strTrongLuongCaDen</B></FONT>, strDonViTinh;
    public ClassThucAnEdit(Integer intSTT, String imgAnh, String strTenThucAn, String strGioiThieu,
<A NAME="292"></A>                           String strMaThucAn, String strGiaBan,
                           String strTrongLuongCaTu, String strTrongLuongCaDen, String strDonViTinh){
        this.intSTT = intSTT;
        <FONT color="#77bfc7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#292',2,'match0-top.html#292',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>this.imgAnh = imgAnh;
        this.strTenThucAn = strTenThucAn;
        this.strGioiThieu = strGioiThieu;
        this.strMaThucAn = strMaThucAn;
        this.strGiaBan = strGiaBan;
        this.strTrongLuongCaTu = strTrongLuongCaTu;
        this.strTrongLuongCaDen = strTrongLuongCaDen;
        this.strDonViTinh = strDonViTinh;
    }

    public Integer getIntSTT() {
        return intSTT;
    }

    public String getImgAnh() {
        return imgAnh;
    }

    public String getStrTenThucAn() {
        return strTenThucAn;
    }

    public String getStrGioiThieu() {
        return strGioiThieu;
    }

    public String getStrMaThucAn() {
        return strMaThucAn;
    }

    public String getStrGia() {
        return strGiaBan;
    }

    public String getStrTrongLuongCaTu() {
        return strTrongLuongCaTu;
    }

    public String getStrTrongLuongCaDen() {
        return strTrongLuongCaDen;
    }</B></FONT>

    public String getStrDonViTinh() {
        return strDonViTinh;
    }
}
</PRE>
<HR>
<H3><CENTER>CtyThucAn\ClassThucAnView.java</CENTER></H3><HR>
<PRE>
<A NAME="594"></A><FONT color="#f52887"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#594',2,'match0-top.html#594',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.CtyThucAn;

public class ClassThucAnView {
    private final Integer intSTT;
    private final String imgAnh ,strTenThucAn, strTrongLuong, strGiaBan, strDonViTinh ,strGioiThieu;
    public ClassThucAnView(Integer intSTT, String imgAnh, String strTenThucAn,
                           String strTrongLuong, String strGiaBan,
                           String strDonViTinh, String strGioiThieu){
        this.intSTT = intSTT;
        this.imgAnh = imgAnh;
        this.strTenThucAn = strTenThucAn;
        this.strTrongLuong = strTrongLuong;
        this.strGiaBan = strGiaBan;
        this.strDonViTinh = strDonViTinh;
        this.strGioiThieu = strGioiThieu;
    }

    public Integer getIntSTT() {
        return intSTT;
    }

    public String getImgAnh() {
        return imgAnh;
    }

    public String getStrTenThucAn() {
        return strTenThucAn;
    }

    public String getStrTrongLuong() {
        return strTrongLuong;
    }

    public String getStrGiaBan() {
        return strGiaBan;
    }

    public String getStrDonViTinh() {
        return strDonViTinh;
    }

    public String getStrGioiThieu() {
        return strGioiThieu;
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>CtyThucAn\FragmentCtyThucAn.java</CENTER></H3><HR>
<PRE>
package com.example.basa.CtyThucAn;
<A NAME="42"></A>
import android.annotation.SuppressLint;
import android.content.Context;
<FONT color="#c57717"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#42',2,'match0-top.html#42',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.content.SharedPreferences;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ImageButton;
import android.widget.ListView;
import android.widget.SearchView;
import android.widget.Spinner;
import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;

import com.example.basa.Class.ClassConnect;
import com.example.basa.Class.ClassPublic;
import com.example.basa.Home.FragmentHome;
import com.example.basa.R;
import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.Objects;

import static com.example.basa.Home.MainActivity.MyPREFERENCES;
import static com.example.basa.Home.MainActivity.User;

public class FragmentCtyThucAn extends Fragment implements SearchView.OnQueryTextListener {
    //Khai Báo
    private ListView listView;
<A NAME="574"></A>    private SearchView searchView;
    private final ClassPublic classPublic = new ClassPublic</B></FONT>();
    private final ArrayList&lt;String&gt; listMaTinh = new ArrayList&lt;&gt;(); //Khai báo danh sách tỉnh
    private final ArrayList&lt;<FONT color="#2b60de"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#574',2,'match0-top.html#574',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>String&gt; listTenTinh = new ArrayList&lt;&gt;();
    private final ArrayList&lt;String&gt; listMaHuyen = new ArrayList&lt;&gt;(); //Khai báo danh sách huyện
    private final ArrayList&lt;String&gt; listTenHuyen = new ArrayList&lt;&gt;();
    private ClassConnect classConnect;
<A NAME="53"></A>    private ListViewCtyThucAn adapterCtyThucAn;
    private Spinner cmdTinh, cmdHuyen;
    private ImageButton btnQuayLai</B></FONT>;
    String strMaTinh, <FONT color="#f88158"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#53',2,'match0-top.html#53',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>strMaHuyen, ganMaTinh, ganMaHuyen, strTaiKhoan;
    int intDieuKienGan;
    SharedPreferences sharedpreferences; //Nhớ tài khoản
    SharedPreferences.Editor editor;
    //Khai báo chuyển fragment
    public static FragmentManager fragmentManager; //Fragment trang chủ
    public static FragmentTransaction fragmentTransaction;
    public static ArrayList&lt;ClassCtyThucAn&gt; arrayListCtyThucAn;
<A NAME="185"></A>    private View view</B></FONT>;
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);
        view = <FONT color="#571b7e"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#185',2,'match0-top.html#185',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>inflater.inflate(R.layout.fragment_cty_thucan, container, false);
        sharedpreferences = this.requireActivity().getSharedPreferences(MyPREFERENCES, Context.MODE_PRIVATE);
        editor = sharedpreferences.edit();
        editor.apply();
        strTaiKhoan = sharedpreferences.getString(User,&quot;&quot;);
        layTinhHuyenXa</B></FONT>(strTaiKhoan);
        Bundle bundle = this.getArguments();
        if (bundle != null) {
            intDieuKienGan = 1;
            ganMaTinh = bundle.getString(&quot;MaTinh&quot;);//Lấy mã tỉnh để chuyển về đúng vị trí
            ganMaHuyen = bundle.getString(&quot;MaHuyen&quot;);
        }
        else {
            intDieuKienGan = 0;
        }
        layoutAnhXa(); //Ánh xạ các đối tượng trên layout
<A NAME="338"></A>        return view;
    }

    private <FONT color="#c57726"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#338',2,'match0-top.html#338',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>void layTinhHuyenXa(String taikhoan) {
        try {
            classConnect = new ClassConnect();
            String sqlTinhHuyenXa = &quot;select MaTinh, MaHuyen from TB_NguoiDung where TaiKhoan = '&quot;+taikhoan+&quot;'&quot;;
            ResultSet resultSetTinhHuyenXa = classConnect.selectData(getActivity(), sqlTinhHuyenXa);
            if (resultSetTinhHuyenXa != null &amp;&amp; resultSetTinhHuyenXa.next()){
                ganMaTinh = resultSetTinhHuyenXa</B></FONT>.getString(&quot;MaTinh&quot;);
                ganMaHuyen = resultSetTinhHuyenXa.getString(&quot;MaHuyen&quot;);
            }
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, e.getMessage());
        }
    }

    @SuppressLint({&quot;NewApi&quot;, &quot;UseRequireInsteadOfGet&quot;})
    private void layoutAnhXa() {
        cmdTinh = view.findViewById(R.id.cmdTinh);
        cmdHuyen = view.findViewById(R.id.cmdHuyen);
        btnQuayLai = view.findViewById(R.id.btnQuayLai);
        btnQuayLai.setOnClickListener(view -&gt; {
            fragmentTransaction = fragmentManager.beginTransaction();
            fragmentTransaction.replace(R.id.fragment_main, new FragmentHome());
            fragmentTransaction.commit();
        });
        listView = view.findViewById(R.id.listView);
<A NAME="498"></A>        searchView = view.findViewById(R.id.searchTen);
        fragmentManager = Objects.requireNonNull(Objects.requireNonNull(getActivity()).getSupportFragmentManager());//Chuyển đổi giữa các fragment
        intDieuKienGan = 1;
        <FONT color="#827d6b"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#498',2,'match0-top.html#498',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>loadTinh();
    }

    @SuppressLint(&quot;NewApi&quot;)
    private void loadTinh(){  //Danh sách tỉnh
        listMaTinh.clear(); // Xóa danh sách tỉnh
        listTenTinh.clear();
        try{
            classConnect = new ClassConnect(); //Mở kết nối SQL
            String sqlTinh = &quot;select MaTinh, TenTinh from TB_Tinh&quot;;
            ResultSet resultSetTinh = classConnect.selectData(getActivity(), sqlTinh);
            if (resultSetTinh != null){
                while (resultSetTinh.next()){
                    listMaTinh.add(resultSetTinh.getString(&quot;MaTinh&quot;));
                    listTenTinh.add(resultSetTinh.getString(&quot;TenTinh&quot;));
<A NAME="228"></A>                }</B></FONT>
                ArrayAdapter dataTinh = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenTinh);
                dataTinh.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
                <FONT color="#4e8975"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#228',2,'match0-top.html#228',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>cmdTinh.setAdapter(dataTinh);
            }
            if (listMaTinh.isEmpty()){
                classPublic.ThongBao(getActivity(), &quot;Thông báo! Đang cập nhật danh sách tỉnh/thành phố&quot;);
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
        }
        if (listMaTinh.isEmpty()){ //Nếu chưa nhập tỉnh thì không hiển thị huyện
            listMaHuyen.clear(); // Xóa danh sách huyện
            listTenHuyen.clear();
            ArrayAdapter&lt;String&gt; dataHuyen = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenHuyen);
<A NAME="135"></A>            dataHuyen.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
            cmdHuyen</B></FONT>.setAdapter(dataHuyen);
        }
        <FONT color="#4e9258"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#135',2,'match0-top.html#135',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>cmdTinh.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaTinh.isEmpty()){
<A NAME="230"></A>                    strMaTinh = listMaTinh</B></FONT>.get(position);
                    if (intDieuKienGan == 1){
                        cmdTinh.setSelection(listMaTinh.indexOf(ganMaTinh));
                        <FONT color="#52d017"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#230',2,'match0-top.html#230',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>strMaTinh = ganMaTinh;
                    }
                    loadHuyen(strMaTinh);
                }
            }

            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }
    @SuppressLint(&quot;NewApi&quot;)
    private void loadHuyen(String maTinh){ //Danh sách huyện
        listMaHuyen.clear(); // Xóa danh sách huyện
        listTenHuyen.clear();
        try {
            classConnect = new ClassConnect(); //Mở kết nối SQL
            String sqlHuyen = &quot;select MaHuyen, TenHuyen from TB_Huyen where MaTinh = '&quot;+maTinh+&quot;'&quot;;
            ResultSet resultSetHuyen = classConnect.selectData(getActivity(), sqlHuyen);
            if (resultSetHuyen != null){
                while (resultSetHuyen.next()){
                    listMaHuyen.add(resultSetHuyen.getString(&quot;MaHuyen&quot;));
                    listTenHuyen.add(resultSetHuyen.getString(&quot;TenHuyen&quot;));
                }
<A NAME="162"></A>                ArrayAdapter&lt;String&gt; dataHuyen = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenHuyen);
                dataHuyen.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
                cmdHuyen</B></FONT>.setAdapter(dataHuyen);
            <FONT color="#92c7c7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#162',2,'match0-top.html#162',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
            if (listMaHuyen.isEmpty()){
                classPublic.ThongBao(getActivity(), &quot;Thông báo! Đang cập nhật danh sách quận/huyện&quot;);
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
        }
        cmdHuyen.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaHuyen.isEmpty()){
                    strMaHuyen = listMaHuyen.get(position);
                    if (intDieuKienGan == 1) {
                        cmdHuyen.setSelection(listMaHuyen</B></FONT>.indexOf(ganMaHuyen));
                        strMaHuyen = ganMaHuyen;
                    }
<A NAME="559"></A>                    loadCtyThucAn(strMaHuyen);
                }
                intDieuKienGan = 0; //Bỏ gán giá trị theo csdl
            <FONT color="#810541"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#559',2,'match0-top.html#559',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}

            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }
    private void</B></FONT> loadCtyThucAn(String maHuyen) {
        intDieuKienGan = 0;
        arrayListCtyThucAn = new ArrayList&lt;&gt;();
        arrayListCtyThucAn.clear();
        int intSTT = 1;
        try {
            classConnect = new ClassConnect();//Mở kết nối SQL
<A NAME="395"></A>            //Liên kết bảng trên SQL
            String sqlCtyThucAn = &quot;select TaiKhoan, CongTy, SoDienThoai, Email, TenTinh, TenHuyen, TenXa, TaiKhoan, Anh, nd.MaTinh, nd.MaHuyen, LuotThich from TB_NguoiDung nd, TB_Tinh t, TB_Huyen h, TB_Xa x&quot; +
                    &quot; where nd.MaTinh = t.MaTinh and nd.MaHuyen = h.MaHuyen and nd.MaXa = x.MaXa and nd.LoaiTaiKhoan = 3 and nd.MaHuyen = '&quot;+maHuyen+&quot;' order by nd.LuotThich desc&quot;;
            ResultSet <FONT color="#d16587"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#395',2,'match0-top.html#395',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>resultSetCtyThucAn = classConnect.selectData(getActivity(),sqlCtyThucAn);
            if (resultSetCtyThucAn != null){
                while (resultSetCtyThucAn.next()){
                    int intBinhLuan = 0;
                    String sqlBinhLuan = &quot;select count(*) as binhluan from TB_BinhLuan where TaiKhoan = '&quot;+resultSetCtyThucAn.getString(&quot;TaiKhoan&quot;)+&quot;'&quot;;
                    ResultSet resultSetBinhLuan = classConnect.selectData(getActivity(),sqlBinhLuan);
                    if (resultSetBinhLuan !=null &amp;&amp; resultSetBinhLuan.next()){
                        intBinhLuan = Integer.parseInt(resultSetBinhLuan.getString(&quot;binhluan&quot;));
                    }
<A NAME="276"></A>                    //Cộng chuỗi các tên tỉnh huyện xã
                    arrayListCtyThucAn.add(new ClassCtyThucAn(intSTT++, resultSetCtyThucAn.getString(&quot;TaiKhoan&quot;),resultSetCtyThucAn.getString(&quot;CongTy&quot;), resultSetCtyThucAn.getString(&quot;Email&quot;),
                            resultSetCtyThucAn.getString(&quot;SoDienThoai&quot;), resultSetCtyThucAn.getString(&quot;TenXa&quot;).concat(&quot;-&quot;+ resultSetCtyThucAn.getString(&quot;TenHuyen&quot;).concat(&quot;-&quot;+resultSetCtyThucAn</B></FONT>.getString(&quot;TenTinh&quot;))),resultSetCtyThucAn.getString(&quot;TaiKhoan&quot;),
                            resultSetCtyThucAn.getString(&quot;MaTinh&quot;),resultSetCtyThucAn.getString(&quot;MaHuyen&quot;),<FONT color="#e57ded"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#276',2,'match0-top.html#276',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>resultSetCtyThucAn.getInt(&quot;LuotThich&quot;),intBinhLuan, resultSetCtyThucAn.getString(&quot;Anh&quot;)));
                }
            }
            if (arrayListCtyThucAn.isEmpty()){
                classPublic.ThongBao(getActivity(),&quot;Chưa cập nhật danh sách cty thức ăn&quot;);
<A NAME="138"></A>            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối đến SQL
        }catch (Exception e){
            Log</B></FONT>.e(&quot;TAG&quot;, <FONT color="#4cc417"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#138',2,'match0-top.html#138',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>e.getMessage() );
        }
        adapterCtyThucAn = new ListViewCtyThucAn(getContext());
        listView.setAdapter(adapterCtyThucAn);
        //Xử lí khi nhập vào ô tìm kiếm
        searchView.setOnQueryTextListener(this);
    }
    @Override
    public boolean onQueryTextSubmit(String query) {
        return false;
    }

    @Override
    public boolean onQueryTextChange(String newText) { //Tìm theo tên CTTA
        adapterCtyThucAn.filter(newText);
        return false;
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>CtyThucAn\FragmentThucAnAoNuoi.java</CENTER></H3><HR>
<PRE>
<A NAME="108"></A>package com.example.basa.CtyThucAn;

<FONT color="#ff0000"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#108',2,'match0-top.html#108',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.annotation.SuppressLint;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AbsListView;
import android.widget.ImageButton;
import android.widget.ListView;
import android.widget.SearchView;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;

import com.example.basa.AoNuoi.FragmentQuanLiAoNuoi;
import com.example.basa.Class.ClassConnect;
import com.example.basa.Class.ClassPublic;
import com.example.basa.R;

import java.sql.ResultSet;
import java.util.ArrayList;

<A NAME="688"></A>public class FragmentThucAnAoNuoi extends Fragment implements SearchView.OnQueryTextListener{
    //Khai báo
    private View view</B></FONT>;
    private Integer <FONT color="#ff0000"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#688',2,'match0-top.html#688',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>mTrongLuong, mLoaiCa;
    private ImageButton btnReturn;
    private SearchView searchTen;
    private ListView listView;
    public static ArrayList&lt;ClassThucAnAoNuoi&gt; arrayListThucAn;
    private ListViewThucAnAoNuoi adapterThucAn;
    private FragmentTransaction fragmentTransaction;
    private Integer intSo, intTang;
    private boolean canScroll;
    public static FragmentManager fragmentManager; //Fragment trang chủ
<A NAME="554"></A>    private ClassConnect classConnect;
    private final ClassPublic classPublic = new ClassPublic</B></FONT>();

    <FONT color="#82cafa"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#554',2,'match0-top.html#554',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>@SuppressLint(&quot;NewApi&quot;)
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);
        view = inflater.inflate(R.layout.fragment_thuc_an_ao_nuoi, container, false);
        fragmentManager = requireActivity</B></FONT>().getSupportFragmentManager();
<A NAME="328"></A>        Bundle bundle = this.getArguments();
        if (bundle != null) {
            mLoaiCa = bundle.getInt(&quot;LoaiCa&quot;);
            mTrongLuong = <FONT color="#348781"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#328',2,'match0-top.html#328',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>bundle.getInt(&quot;TrongLuong&quot;);
        }
        layoutAnhXa(); //Ánh xạ các đối tượng Layout
        return view;
    }

    private void layoutAnhXa() {
        btnReturn = view.findViewById(R.id.btnReturn);
        searchTen = view.findViewById(R.id.searchTen);
        listView = view.findViewById(R.id.listView);
        intSo</B></FONT> = 5;
        intTang = 0;
        loadThucAn(mLoaiCa, mTrongLuong);
        clickListView();
        clickButton();
    }

    private void loadThucAn(Integer loaiCa, Integer trongLuong) {
        arrayListThucAn = new ArrayList&lt;&gt;();
        arrayListThucAn.clear();
        intSo = 1;
        try {
            classConnect = new ClassConnect();//Mở kết nối SQL
            //Liên kết bảng trên SQL
            String strsqlThucAn = &quot;select TOP 5 * from TB_ThucAn ta, TB_NguoiDung nd where ta.TaiKhoan = nd.TaiKhoan and LoaiCa = '&quot;+loaiCa+&quot;' and TrongLuongCaTu &lt;='&quot;+trongLuong+&quot;' and '&quot;+trongLuong+&quot;' &lt;= TrongLuongCaDen order by GiaBan asc&quot;;
<A NAME="606"></A>            ResultSet resultSetThucAn = classConnect.selectData(getActivity(),strsqlThucAn);
            if (resultSetThucAn != null){
                while (resultSetThucAn.next()){
                    arrayListThucAn.add(new ClassThucAnAoNuoi(intSo ++,resultSetThucAn.getString(&quot;Anh&quot;), resultSetThucAn.getString(&quot;CongTy&quot;), resultSetThucAn.getString(&quot;SoDienThoai&quot;), <FONT color="#95b9c7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#606',2,'match0-top.html#606',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>resultSetThucAn.getString(&quot;TenThucAn&quot;), resultSetThucAn.getString(&quot;TrongLuongCaTu&quot;).concat(&quot;-&quot;+resultSetThucAn.getString(&quot;TrongLuongCaDen&quot;)+&quot;g&quot;),
                            resultSetThucAn.getString(&quot;GiaBan&quot;),resultSetThucAn.getString(&quot;DonViTinh&quot;), resultSetThucAn.getString(&quot;GioiThieu&quot;)));
                }
            }
            if (arrayListThucAn.isEmpty()){
                classPublic.ThongBao(getActivity(),&quot;Thông báo! Đang cập nhật danh sách thức ăn&quot;);
<A NAME="23"></A>            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối đến SQL
        }catch (Exception e){
            Log</B></FONT>.e(&quot;TAG&quot;, <FONT color="#f660ab"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#23',2,'match0-top.html#23',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>e.getMessage() );
        }
        adapterThucAn = new ListViewThucAnAoNuoi(getContext());
        listView.setAdapter(adapterThucAn);
        //Xử lí khi nhập vào ô tìm kiếm
        searchTen.setOnQueryTextListener(this);
    }
    private void clickListView() {
        listView.setOnScrollListener(new AbsListView.OnScrollListener() {
            @Override
            public void</B></FONT> onScrollStateChanged(AbsListView view, int scrollState) {
                if (scrollState == AbsListView.OnScrollListener.SCROLL_STATE_IDLE) {
                    canScroll = false;
                } else if (scrollState == AbsListView.OnScrollListener.SCROLL_STATE_FLING ||
                        scrollState == AbsListView.OnScrollListener.SCROLL_STATE_TOUCH_SCROLL) {
                    canScroll = true;
                }
            }

            @Override
<A NAME="137"></A>            public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {
                if(canScroll &amp;&amp; firstVisibleItem + visibleItemCount == totalItemCount &amp;&amp; totalItemCount != 0){
                    intTang = intTang + 5;
                    <FONT color="#00ff00"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#137',2,'match0-top.html#137',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>try{
                        classConnect = new ClassConnect(); //Mở kết nối đến SQL
                        String sqlThucAn = &quot;select * from TB_ThucAn ta, TB_NguoiDung nd where ta.TaiKhoan = nd.TaiKhoan and LoaiCa = '&quot;+mLoaiCa+&quot;' and TrongLuongCaTu &lt;='&quot;+mTrongLuong+&quot;' and '&quot;+mTrongLuong+&quot;' &lt;= TrongLuongCaDen  order by GiaBan asc OFFSET &quot;+intTang+&quot; ROWS FETCH NEXT 5 ROWS ONLY&quot;;
                        ResultSet resultSetThucAn = classConnect.selectData(getActivity(), sqlThucAn);
                        if (resultSetThucAn != null){
                            while (resultSetThucAn.next()){
                                arrayListThucAn.add(new ClassThucAnAoNuoi(intSo ++,resultSetThucAn.getString(&quot;Anh&quot;), resultSetThucAn.getString(&quot;CongTy&quot;), resultSetThucAn.getString(&quot;SoDienThoai&quot;), resultSetThucAn.getString(&quot;TenThucAn&quot;), resultSetThucAn.getString(&quot;TrongLuongCaTu&quot;).concat(&quot;-&quot;+resultSetThucAn.getString(&quot;TrongLuongCaDen&quot;)+&quot;g&quot;),
                                        resultSetThucAn.getString(&quot;GiaBan&quot;),resultSetThucAn.getString(&quot;DonViTinh&quot;), resultSetThucAn.getString(&quot;GioiThieu&quot;)));
                            }
                        }
                        else {
                            classPublic.ThongBao(getActivity(),&quot;Thông báo! Đang cập nhật danh sách thức ăn&quot;);
                        }
                        classConnect.CONN(getActivity()).close(); //Đóng kết nối đến SQL
<A NAME="26"></A>                    }catch (Exception e){
                        Log.e(&quot;TAG&quot;, e</B></FONT>.getMessage());
                    }
                    <FONT color="#95b9c7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#26',2,'match0-top.html#26',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>adapterThucAn.notifyDataSetChanged();
                }
            }
        });
    }
    @Override
    public boolean onQueryTextSubmit(String query) {
        return false;
    }

    @Override
    public boolean onQueryTextChange(String newText) { //Tìm theo thức ăn
        adapterThucAn.filter(newText);
        return false;
    }</B></FONT>

    private void clickButton() {
        btnReturn.setOnClickListener(v -&gt; {
            fragmentTransaction = fragmentManager.beginTransaction();
            fragmentTransaction.replace(R.id.fragment_main, new FragmentQuanLiAoNuoi());
            fragmentTransaction.commit();
        });
    }
}
</PRE>
<HR>
<H3><CENTER>CtyThucAn\FragmentThucAnEdit.java</CENTER></H3><HR>
<PRE>
<A NAME="425"></A>package com.example.basa.CtyThucAn;

import android.annotation.SuppressLint;
<FONT color="#4e9258"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#425',2,'match0-top.html#425',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.app.AlertDialog;
import android.content.Context;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.ListView;
import android.widget.SearchView;
import android.widget.Spinner;
import android.widget.TextView;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;

import com.example.basa.Class.ClassConnect;
import com.example.basa.Class.ClassPublic;
import com.example.basa.Menu.FragmentMenu;
import com.example.basa.R;

import java.sql.ResultSet;
import java.util.ArrayList;

import static com.example.basa.Home.MainActivity.MyPREFERENCES;
import static com.example.basa.Home.MainActivity.User;

public class FragmentThucAnEdit extends Fragment implements SearchView.OnQueryTextListener {
    //Khai báo
    private String strTaiKhoan, strLoaiCa;
    private View view;
    private SearchView searchTen;
    private ImageButton btnAdd, btnQuayLai;
    private ListView listView;
    private final ClassPublic classPublic = new ClassPublic();
    private ClassConnect classConnect;
    private ListViewThucAnEdit adapterThucAn;
    private Spinner cmdLoaiCa;
<A NAME="242"></A>    public static FragmentManager fragmentManager</B></FONT>; //Tạo Fragment
    public static FragmentTransaction fragmentTransaction;
    public static ArrayList&lt;ClassThucAnEdit&gt; arrayListThucAn;
    private final ArrayList&lt;<FONT color="#b041ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#242',2,'match0-top.html#242',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>String&gt; listMaLoaiCa = new ArrayList&lt;&gt;(); //Khai báo danh sách loại cá giống hay cá thịt
    private final ArrayList&lt;String&gt; listTenLoaiCa = new ArrayList&lt;&gt;();
    SharedPreferences sharedpreferences; //Nhớ tài khoản
    SharedPreferences.Editor editor;
    //Khai báo các đối tượng trên dialog
    private TextView textTieuDe;
    private EditText editMaThucAn, editTenThucAn, editTrongLuongTu, editTrongLuongDen</B></FONT>, editGiaBan, editDonViTinh, editGioiThieu;
    private Button btnLuuLai, btnXoa, btnDong;
<A NAME="112"></A>
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);
        view = <FONT color="#4e8975"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#112',2,'match0-top.html#112',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>inflater.inflate(R.layout.fragment_thuc_an_edit, container, false);
        fragmentManager = requireActivity().getSupportFragmentManager();
        sharedpreferences = this.requireActivity().getSharedPreferences(MyPREFERENCES, Context.MODE_PRIVATE);
        editor = sharedpreferences.edit();
        editor.apply();
        strTaiKhoan = sharedpreferences.getString(User,&quot;&quot;);
        layoutAnhXa</B></FONT>(); //Ánh xạ các đối tượng trên layout
<A NAME="462"></A>        return view;
    }
    @SuppressLint(&quot;NewApi&quot;)
    private <FONT color="#52d017"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#462',2,'match0-top.html#462',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>void layoutAnhXa() {
        btnAdd = view.findViewById(R.id.btnAdd);
        listView = view.findViewById(R.id.listView);
        searchTen = view.findViewById(R.id.searchTen);
        cmdLoaiCa = view.findViewById(R.id.cmdLoaiCa);
        //Nhấn quay lại
        btnQuayLai = view.findViewById(R.id.btnQuayLai);
        btnQuayLai</B></FONT>.setOnClickListener(view -&gt; {
            fragmentTransaction = fragmentManager.beginTransaction();
            fragmentTransaction.replace(R.id.fragment_main, new FragmentMenu());
            fragmentTransaction.commit();
        });
        loadLoaiCa();
        clickListView();//Thức ăn trên listview
        clickButton();
<A NAME="432"></A>    }

    private void loadLoaiCa(){
        <FONT color="#95b9c7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#432',2,'match0-top.html#432',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>listMaLoaiCa.clear(); //Xóa danh sách đang có
        listTenLoaiCa.clear();
        listMaLoaiCa.add(&quot;1&quot;);
<A NAME="301"></A>        listTenLoaiCa.add(&quot;Cá giống&quot;);
        listMaLoaiCa.add(&quot;2&quot;);
        listTenLoaiCa.add(&quot;Cá thịt&quot;);
        ArrayAdapter&lt;String&gt; dataLoaiTaiKhoan = new ArrayAdapter</B></FONT>&lt;&gt;(<FONT color="#571b7e"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#301',2,'match0-top.html#301',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>getActivity(), android.R.layout.simple_spinner_item,listTenLoaiCa);
        dataLoaiTaiKhoan.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
        cmdLoaiCa.setAdapter(dataLoaiTaiKhoan);
        cmdLoaiCa.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaLoaiCa.isEmpty()) {
                    strLoaiCa = listMaLoaiCa.get(position);
                    loadThucAn(); //Load thức ăn
                }
            }
            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }</B></FONT>

    private void loadThucAn() {
<A NAME="438"></A>        arrayListThucAn = new ArrayList&lt;&gt;();
        arrayListThucAn.clear();
        int intSTT = 1;
        <FONT color="#82cafa"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#438',2,'match0-top.html#438',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>try {
            classConnect = new ClassConnect();//Mở kết nối SQL
            //Liên kết bảng trên SQL
            String strsqlThucAn = &quot;select Anh, TenThucAn, TrongLuongCaTu, TrongLuongCaDen, GiaBan, DonViTinh, MaThucAn, GioiThieu from TB_ThucAn where TaiKhoan = '&quot;+strTaiKhoan+&quot;' and LoaiCa = '&quot;+strLoaiCa+&quot;' order by mathucan desc&quot;;
            ResultSet resultSetThucAn = classConnect.selectData(getActivity(),strsqlThucAn);
            if (resultSetThucAn != null){
                while (resultSetThucAn.next()){
                    arrayListThucAn.add(new ClassThucAnEdit(intSTT ++, resultSetThucAn.getString(&quot;Anh&quot;), resultSetThucAn.getString(&quot;TenThucAn&quot;), resultSetThucAn.getString(&quot;GioiThieu&quot;),resultSetThucAn.getString(&quot;MaThucAn&quot;),resultSetThucAn.getString(&quot;GiaBan&quot;),
                            resultSetThucAn.getString(&quot;TrongLuongCaTu&quot;), resultSetThucAn.getString(&quot;TrongLuongCaDen&quot;),resultSetThucAn.getString(&quot;DonViTinh&quot;)));//Sắp xếp đúng thứ tự khai bao của class
                }
            }
            if (arrayListThucAn.isEmpty()){
                classPublic.ThongBao(getActivity(), &quot;Thông báo! Đang cập nhật danh sách thức ăn&quot;);
            }
<A NAME="256"></A>            classConnect.CONN(getActivity()).close(); //Đóng kết nối đến SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, e</B></FONT>.getMessage() );
        <FONT color="#ada96e"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#256',2,'match0-top.html#256',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
        adapterThucAn = new ListViewThucAnEdit(getContext());
        listView.setAdapter(adapterThucAn);
        //Xử lí khi nhập vào ô tìm kiếm
        searchTen.setOnQueryTextListener(this);
    }
    @Override
    public boolean onQueryTextSubmit(String query) {
        return false;
    }

    @Override
    public boolean onQueryTextChange(String newText) { //Tìm theo tên thức ăn
        adapterThucAn.filter(newText);
        return false;
    }

    private void clickListView() {
        listView</B></FONT>.setOnItemClickListener((parent, view, position, id) -&gt; updateThucAn(position));
    }

    private void clickButton() {
        btnAdd.setOnClickListener(v -&gt; updateThucAn(-1));
    }

    private void updateThucAn(final int intChiSo) {
<A NAME="441"></A>        LayoutInflater inflater = getLayoutInflater();
        @SuppressLint(&quot;InflateParams&quot;) View alertLayout = inflater.inflate(R.layout.dialog_thuc_an, null);
        textTieuDe = alertLayout.findViewById(R.id.textTieuDe);
        <FONT color="#41a317"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#441',2,'match0-top.html#441',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>editMaThucAn = alertLayout.findViewById(R.id.editMaThucAn);
        editTenThucAn = alertLayout.findViewById(R.id.editTenThucAn);
        editTrongLuongTu = alertLayout.findViewById(R.id.editTrongLuongTu);
        editTrongLuongDen = alertLayout.findViewById(R.id.editTrongLuongDen);
        editGiaBan = alertLayout.findViewById(R.id.editGiaBan);
        editDonViTinh = alertLayout.findViewById(R.id.editDonViTinh);
        editGioiThieu = alertLayout.findViewById(R.id.editGioiThieu);
        btnLuuLai = alertLayout.findViewById(R.id.btnLuuLai);
        btnXoa = alertLayout.findViewById(R.id.btnXoa);
        btnDong = alertLayout.findViewById(R.id.btnDong);
        final AlertDialog.Builder alert = new AlertDialog.Builder(getActivity());
        alert.setView(alertLayout);
        alert.setCancelable(false);
        final AlertDialog dialog = alert.create();
        if (intChiSo == -1) {
            btnXoa.setEnabled(false); //Không cho phép nhấn nút xóa
<A NAME="35"></A>            String strTieuDe = &quot;THÊM MỚI THỨC ĂN THỦY SẢN&quot;;
            textTieuDe</B></FONT>.setText(strTieuDe);
            editMaThucAn.setText(&quot;&quot;);
            String <FONT color="#41a317"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#35',2,'match0-top.html#35',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>strNut = &quot;THÊM MỚI&quot;; //Đổi text nút lưu lại thành thêm mới
            btnLuuLai.setText(strNut);
        } else {
            btnXoa.setEnabled(true); //Cho phép nhấn nút xóa
            String strTieuDe = &quot;CẬP NHẬT THỨC ĂN THỦY SẢN&quot;;
            textTieuDe.setText(strTieuDe);
            String strNut = &quot;CẬP NHẬT&quot;; //Đổi text nút lưu lại thành cập nhật
            btnLuuLai.setText(strNut);
            editMaThucAn.setText(arrayListThucAn.get(intChiSo).getStrMaThucAn());
            editTenThucAn.setText(arrayListThucAn.get(intChiSo).getStrTenThucAn()); //Gán giá trị tên thức ăn
            editTrongLuongTu.setText(arrayListThucAn.get(intChiSo).getStrTrongLuongCaTu());//Gán giá trị trọng lượng
            editTrongLuongDen.setText(arrayListThucAn</B></FONT>.get(intChiSo).getStrTrongLuongCaDen());//Gán giá trị trọng lượng
            editGiaBan.setText(arrayListThucAn.get(intChiSo).getStrGia());//Gán giá trị giá bán
            editDonViTinh.setText(arrayListThucAn.get(intChiSo).getStrDonViTinh());//Gán giá trị đơn vị tính
            editGioiThieu.setText(arrayListThucAn.get(intChiSo).getStrGioiThieu());//Gán giá trị giới thiệu về thức ăn
        }
        btnLuuLai.setOnClickListener(v -&gt; {
        try {
            if (editTenThucAn.getText().length() != 0) {
                if (editTrongLuongTu.getText().length() != 0) {
                    if (editTrongLuongDen.getText().length() != 0) {
                        if (editGiaBan.getText().length() != 0) {
                            if (editDonViTinh.getText().length() != 0) {
                                if (editGioiThieu.getText().length() != 0) {
<A NAME="37"></A>                                    String sqlThucAn;
                                    if (intChiSo == -1) { //Thêm mới
                                        sqlThucAn = &quot;insert into TB_ThucAn(TaiKhoan, LoaiCa, TenThucAn, TrongLuongCaTu, TrongLuongCaDen, GiaBan, DonViTinh, GioiThieu) values ('&quot;+strTaiKhoan+&quot;', '&quot;+strLoaiCa+&quot;',&quot; +
                                                &quot;N'&quot;+editTenThucAn.getText()+&quot;', '&quot;+editTrongLuongTu.getText()+&quot;', '&quot;+<FONT color="#810541"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#37',2,'match0-top.html#37',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>editTrongLuongDen.getText()+&quot;', '&quot;+editGiaBan.getText()+&quot;', N'&quot;+editDonViTinh.getText()+&quot;',&quot; +
                                                &quot;N'&quot;+editGioiThieu.getText()+&quot;')&quot;;
                                    } else { //Cập nhật
                                        sqlThucAn = &quot;update TB_ThucAn set TenThucAn = N'&quot;+editTenThucAn.getText()+&quot;', TrongLuongCaTu = '&quot;+editTrongLuongTu.getText()+&quot;', TrongLuongCaDen = '&quot;+editTrongLuongDen.getText()+&quot;',&quot; +
                                                &quot;GiaBan = '&quot;+editGiaBan.getText()+&quot;', DonViTinh = N'&quot;+editDonViTinh.getText()+&quot;', GioiThieu = N'&quot;+editGioiThieu.getText()+&quot;' where MaThucAn = '&quot;+editMaThucAn.getText()+&quot;' &quot;;
                                    }
                                    classConnect = new ClassConnect(); //Mở kết nối SQL
                                    if (classConnect.updateData(getActivity(), sqlThucAn) == 1) {
                                        if (intChiSo == -1) {
                                            classPublic.ThongBao(getActivity(), &quot;Thêm mới thức ăn thủy sản thành công&quot;);
                                        } else {
                                            classPublic.ThongBao(getActivity(), &quot;Cập nhật thức ăn thành công&quot;);
                                        }
                                        dialog.cancel(); //Đóng dialog sau đó gọi load mới danh sách
                                        loadThucAn</B></FONT>(); //Load lại danh sách
                                    }
                                } else {
                                    classPublic.ThongBao(getActivity(), &quot;Vui lòng nhập giới thiệu về thức ăn&quot;);
                                }
                            } else {
                                classPublic.ThongBao(getActivity(), &quot;Vui lòng nhập đơn vị tính&quot;);
                            }
                        } else {
                            classPublic.ThongBao(getActivity(), &quot;Vui lòng nhập giá bán&quot;);
                        }
                    } else {
                        classPublic.ThongBao(getActivity(), &quot;Vui lòng nhập trọng lượng&quot;);
                    }
                } else {
                    classPublic.ThongBao(getActivity(), &quot;Vui lòng nhập trọng lượng&quot;);
                }
            } else {
                classPublic.ThongBao(getActivity(), &quot;Vui lòng nhập tên thức ăn&quot;);
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
        } catch (Exception e) {
            Log.e(&quot;TAG&quot;, e.getMessage());
        }
        });
        btnXoa.setOnClickListener(v -&gt; {
            dialogXoa(arrayListThucAn.get(intChiSo).getStrMaThucAn(), arrayListThucAn.get(intChiSo).getStrTenThucAn());
<A NAME="485"></A>            dialog.cancel();
        });
        btnDong.setOnClickListener(v -&gt; dialog.cancel());
        <FONT color="#00ff00"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#485',2,'match0-top.html#485',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>dialog.show(); //Show giao diện cập nhật danh sách thức ăn
    }

    private void dialogXoa(final String maThucAn, final String tenThucAn){
        //Hiện hộp thoại thông báo xóa ao nuôi
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        builder.setTitle(&quot;XÓA THỨC ĂN&quot;);
        builder.setMessage(&quot;Bạn có muốn xóa &quot;+tenThucAn+&quot; không?&quot;);
<A NAME="636"></A>        builder.setIcon(R.drawable.ic_delete);
        builder</B></FONT>.setCancelable(false);
        builder.setPositiveButton(&quot;Đồng ý&quot;, (dialogInterface, i) -&gt; {
        <FONT color="#52d017"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#636',2,'match0-top.html#636',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>try {
            classConnect = new ClassConnect();
            String sqlAoNuoi = &quot;delete TB_ThucAn where MaThucAn = '&quot;+maThucAn+&quot;'&quot;;
            if (classConnect.updateData(getActivity(),sqlAoNuoi)== 1){
                classPublic.ThongBao(getActivity(),&quot;Thông báo! Xóa thức ăn thành công&quot;);
                loadThucAn();
            }else {
                classPublic.ThongBao(getActivity(),&quot;Thông báo! Không xóa được thức ăn&quot;);
            }</B></FONT>
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, e.getMessage());
        }
        });
        builder.setNegativeButton(&quot;Hủy bỏ&quot;, (dialogInterface, i) -&gt; dialogInterface.dismiss());
        AlertDialog alertDialog = builder.create();
        alertDialog.show();
    }
}
</PRE>
<HR>
<H3><CENTER>CtyThucAn\FragmentThucAnView.java</CENTER></H3><HR>
<PRE>
<A NAME="458"></A>package com.example.basa.CtyThucAn;

import android.annotation.SuppressLint;
<FONT color="#2b60de"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#458',2,'match0-top.html#458',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.app.AlertDialog;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ImageButton;
import android.widget.ListView;
import android.widget.SearchView;
import android.widget.Spinner;
import android.widget.TextView;
import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;

import com.example.basa.Class.ClassConnect;
import com.example.basa.R;
import com.example.basa.Class.ClassPublic;

import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.Objects;

public class FragmentThucAnView extends Fragment implements SearchView.OnQueryTextListener {
    //Khai báo
    private View view;
    private TextView textTieuDe, textDiaChi</B></FONT>;
    private SearchView searchTen;
    private ListView listView;
<A NAME="197"></A>    private Spinner cmdLoaiCa;
    private ImageButton btnCall, btnReturn;
    private String strTaiKhoan, strLoaiCa, strSoDienThoai, strCoQuan,
            strMaTinh, <FONT color="#f660ab"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#197',2,'match0-top.html#197',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>strMaHuyen, strTrongLuong;
    private final ArrayList&lt;String&gt; listMaLoaiCa = new ArrayList&lt;&gt;(); //Khai báo danh sách loại cá giống hay cá thịt
    private final ArrayList&lt;String&gt; listTenLoaiCa = new ArrayList&lt;&gt;();
    private ListViewThucAnView adapterThucAn</B></FONT>;
    private FragmentManager fragmentManager; //Tạo Fragment
    private FragmentTransaction fragmentTransaction;
    private ClassConnect classConnect;
    private final ClassPublic classPublic = new ClassPublic();
    public static ArrayList&lt;ClassThucAnView&gt; arrayListThucAn;
<A NAME="461"></A>    int intDieuKienGan;
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);
        view = <FONT color="#4863a0"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#461',2,'match0-top.html#461',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>inflater.inflate(R.layout.fragment_thuc_an_view, container, false);
        Bundle bundle = this.getArguments();
        if (bundle != null) {
            strTaiKhoan = bundle.getString(&quot;TaiKhoan&quot;); //Lấy tên tài khoản được gửi qua từ FragmentCtyThucAn
            strSoDienThoai = bundle</B></FONT>.getString(&quot;SoDienThoai&quot;);//Lấy số điện thoại được gửi qua từ FragmentCtyThucAn
            strCoQuan = bundle.getString(&quot;CongTy&quot;);//Lấy tên cơ quan được gửi quan từ FragmentCtyThucAn
            strMaTinh = bundle.getString(&quot;MaTinh&quot;);//Lấy mã tỉnh để chuyển về đúng vị trí
            strMaHuyen = bundle.getString(&quot;MaHuyen&quot;);//Lẩy mã huyện để chuyển về đúng vị trí
            strTrongLuong = bundle.getString(&quot;TrongLuong&quot;);
        }
        layoutAnhXa(); //Ánh xạ các đối tượng Layout
        return view;
    }

    @SuppressLint({&quot;NewApi&quot;, &quot;UseRequireInsteadOfGet&quot;})
    private void layoutAnhXa() {
<A NAME="730"></A>        textTieuDe = view.findViewById(R.id.textTieuDe);
        textDiaChi = view.findViewById(R.id.textDiaChi);
        btnCall = view.findViewById(R.id.btnCall);
        <FONT color="#827d6b"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#730',2,'match0-top.html#730',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>btnReturn = view.findViewById(R.id.btnReturn);
        searchTen = view.findViewById(R.id.searchTen);
        listView = view.findViewById(R.id.listView);
        cmdLoaiCa = view.findViewById(R.id.cmdLoaiCa);
        fragmentManager = Objects.requireNonNull(getActivity()).getSupportFragmentManager();
        loadTenCtyThucAn</B></FONT>(strTaiKhoan); //Lấy tên Cty theo tên tài khoản
        loadLoaiCa();//Load loại cá
        clickButton();
    }

    private void clickButton() {
<A NAME="25"></A>        //Liên hệ cơ quan
        btnCall.setOnClickListener(v -&gt; {
        if (strSoDienThoai.length() != 0) {
            <FONT color="#87f717"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#25',2,'match0-top.html#25',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>if (strSoDienThoai.length() &gt;= 10) {
                //Hiện hộp thoại thông báo
                AlertDialog.Builder builder = new AlertDialog.Builder(getActivity() );
                builder.setTitle(&quot;THÔNG BÁO&quot;);
                builder.setIcon(R.drawable.ic_thongbao);
                builder.setMessage(&quot;Bạn muốn gọi cho &quot; + strCoQuan +&quot; không?&quot;);
                builder</B></FONT>.setCancelable(false);
                builder.setPositiveButton(&quot;Đồng ý&quot;, (dialogInterface, i) -&gt; requireActivity().startActivity (new Intent(Intent.ACTION_DIAL, Uri.parse(&quot;tel: &quot; +strSoDienThoai))));
                builder.setNegativeButton(&quot;Hủy bỏ&quot;, (dialogInterface, i) -&gt; {
<A NAME="568"></A>                    //Đóng hộp thoại thông báo
                    dialogInterface.dismiss();
                });
                AlertDialog alertDialog = <FONT color="#92c7c7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#568',2,'match0-top.html#568',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>builder.create();
                alertDialog.show();
            } else {
                classPublic.ThongBao(getActivity(), &quot;Số điện thoại không đúng&quot;);
            }
        }
        else {
            classPublic.ThongBao(getActivity(), &quot;Chưa cập nhật số điện thoại&quot;);
<A NAME="416"></A>        }</B></FONT>
        });
        btnReturn.setOnClickListener(v -&gt; {
            <FONT color="#b041ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#416',2,'match0-top.html#416',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>fragmentTransaction = fragmentManager.beginTransaction();
            FragmentCtyThucAn fragment = new FragmentCtyThucAn();
            Bundle bundle = new Bundle();
            bundle.putString(&quot;MaTinh&quot;, strMaTinh);
            bundle.putString(&quot;MaHuyen&quot;, strMaHuyen);
            fragment.setArguments(bundle);
            fragmentTransaction.replace(R.id.fragment_main, fragment);
            fragmentTransaction</B></FONT>.commit();
<A NAME="476"></A>        });
    }
    private void loadLoaiCa(){
        <FONT color="#3b9c9c"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#476',2,'match0-top.html#476',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>listMaLoaiCa.clear(); //Xóa danh sách đang có
        listTenLoaiCa.clear();
        listMaLoaiCa.add(&quot;1&quot;);
<A NAME="321"></A>        listTenLoaiCa.add(&quot;Cá giống&quot;);
        listMaLoaiCa.add(&quot;2&quot;);
        listTenLoaiCa.add(&quot;Cá thịt&quot;);
        ArrayAdapter&lt;String&gt; dataLoaiTaiKhoan = new ArrayAdapter</B></FONT>&lt;&gt;(<FONT color="#3ea99f"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#321',2,'match0-top.html#321',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>getActivity(), android.R.layout.simple_spinner_item,listTenLoaiCa);
        dataLoaiTaiKhoan.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
        cmdLoaiCa.setAdapter(dataLoaiTaiKhoan);
        cmdLoaiCa.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaLoaiCa.isEmpty()) {
                    strLoaiCa = listMaLoaiCa.get(position);
                    loadThucAn(); //Load thức ăn
                }
            }
            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }</B></FONT>
<A NAME="605"></A>
    private void loadTenCtyThucAn(String taiKhoan) {
        if (!taiKhoan.isEmpty()){
            <FONT color="#87f717"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#605',2,'match0-top.html#605',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>try {
                classConnect = new ClassConnect(); //Mở kết nối đến SQL
                String sqlCty = &quot;select CongTy, TenTinh, TenHuyen, TenXa, nd.MaTinh from TB_NguoiDung nd, TB_Tinh t, TB_Huyen h, TB_Xa x&quot; +
                        &quot; where nd.MaTinh = t.MaTinh and nd.MaHuyen = h.MaHuyen and nd.MaXa = x.MaXa and nd.TaiKhoan = '&quot;+taiKhoan+&quot;'&quot;;
<A NAME="614"></A>                ResultSet resultSetCty = classConnect.selectData(getActivity(), sqlCty);
                if (resultSetCty != null &amp;&amp; resultSetCty.next()){
                    textTieuDe.setText(resultSetCty.getString(&quot;CongTy&quot;));
                    textDiaChi</B></FONT>.setText(resultSetCty.getString(&quot;TenXa&quot;).concat(&quot;-&quot;+<FONT color="#827d6b"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#614',2,'match0-top.html#614',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>resultSetCty.getString(&quot;TenHuyen&quot;).concat(&quot;-&quot;+resultSetCty.getString(&quot;TenTinh&quot;))));

                }
                classConnect.CONN(getActivity()).close(); //Đóng kết nối đến SQL
            }catch (Exception e){
                Log.e(&quot;TAG&quot;, e</B></FONT>.getMessage());
            }
        }
        else {
            fragmentTransaction = fragmentManager.beginTransaction();
            fragmentTransaction.replace(R.id.fragment_main, new FragmentCtyThucAn());
            fragmentTransaction.commit();
        }
    }
    private void loadThucAn() {
        intDieuKienGan = 0;
        arrayListThucAn = new ArrayList&lt;&gt;();
        arrayListThucAn.clear();
        int intSTT = 1;
        try {
            classConnect = new ClassConnect();//Mở kết nối SQL
            //Liên kết bảng trên SQL
            String strsqlThucAn = &quot;select Anh, TenThucAn, TrongLuongCaTu, TrongLuongCaDen, GiaBan, DonViTinh, GioiThieu from TB_ThucAn where TaiKhoan = '&quot;+strTaiKhoan+&quot;' and LoaiCa = '&quot;+strLoaiCa+&quot;' order by mathucan desc&quot;;
<A NAME="618"></A>            ResultSet resultSetThucAn = classConnect.selectData(getActivity(),strsqlThucAn);
            if (resultSetThucAn != null){
                while (resultSetThucAn.next()){
                    arrayListThucAn.add(new ClassThucAnView(intSTT ++,resultSetThucAn.getString(&quot;Anh&quot;),resultSetThucAn.getString(&quot;TenThucAn&quot;), <FONT color="#348781"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#618',2,'match0-top.html#618',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>resultSetThucAn.getString(&quot;TrongLuongCaTu&quot;).concat(&quot;-&quot;+resultSetThucAn.getString(&quot;TrongLuongCaDen&quot;)+&quot;g&quot;),
                            resultSetThucAn.getString(&quot;GiaBan&quot;),resultSetThucAn.getString(&quot;DonViTinh&quot;), resultSetThucAn.getString(&quot;GioiThieu&quot;)));
                }
            }
            if (arrayListThucAn.isEmpty()){
                classPublic.ThongBao(getActivity(),&quot;Thông báo! Đang cập nhật danh sách thức ăn&quot;);
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối đến SQL
<A NAME="619"></A>        }catch (Exception e){
            Log.e(&quot;TAG&quot;, e</B></FONT>.getMessage() );
        }
         <FONT color="#152dc6"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#619',2,'match0-top.html#619',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>adapterThucAn = new ListViewThucAnView(getContext());
        listView.setAdapter(adapterThucAn);
        //Xử lí khi nhập vào ô tìm kiếm
        searchTen.setOnQueryTextListener(this);
    }
    @Override
    public boolean onQueryTextSubmit(String query) {
        return false;
    }

    @Override
    public boolean onQueryTextChange(String newText) { //Tìm theo thức ăn
        adapterThucAn.filter(newText);
        return false;
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>CtyThucAn\ListViewCtyThucAn.java</CENTER></H3><HR>
<PRE>
<A NAME="573"></A>package com.example.basa.CtyThucAn;

<FONT color="#b38481"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#573',2,'match0-top.html#573',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.annotation.SuppressLint;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.Intent;
import android.net.ConnectivityManager;
import android.net.Uri;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.TextView;

import com.example.basa.BinhLuan.FragmentBinhLuan;
import com.example.basa.Class.ClassConnect;
import com.example.basa.Class.ClassPublic;
import com.example.basa.R;

import java.util.ArrayList;
import java.util.Locale;
import java.util.Objects;

public class ListViewCtyThucAn extends BaseAdapter {
    private final Context mContext;
    private final LayoutInflater inflater;
<A NAME="82"></A>    private ClassPublic classPublic = new ClassPublic();
    private ClassConnect classConnect</B></FONT>;
    private final ArrayList &lt;ClassCtyThucAn&gt; arraylist;
    public <FONT color="#ada96e"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#82',2,'match0-top.html#82',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>ListViewCtyThucAn(Context context) {
        mContext = context;
        inflater = LayoutInflater.from(mContext);
        this.arraylist = new ArrayList&lt;&gt;();
<A NAME="92"></A>        this.arraylist.addAll(FragmentCtyThucAn.arrayListCtyThucAn);
    }</B></FONT>

    public <FONT color="#827d6b"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#92',2,'match0-top.html#92',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>void filter(String charText) {
        charText = charText.toLowerCase(Locale.getDefault());
        FragmentCtyThucAn.arrayListCtyThucAn.clear();
        if (charText.length() == 0) {
            FragmentCtyThucAn.arrayListCtyThucAn.addAll(arraylist);
        } else {
            for (ClassCtyThucAn wp : arraylist) {
                if (wp.getStrCoQuan().toLowerCase(Locale.getDefault()).contains(charText)) {
                    FragmentCtyThucAn.arrayListCtyThucAn.add(wp);
                }
            }
        }
<A NAME="359"></A>        notifyDataSetChanged();
    }</B></FONT>

    public static <FONT color="#571b7e"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#359',2,'match0-top.html#359',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>class ViewHolder {
        TextView textSTT;
        TextView textCoQuan;
        TextView textSoDienThoai;
        TextView textEmail;
        TextView textDiaChi;
        TextView textBinhLuan, textLuotThich;
        ImageButton btnCall, btnThucAn, btnBinhLuan, btnLike;
        ImageView imgCty;
    }
    @Override
    public int getCount() {
        return FragmentCtyThucAn.arrayListCtyThucAn.size();
    }

    @Override
    public Object getItem(int position) {
        return FragmentCtyThucAn.arrayListCtyThucAn.get(position);
    }
    @Override
    public long getItemId(int position) {
        return position;
    }

    @SuppressLint({&quot;InflateParams&quot;, &quot;SetTextI18n&quot;})
    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.listview_cty_thucan, null);
            holder.textSTT = convertView.findViewById(R.id.textSTT);
            holder.textCoQuan = convertView.findViewById(R.id.textCoQuan);
            holder.textSoDienThoai = convertView.findViewById(R.id.textSoDienThoai);
            holder.textEmail = convertView.findViewById(R.id.textEmail);
            holder.textDiaChi = convertView.findViewById(R.id.textDiaChi);
            holder.textLuotThich =convertView.findViewById(R.id.textLuotThich);
            holder.textBinhLuan = convertView.findViewById(R.id.textBinhLuan);
            holder.btnCall = convertView.findViewById(R.id.btnCall);
            holder.btnThucAn = convertView.findViewById(R.id.btnThucAn);
            holder.btnLike = convertView.findViewById(R.id.btnLike);
            holder.btnBinhLuan = convertView.findViewById(R.id.btnBinhLuan);
            holder.imgCty = convertView.findViewById(R.id.imgCty);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        //Kiểm tra kết nối đến hosting
        ConnectivityManager connectivityManager = (ConnectivityManager) mContext</B></FONT>.getSystemService (Context.CONNECTIVITY_SERVICE);
        if(Objects.requireNonNull(connectivityManager).getActiveNetworkInfo() != null &amp;&amp; Objects.requireNonNull(connectivityManager.getActiveNetworkInfo()).isAvailable()
                &amp;&amp; connectivityManager.getActiveNetworkInfo().isConnected()) {
            String strAnh = FragmentCtyThucAn.arrayListCtyThucAn.get(position).getStrAnh();
            classPublic = new ClassPublic();
            if (!strAnh.isEmpty()) {
                classPublic.downloadImage(&quot;http://hoclamaimai.com/&quot; + strAnh, holder.imgCty); //Load ảnh đại diện
            }
            else {
<A NAME="362"></A>                holder.imgCty.setImageResource(R.drawable.img_no_image);
            }
        }
        <FONT color="#f52887"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#362',2,'match0-top.html#362',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>else {
            Log.e(&quot;TAG&quot;,&quot;LỖI! Kết nối đến hosting.&quot;);
        }
        holder.textSTT.setText(FragmentCtyThucAn.arrayListCtyThucAn.get(position).getIntSTT()+&quot;.&quot;);
        holder.textBinhLuan.setText(FragmentCtyThucAn.arrayListCtyThucAn.get(position).getIntBinhLuan()+&quot; Bình luận&quot;);
        //Hiển thị thêm các chữ này lên
        //.toUpperCase : Chuyển sang chữ in hoa hết
        String soDienThoai = &quot;Số điện thoại : &quot;</B></FONT>;
        String email = &quot;Email : &quot;;
        String diaChi = &quot;&quot;;
        holder.textDiaChi.setText(diaChi.concat(FragmentCtyThucAn.arrayListCtyThucAn.get(position).getStrDiaChi()));
        holder.textCoQuan.setText(FragmentCtyThucAn.arrayListCtyThucAn.get(position).getStrCoQuan().toUpperCase());
        holder.textSoDienThoai.setText(soDienThoai.concat(FragmentCtyThucAn.arrayListCtyThucAn.get(position).getStrSoDienThoai()));
<A NAME="352"></A>        holder.textEmail.setText(email.concat(FragmentCtyThucAn.arrayListCtyThucAn.get(position).getStrEmail()));
        holder.btnCall.setOnClickListener(v -&gt; {
        if (arraylist.get(position) != null) {
            if (<FONT color="#151b8d"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#352',2,'match0-top.html#352',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>arraylist.get(position).getStrSoDienThoai().length() != 0) {
                if (arraylist.get(position).getStrSoDienThoai().length() &gt;= 10) {
                    //Hiện hộp thoại thông báo
                    AlertDialog.Builder builder = new AlertDialog.Builder(mContext);
                    builder.setTitle(&quot;THÔNG BÁO&quot;);
                    builder.setIcon(R.drawable.ic_thongbao);
                    builder.setMessage(&quot;Bạn muốn gọi cho &quot; + arraylist.get(position).getStrCoQuan()+&quot; không?&quot;);
                    builder</B></FONT>.setCancelable(false);
                    builder.setPositiveButton(&quot;Đồng ý&quot;, (dialogInterface, i) -&gt; mContext.startActivity (new Intent(Intent.ACTION_DIAL, Uri.parse(&quot;tel: &quot; + arraylist.get(position).getStrSoDienThoai()))));
                    builder.setNegativeButton(&quot;Hủy bỏ&quot;, (dialogInterface, i) -&gt; {
<A NAME="353"></A>                        //Đóng hộp thoại thông báo
                        dialogInterface.dismiss();
                    });
                    AlertDialog <FONT color="#c8c2a7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#353',2,'match0-top.html#353',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>alertDialog = builder.create();
                    alertDialog.show();
                } else {
                    classPublic.ThongBao((Activity) mContext, &quot;Số điện thoại không đúng&quot;);
                }
            }
            else {
                classPublic.ThongBao((Activity) mContext, &quot;Chưa cập nhật số điện thoại&quot;);
            }</B></FONT>
<A NAME="354"></A>        }
        });
        holder.btnThucAn.setOnClickListener(v -&gt; {
            <FONT color="#50ebec"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#354',2,'match0-top.html#354',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>FragmentCtyThucAn.fragmentTransaction = FragmentCtyThucAn.fragmentManager.beginTransaction();//Tại trang chính
            FragmentThucAnView fragment = new FragmentThucAnView();//Trang chuyển
            Bundle bundle = new Bundle();
            bundle.putString(&quot;TaiKhoan&quot;, FragmentCtyThucAn.arrayListCtyThucAn.get(position).getStrTenNguoiDung());
            bundle.putString(&quot;SoDienThoai&quot;, FragmentCtyThucAn.arrayListCtyThucAn.get(position).getStrSoDienThoai());
            bundle.putString(&quot;CongTy&quot;,FragmentCtyThucAn.arrayListCtyThucAn.get(position).getStrCoQuan());
            bundle.putString(&quot;MaTinh&quot;,FragmentCtyThucAn</B></FONT>.arrayListCtyThucAn.get(position).getStrMaTinh());
            bundle.putString(&quot;MaHuyen&quot;,FragmentCtyThucAn.arrayListCtyThucAn.get(position).getStrMaHuyen());
            fragment.setArguments(bundle);
            FragmentCtyThucAn.fragmentTransaction.replace(R.id.fragment_main,fragment);
<A NAME="535"></A>            FragmentCtyThucAn.fragmentTransaction.commit();
        });
        holder.btnBinhLuan.setOnClickListener(v -&gt; {
            <FONT color="#842dce"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#535',2,'match0-top.html#535',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>FragmentCtyThucAn.fragmentTransaction = FragmentCtyThucAn.fragmentManager.beginTransaction();//Tại trang chính
            FragmentBinhLuan fragment = new FragmentBinhLuan();//Trang chuyển
            Bundle bundle = new Bundle();
            bundle.putInt(&quot;DieuKien&quot;, 1);
            bundle.putString(&quot;TaiKhoan&quot;, FragmentCtyThucAn.arrayListCtyThucAn.get(position).getStrTenNguoiDung());
            bundle.putString(&quot;CongTy&quot;,FragmentCtyThucAn.arrayListCtyThucAn.get(position).getStrCoQuan());
            bundle.putString(&quot;DiaChi&quot;,FragmentCtyThucAn.arrayListCtyThucAn.get(position).getStrDiaChi());
            fragment</B></FONT>.setArguments(bundle);
            FragmentCtyThucAn.fragmentTransaction.replace(R.id.fragment_main,fragment);
<A NAME="705"></A>            FragmentCtyThucAn.fragmentTransaction.commit();
        });
        final Integer[] intThich = {FragmentCtyThucAn.arrayListCtyThucAn.get(position).getIntLuotThich()};
        <FONT color="#f88017"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#705',2,'match0-top.html#705',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>holder.textLuotThich.setText(intThich[0] +&quot; Lượt thích&quot;);
        //Click nút thích
        holder.btnLike.setOnClickListener(v -&gt; { //Click nút lượt thích
            try{
                classConnect = new ClassConnect(); //Mở kết nối đến SQL
                String sqlThich = &quot;update TB_NguoiDung set LuotThich = '&quot;+(++intThich[0])+&quot;' where TaiKhoan = '&quot;+FragmentCtyThucAn.arrayListCtyThucAn.get(position).getStrTaiKhoan()+&quot;'&quot;;
                if (classConnect.updateData((Activity)mContext,sqlThich) == 1){
                    holder</B></FONT>.textLuotThich.setText(intThich[0] + &quot; Lượt thích&quot;); //Tăng lượt thích lên 1
                }
                classConnect.CONN((Activity)mContext).close(); //Đóng kết nối đến SQL
            }catch (Exception e){
                Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
            }
        });
        return convertView;
    }
}
</PRE>
<HR>
<H3><CENTER>CtyThucAn\ListViewThucAnAoNuoi.java</CENTER></H3><HR>
<PRE>
<A NAME="368"></A>package com.example.basa.CtyThucAn;

import android.annotation.SuppressLint;
<FONT color="#d4a017"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#368',2,'match0-top.html#368',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.Intent;
import android.net.ConnectivityManager;
import android.net.Uri;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.TextView;

import com.example.basa.Class.ClassPublic;
import com.example.basa.R;

import java.text.DecimalFormat;
import java.util.ArrayList;
import java.util.Locale;
import java.util.Objects;

public class ListViewThucAnAoNuoi extends BaseAdapter {
<A NAME="283"></A>    private final Context mContext;
    private ClassPublic classPublic</B></FONT>;
    private final LayoutInflater inflater;
    private final ArrayList&lt;ClassThucAnAoNuoi&gt; <FONT color="#b38481"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#283',2,'match0-top.html#283',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>arraylist;
    public ListViewThucAnAoNuoi (Context context) {
        mContext = context;
        inflater = LayoutInflater.from(mContext);
        this.arraylist = new ArrayList&lt;&gt;();
        this.arraylist.addAll(FragmentThucAnAoNuoi.arrayListThucAn);
<A NAME="591"></A>
    }
    public static class</B></FONT> ViewHolder {
        TextView textSTT, <FONT color="#571b7e"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#591',2,'match0-top.html#591',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>textTenCongTy, textTenThucAn, textTrongLuong, textGiaBan, textGioiThieu;
        ImageView imgIcon;
        ImageButton btnCall;
    }
    @Override
    public int getCount() {
        return FragmentThucAnAoNuoi.arrayListThucAn.size();
    }

    @Override
    public Object getItem(int position) {
        return FragmentThucAnAoNuoi.arrayListThucAn.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @SuppressLint({&quot;InflateParams&quot;, &quot;SetTextI18n&quot;, &quot;NewApi&quot;})
    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.listview_thucan_aonuoi, null);
            holder.textSTT = convertView.findViewById(R.id.textSTT);
            holder.textTenCongTy = convertView.findViewById(R.id.textTenCty);
            holder.textTenThucAn = convertView.findViewById(R.id.textTenThucAn);
            holder.textTrongLuong = convertView.findViewById(R.id.textTrongLuong);
            holder.textGiaBan = convertView.findViewById(R.id.textGiaBan);
<A NAME="709"></A>            holder.textGioiThieu = convertView.findViewById(R.id.textGioiThieu);
            holder.imgIcon = convertView</B></FONT>.findViewById(R.id.imgIcon);
            holder.btnCall = convertView.findViewById(R.id.btnCall);
            <FONT color="#842dce"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#709',2,'match0-top.html#709',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        Integer intSTT = FragmentThucAnAoNuoi.arrayListThucAn.get(position).getIntSTT();
        if (intSTT &lt; 10){
            holder</B></FONT>.textSTT.setText(&quot;[0&quot;+intSTT+&quot;]&quot;);
        }
        else {
            holder.textSTT.setText(&quot;[&quot;+intSTT+&quot;]&quot;);
        }
        String strAnh = FragmentThucAnAoNuoi.arrayListThucAn.get(position).getImgAnh();
        if (strAnh.equals(&quot;&quot;)){
            holder.imgIcon.setImageResource(R.drawable.img_no_image);
<A NAME="84"></A>        }
        else {
            //Kiểm tra kết nối đến hosting
            ConnectivityManager <FONT color="#95b9c7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#84',2,'match0-top.html#84',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>connectivityManager = (ConnectivityManager) mContext.getSystemService(Context.CONNECTIVITY_SERVICE);
            if (Objects.requireNonNull(connectivityManager).getActiveNetworkInfo() != null &amp;&amp; Objects.requireNonNull(connectivityManager.getActiveNetworkInfo()).isAvailable()
                    &amp;&amp; connectivityManager.getActiveNetworkInfo().isConnected()) {
                classPublic = new ClassPublic();
                classPublic.downloadImage(&quot;http://hoclamaimai.com/&quot; + strAnh, holder.imgIcon); //Load ảnh từ host
            } else {
                Log.e(&quot;TAG&quot;, &quot;LỖI! Kết nối đến hosting.&quot;);
            }</B></FONT>
        }
        holder.textTenCongTy.setText(FragmentThucAnAoNuoi.arrayListThucAn.get(position).getStrTenCongTy());
<A NAME="521"></A>        //Hiển thị thêm các chữ này lên
        String trongLuong = &quot;Trọng lượng : &quot;;
        String giaBan = &quot;Giá bán : &quot;;
        DecimalFormat <FONT color="#980517"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#521',2,'match0-top.html#521',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>formatter = new DecimalFormat(&quot;###,###,###&quot;);
        holder.textTenThucAn.setText(FragmentThucAnAoNuoi.arrayListThucAn.get(position).getStrTenThucAn());
        holder.textTrongLuong.setText(trongLuong.concat(FragmentThucAnAoNuoi</B></FONT>.arrayListThucAn.get(position).getStrTrongLuong()));
        holder.textGiaBan.setText(giaBan.concat(formatter.format(Integer.parseInt(FragmentThucAnAoNuoi.arrayListThucAn.get(position).getStrGiaBan()))).concat(&quot;đ/&quot;+FragmentThucAnAoNuoi.arrayListThucAn.get(position).getStrDonViTinh()));
        holder.textGioiThieu.setText(FragmentThucAnAoNuoi.arrayListThucAn.get(position).getStrGioiThieu());
<A NAME="364"></A>
        holder.btnCall.setOnClickListener(v -&gt; {
            if (arraylist.get(position) != null) {
                if (<FONT color="#3090c7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#364',2,'match0-top.html#364',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>arraylist.get(position).getStrSoDienThoai().length() != 0) {
                    if (arraylist.get(position).getStrSoDienThoai().length() &gt;= 10) {
                        //Hiện hộp thoại thông báo
                        AlertDialog.Builder builder = new AlertDialog.Builder(mContext);
                        builder.setTitle(&quot;THÔNG BÁO&quot;);
                        builder.setIcon(R.drawable.ic_thongbao);
                        builder.setMessage(&quot;Bạn muốn gọi cho &quot; + arraylist.get(position).getStrTenCongTy()+&quot; không?&quot;);
                        builder</B></FONT>.setCancelable(false);
                        builder.setPositiveButton(&quot;Đồng ý&quot;, (dialogInterface, i) -&gt; mContext.startActivity (new Intent(Intent.ACTION_DIAL, Uri.parse(&quot;tel: &quot; + arraylist.get(position).getStrSoDienThoai()))));
                        builder.setNegativeButton(&quot;Hủy bỏ&quot;, (dialogInterface, i) -&gt; {
<A NAME="365"></A>                            //Đóng hộp thoại thông báo
                            dialogInterface.dismiss();
                        });
                        AlertDialog <FONT color="#800517"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#365',2,'match0-top.html#365',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>alertDialog = builder.create();
                        alertDialog.show();
                    } else {
                        classPublic.ThongBao((Activity) mContext, &quot;Số điện thoại không đúng&quot;);
                    }
                }
<A NAME="512"></A>                else {
                    classPublic.ThongBao((Activity) mContext, &quot;Chưa cập nhật số điện thoại&quot;);
                }</B></FONT>
            <FONT color="#c57726"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#512',2,'match0-top.html#512',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
        });

        return convertView;
    }
    public void filter(String charText) {
        charText = charText.toLowerCase(Locale.getDefault());
        FragmentThucAnAoNuoi.arrayListThucAn.clear();
        if (charText.length() == 0) {
            FragmentThucAnAoNuoi.arrayListThucAn.addAll(arraylist);
        } else {
            for (ClassThucAnAoNuoi wp : arraylist) {
                if (wp.getStrTenCongTy().toLowerCase(Locale.getDefault()).contains(charText)||wp</B></FONT>.getStrTenThucAn().toLowerCase(Locale.getDefault()).contains(charText)) {
                    FragmentThucAnAoNuoi.arrayListThucAn.add(wp);
                }
            }
        }
        notifyDataSetChanged();
    }
}
</PRE>
<HR>
<H3><CENTER>CtyThucAn\ListViewThucAnEdit.java</CENTER></H3><HR>
<PRE>
<A NAME="544"></A><FONT color="#4cc417"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#544',2,'match0-top.html#544',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.CtyThucAn;

import android.annotation.SuppressLint;
import android.content.Context;
import android.net.ConnectivityManager;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;

import com.example.basa.Class.ClassPublic;
import com.example.basa.R;

import java.text.DecimalFormat;
import java.util.ArrayList;
import java.util.Locale;
import java.util.Objects;

public class ListViewThucAnEdit extends BaseAdapter {
    private final Context mContext</B></FONT>;
<A NAME="205"></A>    private final LayoutInflater inflater;
    private ClassPublic classPublic;
    private final ArrayList&lt;ClassThucAnEdit&gt; arraylist;
    public <FONT color="#3ea99f"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#205',2,'match0-top.html#205',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>ListViewThucAnEdit(Context context) {
        mContext = context;
        inflater = LayoutInflater.from(mContext);
        this.arraylist = new ArrayList&lt;&gt;();
        this.arraylist.addAll(FragmentThucAnEdit.arrayListThucAn);

    }
    public static class ViewHolder {
        TextView textSTT;
        TextView textTenThucAn;
        TextView textTrongLuong;
        TextView textGiaBan;
        TextView textGioiThieu;
        ImageView imgIcon;
    }
    @Override
    public int getCount() {
        return FragmentThucAnEdit.arrayListThucAn.size();
    }

    @Override
    public Object getItem(int position) {
        return FragmentThucAnEdit.arrayListThucAn.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @SuppressLint({&quot;InflateParams&quot;, &quot;SetTextI18n&quot;, &quot;NewApi&quot;})
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.listview_thucan_edit, null);
            holder.textSTT= convertView.findViewById(R.id.textSTT);
            holder.textTenThucAn = convertView.findViewById(R.id.textTenThucAn);
            holder.textTrongLuong = convertView.findViewById(R.id.textTrongLuong);
            holder.textGiaBan = convertView.findViewById(R.id.textGiaBan);
            holder.textGioiThieu = convertView.findViewById(R.id.textGioiThieu);
            holder.imgIcon = convertView.findViewById(R.id.imgIcon);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }</B></FONT>
        Integer intSTT = FragmentThucAnEdit.arrayListThucAn.get(position).getIntSTT();
        if (intSTT &lt; 10){
            holder.textSTT.setText(&quot;[0&quot;+intSTT+&quot;]&quot;);
        }
        else {
            holder.textSTT.setText(&quot;[&quot;+intSTT+&quot;]&quot;);
<A NAME="73"></A>        }
        //Kiểm tra kết nối đến hosting
        ConnectivityManager connectivityManager = (ConnectivityManager) mContext.getSystemService (Context.CONNECTIVITY_SERVICE);
<A NAME="528"></A>        if(Objects.requireNonNull(connectivityManager).getActiveNetworkInfo() != null &amp;&amp; <FONT color="#3bb9ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#73',2,'match0-top.html#73',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>Objects.requireNonNull(connectivityManager.getActiveNetworkInfo()).isAvailable()
                &amp;&amp; connectivityManager.getActiveNetworkInfo().isConnected()) {
            String strAnh = FragmentThucAnEdit.arrayListThucAn.get(position).getImgAnh();
            if</B></FONT> (!<FONT color="#50ebec"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#528',2,'match0-top.html#528',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>strAnh.isEmpty() || !strAnh.equals(&quot;&quot;)){
                classPublic = new ClassPublic();
                classPublic.downloadImage(&quot;http://hoclamaimai.com/&quot; + strAnh, holder.imgIcon); //Load ảnh từ host
            }
            else {
                holder.imgIcon.setImageResource(R.drawable.img_no_image);
            }
        }
        else {
            Log.e(&quot;TAG&quot;,&quot;LỖI! Kết nối đến hosting.&quot;);
        }
<A NAME="522"></A>        //Hiển thị thêm các chữ này lên
        String trongLuong = &quot;Trọng lượng : &quot;</B></FONT>;
        String giaBan = &quot;Giá bán : &quot;;
        DecimalFormat <FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#522',2,'match0-top.html#522',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>formatter = new DecimalFormat(&quot;###,###,###&quot;);
        holder.textGiaBan.setText(giaBan.concat(formatter.format(Integer.parseInt(FragmentThucAnEdit</B></FONT>.arrayListThucAn.get(position).getStrGia()))).concat(&quot;đ/&quot;+ FragmentThucAnEdit.arrayListThucAn.get(position).getStrDonViTinh()));
<A NAME="412"></A>        holder.textTenThucAn.setText(FragmentThucAnEdit.arrayListThucAn.get(position).getStrTenThucAn());
        holder.textTrongLuong.setText(trongLuong.concat(FragmentThucAnEdit.arrayListThucAn.get(position).getStrTrongLuongCaTu().concat(&quot;-&quot;+ FragmentThucAnEdit.arrayListThucAn.get(position).getStrTrongLuongCaDen()+&quot;g&quot;)));
        holder.textGioiThieu.setText(FragmentThucAnEdit.arrayListThucAn.get(position).getStrGioiThieu());
        <FONT color="#50ebec"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#412',2,'match0-top.html#412',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>return convertView;
    }
    public void filter(String charText) {
        charText = charText.toLowerCase(Locale.getDefault());
        FragmentThucAnEdit.arrayListThucAn.clear();
        if (charText.length() == 0) {
            FragmentThucAnEdit.arrayListThucAn.addAll(arraylist);
        } else {
            for (ClassThucAnEdit wp : arraylist) {
                if (wp.getStrTenThucAn().toLowerCase(Locale.getDefault()).contains(charText)||wp</B></FONT>.getStrTrongLuongCaDen().toLowerCase(Locale.getDefault()).contains(charText)) {
                    FragmentThucAnEdit.arrayListThucAn.add(wp);
                }
            }
        }
        notifyDataSetChanged();
    }
}
</PRE>
<HR>
<H3><CENTER>CtyThucAn\ListViewThucAnView.java</CENTER></H3><HR>
<PRE>
<A NAME="669"></A>package com.example.basa.CtyThucAn;

<FONT color="#3ea99f"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#669',2,'match0-top.html#669',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.annotation.SuppressLint;
import android.content.Context;
import android.net.ConnectivityManager;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;

import com.example.basa.R;
import com.example.basa.Class.ClassPublic;

import java.text.DecimalFormat;
import java.util.ArrayList;
import java.util.Locale;
import java.util.Objects;

public class ListViewThucAnView extends BaseAdapter {
    private final Context mContext;
<A NAME="169"></A>    private ClassPublic classPublic</B></FONT>;
    private final LayoutInflater inflater;
    private final ArrayList&lt;ClassThucAnView&gt; arraylist;
    public <FONT color="#f88158"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#169',2,'match0-top.html#169',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>ListViewThucAnView (Context context) {
        mContext = context;
        inflater = LayoutInflater.from(mContext);
        this.arraylist = new ArrayList&lt;&gt;();
        this.arraylist.addAll(FragmentThucAnView.arrayListThucAn);

    }
    public static class ViewHolder {
        TextView textSTT;
        TextView textTenThucAn;
        TextView textTrongLuong;
        TextView textGiaBan;
        TextView textGioiThieu;
        ImageView imgIcon;
    }
    @Override
    public int getCount() {
        return FragmentThucAnView.arrayListThucAn.size();
    }

    @Override
    public Object getItem(int position) {
        return FragmentThucAnView.arrayListThucAn.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @SuppressLint({&quot;InflateParams&quot;, &quot;SetTextI18n&quot;, &quot;NewApi&quot;, &quot;MissingPermission&quot;})
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.listview_thucan_view, null);
            holder.textSTT = convertView.findViewById(R.id.textSTT);
            holder.textTenThucAn = convertView.findViewById(R.id.textTenThucAn);
            holder.textTrongLuong = convertView.findViewById(R.id.textTrongLuong);
            holder.textGiaBan = convertView.findViewById(R.id.textGiaBan);
            holder.textGioiThieu = convertView.findViewById(R.id.textGioiThieu);
            holder.imgIcon = convertView.findViewById(R.id.imgIcon);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        /*Integer intSTT = FragmentThucAnView.arrayListThucAn.get(position).getIntSTT();
        if (intSTT &lt; 10){
            holder.textSTT.setText(&quot;[0&quot;+intSTT+&quot;]&quot;);
        }
        else {
            holder.textSTT.setText(&quot;[&quot;+intSTT+&quot;]&quot;);
        }*/
<A NAME="85"></A>        holder.textSTT.setText(FragmentThucAnView</B></FONT>.arrayListThucAn.get(position).getIntSTT() + &quot;. &quot;);
        //Kiểm tra kết nối đến hosting
        ConnectivityManager connectivityManager = (ConnectivityManager) mContext.getSystemService (Context.CONNECTIVITY_SERVICE);
<A NAME="533"></A>        if(Objects.requireNonNull(connectivityManager).getActiveNetworkInfo() != null &amp;&amp; <FONT color="#e77471"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#85',2,'match0-top.html#85',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>Objects.requireNonNull(connectivityManager.getActiveNetworkInfo()).isAvailable()
                &amp;&amp; connectivityManager.getActiveNetworkInfo().isConnected()) {
            String strAnh = FragmentThucAnView.arrayListThucAn.get(position).getImgAnh();
            if</B></FONT> (!<FONT color="#571b7e"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#533',2,'match0-top.html#533',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>strAnh.isEmpty() || !strAnh.equals(&quot;&quot;)){
                classPublic = new ClassPublic();
                classPublic.downloadImage(&quot;http://hoclamaimai.com/&quot; + strAnh, holder.imgIcon); //Load ảnh từ host
            }
            else {
                holder.imgIcon.setImageResource(R.drawable.img_no_image);
            }
        }
        else {
            Log.e(&quot;TAG&quot;,&quot;LỖI! Kết nối đến hosting.&quot;);
        }
<A NAME="523"></A>        //Hiển thị thêm các chữ này lên
        String trongLuong = &quot;Trọng lượng : &quot;</B></FONT>;
        String giaBan = &quot;Giá bán : &quot;;
        DecimalFormat <FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#523',2,'match0-top.html#523',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>formatter = new DecimalFormat(&quot;###,###,###&quot;);
        holder.textTenThucAn.setText(FragmentThucAnView.arrayListThucAn.get(position).getStrTenThucAn());
<A NAME="526"></A>        holder.textTrongLuong.setText(trongLuong.concat(FragmentThucAnView</B></FONT>.arrayListThucAn.get(position).getStrTrongLuong()));
        holder.textGiaBan.setText(giaBan.concat(formatter.format(Integer.parseInt(FragmentThucAnView.arrayListThucAn.get(position).getStrGiaBan()))).concat(&quot;đ/&quot;+FragmentThucAnView.arrayListThucAn.get(position).getStrDonViTinh()));
        holder.textGioiThieu.setText(FragmentThucAnView.arrayListThucAn.get(position).getStrGioiThieu());
        <FONT color="#151b8d"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#526',2,'match0-top.html#526',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>return convertView;
    }
    public void filter(String charText) {
        charText = charText.toLowerCase(Locale.getDefault());
        FragmentThucAnView.arrayListThucAn.clear();
        if (charText.length() == 0) {
            FragmentThucAnView.arrayListThucAn.addAll(arraylist);
        } else {
            for (ClassThucAnView wp : arraylist) {
                if (wp.getStrTenThucAn().toLowerCase(Locale.getDefault()).contains(charText)||wp</B></FONT>.getStrTrongLuong().toLowerCase(Locale.getDefault()).contains(charText)) {
                    FragmentThucAnView.arrayListThucAn.add(wp);
                }
            }
        }
        notifyDataSetChanged();
    }
}
</PRE>
<HR>
<H3><CENTER>DiaChi\ClassStringHai.java</CENTER></H3><HR>
<PRE>
<A NAME="290"></A><FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#290',2,'match0-top.html#290',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.DiaChi;

public class ClassStringHai {
    private final String strSTT, strMa, strTen;
    public ClassStringHai(String strSTT, String strMa, String strTen){
        this.strSTT = strSTT;
        this.strMa = strMa;
        this.strTen = strTen;
    }

    public String getStrSTT() {
        return strSTT;
    }

    public String getStrMa() {
        return strMa;
    }

    public String getStrTen() {
        return strTen;
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>DiaChi\ClassXa.java</CENTER></H3><HR>
<PRE>
<A NAME="219"></A><FONT color="#79d867"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#219',2,'match0-top.html#219',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.DiaChi;

public class ClassXa {
    private final String strSTT, strMa, strTen, strKinhDo, strViDo;
    public ClassXa(String strSTT, String strMa, String strTen, String strKinhDo, String strViDo){
        this.strSTT = strSTT;
        this.strMa = strMa;
        this.strTen = strTen;
        this.strKinhDo = strKinhDo;
        this.strViDo = strViDo;
    }

    public String getStrSTT() {
        return strSTT;
    }

    public String getStrMa() {
        return strMa;
    }

    public String getStrTen() {
        return strTen;
    }

    public String getStrKinhDo() {
        return strKinhDo;
    }

    public String getStrViDo() {
        return strViDo;
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>DiaChi\FragmentHuyen.java</CENTER></H3><HR>
<PRE>
package com.example.basa.DiaChi;
<A NAME="262"></A>
import android.annotation.SuppressLint;
import android.app.AlertDialog;
<FONT color="#f9966b"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#262',2,'match0-top.html#262',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.ListView;
import android.widget.SearchView;
import android.widget.Spinner;
import android.widget.TextView;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;

import com.example.basa.Class.ClassConnect;
import com.example.basa.Class.ClassPublic;
import com.example.basa.Menu.FragmentMenu;
import com.example.basa.R;

import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.Objects;

public class FragmentHuyen extends Fragment implements SearchView.OnQueryTextListener {
    //Khai báo
    private View view;
    private SearchView searchView;
    private ImageButton btnThemMoi, btnQuayLai;
    private Spinner cmdTinh;
    private ListView listView;
    public static ArrayList&lt;ClassStringHai&gt; arrayListHuyen;
    private ListViewHuyen adapterHuyen;
    private ClassConnect classConnect;
    private final ClassPublic classPublic = new ClassPublic();
    private final ArrayList&lt;String&gt; listMaTinh = new ArrayList&lt;&gt;(); //Khai báo danh sách tỉnh
    private final ArrayList&lt;String&gt; listTenTinh = new ArrayList</B></FONT>&lt;&gt;();
    private String strMaTinh;
    //Khai báo chuyển fragment
    public static FragmentManager fragmentManager; //Fragment trang chủ
    public static FragmentTransaction fragmentTransaction;
    //Khai báo các đối tượng trên dialog
    private TextView textTieuDe;
<A NAME="392"></A>    private EditText editMaHuyen, editTenHuyen;
    private Button btnLuuLai, btnXoa, btnDong;

    public <FONT color="#e57ded"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#392',2,'match0-top.html#392',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);
        view = inflater.inflate(R.layout.fragment_huyen, container, false);
        fragmentManager = requireActivity().getSupportFragmentManager();//Chuyển đổi giữa các fragment
        layoutAnhXa(); //Ánh xạ các đối tượng trên layout
        loadTinh(); //Load tên tỉnh
        return view;
    }

    private void layoutAnhXa() {
        cmdTinh = view.findViewById(R.id.cmdTinh);
        listView = view.findViewById(R.id.listView);
        searchView = view</B></FONT>.findViewById(R.id.searchTen);
        btnThemMoi = view.findViewById(R.id.btnThemMoi);
        btnQuayLai = view.findViewById(R.id.btnQuayLai);
<A NAME="45"></A>        btnQuayLai.setOnClickListener(view -&gt; {
            fragmentTransaction = fragmentManager.beginTransaction();
            fragmentTransaction.replace(R.id.fragment_main, new FragmentMenu());
            <FONT color="#79d867"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#45',2,'match0-top.html#45',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>fragmentTransaction.commit();
        });
        clickListView(); //Chọn huyện trên listview
        clickButton(); //Click nút thêm mới
    }

    @SuppressLint(&quot;NewApi&quot;)
    private void loadTinh(){
        //Danh sách tỉnh
        listMaTinh.clear(); // Xóa danh sách tỉnh
        listTenTinh.clear();
        try{
            classConnect = new ClassConnect(); //Mở kết nối SQL
            String sqlTinh = &quot;select MaTinh, TenTinh from TB_Tinh&quot;;
            ResultSet resultSetTinh = classConnect.selectData(getActivity(), sqlTinh);
            if (resultSetTinh != null){
                while (resultSetTinh.next()){
                    listMaTinh.add(resultSetTinh.getString(&quot;MaTinh&quot;));
                    listTenTinh.add(resultSetTinh.getString(&quot;TenTinh&quot;));
                }
<A NAME="499"></A>                ArrayAdapter&lt;String&gt; dataTinh = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenTinh);
                dataTinh.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
                cmdTinh</B></FONT>.setAdapter(dataTinh);
            <FONT color="#41a317"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#499',2,'match0-top.html#499',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
            classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
        }
        cmdTinh.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
<A NAME="132"></A>            public void onItemSelected(AdapterView&lt;?</B></FONT>&gt; parent, View view, int position, long id) {
                strMaTinh = listMaTinh.get(position);
                loadDanhSachHuyen(strMaTinh); //Load danh sách huyện
            <FONT color="#3090c7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#132',2,'match0-top.html#132',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}

            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }

    private void clickListView(){
        listView.setOnItemClickListener((parent, view, position, id) -&gt; updateHuyen</B></FONT>(position));
    }

    private void clickButton() {
        btnThemMoi.setOnClickListener(v -&gt; updateHuyen(-1));
    }

    private void loadDanhSachHuyen(String maTinh) {
<A NAME="555"></A>        arrayListHuyen = new ArrayList&lt;&gt;();
        arrayListHuyen.clear();
        int intSTT = 1;
        <FONT color="#736aff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#555',2,'match0-top.html#555',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>try{
            classConnect = new ClassConnect(); //Mở kết nối đến SQL
            String sqlHuyen = &quot;select MaHuyen, TenHuyen from TB_Huyen where MaTinh = '&quot;+maTinh+&quot;'&quot;;
            ResultSet resultSetHuyen = classConnect.selectData(getActivity</B></FONT>(), sqlHuyen);
            if (resultSetHuyen != null){
                while (resultSetHuyen.next()){
                    arrayListHuyen.add(new ClassStringHai(String.valueOf(intSTT ++), resultSetHuyen.getString(&quot;MaHuyen&quot;), resultSetHuyen.getString(&quot;TenHuyen&quot;)));
                }
            }
            else {
                classPublic.ThongBao(getActivity(),&quot;Chưa cập nhật danh sách huyện&quot;);
<A NAME="248"></A>            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối đến SQL
        }catch (Exception e){
            <FONT color="#3090c7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#248',2,'match0-top.html#248',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>Log.e(&quot;TAG&quot;, e.getMessage());
        }
        adapterHuyen = new ListViewHuyen(getContext());
        listView.setAdapter(adapterHuyen);
        //Xử lý khi nhập vào ô tìm kiếm
        searchView.setOnQueryTextListener(this);
    }

    private void updateHuyen(final int intChiSo){
        LayoutInflater inflater = getLayoutInflater();
        @SuppressLint(&quot;InflateParams&quot;) View alertLayout = inflater.inflate(R.layout.dialog_huyen, null);
        textTieuDe = alertLayout.findViewById(R.id.textTieuDe);
        editMaHuyen = alertLayout.findViewById(R.id.editMaHuyen);
        editTenHuyen = alertLayout.findViewById(R.id.editTenHuyen);
        btnLuuLai = alertLayout.findViewById(R.id.btnLuuLai);
        btnXoa = alertLayout.findViewById(R.id.btnXoa);
        btnDong = alertLayout.findViewById(R.id.btnDong);
        final AlertDialog.Builder alert = new AlertDialog.Builder(getActivity());
        alert.setView(alertLayout);
        alert.setCancelable(false);
        final AlertDialog dialog = alert.create();
        if (intChiSo == -1){
            btnXoa.setEnabled(false); //Không cho phép nhấn nút xóa
            editMaHuyen.setEnabled(true); //Cho phép nhập mã huyện
            String strTieuDe = &quot;THÊM MỚI TÊN HUYỆN&quot;;
            textTieuDe.setText(strTieuDe);
            String strNut = &quot;THÊM MỚI&quot;; //Đổi text nút lưu lại thành thêm mới
            btnLuuLai.setText(strNut);
        }
        else {
            btnXoa.setEnabled(true); //Cho phép nhấn nút xóa
            editMaHuyen.setEnabled(false); //Không cho phép nhập mã huyện
            String strTieuDe = &quot;CẬP NHẬT TÊN HUYỆN&quot;;
            textTieuDe.setText(strTieuDe);
            String strNut = &quot;CẬP NHẬT&quot;; //Đổi text nút lưu lại thành cập nhật
            btnLuuLai.setText(strNut);
            editMaHuyen.setText(arrayListHuyen.get(intChiSo).getStrMa()); //Gán giá trị mã huyện
<A NAME="249"></A>            editTenHuyen.setText(arrayListHuyen.get(intChiSo).getStrTen()); //Gán giá trị tên huyện
        }
        btnLuuLai</B></FONT>.setOnClickListener(v -&gt; {
            <FONT color="#800517"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#249',2,'match0-top.html#249',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>try {
                if (editMaHuyen.getText().length() == 4){
                    if (editTenHuyen.getText().length() != 0){
                        String sqlHuyen;
                        if (intChiSo == -1){ //Thêm mới
                            sqlHuyen = &quot;insert into TB_Huyen(MaTinh, MaHuyen, TenHuyen) values ('&quot;+strMaTinh+&quot;', '&quot;+editMaHuyen.getText()+&quot;', N'&quot;+editTenHuyen.getText()+&quot;')&quot;;
                        }
                        else { //Cập nhật
                            sqlHuyen = &quot;update TB_Huyen set TenHuyen = N'&quot;+editTenHuyen.getText()+&quot;' where MaHuyen = '&quot;+editMaHuyen.getText()+&quot;'&quot;;
                        }
                        classConnect = new ClassConnect(); //Mở kết nối SQL
                        if (classConnect.updateData(getActivity(), sqlHuyen) == 1){
                            if (intChiSo == -1){
                                classPublic.ThongBao(getActivity(),&quot;Thêm mới tên huyện thành công&quot;);
                            }
                            else {
                                classPublic.ThongBao(getActivity(),&quot;Cập nhật tên huyện thành công&quot;);
                            }
                            dialog.cancel(); //Đóng dialog
                            loadDanhSachHuyen(strMaTinh); //Load lại danh sách
                        }
                        else {
                            classPublic.ThongBao(getActivity(), &quot;Lỗi! Không lưu được&quot;);
                        }
                        classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
                    }
                    else {
                        classPublic.ThongBao(getActivity(),&quot;Vui lòng nhập tên huyện&quot;);
                    }
                }
                else {
                    classPublic.ThongBao(getActivity(),&quot;Vui lòng nhập mã huyện&quot;);
                }

            }catch (Exception e){
                Log.e(&quot;TAG&quot;, e</B></FONT>.getMessage());
<A NAME="259"></A>            }
        });
        btnXoa.setOnClickListener(v -&gt; {
            <FONT color="#e77471"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#259',2,'match0-top.html#259',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>if (editMaHuyen.getText().length() != 0) {
                dialogXoa(editMaHuyen.getText().toString(), editTenHuyen.getText().toString());
                dialog.cancel();
            }
            else {
                classPublic.ThongBao(getActivity(),&quot;Không tìm thấy mã huyện để xóa&quot;);
<A NAME="251"></A>            }</B></FONT>
        });
        btnDong.setOnClickListener(v -&gt; dialog.cancel());
        <FONT color="#4e9258"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#251',2,'match0-top.html#251',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>dialog.show(); //Show giao diện cập nhật danh sách huyện
    }

    @Override
    public boolean onQueryTextSubmit(String query) {
        return false;
    }

    @Override
    public boolean onQueryTextChange(String newText) { //Tìm theo tên huyện
        adapterHuyen.filter(newText);
        return false;
    }

    private void dialogXoa(final String maHuyen, final String tenHuyen){
        //Hiện hộp thoại thông báo xóa huyện
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        builder.setTitle(&quot;XÓA QUẬN/HUYỆN&quot;);
        builder.setIcon(R.drawable.ic_delete);
<A NAME="261"></A>        builder.setMessage(&quot;Bạn có muốn xóa &quot;+tenHuyen+&quot; không?&quot;);
        builder</B></FONT>.setCancelable(false);
        builder.setPositiveButton(&quot;Đồng ý&quot;, (dialogInterface, i) -&gt; {
            <FONT color="#faafba"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#261',2,'match0-top.html#261',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>try {
                classConnect = new ClassConnect(); //Mở kết nối SQL
                String sqlHuyen = &quot;delete TB_Huyen where MaHuyen = '&quot;+ maHuyen +&quot;'&quot;;
                if (classConnect.updateData(getActivity(), sqlHuyen) == 1){
                    classPublic.ThongBao(getActivity(),&quot;Xóa tên huyện thành công&quot;);
                    loadDanhSachHuyen(strMaTinh); //Load lại danh sách
                }
                else {
                    classPublic.ThongBao(getActivity(),&quot;Không xóa được tên huyện&quot;);
                }
                classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
            }catch (Exception e){
                Log.e(&quot;TAG&quot;, e</B></FONT>.getMessage());
            }
        });
        builder.setNegativeButton(&quot;Hủy bỏ&quot;, (dialogInterface, i) -&gt; dialogInterface.dismiss());
        AlertDialog alertDialog = builder.create();
        alertDialog.show();
    }
}
</PRE>
<HR>
<H3><CENTER>DiaChi\FragmentTinh.java</CENTER></H3><HR>
<PRE>
<A NAME="241"></A>package com.example.basa.DiaChi;

<FONT color="#f88017"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#241',2,'match0-top.html#241',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.annotation.SuppressLint;
import android.app.AlertDialog;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.ListView;
import android.widget.SearchView;
import android.widget.TextView;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;

import com.example.basa.Class.ClassConnect;
import com.example.basa.Class.ClassPublic;
import com.example.basa.Menu.FragmentMenu;
import com.example.basa.R;

import java.sql.ResultSet;
import java.util.ArrayList;

public class FragmentTinh extends Fragment implements SearchView.OnQueryTextListener {
    //Khai báo
    private View view;
    private SearchView searchView;
    private ImageButton btnThemMoi, btnQuayLai;
    private ListView listView;
    public static ArrayList&lt;ClassStringHai&gt; arrayListTinh;
    private ListViewTinh adapterTinh;
    private ClassConnect classConnect;
    private final ClassPublic classPublic = new ClassPublic</B></FONT>();
    //Khai báo chuyển fragment
    public static FragmentManager fragmentManager; //Fragment trang chủ
    public static FragmentTransaction fragmentTransaction;
    //Khai báo các đối tượng trên dialog
<A NAME="470"></A>    private TextView textTieuDe;
    private EditText editMaTinh, editTenTinh;
    private Button btnLuuLai, btnXoa, btnDong;
    public <FONT color="#50ebec"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#470',2,'match0-top.html#470',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);
        view = inflater.inflate(R.layout.fragment_tinh, container, false);
        fragmentManager = requireActivity().getSupportFragmentManager();//Chuyển đổi giữa các fragment
        layoutAnhXa</B></FONT>(); //Ánh xạ các đối tượng trên layout
        loadDanhSachTinh(); //Load danh sách tỉnh
<A NAME="577"></A>        return view;
    }
    @SuppressLint(&quot;NewApi&quot;)
    private <FONT color="#4863a0"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#577',2,'match0-top.html#577',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>void layoutAnhXa() {
        listView = view.findViewById(R.id.listView);
        searchView = view.findViewById(R.id.searchTen);
        btnThemMoi = view.findViewById(R.id.btnThemMoi);
        btnQuayLai = view.findViewById(R.id.btnQuayLai);
        btnQuayLai</B></FONT>.setOnClickListener(view -&gt; {
            fragmentTransaction = fragmentManager.beginTransaction();
            fragmentTransaction.replace(R.id.fragment_main, new FragmentMenu());
            fragmentTransaction.commit();
        });
        clickListView(); //Chọn tỉnh trên listview
        clickButton(); //Click nút thêm mới
    }

    private void loadDanhSachTinh(){
        arrayListTinh = new ArrayList&lt;&gt;();
        arrayListTinh.clear();
        int intSTT = 1;
        try{
            classConnect = new ClassConnect(); //Mở kết nối đến SQL
            String sqlTinh = &quot;select MaTinh, TenTinh from TB_Tinh&quot;;
            ResultSet resultSetTinh = classConnect.selectData(getActivity(), sqlTinh);
            if (resultSetTinh != null){
                while (resultSetTinh.next()){
                    arrayListTinh.add(new ClassStringHai(String.valueOf(intSTT ++), resultSetTinh.getString(&quot;MaTinh&quot;), resultSetTinh.getString(&quot;TenTinh&quot;)));
                }
            }
            else {
                classPublic.ThongBao(getActivity(),&quot;Chưa cập nhật danh sách tỉnh&quot;);
<A NAME="607"></A>            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối đến SQL
        }catch (Exception e){
            <FONT color="#e77471"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#607',2,'match0-top.html#607',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>Log.e(&quot;TAG&quot;, e.getMessage());
        }
        adapterTinh = new ListViewTinh(getContext());
        listView.setAdapter(adapterTinh);
        //Xử lý khi nhập vào ô tìm kiếm
        searchView.setOnQueryTextListener(this);
    }
    @Override
    public boolean onQueryTextSubmit(String query) {
        return false;
    }

    @Override
    public boolean onQueryTextChange(String newText) { //Tìm theo tên tỉnh
        adapterTinh.filter(newText);
        return false;
    }
    private void clickListView(){
        listView</B></FONT>.setOnItemClickListener((parent, view, position, id) -&gt; updateTinh(position));
<A NAME="257"></A>    }
    private void clickButton(){
        btnThemMoi.setOnClickListener(v -&gt; updateTinh(-1));
    <FONT color="#87f717"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#257',2,'match0-top.html#257',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
    private void updateTinh(final int intChiSo){
        LayoutInflater inflater = getLayoutInflater();
        @SuppressLint(&quot;InflateParams&quot;) View alertLayout = inflater.inflate(R.layout.dialog_tinh, null);
        textTieuDe = alertLayout.findViewById(R.id.textTieuDe);
        editMaTinh = alertLayout.findViewById(R.id.editMaTinh);
        editTenTinh = alertLayout.findViewById(R.id.editTenTinh);
        btnLuuLai = alertLayout.findViewById(R.id.btnLuuLai);
        btnXoa = alertLayout.findViewById(R.id.btnXoa);
        btnDong = alertLayout.findViewById(R.id.btnDong);
        final AlertDialog.Builder alert = new AlertDialog.Builder(getActivity());
        alert.setView(alertLayout);
        alert.setCancelable(false);
        final AlertDialog dialog = alert.create();
        if (intChiSo == -1){
            btnXoa.setEnabled(false); //Không cho phép nhấn nút xóa
            editMaTinh.setEnabled(true); //Cho phép nhập mã tỉnh
            String strTieuDe = &quot;THÊM MỚI TÊN TỈNH&quot;;
            textTieuDe.setText(strTieuDe);
            String strNut = &quot;THÊM MỚI&quot;; //Đổi text nút lưu lại thành thêm mới
            btnLuuLai.setText(strNut);
        }
        else {
            btnXoa.setEnabled(true); //Cho phép nhấn nút xóa
            editMaTinh.setEnabled(false); //Không cho phép nhập mã tỉnh
            String strTieuDe = &quot;CẬP NHẬT TÊN TỈNH&quot;;
            textTieuDe.setText(strTieuDe);
            String strNut = &quot;CẬP NHẬT&quot;; //Đổi text nút lưu lại thành cập nhật
            btnLuuLai.setText(strNut);
            editMaTinh.setText(arrayListTinh.get(intChiSo).getStrMa()); //Gán giá trị mã tỉnh//Hiện tên và mã số
<A NAME="258"></A>            editTenTinh.setText(arrayListTinh.get(intChiSo).getStrTen()); //Gán giá trị tên tỉnh//Hiện tên và mã số
        }
        btnLuuLai</B></FONT>.setOnClickListener(v -&gt; {
            <FONT color="#95b9c7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#258',2,'match0-top.html#258',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>try {
                if (editMaTinh.getText().length() == 2) {
                    if (editTenTinh.getText().length() != 0) {
                        String sqlTinh;
                        if (intChiSo == -1) { //Thêm mới
                            sqlTinh = &quot;insert into TB_Tinh(MaTinh, TenTinh) values ('&quot; + editMaTinh.getText() + &quot;', N'&quot; + editTenTinh.getText() + &quot;')&quot;;
                        } else { //Cập nhật
                            sqlTinh = &quot;update TB_Tinh set TenTinh = N'&quot; + editTenTinh.getText() + &quot;' where MaTinh = '&quot; + editMaTinh.getText() + &quot;'&quot;;
                        }
                        classConnect = new ClassConnect(); //Mở kết nối SQL
                        if (classConnect.updateData(getActivity(), sqlTinh) == 1) {
                            if (intChiSo == -1) {
                                classPublic.ThongBao(getActivity(), &quot;Thêm mới tên tỉnh thành công&quot;);
                            } else {
                                classPublic.ThongBao(getActivity(), &quot;Cập nhật tên tỉnh thành công&quot;);
                            }
                            dialog.cancel(); //Đóng dialog sau đó gọi load mới danh sách
                            loadDanhSachTinh(); //Load lại danh sách
                        } else {
                            classPublic.ThongBao(getActivity(), &quot;Lỗi! Không lưu được&quot;);
                        }
                        classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
                    } else {
                        classPublic.ThongBao(getActivity(), &quot;Vui lòng nhập tên tỉnh&quot;);
                    }
                } else {
                    classPublic.ThongBao(getActivity(), &quot;Vui lòng nhập mã tỉnh&quot;);
                }

            } catch (Exception e) {
                Log.e(&quot;TAG&quot;, e</B></FONT>.getMessage());
<A NAME="274"></A>            }
        });
        btnXoa.setOnClickListener(v -&gt; {
            <FONT color="#c57717"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#274',2,'match0-top.html#274',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>if (editMaTinh.getText().length() != 0) {
                dialogXoa(editMaTinh.getText().toString(), editTenTinh.getText().toString());
                dialog.cancel();
            }
            else {
                classPublic.ThongBao(getActivity(),&quot;Không tìm thấy mã tỉnh để xóa&quot;);
<A NAME="260"></A>            }</B></FONT>
        });
        btnDong.setOnClickListener(v -&gt; dialog.cancel());
        <FONT color="#717d7d"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#260',2,'match0-top.html#260',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>dialog.show(); //Show giao diện cập nhật danh sách tỉnh
    }

    private void dialogXoa(final String maTinh, final String tenTinh){
        //Hiện hộp thoại thông báo xóa tỉnh
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        builder.setTitle(&quot;XÓA TỈNH/THÀNH PHỐ&quot;);
        builder.setIcon(R.drawable.ic_delete);
<A NAME="278"></A>        builder.setMessage(&quot;Bạn có muốn xóa tỉnh &quot;+tenTinh+&quot; không?&quot;);
        builder</B></FONT>.setCancelable(false);
        builder.setPositiveButton(&quot;Đồng ý&quot;, (dialogInterface, i) -&gt; {
        <FONT color="#92c7c7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#278',2,'match0-top.html#278',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>try {
            classConnect = new ClassConnect(); //Mở kết nối SQL
            String sqlTinh = &quot;delete TB_Tinh where MaTinh = '&quot;+ maTinh +&quot;'&quot;;
            if (classConnect.updateData(getActivity(), sqlTinh) == 1){
                classPublic.ThongBao(getActivity(),&quot;Xóa tên tỉnh thành công&quot;);
                loadDanhSachTinh(); //Load lại danh sách
            }
            else {
                classPublic.ThongBao(getActivity(),&quot;Không xóa được tên tỉnh&quot;);
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, e</B></FONT>.getMessage());
        }
        });
        builder.setNegativeButton(&quot;Hủy bỏ&quot;, (dialogInterface, i) -&gt; dialogInterface.dismiss());
        AlertDialog alertDialog = builder.create();
        alertDialog.show();
    }
}
</PRE>
<HR>
<H3><CENTER>DiaChi\FragmentXa.java</CENTER></H3><HR>
<PRE>
<A NAME="643"></A><FONT color="#c8c2a7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#643',2,'match0-top.html#643',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.DiaChi;

import android.annotation.SuppressLint;
import android.app.AlertDialog;
import android.os.Bundle;
import android.text.InputType;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.ListView;
import android.widget.SearchView;
import android.widget.Spinner;
import android.widget.TextView;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;

import com.example.basa.Class.ClassConnect;
import com.example.basa.Class.ClassPublic;
import com.example.basa.Menu.FragmentMenu;
import com.example.basa.R;

import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.Objects;

public class FragmentXa extends Fragment implements SearchView.OnQueryTextListener{
    //Khai báo
    private View view;
    private SearchView searchView;
    private ImageButton btnThemMoi</B></FONT>, btnQuayLai;
    private Spinner cmdTinh, cmdHuyen;
    private ListView listView;
    public static ArrayList&lt;ClassXa&gt; arrayListXa;
    private ListViewXa adapterXa;
<A NAME="314"></A>    private ClassConnect classConnect;
    private final ClassPublic classPublic = new ClassPublic();
    private final ArrayList&lt;String&gt; listMaTinh = new ArrayList&lt;&gt;(); //Khai báo danh sách tỉnh
    private final ArrayList&lt;<FONT color="#ada96e"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#314',2,'match0-top.html#314',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>String&gt; listTenTinh = new ArrayList&lt;&gt;();
    private final ArrayList&lt;String&gt; listMaHuyen = new ArrayList&lt;&gt;(); //Khai báo danh sách huyện
    private final ArrayList&lt;String&gt; listTenHuyen = new ArrayList&lt;&gt;();
    private String strMaTinh, strMaHuyen;
    //Khai báo chuyển fragment
    public static FragmentManager fragmentManager; //Fragment trang chủ
    public static FragmentTransaction fragmentTransaction;
    //Khai báo các đối tượng trên dialog
    private TextView textTieuDe</B></FONT>;
<A NAME="376"></A>    private EditText editMaXa, editTenXa, editKinhDo, editViDo;
    private Button btnLuuLai, btnXoa, btnDong;

    public <FONT color="#717d7d"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#376',2,'match0-top.html#376',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);
        view = inflater.inflate(R.layout.fragment_xa, container, false);
        fragmentManager = requireActivity().getSupportFragmentManager();//Chuyển đổi giữa các fragment
        layoutAnhXa(); //Ánh xạ các đối tượng trên layout
        loadTinh(); //Load tên tỉnh
        return view;
    }
    private void layoutAnhXa() {
        cmdTinh = view.findViewById(R.id.cmdTinh);
        cmdHuyen = view.findViewById(R.id.cmdHuyen);
        listView = view.findViewById(R.id.listView);
        searchView = view.findViewById(R.id.searchTen);
        btnThemMoi = view.findViewById(R.id.btnThemMoi);
        btnQuayLai = view</B></FONT>.findViewById(R.id.btnQuayLai);
<A NAME="155"></A>        btnQuayLai.setOnClickListener(view -&gt; {
            fragmentTransaction = fragmentManager.beginTransaction();
            fragmentTransaction.replace(R.id.fragment_main, new FragmentMenu());
            <FONT color="#152dc6"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#155',2,'match0-top.html#155',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>fragmentTransaction.commit();
        });
        clickListView(); //Chọn xã trên listview
        clickButton(); //Click nút thêm mới
    }
    @SuppressLint(&quot;NewApi&quot;)
    private void loadTinh(){
        listMaTinh.clear(); //Xóa danh sách tỉnh
        listTenTinh.clear();
        try{
            classConnect = new ClassConnect(); //Mở kết nối SQL
            String sqlTinh = &quot;select MaTinh, TenTinh from TB_Tinh&quot;;
            ResultSet resultSetTinh = classConnect.selectData(getActivity(), sqlTinh);
            if (resultSetTinh != null){
                while (resultSetTinh.next()){
                    listMaTinh.add(resultSetTinh.getString(&quot;MaTinh&quot;));
                    listTenTinh.add(resultSetTinh.getString(&quot;TenTinh&quot;));
                }
<A NAME="558"></A>                ArrayAdapter&lt;String&gt; dataTinh = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenTinh);
                dataTinh.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
                cmdTinh</B></FONT>.setAdapter(dataTinh);
            <FONT color="#ff00ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#558',2,'match0-top.html#558',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
            classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
        }
        cmdTinh.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
<A NAME="434"></A>            public void onItemSelected(AdapterView&lt;?</B></FONT>&gt; parent, View view, int position, long id) {
                strMaTinh = listMaTinh.get(position);
                loadHuyen(strMaTinh);
            <FONT color="#717d7d"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#434',2,'match0-top.html#434',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}

            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }
    @SuppressLint(&quot;NewApi&quot;)
    private void loadHuyen(String maTinh){
        listMaHuyen.clear(); // Xóa danh sách huyện
        listTenHuyen.clear();
        try {
            classConnect = new ClassConnect(); //Mở kết nối SQL
            String sqlHuyen = &quot;select MaHuyen, TenHuyen from TB_Huyen where MaTinh = '&quot;+maTinh+&quot;'&quot;;
            ResultSet resultSetHuyen = classConnect.selectData(getActivity(), sqlHuyen);
            if (resultSetHuyen != null){
                while (resultSetHuyen.next()){
                    listMaHuyen.add(resultSetHuyen.getString(&quot;MaHuyen&quot;));
                    listTenHuyen.add(resultSetHuyen.getString(&quot;TenHuyen&quot;));
                }
                ArrayAdapter&lt;String&gt; dataHuyen = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenHuyen);
                dataHuyen.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
<A NAME="268"></A>                cmdHuyen</B></FONT>.setAdapter(dataHuyen);
            }
            else {
                <FONT color="#ff00ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#268',2,'match0-top.html#268',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>Log.e(&quot;TAG&quot;, &quot;Chưa cập nhật danh sách huyện&quot;);
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
        }
        if (listMaHuyen.isEmpty()){
            loadDanhSachXa(&quot;&quot;);
        }
        cmdHuyen</B></FONT>.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
<A NAME="475"></A>            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                strMaHuyen = listMaHuyen.get(position);
                loadDanhSachXa(strMaHuyen);
            <FONT color="#571b7e"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#475',2,'match0-top.html#475',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }
    private void clickListView(){
        listView.setOnItemClickListener((parent, view, position, id) -&gt; updateXa</B></FONT>(position));
    }

    private void clickButton() {
        btnThemMoi.setOnClickListener(v -&gt; updateXa(-1));
    }
    private void updateXa(final int intChiSo){
        LayoutInflater inflater = getLayoutInflater();
        @SuppressLint(&quot;InflateParams&quot;) View alertLayout = inflater.inflate(R.layout.dialog_xa, null);
        //Viết hoa kí tự đầu gọi cho android:inputType=&quot;textCapWords&quot; của xml
<A NAME="270"></A>        EditText editor = new EditText(getContext());
        editor.setInputType(InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_FLAG_CAP_WORDS);
        textTieuDe = alertLayout.findViewById(R.id.textTieuDe);
        <FONT color="#348781"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#270',2,'match0-top.html#270',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>editMaXa = alertLayout.findViewById(R.id.editMaXa);
        editTenXa = alertLayout.findViewById(R.id.editTenXa);
        editKinhDo = alertLayout.findViewById(R.id.editKinhDo);
        editViDo = alertLayout.findViewById(R.id.editViDo);
        btnLuuLai = alertLayout.findViewById(R.id.btnLuuLai);
        btnXoa = alertLayout.findViewById(R.id.btnXoa);
        btnDong = alertLayout.findViewById(R.id.btnDong);
        final AlertDialog.Builder alert = new AlertDialog.Builder(getActivity());
        alert.setView(alertLayout);
        alert.setCancelable(false);
        final AlertDialog dialog = alert.create();
        if (intChiSo == -1){
            btnXoa.setEnabled(false); //Không cho phép nhấn nút xóa
            editMaXa.setEnabled(true); //Cho phép nhập mã xã
            String strTieuDe = &quot;THÊM MỚI TÊN XÃ&quot;;
            textTieuDe.setText(strTieuDe);
            String strNut = &quot;THÊM MỚI&quot;; //Đổi text nút lưu lại thành thêm mới
            btnLuuLai.setText(strNut);
        }
        else {
            btnXoa.setEnabled(true); //Cho phép nhấn nút xóa
            editMaXa.setEnabled(false);//Không cho phép nhập mã xã khi chỉ số là false
            String strTieuDe = &quot;CẬP NHẬT TÊN XÃ&quot;;
            textTieuDe.setText(strTieuDe);
            String strNut = &quot;CẬP NHẬT&quot;; //Đổi text nút lưu lại thành cập nhật
            btnLuuLai.setText(strNut);
            editMaXa.setText(arrayListXa.get(intChiSo).getStrMa()); //Gán giá trị mã mã
            editTenXa.setText(arrayListXa</B></FONT>.get(intChiSo).getStrTen()); //Gán giá trị tên xã
            editKinhDo.setText(arrayListXa.get(intChiSo).getStrKinhDo());
<A NAME="307"></A>            editViDo.setText(arrayListXa.get(intChiSo).getStrViDo());
        }
        btnLuuLai.setOnClickListener(v -&gt; {
        <FONT color="#800517"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#307',2,'match0-top.html#307',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>try {
            if (editMaXa.getText().length() == 6){
                if (editTenXa.getText().length() != 0){
                    String sqlXa;
                    if (intChiSo == -1){ //Thêm mới
                        sqlXa = &quot;insert into TB_Xa(MaHuyen, MaXa, TenXa, KinhDo, ViDo) values ('&quot;+strMaHuyen+&quot;', '&quot;+editMaXa.getText()+&quot;', N'&quot;+editTenXa.getText()+&quot;',&quot; +
<A NAME="308"></A>                                &quot;'&quot;+editKinhDo.getText()+&quot;', '&quot;+editViDo.getText()+&quot;')&quot;;
                    }
                    else { //Cập nhật
                        sqlXa</B></FONT> = &quot;update TB_Xa set TenXa = N'&quot;+<FONT color="#f62817"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#308',2,'match0-top.html#308',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>editTenXa.getText()+&quot;', KinhDo = '&quot;+editKinhDo.getText()+&quot;', ViDo = '&quot;+editViDo.getText()+&quot;' where MaXa = '&quot;+editMaXa.getText()+&quot;'&quot;;
                    }
                    classConnect = new ClassConnect(); //Mở kết nối SQL
                    if (classConnect.updateData(getActivity(), sqlXa) == 1){
                        if (intChiSo == -1){
                            classPublic.ThongBao(getActivity(),&quot;Thêm mới tên xã thành công&quot;);
                        }
                        else {
                            classPublic.ThongBao(getActivity(),&quot;Cập nhật tên xã thành công&quot;);
                        }
                        dialog.cancel(); //Đóng dialog
                        loadDanhSachXa(strMaHuyen); //Load lại danh sách xã theo mã huyện
                    }
                    else {
                        classPublic.ThongBao(getActivity(), &quot;Thêm mới thất bại&quot;);
                    }</B></FONT>
                }
                else {
                    classPublic.ThongBao(getActivity(),&quot;Vui lòng nhập tên xã&quot;);
                }
            }
            else {
                classPublic.ThongBao(getActivity(),&quot;Vui lòng nhập mã xã&quot;);
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
        }catch (Exception e){
                Log.e(&quot;TAG&quot;, e.getMessage());
<A NAME="310"></A>        }
        });
        btnXoa.setOnClickListener(v -&gt; {
            <FONT color="#d4a017"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#310',2,'match0-top.html#310',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>if (editMaXa.getText().length() != 0) {
                dialogXoa(editMaXa.getText().toString(), editTenXa.getText().toString());
                dialog.cancel();
            }
            else {
                classPublic.ThongBao(getActivity(),&quot;Không tìm thấy mã xã để xóa&quot;);
            }</B></FONT>
        });
        btnDong.setOnClickListener(v -&gt; dialog.cancel());
        dialog.show(); //Show giao diện cập nhật danh sách tỉnh
    }
    private void loadDanhSachXa(String maHuyen) {
        arrayListXa = new ArrayList&lt;&gt;();
        arrayListXa.clear();
        int intSTT = 1;
<A NAME="716"></A>        try{
            classConnect = new ClassConnect(); //Mở kết nối đến SQL
            String sqlXa = &quot;select MaXa, TenXa, KinhDo, ViDo from TB_Xa where MaHuyen = '&quot;+maHuyen+&quot;'&quot;;
            ResultSet <FONT color="#d4a017"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#716',2,'match0-top.html#716',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>resultSetXa = classConnect.selectData(getActivity(), sqlXa);
            if (resultSetXa != null){
                while (resultSetXa.next()){
                    arrayListXa.add(new ClassXa(String.valueOf(intSTT ++), resultSetXa.getString(&quot;MaXa&quot;), resultSetXa.getString(&quot;TenXa&quot;),
                            resultSetXa.getString(&quot;KinhDo&quot;), resultSetXa.getString(&quot;ViDo&quot;)));
                }</B></FONT>
            }
            else {
                classPublic.ThongBao(getActivity(),&quot;Chưa cập nhật danh sách xã&quot;);
<A NAME="277"></A>            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối đến SQL
        }catch (Exception e){
            <FONT color="#79d867"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#277',2,'match0-top.html#277',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>Log.e(&quot;TAG&quot;, e.getMessage());
        }
        adapterXa = new ListViewXa(getContext());
        listView.setAdapter(adapterXa);
        //Xử lý khi nhập vào ô tìm kiếm
        searchView.setOnQueryTextListener(this);
    }

    @Override
    public boolean onQueryTextSubmit(String query) {
        return false;
    }

    @Override
    public boolean onQueryTextChange(String newText) { //Tìm theo tên xã
        adapterXa.filter(newText);
        return false;
    }

    private void dialogXoa(final String maXa, final String tenXa){
        //Hiện hộp thoại thông báo xóa xã
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        builder.setTitle(&quot;XÓA PHƯỜNG/XÃ&quot;);
        builder.setIcon(R.drawable.ic_delete);
<A NAME="312"></A>        builder.setMessage(&quot;Bạn có muốn xóa &quot;+tenXa+&quot; không?&quot;);
        builder</B></FONT>.setCancelable(false);
        builder.setPositiveButton(&quot;Đồng ý&quot;, (dialogInterface, i) -&gt; {
            <FONT color="#4cc417"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#312',2,'match0-top.html#312',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>try {
                classConnect = new ClassConnect(); //Mở kết nối SQL
                String sqlXa = &quot;delete TB_Xa where MaXa = '&quot;+ maXa +&quot;'&quot;;
                if (classConnect.updateData(getActivity(), sqlXa) == 1){
                    classPublic.ThongBao(getActivity(),&quot;Xóa tên xã thành công&quot;);
                    loadDanhSachXa(strMaHuyen); //Load lại danh sách
                }
                else {
                    classPublic.ThongBao(getActivity(),&quot;Không xóa được tên xã&quot;);
                }
                classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
            }catch (Exception e){
                Log.e(&quot;TAG&quot;, e</B></FONT>.getMessage());
            }
        });
        builder.setNegativeButton(&quot;Hủy bỏ&quot;, (dialogInterface, i) -&gt; dialogInterface.dismiss());
        AlertDialog alertDialog = builder.create();
        alertDialog.show();
    }
}
</PRE>
<HR>
<H3><CENTER>DiaChi\ListViewHuyen.java</CENTER></H3><HR>
<PRE>
<A NAME="511"></A><FONT color="#d16587"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#511',2,'match0-top.html#511',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.DiaChi;

import android.annotation.SuppressLint;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.TextView;
import com.example.basa.R;
import java.util.ArrayList;
import java.util.Locale;

public class ListViewHuyen extends BaseAdapter {
    private final Context mContext;
    private final LayoutInflater inflater;
    private final ArrayList&lt;ClassStringHai&gt; arraylist;
    public ListViewHuyen(Context context) {
        mContext = context;
        inflater = LayoutInflater.from(mContext);
        this.arraylist = new ArrayList&lt;&gt;();
        this.arraylist.addAll(FragmentHuyen.arrayListHuyen);
    }
    public static class ViewHolder {
        TextView textSTT;
        TextView textTen;
    }
    @Override
    public int getCount() {
        return FragmentHuyen.arrayListHuyen.size();
    }

    @Override
    public Object getItem(int position) {
        return FragmentHuyen.arrayListHuyen.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @SuppressLint(&quot;InflateParams&quot;)
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.listview_stringhai, null);
            holder.textSTT = convertView.findViewById(R.id.textSTT);
            holder.textTen = convertView.findViewById(R.id.textTen);
            convertView.setTag(holder);
        } else {
<A NAME="285"></A>            holder = (ViewHolder) convertView.getTag();
        }
        holder.textSTT.setText(FragmentHuyen</B></FONT>.arrayListHuyen.get(position).getStrSTT());
        <FONT color="#f88158"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#285',2,'match0-top.html#285',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>holder.textTen.setText(FragmentHuyen.arrayListHuyen.get(position).getStrTen());
        return convertView;
    }
    public void filter(String charText) {
        charText = charText.toLowerCase(Locale.getDefault());
        FragmentHuyen.arrayListHuyen.clear();
        if (charText.length() == 0) {
            FragmentHuyen.arrayListHuyen.addAll(arraylist);
        } else {
            for (ClassStringHai wp : arraylist) {
                if (wp.getStrTen().toLowerCase(Locale.getDefault()).contains(charText)) {
                    FragmentHuyen.arrayListHuyen.add(wp);
                }
            }
        }
        notifyDataSetChanged();
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>DiaChi\ListViewTinh.java</CENTER></H3><HR>
<PRE>
<A NAME="69"></A>package com.example.basa.DiaChi;

<FONT color="#571b7e"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#69',2,'match0-top.html#69',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.annotation.SuppressLint;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.TextView;
import com.example.basa.R;
import java.util.ArrayList;
import java.util.Locale;

public class ListViewTinh extends BaseAdapter {
    private final Context mContext;
    private final LayoutInflater inflater;
    private final ArrayList&lt;ClassStringHai&gt; arraylist;
    public ListViewTinh(Context context) {
        mContext = context;
        inflater = LayoutInflater.from(mContext);
        this.arraylist = new ArrayList&lt;&gt;();
        this.arraylist.addAll(FragmentTinh.arrayListTinh);
    }
    public static class ViewHolder {
        TextView textSTT;
        TextView textTen;
    }
    @Override
    public int getCount() {
        return FragmentTinh.arrayListTinh.size();
    }

    @Override
    public Object getItem(int position) {
        return FragmentTinh.arrayListTinh.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @SuppressLint(&quot;InflateParams&quot;)
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.listview_stringhai, null);
            holder.textSTT = convertView.findViewById(R.id.textSTT);
            holder.textTen = convertView.findViewById(R.id.textTen);
            convertView.setTag(holder);
        } else {
<A NAME="289"></A>            holder = (ViewHolder) convertView.getTag();
        }
        holder.textSTT.setText(FragmentTinh</B></FONT>.arrayListTinh.get(position).getStrSTT());
        <FONT color="#980517"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#289',2,'match0-top.html#289',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>holder.textTen.setText(FragmentTinh.arrayListTinh.get(position).getStrTen());
        return convertView;
    }
    public void filter(String charText) {
        charText = charText.toLowerCase(Locale.getDefault());
        FragmentTinh.arrayListTinh.clear();
        if (charText.length() == 0) {
            FragmentTinh.arrayListTinh.addAll(arraylist);
        } else {
            for (ClassStringHai wp : arraylist) {
                if (wp.getStrTen().toLowerCase(Locale.getDefault()).contains(charText)) {
                    FragmentTinh.arrayListTinh.add(wp);
                }
            }
        }
        notifyDataSetChanged();
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>DiaChi\ListViewXa.java</CENTER></H3><HR>
<PRE>
<A NAME="345"></A>package com.example.basa.DiaChi;

<FONT color="#4863a0"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#345',2,'match0-top.html#345',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.annotation.SuppressLint;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.TextView;
import com.example.basa.R;
import java.util.ArrayList;
import java.util.Locale;

public class ListViewXa extends BaseAdapter {
    private final Context mContext;
    private final LayoutInflater inflater;
    private final ArrayList&lt;ClassXa&gt; arraylist;
    public ListViewXa(Context context) {
        mContext = context;
        inflater = LayoutInflater.from(mContext);
        this.arraylist = new ArrayList&lt;&gt;();
        this.arraylist.addAll(FragmentXa.arrayListXa);
    }
    public static class ViewHolder {
        TextView textSTT;
        TextView textTen;
    }
    @Override
    public int getCount() {
        return FragmentXa.arrayListXa.size();
    }

    @Override
    public Object getItem(int position) {
        return FragmentXa.arrayListXa.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @SuppressLint({&quot;InflateParams&quot;, &quot;SetTextI18n&quot;})
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.listview_stringhai, null);
            holder.textSTT = convertView.findViewById(R.id.textSTT);
            holder.textTen = convertView.findViewById(R.id.textTen);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
<A NAME="68"></A>        }
        holder.textSTT.setText(&quot;[&quot;+FragmentXa</B></FONT>.arrayListXa.get(position).getStrSTT()+&quot;]&quot;);
        holder.textTen.setText(FragmentXa.arrayListXa.get(position).getStrTen());
        <FONT color="#b041ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#68',2,'match0-top.html#68',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>return convertView;
    }
    public void filter(String charText) {
        charText = charText.toLowerCase(Locale.getDefault());
        FragmentXa.arrayListXa.clear();
        if (charText.length() == 0) {
            FragmentXa.arrayListXa.addAll(arraylist);
        } else {
            for (ClassXa wp : arraylist) {
                if (wp.getStrTen().toLowerCase(Locale.getDefault()).contains(charText)) {
                    FragmentXa.arrayListXa.add(wp);
                }
            }
        }
        notifyDataSetChanged();
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>Home\FragmentHome.java</CENTER></H3><HR>
<PRE>
package com.example.basa.Home;

import android.annotation.SuppressLint;
<A NAME="0"></A>import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
<FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#0',2,'match0-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.view.ViewGroup;
import android.widget.LinearLayout;
import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;

import com.example.basa.AoNuoi.FragmentTimKiemAoNuoi;
import com.example.basa.Benh.FragmentBenhView;
import com.example.basa.AoNuoi.FragmentThongKeAoNuoi;
import com.example.basa.ChamSoc.FragmentChamSocView;
import com.example.basa.CtyCheBien.FragmentCtyCheBienThuySan;
import com.example.basa.CtyThuY.FragmentCtyThuY;
import com.example.basa.CtyThucAn.FragmentCtyThucAn;
import com.example.basa.KinhNghiem.FragmentKinhNghiemView;
import com.example.basa.R;
import com.example.basa.TinTuc.FragmentTinTucHome;

import java.util.Objects;

public class FragmentHome extends Fragment {

    //Phần khái báo
<A NAME="428"></A>    View view;
    FragmentManager fragmentManager; //Tạo Fragment
    FragmentTransaction fragmentTransaction;
    LinearLayout layoutTinTuc, layoutKyThuatCanhTac, layoutCongTyThucAn, layoutCongTyCheBien</B></FONT>, <FONT color="#4cc417"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#428',2,'match0-top.html#428',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>layoutChiaSeKinhNghiem,
            layoutTimKiemAoNuoi, layoutCtyThuY, layoutThongKe;

    @SuppressLint({&quot;NewApi&quot;, &quot;UseRequireInsteadOfGet&quot;})
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);
        fragmentManager = Objects</B></FONT>.requireNonNull(getActivity()).getSupportFragmentManager(); //Quản lý Fragment
        view = inflater.inflate(R.layout.fragment_home, container, false);
        layoutAnhXa(); //Ánh xạ các đối tượng trên layout
        return view;
<A NAME="141"></A>    }

    @SuppressLint(&quot;SetTextI18n&quot;)
    private <FONT color="#87f717"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#141',2,'match0-top.html#141',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>void layoutAnhXa() {
        layoutTinTuc = view.findViewById(R.id.layoutTinTuc);
        layoutKyThuatCanhTac = view.findViewById(R.id.layoutKyThuatCanhTac);
        layoutCongTyThucAn = view.findViewById(R.id.layoutCongTyThucAn);
        layoutCongTyCheBien = view.findViewById(R.id.layoutCongTyCheBien);
        layoutChiaSeKinhNghiem = view.findViewById(R.id.layoutChiaSeKinhNghiem);
        layoutTimKiemAoNuoi = view.findViewById(R.id.layoutTimKiemAoNuoi);
        layoutCtyThuY = view.findViewById(R.id.layoutCtyThuY);
        layoutThongKe = view.findViewById(R.id.layoutThongKe);
        clickLayout();
    }

    private void clickLayout() {
        layoutTinTuc</B></FONT>.setOnClickListener(view -&gt; {
            fragmentTransaction = fragmentManager.beginTransaction();
            fragmentTransaction.replace(R.id.fragment_main, new FragmentTinTucHome());
            fragmentTransaction.commit();
        });

        layoutKyThuatCanhTac.setOnClickListener(view -&gt; {
            fragmentTransaction = fragmentManager.beginTransaction();
            fragmentTransaction.replace(R.id.fragment_main, new FragmentChamSocView());
            fragmentTransaction.commit();
        });

        layoutCongTyThucAn.setOnClickListener(view -&gt; {
            fragmentTransaction = fragmentManager.beginTransaction();
            fragmentTransaction.replace(R.id.fragment_main, new FragmentCtyThucAn());
            fragmentTransaction.commit();
        });

        layoutCongTyCheBien.setOnClickListener(view -&gt; {
            fragmentTransaction = fragmentManager.beginTransaction();
            fragmentTransaction.replace(R.id.fragment_main, new FragmentCtyCheBienThuySan());
            fragmentTransaction.commit();
        });

        layoutCtyThuY.setOnClickListener(view -&gt; {
            fragmentTransaction = fragmentManager.beginTransaction();
            fragmentTransaction.replace(R.id.fragment_main, new FragmentCtyThuY());
            fragmentTransaction.commit();
        });

        layoutTimKiemAoNuoi.setOnClickListener(view -&gt; {
            fragmentTransaction = fragmentManager.beginTransaction();
            fragmentTransaction.replace(R.id.fragment_main, new FragmentTimKiemAoNuoi());
            fragmentTransaction.commit();
        });

        layoutThongKe.setOnClickListener(view -&gt; {
            fragmentTransaction = fragmentManager.beginTransaction();
            fragmentTransaction.replace(R.id.fragment_main, new FragmentThongKeAoNuoi());
            fragmentTransaction.commit();
        });

        layoutChiaSeKinhNghiem.setOnClickListener(view -&gt; {
            fragmentTransaction = fragmentManager.beginTransaction();
            fragmentTransaction.replace(R.id.fragment_main, new FragmentKinhNghiemView());
            fragmentTransaction.commit();
        });
    }
}
</PRE>
<HR>
<H3><CENTER>Home\HomeActivity.java</CENTER></H3><HR>
<PRE>
<A NAME="695"></A><FONT color="#980517"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#695',2,'match0-top.html#695',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.Home;

import androidx.appcompat.app.ActionBar;
import androidx.appcompat.app.AppCompatActivity;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;
import android.annotation.SuppressLint;
import android.content.Context;
import android.content.SharedPreferences;
import android.graphics.Color;
import android.graphics.drawable.ColorDrawable;
import android.os.Bundle;
import android.text.Html;
import com.example.basa.Menu.FragmentMenu;
import com.example.basa.User.FragmentUser;
import com.example.basa.R;
import com.example.basa.Class.ClassPublic;
import com.google.android.material.bottomnavigation.BottomNavigationView;
import static com.example.basa.Home.MainActivity.MyPREFERENCES;
import static com.example.basa.Home.MainActivity.User;

public class HomeActivity extends AppCompatActivity {
    //Khai báo
    String strTaiKhoan, strLoaiTaiKhoan</B></FONT>, strCoQuan;
    ClassPublic classPublic = new ClassPublic();
    private BottomNavigationView bottomMenu;
    FragmentManager fragmentManager; //Fragment trang chủ
    FragmentTransaction fragmentTransaction;
    SharedPreferences sharedpreferences; //Nhớ tài khoản
<A NAME="419"></A>    SharedPreferences.Editor editor;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        <FONT color="#842dce"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#419',2,'match0-top.html#419',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_home);
        layoutAnhXa(); //Ánh xạ các đối tượng trên layout
        sharedpreferences = HomeActivity.this.getSharedPreferences(MyPREFERENCES, Context.MODE_PRIVATE);
        editor = sharedpreferences.edit();
        editor.apply();
        strTaiKhoan = sharedpreferences</B></FONT>.getString(User,&quot;&quot;);
        strLoaiTaiKhoan = classPublic.layLoaiTaiKhoan(strTaiKhoan, HomeActivity.this);
        strCoQuan = classPublic.layCoQuan(strTaiKhoan, HomeActivity.this);
    }
    @SuppressLint({&quot;NewApi&quot;, &quot;UseCompatLoadingForDrawables&quot;, &quot;ResourceAsColor&quot;})
    private void layoutAnhXa() {
        bottomMenu = findViewById(R.id.bottomMenu);
        clickBottonMenu();
<A NAME="381"></A>        fragmentManager = getSupportFragmentManager();
        fragmentTransaction = fragmentManager.beginTransaction();
        fragmentTransaction.add(R.id.fragment_main, new FragmentHome());
        <FONT color="#736aff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#381',2,'match0-top.html#381',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>fragmentTransaction.commit();
    }

    @SuppressLint(&quot;NonConstantResourceId&quot;)
    private void clickBottonMenu() {
        bottomMenu.setOnNavigationItemSelectedListener(item -&gt; {
            switch (item.getItemId()){
                case R.id.itemHome:
                    fragmentTransaction = fragmentManager.beginTransaction();
                    fragmentTransaction.replace(R.id.fragment_main, new FragmentHome());
                    fragmentTransaction.commit();
                    return true;
                case R.id.itemUser:
                    fragmentTransaction = fragmentManager.beginTransaction();
                    fragmentTransaction.replace(R.id.fragment_main, new FragmentUser());
                    fragmentTransaction.commit();
                    return true;
                case R.id.itemMenu:
                    fragmentTransaction = fragmentManager.beginTransaction();
                    fragmentTransaction.replace(R.id.fragment_main, new FragmentMenu());
                    fragmentTransaction.commit();
                    return true;
            }
            return false;
        });
    }
    @Override
    public void onBackPressed() {
        //Không cho nhấn nút quay lại
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>Home\MainActivity.java</CENTER></H3><HR>
<PRE>
<A NAME="357"></A>package com.example.basa.Home;

<FONT color="#f88017"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#357',2,'match0-top.html#357',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.annotation.SuppressLint;
import android.app.AlertDialog;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.graphics.Color;
import android.graphics.drawable.ColorDrawable;
import android.os.Bundle;
import android.text.Html;
import android.util.Log;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

import androidx.appcompat.app.ActionBar;
import androidx.appcompat.app.AppCompatActivity;

import com.example.basa.Class.ClassConnect;
import com.example.basa.Class.ClassPublic;
import com.example.basa.Class.ConnectionReceiver;
import com.example.basa.R;
import com.example.basa.User.SignActivity;
import com.google.android.material.textfield.TextInputLayout;

import java.sql.ResultSet;
import java.util.Objects;

public class MainActivity extends AppCompatActivity {
    //Khai báo biến
    TextInputLayout inpTaiKhoan, inpMatKhau</B></FONT>;
    EditText editTaiKhoan, editMatKhau;
    Button btnDangNhap, btnDangKy, btnDong;
    ClassPublic classPublic = new ClassPublic();
    ClassConnect classConnect;
    //Nhớ tài khoản đăng nhập
    public static final String MyPREFERENCES = &quot;MyPrefs&quot;;
    public static final String User = &quot;userKey&quot;;//Nhớ tài khoản
<A NAME="1"></A>    public static final String Pass = &quot;passKey&quot;;//Nhớ mật khẩu
    SharedPreferences sharedpreferences;
    SharedPreferences.Editor editor;
    private static final int <FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#1',2,'match0-top.html#1',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>MY_PERMISSION_REQUEST_CODE_SEND_SMS = 1;
    private String strSoDienThoai, strMatKhau;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        //Kiểm tra thiết bị có kết nối Internet hay không
        if (ConnectionReceiver.isConnected()){
            sharedpreferences = getSharedPreferences(MyPREFERENCES, Context.MODE_PRIVATE);
            editor = sharedpreferences.edit();
            editor.apply();
            if (sharedpreferences.getString(User, &quot;&quot;).equals(&quot;&quot;)||
                    sharedpreferences.getString(Pass, &quot;&quot;).equals(&quot;&quot;)){
                //Ánh xạ các đối tượng Layout
                layoutAnhXa();
            }
            else</B></FONT> {
                startActivity(new Intent(MainActivity.this, HomeActivity.class));
            }
        }
        else {
            Toast.makeText(MainActivity.this,&quot;Thông báo!Bạn chưa kết nối Internet&quot;,Toast.LENGTH_LONG).show();
            finish();
        }
    }
    @SuppressLint(&quot;WrongViewCast&quot;)
<A NAME="2"></A>    private void layoutAnhXa() {
        //Ảnh xạ các đối tượng trên file layout
        editTaiKhoan = findViewById(R.id.editTaiKhoan);
        <FONT color="#77bfc7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#2',2,'match0-top.html#2',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>editMatKhau = findViewById(R.id.editMatKhau);
        inpTaiKhoan = findViewById(R.id.inpTaiKhoan);
        inpMatKhau = findViewById(R.id.inpMatKhau);
        btnDangNhap = findViewById(R.id.btnDangNhap);
        btnDangKy = findViewById(R.id.btnDangKy);
        btnDong = findViewById(R.id.btnDong);
        clickButton();
    }
    private void clickButton() {
<A NAME="3"></A>        //Click đăng nhập
        btnDangNhap</B></FONT>.setOnClickListener(v -&gt; {
            //Kiểm tra rỗng
            <FONT color="#6cc417"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#3',2,'match0-top.html#3',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>if (editTaiKhoan.getText().length() &gt;= 6){
                if (editMatKhau.getText().length() &gt;= 8){
                    classConnect = new ClassConnect(); //Tạo kết nối đến SQL
                    //Kiểm tra tên tài khoản
                    String sqlTaiKhoan = &quot;select TaiKhoan from TB_NguoiDung where TaiKhoan = '&quot;+editTaiKhoan.getText()+&quot;'&quot;;
                    ResultSet resultSetTaiKhoan = classConnect.selectData(MainActivity.this, sqlTaiKhoan);
                    try {
                        if (resultSetTaiKhoan != null &amp;&amp; resultSetTaiKhoan.next()){
                            //Kiểm tra mật khẩu
                            String sqlMatKhau = &quot;select TaiKhoan from TB_NguoiDung where &quot; +
                                    &quot;TaiKhoan = '&quot;+editTaiKhoan.getText()+&quot;' and MatKhau = '&quot;+editMatKhau.getText()+&quot;'&quot;;
                            ResultSet resultSetMatKhau = classConnect.selectData(MainActivity.this,sqlMatKhau);
                            if (resultSetMatKhau != null &amp;&amp; resultSetMatKhau.next()){
                                //Kiểm tra trạng thái
                                String sqlTrangThai = &quot;select TaiKhoan from TB_NguoiDung where &quot; +
                                        &quot;TaiKhoan = '&quot;+editTaiKhoan.getText()+&quot;' and MatKhau = '&quot;+editMatKhau.getText()+&quot;' and &quot; +
                                        &quot;TrangThai = 1&quot;;
                                ResultSet resultSetTrangThai = classConnect.selectData(MainActivity.this,sqlTrangThai);
                                if (resultSetTrangThai != null &amp;&amp; resultSetTrangThai.next()){
                                    //Nhớ tài khoản đăng nhập
                                    editor.putString(User, editTaiKhoan.getText().toString()); //Lưu tên tài khoản
                                    editor.putString(Pass, editMatKhau.getText().toString()); //Lưu mật khẩu
                                    editor.commit();
                                    //Đăng nhập thành công
                                    classPublic.ThongBao(MainActivity.this,&quot;Thông báo! Đăng nhập thành công&quot;);
<A NAME="4"></A>                                    Intent intent = new Intent(MainActivity.this, HomeActivity.class);
                                    startActivity</B></FONT>(intent);
                                }
                                <FONT color="#151b8d"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#4',2,'match0-top.html#4',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>else {
                                    classPublic.ThongBao(MainActivity.this,&quot;Đăng nhập thất bại&quot;);
                                }
                            }
                            else {
                                inpMatKhau.setError(&quot;Mật khẩu không đúng&quot;);
                            }
                        }
                        else {
                            inpTaiKhoan.setError(&quot;Tài khoản không đúng&quot;);
                        }
                        classConnect.CONN(MainActivity.this).close(); //Đóng kết nối SQL
                    }catch (Exception e){
                        Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
                    }
                }
                else</B></FONT> {
                    if (editMatKhau.getText().length() &lt; 8){
                        inpMatKhau.setError(&quot;Mật khẩu có ít nhất 8 kí tự&quot;);
                        inpMatKhau.setErrorEnabled(true);
                    }
                    else {
                        inpMatKhau.setErrorEnabled(false);
                    }

                }
            }
            else {
                if (editTaiKhoan.getText().length() &lt; 8){
                    inpTaiKhoan.setError(&quot;Tài khoản có ít nhất 6 kí tự&quot;);
                    inpTaiKhoan.setErrorEnabled(true);
                }
                else {
                    inpTaiKhoan.setErrorEnabled(false);
                }
            }
        });
        //Click đăng ký
        btnDangKy.setOnClickListener(v -&gt; {
            Intent intent = new Intent(MainActivity.this, SignActivity.class);
            startActivity(intent);
        });
<A NAME="111"></A>        //Click đóng
        btnDong.setOnClickListener(v -&gt; {
            //Hiện hộp thoại thông báo đăng xuất
            AlertDialog.Builder <FONT color="#f88158"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#111',2,'match0-top.html#111',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>builder = new AlertDialog.Builder(MainActivity.this);
            builder.setTitle(&quot;THÔNG BÁO&quot;);
            builder.setMessage(&quot;Bạn có muốn đóng ứng dụng không?&quot;);
            builder.setIcon(R.drawable.ic_thongbao);
            builder.setCancelable(false);
            builder.setPositiveButton(&quot;Đồng ý&quot;, (dialogInterface, i) -&gt; finish());
            builder.setNegativeButton(&quot;Hủy bỏ&quot;, (dialogInterface, i) -&gt; dialogInterface</B></FONT>.dismiss());
            AlertDialog alertDialog = builder.create();
            alertDialog.show();
        });
    }
    @Override
    //Quay lại trang đã gọi
    public void onBackPressed() {
        //Không cho nhấn nút quay lại
    }
}
</PRE>
<HR>
<H3><CENTER>KinhNghiem\ClassDuyetKinhNghiem.java</CENTER></H3><HR>
<PRE>
<A NAME="7"></A><FONT color="#c58917"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#7',2,'match0-top.html#7',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.KinhNghiem;

public class ClassDuyetKinhNghiem {
    private final String strMaKinhNghiem, strHoTen, strDiaChi, strTenKinhNghiem,
            strNgayGui, strGiaiPhap, strAnh;
    Boolean boolTrangThai;
    public ClassDuyetKinhNghiem(String strMaKinhNghiem, String strHoTen, String strDiaChi, String strTenKinhNghiem, String strNgayGui,
                                String strGiaiPhap, String strAnh, boolean boolTrangThai){
        this.strMaKinhNghiem = strMaKinhNghiem;
        this.strHoTen = strHoTen;
        this.strDiaChi = strDiaChi;
        this.strTenKinhNghiem = strTenKinhNghiem;
        this.strNgayGui = strNgayGui;
        this.strGiaiPhap = strGiaiPhap;
        this.strAnh = strAnh;
        this.boolTrangThai = boolTrangThai;
    }

    public String getStrMaKinhNghiem() {
        return strMaKinhNghiem;
    }

    public String getStrHoTen() {
        return strHoTen;
    }

    public String getStrDiaChi() {
        return strDiaChi;
    }

    public String getStrTenKinhNghiem() {
        return strTenKinhNghiem;
    }

    public String getStrNgayGui() {
        return strNgayGui;
    }

    public String getStrGiaiPhap() {
        return strGiaiPhap;
    }

    public String getStrAnh() {
        return strAnh;
    }

    public Boolean getBoolTrangThai() {
        return boolTrangThai;
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>KinhNghiem\ClassKinhNghiemView.java</CENTER></H3><HR>
<PRE>
package com.example.basa.KinhNghiem;

public class ClassKinhNghiemView {
<A NAME="550"></A>    private final String strHoTen, strDiaChi, strTenKinhNghiem, strNgayGui, strGiaiPhap, strAnh;
    public ClassKinhNghiemView(String strHoTen, String strDiaChi, String strTenKinhNghiem, String strNgayGui,
                               String strGiaiPhap, String strAnh){
        <FONT color="#717d7d"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#550',2,'match0-top.html#550',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>this.strHoTen = strHoTen;
        this.strDiaChi = strDiaChi;
        this.strTenKinhNghiem = strTenKinhNghiem;
        this.strNgayGui = strNgayGui;
        this.strGiaiPhap = strGiaiPhap;
        this.strAnh = strAnh;
    }

    public String getStrHoTen() {
        return strHoTen;
    }

    public String getStrDiaChi() {
        return strDiaChi;
    }

    public String getStrTenKinhNghiem() {
        return strTenKinhNghiem;
    }

    public String getStrNgayGui() {
        return strNgayGui;
    }

    public String getStrGiaiPhap() {
        return strGiaiPhap;
    }

    public String getStrAnh() {
        return strAnh;
    }</B></FONT>
}
</PRE>
<HR>
<H3><CENTER>KinhNghiem\FragmentDuyetKinhNghiem.java</CENTER></H3><HR>
<PRE>
<A NAME="295"></A>package com.example.basa.KinhNghiem;

<FONT color="#c8c2a7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#295',2,'match0-top.html#295',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.annotation.SuppressLint;
import android.app.AlertDialog;
import android.content.Context;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.ListView;
import android.widget.Spinner;
import android.widget.TextView;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;

import com.example.basa.Class.ClassConnect;
import com.example.basa.Class.ClassPublic;
import com.example.basa.Home.FragmentHome;
import com.example.basa.Menu.FragmentMenu;
import com.example.basa.R;

import java.sql.ResultSet;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;

import static com.example.basa.Home.MainActivity.MyPREFERENCES;
import static com.example.basa.Home.MainActivity.User;

<A NAME="713"></A>public class FragmentDuyetKinhNghiem extends Fragment {
    //Khai báo
    private String strTaiKhoan, strLoaiCa, strTrangThai</B></FONT>;
    private View <FONT color="#800517"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#713',2,'match0-top.html#713',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>view;
    private ListView listView;
    private Spinner cmdLoaiCa, cmdTrangThai;
    private ImageButton btnQuayLai;
    private final ClassPublic classPublic = new ClassPublic();
    private ClassConnect classConnect</B></FONT>;
<A NAME="43"></A>    private ListViewDuyetKinhNghiem adapterKinhNghiem;
    public static ArrayList &lt;ClassDuyetKinhNghiem&gt; arrayListKinhNghiem;
    private final ArrayList&lt;String&gt; listMaLoaiCa = new ArrayList&lt;&gt;(); //Khai báo danh sách loại cá
    private final ArrayList&lt;<FONT color="#c22817"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#43',2,'match0-top.html#43',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>String&gt; listTenLoaiCa = new ArrayList&lt;&gt;();
    private final ArrayList&lt;String&gt; listMaTrangThai = new ArrayList&lt;&gt;(); //Khai báo danh sách trạng thái
    private final ArrayList&lt;String&gt; listTenTrangThai = new ArrayList&lt;&gt;();
    SharedPreferences sharedpreferences; //Nhớ tài khoản
    SharedPreferences.Editor editor;
    public static FragmentManager fragmentManager; //Fragment trang chủ
    public static FragmentTransaction fragmentTransaction;
    //Khai báo các đối tượng trên dialog
    private TextView textTieuDe</B></FONT>;
    private EditText editMaKinhNghiem, editTenKinhNghiem, editGiaiPhap;
    private Button btnDong, btnChiaSe;
<A NAME="460"></A>    int intDieuKienGan;
    @SuppressLint(&quot;CommitPrefEdits&quot;)
    @Nullable
    <FONT color="#4e8975"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#460',2,'match0-top.html#460',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>@Override
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);
        view = inflater.inflate(R.layout.fragment_duyet_kinh_nghiem, container, false);
        sharedpreferences = this</B></FONT>.requireActivity().getSharedPreferences(MyPREFERENCES, Context.MODE_PRIVATE);
        editor = sharedpreferences.edit();
        editor.apply();
        strTaiKhoan = sharedpreferences.getString(User,&quot;&quot;);
        layoutAnhXa(); //Ánh xạ các đối tượng trên layout
<A NAME="497"></A>        return view ;
    }
    @SuppressLint(&quot;NewApi&quot;)
    private <FONT color="#736aff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#497',2,'match0-top.html#497',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>void layoutAnhXa() {
        cmdLoaiCa = view.findViewById(R.id.cmdLoaiCa);
        listView = view.findViewById(R.id.listView);
        cmdTrangThai = view.findViewById(R.id.cmdTrangThai);
        btnQuayLai = view.findViewById(R.id.btnQuayLai);
        btnQuayLai</B></FONT>.setOnClickListener(view1 -&gt; {
            fragmentTransaction = fragmentManager.beginTransaction();
<A NAME="329"></A>            fragmentTransaction.replace(R.id.fragment_main, new FragmentMenu());
            fragmentTransaction.commit();
        });
        fragmentManager = <FONT color="#152dc6"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#329',2,'match0-top.html#329',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>requireActivity().getSupportFragmentManager();//Chuyển fragment
        loadLoaiCa();//Load loại cá
        loadTrangThai();//Load trạng thái
        clickListView();//Click vào listView
    }

    private void loadTrangThai() {
        listMaTrangThai.clear(); //Xóa danh sách đang có
        listTenTrangThai.clear();
        listMaTrangThai.add(&quot;False&quot;);
<A NAME="477"></A>        listTenTrangThai.add(&quot;Chưa duyệt&quot;);
        listMaTrangThai.add(&quot;True&quot;);
        listTenTrangThai</B></FONT>.add(&quot;Đã duyệt&quot;);
        ArrayAdapter&lt;String&gt; dataTrangThai= new ArrayAdapter&lt;&gt;(<FONT color="#842dce"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#477',2,'match0-top.html#477',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>getActivity(), android.R.layout.simple_spinner_item,listTenTrangThai);
        dataTrangThai.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
        cmdTrangThai.setAdapter(dataTrangThai);
        cmdTrangThai.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaTrangThai.isEmpty()) {
                    strTrangThai = listMaTrangThai.get(position);
                    loadKinhNghiem();
                }
            }
            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }

    private void</B></FONT> loadKinhNghiem() {
        arrayListKinhNghiem = new ArrayList&lt;&gt;();
        arrayListKinhNghiem.clear();
        try {
            classConnect = new ClassConnect(); //Mở kết nối đến SQL
            String sqlKinhNghiem = &quot;select Anh, Duyet, MaKinhNghiem, HoTen, TenTinh, TenHuyen, TenXa, TenKinhNghiem, NgayGui, GiaiPhap &quot; +
                    &quot;from TB_KinhNghiem kn, TB_NguoiDung nd, TB_Tinh t, TB_Huyen h, TB_Xa x &quot; +
<A NAME="50"></A>                    &quot;where kn.TaiKhoan = nd.TaiKhoan and nd.MaTinh = t.MaTinh and nd.MaHuyen = h.MaHuyen &quot; +
                    &quot;and nd.MaXa = x.MaXa &quot; +
                    &quot;and kn.LoaiCa = '&quot;+ strLoaiCa +&quot;' and kn.Duyet = '&quot;+ Boolean.parseBoolean(strTrangThai) +&quot;'&quot;;
            ResultSet <FONT color="#ff0000"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#50',2,'match0-top.html#50',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>resultSetKinhNghiem = classConnect.selectData(getActivity(), sqlKinhNghiem);
            if (resultSetKinhNghiem != null) {
<A NAME="322"></A>                while (resultSetKinhNghiem.next()) {
                    String strDiaChi = resultSetKinhNghiem.getString(&quot;TenXa&quot;);
                    strDiaChi = strDiaChi.concat(&quot;-&quot;+resultSetKinhNghiem.getString(&quot;TenHuyen&quot;) + &quot;-&quot; +resultSetKinhNghiem</B></FONT>.getString(&quot;TenTinh&quot;));
                    <FONT color="#82cafa"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#322',2,'match0-top.html#322',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>arrayListKinhNghiem.add(new ClassDuyetKinhNghiem(resultSetKinhNghiem.getString(&quot;MaKinhNghiem&quot;),
                            resultSetKinhNghiem.getString(&quot;HoTen&quot;), strDiaChi, resultSetKinhNghiem.getString(&quot;TenKinhNghiem&quot;),
                            resultSetKinhNghiem.getString(&quot;NgayGui&quot;), resultSetKinhNghiem.getString(&quot;GiaiPhap&quot;),
                            resultSetKinhNghiem.getString(&quot;Anh&quot;), resultSetKinhNghiem.getBoolean(&quot;Duyet&quot;)));
                }
            }
            if (arrayListKinhNghiem.isEmpty()){
                classPublic.ThongBao(getActivity(),&quot;Chưa có kinh nghiệm cần duyệt&quot;);
            }
<A NAME="342"></A>            classConnect.CONN(getActivity()).close(); //Đóng kết nối đến SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, e</B></FONT>.getMessage());
        <FONT color="#2b60de"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#342',2,'match0-top.html#342',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
        adapterKinhNghiem = new ListViewDuyetKinhNghiem(getContext());
        listView.setAdapter(adapterKinhNghiem);
    }
    private void clickListView() {
        listView</B></FONT>.setOnItemClickListener((parent, view, position, id) -&gt; insertKinhNghiem(position));
    }
    private void insertKinhNghiem(final int intChiSo) {
        LayoutInflater inflater = getLayoutInflater();
        @SuppressLint(&quot;InflateParams&quot;) View alertLayout = inflater.inflate(R.layout.dialog_duyet_kinh_nghiem, null);
        textTieuDe = alertLayout.findViewById(R.id.textTieuDe);
        editMaKinhNghiem = alertLayout.findViewById(R.id.editMaKinhNghiem);
        editTenKinhNghiem = alertLayout.findViewById(R.id.editTenKinhNgiem);
        editGiaiPhap = alertLayout.findViewById(R.id.editGiaiPhap);
        btnChiaSe = alertLayout.findViewById(R.id.btnChiaSe);
        btnDong = alertLayout.findViewById(R.id.btnDong);
        editTenKinhNghiem.setEnabled(false);
        if (strTrangThai.equals(&quot;1&quot;)){
            btnChiaSe.setEnabled(false);
<A NAME="207"></A>        }
        final AlertDialog.Builder alert = new AlertDialog.Builder(getActivity());
        intDieuKienGan = 1;
        <FONT color="#736aff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#207',2,'match0-top.html#207',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>alert.setView(alertLayout);
        alert.setCancelable(false);
        final AlertDialog dialog = alert.create();
            String strTieuDe = &quot;DUYỆT KINH NGHIỆM&quot;;
<A NAME="654"></A>            textTieuDe.setText(strTieuDe);
            String strNut = &quot;DUYỆT&quot;;
            btnChiaSe</B></FONT>.setText(strNut);//Đổi text nút lưu lại thành cập nhật
            editMaKinhNghiem.setText(<FONT color="#3090c7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#654',2,'match0-top.html#654',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>arrayListKinhNghiem.get(intChiSo).getStrMaKinhNghiem()); //Gán giá trị mã kn
            editTenKinhNghiem.setText(arrayListKinhNghiem.get(intChiSo).getStrTenKinhNghiem()); //Gán giá trị tên kn
            editGiaiPhap.setText(arrayListKinhNghiem.get(intChiSo).getStrGiaiPhap());//Gán giá trị nt
        btnChiaSe.setOnClickListener(v -&gt; {
            //Hiện hộp thoại thông báo đăng xuất
            AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
            builder.setTitle(&quot;THÔNG BÁO&quot;);
            builder.setMessage(&quot;Bạn có muốn duyệt kinh nghiệm không?&quot;);
            builder</B></FONT>.setIcon(R.drawable.ic_thongbao);
            builder.setCancelable(false);
            builder.setPositiveButton(&quot;Đồng ý&quot;, (dialogInterface, i) -&gt; {
            try {
                if (editTenKinhNghiem.getText().length() != 0) {
                    if (editGiaiPhap.getText().length() != 0) {
                        Date date_HienTai = new Date();//Lấy ngày h hiện tại
                        @SuppressLint(&quot;SimpleDateFormat&quot;) SimpleDateFormat date_NgayThang = new SimpleDateFormat(&quot;dd/MM/yyyy hh:mm:ss&quot;);
<A NAME="634"></A>                        String sqlKinhNghiem;
                        sqlKinhNghiem = &quot;update TB_KinhNghiem set GiaiPhap = N'&quot; + editGiaiPhap.getText() + &quot;', Duyet = 1 where MaKinhNghiem = '&quot; + editMaKinhNghiem.getText() + &quot;'&quot;;
                        classConnect = new ClassConnect(); //Mở kết nối SQL
                        <FONT color="#4e8975"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#634',2,'match0-top.html#634',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>if (classConnect.updateData(getActivity(), sqlKinhNghiem) == 1) {
                            classPublic.ThongBao(getActivity(), &quot;Bạn đã duyệt kinh nghiệp&quot;);
                            dialog.cancel(); //Đóng dialog sau đó gọi load mới danh sách
                            loadKinhNghiem(); //Load lại danh sách
                        } else {
                            classPublic.ThongBao(getActivity</B></FONT>(), &quot;Bạn chưa duyệt kinh nghiệm&quot;);
                            dialog.cancel(); //Đóng dialog sau đó gọi load mới danh sách
                        }
<A NAME="732"></A>                    } else {
                        classPublic.ThongBao(getActivity(), &quot;Vui lòng nhập giải pháp&quot;);
                    }
                } <FONT color="#ff00ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#732',2,'match0-top.html#732',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>else {
                    classPublic.ThongBao(getActivity(), &quot;Vui lòng nhập tên kinh nghiệm&quot;);
                }
                classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
            } catch (Exception e) {
                Log.e(&quot;TAG&quot;, e.getMessage());
            }</B></FONT>
            });
            builder.setNegativeButton(&quot;Hủy bỏ&quot;, (dialogInterface, i) -&gt; dialogInterface.dismiss());

<A NAME="624"></A>            AlertDialog alertDialog = builder.create();
            alertDialog.show();
        });
        <FONT color="#e57ded"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#624',2,'match0-top.html#624',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>btnDong.setOnClickListener(v -&gt; dialog.cancel());
        dialog.show(); //Show giao diện thêm mới kinh nghiệm
    }
    private void loadLoaiCa() {
        listMaLoaiCa.clear(); //Xóa danh sách đang có
        listTenLoaiCa.clear();
        listMaLoaiCa.add(&quot;1&quot;);
<A NAME="48"></A>        listTenLoaiCa.add(&quot;Cá giống&quot;);
        listMaLoaiCa.add(&quot;2&quot;);
        listTenLoaiCa</B></FONT>.add(&quot;Cá thịt&quot;);
        ArrayAdapter&lt;String&gt; dataLoaiCa = new ArrayAdapter&lt;&gt;(<FONT color="#c57726"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#48',2,'match0-top.html#48',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>getActivity(), android.R.layout.simple_spinner_item,listTenLoaiCa);
        dataLoaiCa.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
        cmdLoaiCa.setAdapter(dataLoaiCa);
        cmdLoaiCa.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaLoaiCa.isEmpty()) {
                    strLoaiCa = listMaLoaiCa.get(position);
                    loadKinhNghiem(); //Load kinh nghiệm
                }
            }
            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }</B></FONT>

}
</PRE>
<HR>
<H3><CENTER>KinhNghiem\FragmentKinhNghiemView.java</CENTER></H3><HR>
<PRE>
<A NAME="505"></A>package com.example.basa.KinhNghiem;

<FONT color="#f87a17"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#505',2,'match0-top.html#505',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.annotation.SuppressLint;
import android.app.AlertDialog;
import android.content.Context;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.ListView;
import android.widget.SearchView;
import android.widget.Spinner;
import android.widget.TextView;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;

import com.example.basa.Home.FragmentHome;
import com.example.basa.R;
import com.example.basa.Class.ClassConnect;
import com.example.basa.Class.ClassPublic;
import java.sql.ResultSet;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;

import static com.example.basa.Home.MainActivity.MyPREFERENCES;
import static com.example.basa.Home.MainActivity.User;

<A NAME="727"></A>public class FragmentKinhNghiemView extends Fragment implements SearchView.OnQueryTextListener {
    //Khai báo
    String strTaiKhoan, strLoaiCa</B></FONT>, strLoaiTaiKhoan;
    private View <FONT color="#3ea99f"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#727',2,'match0-top.html#727',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>view;
    private ListView listView;
    private SearchView searchView;
    private ImageButton btnThemMoi, btnQuayLai;
    private Spinner cmdLoaiCa;
    private final ClassPublic classPublic = new ClassPublic();
<A NAME="263"></A>    private ClassConnect classConnect</B></FONT>;
    private ListViewKinhNghiemView adapterKinhNghiem;
    public static ArrayList &lt;ClassKinhNghiemView&gt; arrayListKinhNghiem;
    private final ArrayList&lt;<FONT color="#3ea99f"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#263',2,'match0-top.html#263',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>String&gt; listMaLoaiCa = new ArrayList&lt;&gt;(); //Khai báo danh sách loại cá
    private final ArrayList&lt;String&gt; listTenLoaiCa = new ArrayList&lt;&gt;();
    SharedPreferences sharedpreferences; //Nhớ tài khoản
    SharedPreferences.Editor editor;
    public static FragmentManager fragmentManager; //Fragment trang chủ
    public static FragmentTransaction fragmentTransaction;
    //Khai báo các đối tượng trên dialog
    private TextView textTieuDe;
    private EditText editMaKinhNghiem, editTenKinhNghiem, editGiaiPhap</B></FONT>;
    private Button btnDong, btnChiaSe, btnXoa;
<A NAME="601"></A>    int intDieuKienGan;
    @SuppressLint(&quot;CommitPrefEdits&quot;)
    @Nullable
    <FONT color="#00ff00"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#601',2,'match0-top.html#601',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>@Override
<A NAME="622"></A>    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);
        view = inflater.inflate(R.layout.fragment_kinh_nghiem_view, container, false);
        sharedpreferences</B></FONT> = <FONT color="#c57717"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#622',2,'match0-top.html#622',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>this.requireActivity().getSharedPreferences(MyPREFERENCES, Context.MODE_PRIVATE);
        editor = sharedpreferences.edit();
        editor.apply();
        strTaiKhoan = sharedpreferences.getString(User,&quot;&quot;);
        strLoaiTaiKhoan = classPublic.layLoaiTaiKhoan(strTaiKhoan,getActivity());
        layoutAnhXa(); //Ánh xạ các đối tượng trên layout
        return view ;
    }</B></FONT>
<A NAME="29"></A>    @SuppressLint(&quot;NewApi&quot;)
    private void layoutAnhXa() {
        btnThemMoi = view.findViewById(R.id.btnThemMoi);
        <FONT color="#faafba"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#29',2,'match0-top.html#29',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>cmdLoaiCa = view.findViewById(R.id.cmdLoaiCa);
        listView = view.findViewById(R.id.listView);
        searchView = view.findViewById(R.id.searchTen);
        btnQuayLai = view.findViewById(R.id.btnQuayLai);
        fragmentManager = requireActivity().getSupportFragmentManager();//Chuyển fragment
        loadLoaiCa();
        clickButton();
    }
    private void</B></FONT> loadKinhNghiem(String maLoaiCa) {
        arrayListKinhNghiem = new ArrayList&lt;&gt;();
        arrayListKinhNghiem.clear();
        try {
            classConnect = new ClassConnect(); //Mở kết nối đến SQL
            String sqlKinhNghiem = &quot;select Anh, HoTen, TenTinh, TenHuyen, TenXa, TenKinhNghiem, NgayGui, GiaiPhap &quot; +
<A NAME="225"></A>                    &quot;from TB_KinhNghiem kn, TB_NguoiDung nd, TB_Tinh t, TB_Huyen h, TB_Xa x &quot; +
                    &quot;where nd.MaTinh = t.MaTinh and nd.MaHuyen = h.MaHuyen and nd.MaXa = x.MaXa and kn.TaiKhoan = nd.TaiKhoan and &quot; +
                    &quot;Duyet = 1 and kn.LoaiCa = '&quot;+ Integer.parseInt(maLoaiCa) +&quot;' order by MaKinhNghiem desc&quot;;
            ResultSet <FONT color="#b38481"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#225',2,'match0-top.html#225',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>resultSetKinhNghiem = classConnect.selectData(getActivity(), sqlKinhNghiem);
            if (resultSetKinhNghiem != null) {
                while (resultSetKinhNghiem.next()) {
                    String strDiaChi = resultSetKinhNghiem.getString(&quot;TenXa&quot;);
                    strDiaChi = strDiaChi.concat(&quot;-&quot;+resultSetKinhNghiem.getString(&quot;TenHuyen&quot;) + &quot;-&quot; +resultSetKinhNghiem.getString(&quot;TenTinh&quot;));
                    arrayListKinhNghiem.add(new ClassKinhNghiemView( resultSetKinhNghiem.getString(&quot;HoTen&quot;), strDiaChi, resultSetKinhNghiem.getString(&quot;TenKinhNghiem&quot;),
                            resultSetKinhNghiem.getString(&quot;NgayGui&quot;), resultSetKinhNghiem.getString(&quot;GiaiPhap&quot;), resultSetKinhNghiem.getString(&quot;Anh&quot;)));
                }
            }
            if (arrayListKinhNghiem.isEmpty()){
                classPublic.ThongBao(getActivity(),&quot;Chưa có kinh nghiệm được chia sẻ&quot;);
            }
<A NAME="467"></A>            classConnect.CONN(getActivity()).close(); //Đóng kết nối đến SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, e</B></FONT>.getMessage());
        <FONT color="#6cc417"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#467',2,'match0-top.html#467',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
        adapterKinhNghiem = new ListViewKinhNghiemView(getContext());
        listView.setAdapter(adapterKinhNghiem);
        searchView.setOnQueryTextListener(this);
    }
    @Override
    public boolean onQueryTextSubmit(String query) {
        return false;
    }

    @Override
    public boolean onQueryTextChange(String newText) { //Tìm theo tên kinh nghiệm
        adapterKinhNghiem.filter(newText);
        return false;
    }

    private void</B></FONT> clickButton() {
        if (strLoaiTaiKhoan.equals(&quot;2&quot;)){
            btnThemMoi.setVisibility(View.VISIBLE);
        }
        btnThemMoi.setOnClickListener(v -&gt; {
            insertKinhNghiem();
            intDieuKienGan = 0;
        });
        btnQuayLai.setOnClickListener(v -&gt; {
            fragmentTransaction = fragmentManager.beginTransaction();
            fragmentTransaction.replace(R.id.fragment_main, new FragmentHome());
            fragmentTransaction.commit();
<A NAME="30"></A>        });
    }
    private void loadLoaiCa() {
        <FONT color="#f9966b"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#30',2,'match0-top.html#30',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>listMaLoaiCa.clear(); //Xóa danh sách đang có
        listTenLoaiCa.clear();
        listMaLoaiCa.add(&quot;1&quot;);
<A NAME="617"></A>        listTenLoaiCa.add(&quot;Cá giống&quot;);
        listMaLoaiCa.add(&quot;2&quot;);
        listTenLoaiCa.add(&quot;Cá thịt&quot;);
        ArrayAdapter&lt;String&gt; dataTrangThai = new ArrayAdapter</B></FONT>&lt;&gt;(<FONT color="#810541"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#617',2,'match0-top.html#617',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>getActivity(), android.R.layout.simple_spinner_item,listTenLoaiCa);
        dataTrangThai.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
        cmdLoaiCa.setAdapter(dataTrangThai);
        cmdLoaiCa.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaLoaiCa.isEmpty()) {
                    strLoaiCa = listMaLoaiCa.get(position);
                    loadKinhNghiem(strLoaiCa); //Load kinh nghiệm
                }
            }
<A NAME="304"></A>            @Override
            public void onNothingSelected(AdapterView&lt;?</B></FONT>&gt; parent) {

            <FONT color="#f52887"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#304',2,'match0-top.html#304',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
        });
    }
    private void insertKinhNghiem() {
        LayoutInflater inflater = getLayoutInflater();
        @SuppressLint(&quot;InflateParams&quot;) View alertLayout = inflater.inflate(R.layout.dialog_kinh_nghiem, null);
        textTieuDe = alertLayout.findViewById(R.id.textTieuDe);
        editMaKinhNghiem = alertLayout.findViewById(R.id.editMaKinhNghiem);
        editTenKinhNghiem = alertLayout.findViewById(R.id.editTenKinhNgiem);
        editGiaiPhap = alertLayout.findViewById(R.id.editGiaiPhap);
        btnChiaSe = alertLayout.findViewById(R.id.btnChiaSe);
<A NAME="174"></A>        btnDong = alertLayout.findViewById(R.id.btnDong);
        btnXoa = alertLayout.findViewById(R.id.btnXoa);
        final AlertDialog.Builder alert = new AlertDialog.Builder(getActivity</B></FONT>());
        <FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#174',2,'match0-top.html#174',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>intDieuKienGan = 1;
        alert.setView(alertLayout);
        alert.setCancelable(false);
        final AlertDialog dialog = alert.create();
        btnXoa.setEnabled(false);//Không cho phép ấn nút xóa
        String strTieuDe = &quot;THÊM MỚI KINH NGHIỆM&quot;;
        textTieuDe.setText(strTieuDe);
        editMaKinhNghiem.setText(&quot;&quot;);
        String strNut = &quot;THÊM MỚI&quot;; //Đổi text nút lưu lại thành thêm mới
        btnChiaSe.setText(strNut);
        btnChiaSe</B></FONT>.setOnClickListener(v -&gt; {
            try {
                if (editTenKinhNghiem.getText().length()!= 0){
                    if (editGiaiPhap.getText().length()!= 0){
                        Date date_HienTai = new Date();//Lấy ngày h hiện tại
                        @SuppressLint(&quot;SimpleDateFormat&quot;) SimpleDateFormat date_NgayThang = new SimpleDateFormat(&quot;dd/MM/yyyy hh:mm:ss&quot;);
                        String sqlKinhNghiem;
                            sqlKinhNghiem = &quot;insert into TB_KinhNghiem (TaiKhoan, TenKinhNghiem, GiaiPhap, NgayGui, LoaiCa, Duyet) values &quot; +
                                    &quot;('&quot; + strTaiKhoan + &quot;', N'&quot; + editTenKinhNghiem.getText() + &quot;', N'&quot; + editGiaiPhap.getText() + &quot;','&quot; + date_NgayThang.format(date_HienTai) + &quot;', '&quot; + Integer.parseInt(strLoaiCa) + &quot;',0)&quot;;
                        classConnect = new ClassConnect(); //Mở kết nối SQL
                        if (classConnect.updateData(getActivity(), sqlKinhNghiem) == 1) {
                            classPublic.ThongBao(getActivity(), &quot;Chia sẻ kinh nghiệm thành công. Vui lòng chờ cán bộ nông nghiệp duyệt&quot;);
                            dialog.cancel(); //Đóng dialog sau đó gọi load mới danh sách
                            loadKinhNghiem(strLoaiCa); //Load lại danh sách
                        }
                        else {
                            classPublic.ThongBao(getActivity(),&quot;Kinh nghiệm đã duyệt không được cập nhật&quot;);
                            dialog.cancel(); //Đóng dialog sau đó gọi load mới danh sách
                        }
                    }
                    else {
<A NAME="144"></A>                        classPublic.ThongBao(getActivity(),&quot;Vui lòng nhập giải pháp&quot;);
                    }
                }
                <FONT color="#717d7d"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#144',2,'match0-top.html#144',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>else {
                    classPublic.ThongBao(getActivity(),&quot;Vui lòng nhập tên kinh nghiệm&quot;);
                }
                classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
            } catch (Exception e){
                Log.e(&quot;TAG&quot;, e</B></FONT>.getMessage());
            }
        });
        btnDong.setOnClickListener(v -&gt; dialog.cancel());
        dialog.show(); //Show giao diện thêm mới kinh nghiệm
    }
}
</PRE>
<HR>
<H3><CENTER>KinhNghiem\ListViewDuyetKinhNghiem.java</CENTER></H3><HR>
<PRE>
package com.example.basa.KinhNghiem;

import android.annotation.SuppressLint;
import android.content.Context;
import android.net.ConnectivityManager;
import android.text.Html;
<A NAME="683"></A>import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
<FONT color="#79d867"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#683',2,'match0-top.html#683',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;

import com.example.basa.R;
import com.example.basa.Class.ClassPublic;

import java.util.ArrayList;
import java.util.Objects;

public class ListViewDuyetKinhNghiem extends BaseAdapter {
<A NAME="63"></A>    private ClassPublic classPublic</B></FONT> = new ClassPublic();
    private final Context mContext;
    private final LayoutInflater inflater;
    private final ArrayList&lt;ClassDuyetKinhNghiem&gt; <FONT color="#c8c2a7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#63',2,'match0-top.html#63',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>arraylist;
    public ListViewDuyetKinhNghiem(Context context){
        mContext = context;
        inflater = LayoutInflater.from(mContext);
        this.arraylist = new ArrayList&lt;&gt;();
        this.arraylist.addAll(FragmentDuyetKinhNghiem.arrayListKinhNghiem);
    }
    public static class ViewHolder {
        TextView textHoTen;
        TextView textDiaChi;
        TextView textTenKinhNghiem;
        TextView textNgayGui;
        TextView textGiaiPhap;
        ImageView imgDuyet, imgChuDe;
    }
    @Override
    public int getCount() {
        return FragmentDuyetKinhNghiem.arrayListKinhNghiem.size();
    }
    @Override
    public Object getItem(int position) {
        return FragmentDuyetKinhNghiem.arrayListKinhNghiem.get(position);
    }
    @Override
    public long getItemId(int position) {
        return position;
    }
    @Override
    @SuppressLint({&quot;InflateParams&quot;, &quot;SetTextI18n&quot;, &quot;MissingPermission&quot;})
    public View getView(int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.listview_duyet_kinh_nghiem, null);
            holder.textHoTen = convertView.findViewById(R.id.textHoTen);
            holder.textDiaChi = convertView.findViewById(R.id.textDiaChi);
            holder.textTenKinhNghiem = convertView.findViewById(R.id.textTenKinhNghiem);
            holder.textNgayGui = convertView.findViewById(R.id.textNgayGui);
            holder.textGiaiPhap = convertView.findViewById(R.id.textGiaiPhap);
            holder.imgDuyet = convertView.findViewById(R.id.imgDuyet);
            holder.imgChuDe = convertView.findViewById(R.id.imgChuDe);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        //Kiểm tra kết nối đến hosting
        ConnectivityManager connectivityManager = (ConnectivityManager) mContext</B></FONT>.getSystemService (Context.CONNECTIVITY_SERVICE);
        if(Objects.requireNonNull(connectivityManager).getActiveNetworkInfo() != null &amp;&amp; Objects.requireNonNull(connectivityManager.getActiveNetworkInfo()).isAvailable()
                &amp;&amp; connectivityManager.getActiveNetworkInfo().isConnected()) {
            String strAnh = FragmentDuyetKinhNghiem.arrayListKinhNghiem.get(position).getStrAnh();
            classPublic = new ClassPublic();
            if (!strAnh.isEmpty()) {
                classPublic.downloadImage(&quot;http://hoclamaimai.com/&quot; + strAnh, holder.imgChuDe); //Load ảnh đại diện
            }
            else {
                holder.imgChuDe.setImageResource(R.drawable.img_avatar);
<A NAME="579"></A>            }
        }
        else {
            <FONT color="#980517"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#579',2,'match0-top.html#579',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>Log.e(&quot;TAG&quot;,&quot;LỖI! Kết nối đến hosting.&quot;);
        }
        //Ẩn các nút
        if (FragmentDuyetKinhNghiem.arrayListKinhNghiem.get(position).getBoolTrangThai()){
            holder.imgDuyet.setVisibility(View.GONE);
        }
        holder.textHoTen.setText(FragmentDuyetKinhNghiem</B></FONT>.arrayListKinhNghiem.get(position).getStrHoTen());
<A NAME="714"></A>        holder.textDiaChi.setText(FragmentDuyetKinhNghiem.arrayListKinhNghiem.get(position).getStrDiaChi());
        holder.textTenKinhNghiem.setText(FragmentDuyetKinhNghiem.arrayListKinhNghiem.get(position).getStrTenKinhNghiem());
        holder.textNgayGui.setText(FragmentDuyetKinhNghiem.arrayListKinhNghiem.get(position).getStrNgayGui());
        String [] strText = <FONT color="#f62817"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#714',2,'match0-top.html#714',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>FragmentDuyetKinhNghiem.arrayListKinhNghiem.get(position).getStrGiaiPhap().split(&quot;\\.&quot;);
        holder.textGiaiPhap.setText(Html.fromHtml(strText[0] + &quot;... &lt;font color='blue'&gt;&lt;b&gt;Xem thêm &gt;&gt;&lt;/b&gt;&lt;/font&gt;&quot;),TextView.BufferType.SPANNABLE);
        holder.textGiaiPhap.setOnClickListener(v -&gt;
            holder.textGiaiPhap.setText( FragmentDuyetKinhNghiem.arrayListKinhNghiem.get(position).getStrGiaiPhap()));
        return convertView;
    }</B></FONT>
}
</PRE>
<HR>
<H3><CENTER>KinhNghiem\ListViewKinhNghiemView.java</CENTER></H3><HR>
<PRE>
<A NAME="719"></A>package com.example.basa.KinhNghiem;

import android.annotation.SuppressLint;
<FONT color="#f660ab"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#719',2,'match0-top.html#719',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.app.Activity;
import android.content.Context;
import android.net.ConnectivityManager;
import android.speech.tts.TextToSpeech;
import android.text.Html;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.TextView;
import com.example.basa.Class.ClassPublic;
import com.example.basa.R;
import java.util.ArrayList;
import java.util.Locale;
import java.util.Objects;

public class ListViewKinhNghiemView extends BaseAdapter {
    private ClassPublic classPublic</B></FONT> = new ClassPublic();
    private final Context mContext;
    private TextToSpeech tts;
    private final LayoutInflater inflater;
    private final ArrayList&lt;ClassKinhNghiemView&gt; arraylist;
    public ListViewKinhNghiemView(Context context){
        mContext = context;
        inflater = LayoutInflater.from(mContext);
        //Khởi tạo đọc văn bản
        tts = classPublic.DocVanBan((Activity)mContext,&quot;&quot;);
        this.arraylist = new ArrayList&lt;&gt;();
<A NAME="659"></A>        this.arraylist.addAll(FragmentKinhNghiemView.arrayListKinhNghiem);
    }
    public static class ViewHolder {
        TextView <FONT color="#00ff00"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#659',2,'match0-top.html#659',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>textHoTen;
        TextView textDiaChi;
        TextView textTenKinhNghiem;
        TextView textNgayGui;
        TextView textGiaiPhap;
        ImageView imageView;
        ImageButton btnVolumeUp, btnVolumeOff;
    }
    @Override
    public int getCount() {
        return FragmentKinhNghiemView.arrayListKinhNghiem.size();
    }
    @Override
    public Object getItem(int position) {
        return FragmentKinhNghiemView.arrayListKinhNghiem.get(position);
    }
    @Override
    public long getItemId(int position) {
        return position;
    }
    @Override
    @SuppressLint({&quot;InflateParams&quot;, &quot;SetTextI18n&quot;, &quot;NewApi&quot;, &quot;MissingPermission&quot;})
    public View getView(final int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.listview_kinh_nghiem_view, null);
            holder.imageView = convertView.findViewById(R.id.imgChuDe);
            holder.textHoTen = convertView.findViewById(R.id.textHoTen);
            holder.textDiaChi = convertView.findViewById(R.id.textDiaChi);
            holder.textTenKinhNghiem = convertView.findViewById(R.id.textTenKinhNghiem);
            holder.textNgayGui = convertView.findViewById(R.id.textNgayGui);
            holder.textGiaiPhap = convertView.findViewById(R.id.textGiaiPhap);
            holder.btnVolumeUp = convertView.findViewById(R.id.btnVolumeUp);
            holder.btnVolumeOff = convertView</B></FONT>.findViewById(R.id.btnVolumeOff);
            convertView.setTag(holder);
        } else {
<A NAME="737"></A>            holder = (ViewHolder) convertView.getTag();
        }
        //Kiểm tra kết nối đến hosting
        ConnectivityManager <FONT color="#f87a17"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#737',2,'match0-top.html#737',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>connectivityManager = (ConnectivityManager) mContext.getSystemService (Context.CONNECTIVITY_SERVICE);
        if(Objects.requireNonNull(connectivityManager).getActiveNetworkInfo() != null &amp;&amp; Objects.requireNonNull(connectivityManager.getActiveNetworkInfo()).isAvailable()
                &amp;&amp; connectivityManager</B></FONT>.getActiveNetworkInfo().isConnected()) {
<A NAME="372"></A>            String strAnh = FragmentKinhNghiemView.arrayListKinhNghiem.get(position).getStrAnh();
            classPublic = new ClassPublic();
            if (!strAnh.isEmpty()) {
                <FONT color="#ada96e"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#372',2,'match0-top.html#372',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>classPublic.downloadImage(&quot;http://hoclamaimai.com/&quot; + strAnh, holder.imageView); //Load ảnh đại diện
            }
            else {
                holder.imageView.setImageResource(R.drawable.img_avatar);
            }
        }
        else {
<A NAME="581"></A>            Log.e(&quot;TAG&quot;,&quot;LỖI! Kết nối đến hosting.&quot;);
        }
        holder.textHoTen.setText(FragmentKinhNghiemView</B></FONT>.arrayListKinhNghiem.get(position).getStrHoTen());
        <FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#581',2,'match0-top.html#581',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>holder.textDiaChi.setText(FragmentKinhNghiemView.arrayListKinhNghiem.get(position).getStrDiaChi());
<A NAME="79"></A>        holder.textTenKinhNghiem.setText(FragmentKinhNghiemView.arrayListKinhNghiem.get(position).getStrTenKinhNghiem());
        holder.textNgayGui.setText(FragmentKinhNghiemView.arrayListKinhNghiem.get(position).getStrNgayGui());
        holder</B></FONT>.btnVolumeUp.setOnClickListener(v -&gt; {
            String <FONT color="#00ff00"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#79',2,'match0-top.html#79',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>strTenKinhNghiem = arraylist.get(position).getStrTenKinhNghiem();
            String strGiaiPhap = arraylist.get(position).getStrGiaiPhap();
            String strDelay = &quot;,&quot;</B></FONT>;
        if (!arraylist.get(position).getStrGiaiPhap().equals(&quot;&quot;)||!arraylist.get(position).getStrTenKinhNghiem().equals(&quot;&quot;)) {
            tts = classPublic.DocVanBan((Activity)mContext, strTenKinhNghiem.concat(strDelay).concat(strGiaiPhap)); //Đọc thông tin
        }
        });
        holder.btnVolumeOff.setOnClickListener(v-&gt;tts.stop());//Tắt đọc văn bản
        String [] strText = FragmentKinhNghiemView.arrayListKinhNghiem.get(position).getStrGiaiPhap().split(&quot;\\.&quot;);
        holder.textGiaiPhap.setText(Html.fromHtml(strText[0] + &quot;... &lt;font color='blue'&gt;&lt;b&gt;Xem thêm &gt;&gt;&lt;/b&gt;&lt;/font&gt;&quot;),TextView.BufferType.SPANNABLE);
<A NAME="209"></A>        holder.textGiaiPhap.setOnClickListener(v -&gt;
            holder.textGiaiPhap.setText( FragmentKinhNghiemView.arrayListKinhNghiem.get(position).getStrGiaiPhap()));
        return convertView;
    <FONT color="#41a317"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#209',2,'match0-top.html#209',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
    public void filter(String charText) {
        charText = charText.toLowerCase(Locale.getDefault());
        FragmentKinhNghiemView.arrayListKinhNghiem.clear();
        if (charText.length() == 0) {
            FragmentKinhNghiemView.arrayListKinhNghiem.addAll(arraylist);
        } else {
            for (ClassKinhNghiemView wp : arraylist) {
                if (wp.getStrHoTen().toLowerCase(Locale.getDefault()).contains(charText)||wp.getStrTenKinhNghiem().toLowerCase(Locale.getDefault()).contains(charText)) {
                    FragmentKinhNghiemView.arrayListKinhNghiem.add(wp);
                }
            }
        }
        notifyDataSetChanged();
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>Menu\ClassMenu.java</CENTER></H3><HR>
<PRE>
<A NAME="240"></A><FONT color="#bce954"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#240',2,'match0-top.html#240',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.Menu;

public class ClassMenu {
    private final String strAnh, strMenu;
    public ClassMenu(String strAnh, String strMenu){
        this.strAnh = strAnh;
        this.strMenu = strMenu;
    }

    public String getStrAnh() {
        return strAnh;
    }

    public String getStrMenu() {
        return strMenu;
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>Menu\FragmentMenu.java</CENTER></H3><HR>
<PRE>
package com.example.basa.Menu;
<A NAME="27"></A>
import android.annotation.SuppressLint;
import android.app.AlertDialog;
<FONT color="#e77471"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#27',2,'match0-top.html#27',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.content.Context;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ListView;
import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;

import com.example.basa.AoNuoi.FragmentTimKiemAoNuoi;
import com.example.basa.Benh.FragmentBenhEdit;
import com.example.basa.AoNuoi.FragmentQuanLiAoNuoi;
import com.example.basa.ChamSoc.FragmentChamSocEdit;
import com.example.basa.CtyCheBien.FragmentSanPhamEdit;
import com.example.basa.CtyThucAn.FragmentThucAnEdit;
import com.example.basa.KinhNghiem.FragmentDuyetKinhNghiem;
import com.example.basa.QuanTriTinh.FragmentCapTaiKhoan;
import com.example.basa.TaiKhoan.FragmentDanhSachTaiKhoan;
import com.example.basa.ThamKhao.FragmentThamKhaoEdit;
import com.example.basa.User.FragmentDoiMatKhau;
import com.example.basa.R;
import com.example.basa.Class.ClassPublic;
import com.example.basa.CtyThuY.FragmentThuocEdit;
import com.example.basa.TinTuc.FragmentTinTucEdit;
import com.example.basa.DiaChi.FragmentHuyen;
import com.example.basa.DiaChi.FragmentTinh;
import com.example.basa.DiaChi.FragmentXa;
import java.util.ArrayList;
import java.util.Objects;
import static com.example.basa.Home.MainActivity.MyPREFERENCES;
import static com.example.basa.Home.MainActivity.User;

public class FragmentMenu extends Fragment {

    //Phần khai báo
    View view;
<A NAME="127"></A>    ListView listView;
    ClassPublic classPublic = new ClassPublic();
    String strTaiKhoan, strCoQuan, strLoaiTaiKhoan</B></FONT>;
    public static ArrayList&lt;ClassMenu&gt; <FONT color="#571b7e"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#127',2,'match0-top.html#127',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>arrayListListMenu;
    ListViewMenu adapterListMenu;
    FragmentManager fragmentManager; //Tạo Fragment
    FragmentTransaction fragmentTransaction;
    SharedPreferences sharedpreferences; //Nhớ tài khoản
    SharedPreferences.Editor editor;

    @SuppressLint({&quot;UseRequireInsteadOfGet&quot;, &quot;NewApi&quot;})
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);
        view = inflater.inflate(R.layout.fragment_menu, container, false);
        fragmentManager = Objects.requireNonNull(getActivity()).getSupportFragmentManager();
        sharedpreferences = Objects.requireNonNull(this.getActivity()).getSharedPreferences(MyPREFERENCES, Context.MODE_PRIVATE); //Nhớ tài khoản
        editor = sharedpreferences.edit();
        editor.apply();
<A NAME="213"></A>        strTaiKhoan = sharedpreferences</B></FONT>.getString(User,&quot;&quot;);
        strLoaiTaiKhoan = classPublic.layLoaiTaiKhoan(strTaiKhoan,getActivity());
        strCoQuan = classPublic.layCoQuan(strTaiKhoan,getActivity());
        <FONT color="#152dc6"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#213',2,'match0-top.html#213',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>layoutDoiTuong(); //Ánh xạ các đối tượng trên frame_listmenu
        showMenu(); //Hiển thị các menu list
        return view;
    }
    @SuppressLint({&quot;NewApi&quot;, &quot;UseRequireInsteadOfGet&quot;})
    private void layoutDoiTuong() {
        listView = view.findViewById(R.id.listView);
        clickListView();
    }
    private void clickListView() {
        listView</B></FONT>.setOnItemClickListener((parent, view, position, id) -&gt; {
        switch (arrayListListMenu.get(position).getStrMenu()){
            case &quot;Quản lí tin tức nông vụ&quot;:
                fragmentTransaction = fragmentManager.beginTransaction();
                fragmentTransaction.replace(R.id.fragment_main, new FragmentTinTucEdit());
                fragmentTransaction.commit();
                break;
            case &quot;Duyệt kinh nghiệm&quot;:
                fragmentTransaction = fragmentManager.beginTransaction();
                fragmentTransaction.replace(R.id.fragment_main, new FragmentDuyetKinhNghiem());
                fragmentTransaction.commit();
                break;
            case &quot;Quản lí bệnh ở thủy sản&quot;:
                fragmentTransaction = fragmentManager.beginTransaction();
<A NAME="214"></A>                fragmentTransaction.replace(R.id.fragment_main, new FragmentBenhEdit());
                fragmentTransaction.commit();
                break;
            case &quot;Quản lí thuốc đặc trị&quot;<FONT color="#347235"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#214',2,'match0-top.html#214',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>:
                fragmentTransaction = fragmentManager.beginTransaction();
                fragmentTransaction.replace(R.id.fragment_main, new FragmentThuocEdit());
                fragmentTransaction.commit();
                break;
            case &quot;Quản lí kỹ thuật chăm sóc&quot;:
                fragmentTransaction = fragmentManager.beginTransaction();
                fragmentTransaction.replace(R.id.fragment_main, new FragmentChamSocEdit());
                fragmentTransaction.commit();
                break;
            case &quot;Quản lí thức ăn&quot;:
                fragmentTransaction = fragmentManager.beginTransaction();
                fragmentTransaction.replace(R.id.fragment_main, new FragmentThucAnEdit());
                fragmentTransaction.commit();
                break;
            case &quot;Quản lí sản phẩm&quot;:
                fragmentTransaction = fragmentManager.beginTransaction();
                fragmentTransaction.replace(R.id.fragment_main, new FragmentSanPhamEdit());
                fragmentTransaction.commit();
                break;
            case &quot;Quản lí ao nuôi&quot;:
                fragmentTransaction = fragmentManager.beginTransaction();
                fragmentTransaction.replace(R.id.fragment_main, new FragmentQuanLiAoNuoi());
                fragmentTransaction.commit();
                break;
            case &quot;Quản lí kiến thức tham khảo&quot;:
                fragmentTransaction = fragmentManager.beginTransaction();
                fragmentTransaction.replace(R.id.fragment_main, new FragmentThamKhaoEdit());
                fragmentTransaction.commit();
                break;
            case &quot;Cấp tài khoản quản trị tỉnh&quot;:
                fragmentTransaction = fragmentManager.beginTransaction();
                fragmentTransaction.replace(R.id.fragment_main, new FragmentCapTaiKhoan());
                fragmentTransaction.commit();
                break;
            case &quot;Quản lí tài khoản&quot;:
                fragmentTransaction = fragmentManager.beginTransaction();
                fragmentTransaction.replace(R.id.fragment_main, new FragmentDanhSachTaiKhoan());
                fragmentTransaction.commit();
                break;
            case &quot;Tìm kiếm ao nuôi&quot;:
                fragmentTransaction = fragmentManager.beginTransaction();
                fragmentTransaction.replace(R.id.fragment_main, new FragmentTimKiemAoNuoi());
                fragmentTransaction.commit();
                break;
            case &quot;Danh sách tỉnh/thành phố&quot;:
                fragmentTransaction = fragmentManager.beginTransaction();
                fragmentTransaction.replace(R.id.fragment_main, new FragmentTinh());
                fragmentTransaction.commit();
                break;
            case &quot;Danh sách quận/huyện&quot;:
                fragmentTransaction = fragmentManager.beginTransaction();
                fragmentTransaction.replace(R.id.fragment_main, new FragmentHuyen());
                fragmentTransaction.commit();
                break;
            case &quot;Danh sách phường/xã&quot;:
                fragmentTransaction = fragmentManager.beginTransaction();
                fragmentTransaction.replace(R.id.fragment_main, new FragmentXa());
                fragmentTransaction.commit();
                break;
            case &quot;Đổi mật khẩu&quot;:
                fragmentTransaction = fragmentManager.beginTransaction();
                fragmentTransaction.replace(R.id.fragment_main, new FragmentDoiMatKhau());
                fragmentTransaction.commit();
                break;
            case &quot;Đăng xuất&quot;:
                //Hiện hộp thoại thông báo đăng xuất
                AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
                builder.setTitle(&quot;THÔNG BÁO&quot;);
                builder.setMessage(&quot;Bạn có muốn đăng xuất không?&quot;);
                builder.setIcon(R.drawable.ic_thongbao);
                builder</B></FONT>.setCancelable(false);
                builder.setPositiveButton(&quot;Đồng ý&quot;, (dialogInterface, i) -&gt; {
                editor.clear(); //Xóa tài khoản đã nhớ
                editor.commit();//Lưu thay đổi
                    System.exit(0);
                });
                builder.setNegativeButton(&quot;Hủy bỏ&quot;, (dialogInterface, i) -&gt; dialogInterface.dismiss());
                AlertDialog alertDialog = builder.create();
                alertDialog.show();
<A NAME="215"></A>                break;
        }
        });
    <FONT color="#f87a17"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#215',2,'match0-top.html#215',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
    private void showMenu() {
        arrayListListMenu = new ArrayList&lt;&gt;();
        arrayListListMenu.clear();
        switch (strLoaiTaiKhoan){
            case &quot;1&quot;:
                //Quản lí tài khoản
                arrayListListMenu.add(new ClassMenu(&quot;ic_quanlitaikhoan_b32&quot;, &quot;Quản lí tài khoản&quot;));
                //Quản lí tài khoản
                arrayListListMenu.add(new ClassMenu(&quot;ic_person_add_b24&quot;, &quot;Cấp tài khoản quản trị tỉnh&quot;));
                //Danh sách tỉnh
                arrayListListMenu.add(new ClassMenu(&quot;ic_list_b32&quot;, &quot;Danh sách tỉnh/thành phố&quot;));
                //Danh sách huyện
                arrayListListMenu.add(new ClassMenu(&quot;ic_list_b32&quot;, &quot;Danh sách quận/huyện&quot;));
                //Danh sách xã
<A NAME="216"></A>                arrayListListMenu.add(new ClassMenu</B></FONT>(&quot;ic_list_b32&quot;, &quot;Danh sách phường/xã&quot;));
            case &quot;7&quot;:
                //Quản lí bệnh
                <FONT color="#c57717"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#216',2,'match0-top.html#216',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>arrayListListMenu.add(new ClassMenu(&quot;ic_thuoc_b32&quot;, &quot;Quản lí bệnh ở thủy sản&quot;));
                //Quản lí kĩ thuật chăm sóc
                arrayListListMenu.add(new ClassMenu(&quot;ic_kythuat_black_32&quot;, &quot;Quản lí kỹ thuật chăm sóc&quot;));
                //Quản lí kiến thức tham khảo
                arrayListListMenu.add(new ClassMenu(&quot;ic_sodo&quot;, &quot;Quản lí kiến thức tham khảo&quot;));
                break;
            case &quot;2&quot;:
                //Quản lí ao nuôi
                arrayListListMenu.add(new ClassMenu(&quot;ic_ctta_black&quot;, &quot;Quản lí ao nuôi&quot;));
                break;
            case &quot;3&quot;:
                //Quản lí thức ăn
                arrayListListMenu.add(new ClassMenu</B></FONT>(&quot;ic_ao_nuoi_black&quot;, &quot;Quản lí thức ăn&quot;));
                break;
            case &quot;4&quot;:
                //Quản lí sản phẩm
                arrayListListMenu.add(new ClassMenu(&quot;ic_ctcbts_black&quot;, &quot;Quản lí sản phẩm&quot;));
                break;
            case &quot;5&quot;:
                arrayListListMenu.add(new ClassMenu(&quot;ic_tintuc_b32&quot;, &quot;Quản lí tin tức nông vụ&quot;));
                if (strCoQuan.equals(&quot;1&quot;)){
                    arrayListListMenu.add(new ClassMenu(&quot;ic_duyet_black&quot;, &quot;Duyệt kinh nghiệm&quot;));
                }
<A NAME="217"></A>                break;
            case &quot;6&quot;:
                //Quản lí thuốc đặc trị
                <FONT color="#c22817"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#217',2,'match0-top.html#217',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>arrayListListMenu.add(new ClassMenu(&quot;ic_thuoc_b32&quot;, &quot;Quản lí thuốc đặc trị&quot;));
                break;
        }
        //Đổi mật khẩu
        arrayListListMenu.add(new ClassMenu(&quot;ic_doimatkhau&quot;, &quot;Đổi mật khẩu&quot;));
        //Đăng xuất
        arrayListListMenu.add(new ClassMenu(&quot;ic_logout_white&quot;, &quot;Đăng xuất&quot;));
        adapterListMenu = new ListViewMenu(getContext());
        listView.setAdapter(adapterListMenu);
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>Menu\ListViewMenu.java</CENTER></H3><HR>
<PRE>
<A NAME="218"></A><FONT color="#e57ded"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#218',2,'match0-top.html#218',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.Menu;

import android.annotation.SuppressLint;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;
import com.example.basa.R;
import java.util.ArrayList;

public class ListViewMenu extends BaseAdapter {
    private final Context mContext;
    private final LayoutInflater inflater;
    private final ArrayList&lt;ClassMenu&gt; arraylist;
    public ListViewMenu(Context context) {
        mContext = context;
        inflater = LayoutInflater.from(mContext);
        this.arraylist = new ArrayList&lt;&gt;();
        this.arraylist.addAll(FragmentMenu.arrayListListMenu);
    }
    public static class ViewHolder {
        ImageView imageMenu;
        TextView textMenu;
    }
    @Override
    public int getCount() {
        return FragmentMenu.arrayListListMenu.size();
    }

    @Override
    public Object getItem(int position) {
        return FragmentMenu.arrayListListMenu.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @SuppressLint(&quot;InflateParams&quot;)
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.listview_menu, null);
            holder.imageMenu = convertView.findViewById(R.id.imageMenu);
            holder.textMenu = convertView.findViewById(R.id.textMenu);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        // Set the results into TextViews
        holder.imageMenu.setImageResource(convertView.getResources().getIdentifier(&quot;@drawable/&quot;+ FragmentMenu.arrayListListMenu.get(position).getStrAnh(),&quot;drawable&quot;,parent.getContext().getPackageName()));
        holder.textMenu.setText(FragmentMenu.arrayListListMenu.get(position).getStrMenu());
        return convertView;
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>QuanTriTinh\FragmentCapTaiKhoan.java</CENTER></H3><HR>
<PRE>
package com.example.basa.QuanTriTinh;

import android.annotation.SuppressLint;
import android.os.Bundle;

import androidx.fragment.app.Fragment;
<A NAME="94"></A>import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;

<FONT color="#ff00ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#94',2,'match0-top.html#94',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.text.InputType;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.Spinner;

import com.example.basa.Class.ClassConnect;
import com.example.basa.Class.ClassPublic;
import com.example.basa.Menu.FragmentMenu;
import com.example.basa.R;
import com.example.basa.User.SignActivity;
import com.google.android.material.textfield.TextInputLayout;

import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.Objects;


public class FragmentCapTaiKhoan extends Fragment {
    View view;
    private TextInputLayout inpTaiKhoan, inpMatKhau, inpHoTen, inpSoDienThoai, inpEmail;
    private Spinner cmdTinh, cmdHuyen, cmdXa;
    private String strMaTinh, strMaHuyen, strMaXa;
    private Button btnDangKy;
<A NAME="182"></A>    private ImageButton btnQuayLai;
    private EditText editTaiKhoan, editMatKhau, editHoTen, editSoDienThoai</B></FONT>, editEmail;
    ClassPublic classPublic = new ClassPublic();
    ClassConnect <FONT color="#bce954"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#182',2,'match0-top.html#182',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>classConnect;
    FragmentTransaction fragmentTransaction;
    FragmentManager fragmentManager;
    //Khai báo danh sách tỉnh
    private final ArrayList&lt;String&gt; listMaTinh = new ArrayList&lt;&gt;();
    private final ArrayList&lt;String&gt; listTenTinh = new ArrayList&lt;&gt;();
    //Khai báo danh sách huyện
    private final ArrayList&lt;String&gt; listMaHuyen = new ArrayList&lt;&gt;();
    private final ArrayList&lt;String&gt; listTenHuyen = new ArrayList&lt;&gt;();
    //Khai báo danh sách xã
    private final ArrayList&lt;String&gt; listMaXa = new ArrayList&lt;&gt;();
    private final ArrayList&lt;String&gt; listTenXa = new ArrayList</B></FONT>&lt;&gt;();
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
<A NAME="223"></A>                             Bundle savedInstanceState) {
       super.onCreateView(inflater, container, savedInstanceState);
       view = inflater.inflate(R.layout.fragment_cap_tai_khoan, container, false);
       fragmentManager = <FONT color="#8e35ef"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#223',2,'match0-top.html#223',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>requireActivity().getSupportFragmentManager();
       layoutAnhXa();
       return view;
    }

    private void layoutAnhXa() {
        editTaiKhoan = view.findViewById(R.id.editTaiKhoan);
        editMatKhau = view.findViewById(R.id.editMatKhau);
        editHoTen = view.findViewById(R.id.editHoTen);
        editSoDienThoai = view.findViewById(R.id.editSoDienThoai);
        editEmail = view.findViewById(R.id.editEmail);
        cmdTinh = view.findViewById(R.id.cmdTinh);
        cmdHuyen = view</B></FONT>.findViewById(R.id.cmdHuyen);
        cmdXa = view.findViewById(R.id.cmdXa);
        btnQuayLai = view.findViewById(R.id.btnQuayLai);
        btnDangKy = view.findViewById(R.id.btnDangKy);
        inpTaiKhoan = view.findViewById(R.id.inpTaiKhoan);
        inpMatKhau = view.findViewById(R.id.inpMatKhau);
        inpEmail = view.findViewById(R.id.inpEmail);
        inpHoTen = view.findViewById(R.id.inpHoTen);
        inpSoDienThoai = view.findViewById(R.id.inpSoDienThoai);
        loadTinh(); //Load tỉnh
<A NAME="244"></A>        clickButton(); //Click button
    }

    private <FONT color="#3b9c9c"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#244',2,'match0-top.html#244',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>void loadTinh() {
        //Danh sách tỉnh
        listMaTinh.clear(); // Xóa danh sách tỉnh
        listTenTinh.clear();
        try{
            classConnect = new ClassConnect(); //Mở kết nối SQL
            String sqlTinh = &quot;select MaTinh, TenTinh from TB_Tinh&quot;;//Câu lệnh lấy ra từ sql để gán lên cmd
            ResultSet resultSetTinh = classConnect.selectData(getActivity(), sqlTinh);
            if (resultSetTinh != null){
                while (resultSetTinh.next()){
                    listMaTinh.add(resultSetTinh.getString(&quot;MaTinh&quot;));
                    listTenTinh.add(resultSetTinh.getString(&quot;TenTinh&quot;));
                }
                ArrayAdapter&lt;String&gt; dataTinh = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenTinh);
<A NAME="98"></A>                dataTinh.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
                cmdTinh</B></FONT>.setAdapter(dataTinh);
            }
            <FONT color="#347235"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#98',2,'match0-top.html#98',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
        }
        if (listMaTinh.isEmpty()){ //Nếu chưa nhập tỉnh thì không hiển thị huyện
            listMaHuyen.clear(); // Xóa danh sách huyện
            listTenHuyen.clear();
            ArrayAdapter&lt;String&gt; dataHuyen = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenHuyen);
            dataHuyen.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
            cmdHuyen.setAdapter(dataHuyen);
        }
        cmdTinh.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaTinh.isEmpty()) {
                    strMaTinh = listMaTinh.get(position);
                    loadHuyen(strMaTinh); //Load huyện theo tỉnh
                }
            }

            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }
    @SuppressLint(&quot;NewApi&quot;)
    private void loadHuyen(String maTinh){
        //Danh sách huyện
        listMaHuyen.clear(); // Xóa danh sách huyện
        listTenHuyen.clear();
<A NAME="638"></A>        try {
            classConnect = new ClassConnect(); //Mở kết nối SQL
            String sqlHuyen = &quot;select MaHuyen, TenHuyen from TB_Huyen where MaTinh = '&quot;+maTinh+&quot;'&quot;;
            ResultSet resultSetHuyen = classConnect</B></FONT>.selectData(<FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#638',2,'match0-top.html#638',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>getActivity(), sqlHuyen);
            if (resultSetHuyen != null){
                while (resultSetHuyen.next()){
<A NAME="488"></A>                    listMaHuyen.add(resultSetHuyen.getString(&quot;MaHuyen&quot;));
                    listTenHuyen.add(resultSetHuyen.getString(&quot;TenHuyen&quot;));
                }
                ArrayAdapter&lt;String&gt; dataHuyen = new ArrayAdapter</B></FONT>&lt;&gt;(<FONT color="#ada96e"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#488',2,'match0-top.html#488',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>getActivity(), android.R.layout.simple_spinner_item,listTenHuyen);
                dataHuyen.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
                cmdHuyen.setAdapter(dataHuyen);
            }
            else {
                Log.e(&quot;TAG&quot;, &quot;Chưa cập nhật danh sách huyện&quot;);
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
        }
        if (listMaHuyen.isEmpty()){ //Nếu chưa nhập huyện thì không hiển thị xã
            listMaXa.clear(); // Xóa danh sách xã
            listTenXa.clear();
            ArrayAdapter&lt;String&gt; dataXa = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenXa);
<A NAME="267"></A>            dataXa.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
            cmdXa</B></FONT>.setAdapter(dataXa);
        }
        <FONT color="#41a317"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#267',2,'match0-top.html#267',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>cmdHuyen.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaHuyen.isEmpty()) {
                    strMaHuyen = listMaHuyen.get(position);
                    loadXa(strMaHuyen); //Load xã theo huyện
                }
            }

            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }
    @SuppressLint(&quot;NewApi&quot;)
    private void loadXa(String maHuyen){
        //Danh sách huyện
        listMaXa.clear(); // Xóa danh sách huyện
        listTenXa.clear();
        try {
            classConnect = new ClassConnect(); //Mở kết nối SQL
            String sqlXa = &quot;select MaXa, TenXa from TB_Xa where MaHuyen = '&quot;+maHuyen+&quot;'&quot;;
            ResultSet resultSetXa = classConnect.selectData(getActivity(), sqlXa);
            if (resultSetXa != null){
                while (resultSetXa.next()){
                    listMaXa.add(resultSetXa.getString(&quot;MaXa&quot;));
                    listTenXa.add(resultSetXa.getString(&quot;TenXa&quot;));
                }
                ArrayAdapter&lt;String&gt; dataXa = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenXa);
                dataXa.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
<A NAME="234"></A>                cmdXa</B></FONT>.setAdapter(dataXa);
            }
            else {
                <FONT color="#77bfc7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#234',2,'match0-top.html#234',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>Log.e(&quot;TAG&quot;, &quot;Chưa cập nhật danh sách huyện&quot;);
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
        }
        cmdXa.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaXa.isEmpty()) {
                    strMaXa = listMaXa.get(position);
                }
            }

            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }
    private void clickButton(){
<A NAME="102"></A>        btnQuayLai</B></FONT>.setOnClickListener(v -&gt; {
            fragmentTransaction = fragmentManager.beginTransaction();
            fragmentTransaction.replace(R.id.fragment_main, new FragmentMenu());
            <FONT color="#e57ded"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#102',2,'match0-top.html#102',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>fragmentTransaction.commit();
        });
        btnDangKy.setOnClickListener(v -&gt; {
            if (editTaiKhoan.getText().length() &gt;= 6 ){ //Kiểm tra tài khoản rỗng
                if (editMatKhau.getText().length() &gt;= 8){ //Mật khẩu có ít nhất 8 kí tự
                    if (editHoTen</B></FONT>.getText().length() != 0){ //Kiểm tra họ tên rỗng
                        if (!listMaTinh.isEmpty()){ //Kiểm tra tỉnh rỗng
                            if (!listMaHuyen.isEmpty()){ //Kiểm tra huyện rỗng
                                if (!listMaXa.isEmpty()){ //Kiểm tra xã rỗng
                                    if (editSoDienThoai.length() &gt;= 10){ //Kiểm tra số điện thoại rỗng
                                        String strMatKhau = editMatKhau.getText().toString();
<A NAME="21"></A>                                        if(strMatKhau.length() &gt;= 8){//So sánh mật khẩu xác nhận
                                            try {
                                                classConnect = new ClassConnect(); //Mở kết nối SQL
                                                String <FONT color="#00ff00"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#21',2,'match0-top.html#21',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>sqlTaiKhoan = &quot;select TaiKhoan from TB_NguoiDung where &quot; +
                                                        &quot;TaiKhoan = '&quot;+editTaiKhoan.getText()+&quot;'&quot;;//Câu lệnh để nhập dữ liệu lên sql
                                                ResultSet resultSetTaiKhoan = classConnect.selectData(getActivity(),sqlTaiKhoan);
                                                if (resultSetTaiKhoan != null &amp;&amp; resultSetTaiKhoan</B></FONT>.next()){
                                                    classPublic.ThongBao(getActivity(),&quot;Tài khoản này đã có người sử dụng. Vui lòng nhập tài khoản khác&quot;);
                                                }
                                                else {
                                                    String sqlDangKy = &quot;insert into TB_NguoiDung(TaiKhoan, MatKhau, LoaiTaiKhoan, HoTen, MaXa, MaHuyen, MaTinh, SoDienThoai, Email, TrangThai) &quot; +
                                                            &quot;values('&quot; + editTaiKhoan.getText() + &quot;', '&quot; + editMatKhau.getText() + &quot;', 7, N'&quot; + editHoTen.getText() + &quot;',&quot; +
                                                            &quot; '&quot; + strMaXa + &quot;', '&quot; + strMaHuyen + &quot;', '&quot; + strMaTinh + &quot;', '&quot; + editSoDienThoai.getText() + &quot;', '&quot; + editEmail.getText() + &quot;', 1)&quot;;
                                                    if (classConnect.updateData(getActivity(), sqlDangKy) == 1) {
<A NAME="124"></A>                                                        classPublic.ThongBao(getActivity(), &quot;Thông báo! Cấp tài khoản thành công&quot;);
                                                        fragmentTransaction = fragmentManager.beginTransaction();
                                                        fragmentTransaction.replace(R.id.fragment_main, new FragmentCapTaiKhoan());
                                                        <FONT color="#bce954"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#124',2,'match0-top.html#124',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>fragmentTransaction.commit();
                                                    }
                                                    else {
                                                        classPublic.ThongBao(getActivity(),&quot;Thông báo! Cấp tài khoản không thành công&quot;);
                                                    }
                                                }
                                                classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
                                            }catch (Exception e){
                                                Log.e(&quot;TAG&quot;, Objects</B></FONT>.requireNonNull(e.getMessage()));
                                            }
                                        }
                                        else {
                                            inpMatKhau.setError(&quot;Mật khẩu có ít nhất 8 kí tự&quot;);
                                        }
                                    }
                                    else {
<A NAME="145"></A>                                        inpSoDienThoai.setError(&quot;Số điện thoại có ít nhất 10 chữ số&quot;);
                                    }
                                }
                                <FONT color="#faafba"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#145',2,'match0-top.html#145',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>else {
                                    //Thông báo bằng văn bản
                                    classPublic.ThongBao(getActivity(),&quot;Vui lòng chọn xã&quot;);
                                }
                            }
                            else {
                                //Thông báo bằng văn bản
                                classPublic.ThongBao(getActivity(),&quot;Vui lòng chọn huyện&quot;);
                            }
                        }
                        else {
                            //Thông báo bằng văn bản
                            classPublic.ThongBao(getActivity(),&quot;Vui lòng chọn tỉnh&quot;);
                        }</B></FONT>
                    }
                    else {
                        inpHoTen.setError(&quot;Vui lòng nhập họ tên&quot;);
                    }
                }
                else {
                    inpMatKhau.setError(&quot;Mật khẩu có ít nhất 8 kí tự&quot;);
                }
            }
            else {
                inpTaiKhoan.setError(&quot;Tài khoản có ít nhất 6 kí tự&quot;);
            }
        });
    }
}
</PRE>
<HR>
<H3><CENTER>TaiKhoan\ClassDanhSachTaiKhoan.java</CENTER></H3><HR>
<PRE>
package com.example.basa.TaiKhoan;

public class ClassDanhSachTaiKhoan {
    private final Integer intSTT;
    private final String strTaiKhoan, strHoTen;
    private final Boolean booleanTrangThai;
    public ClassDanhSachTaiKhoan(Integer intSTT, String strTaiKhoan,
<A NAME="598"></A>                                 String strHoTen, Boolean booleanTrangThai){
        this.intSTT = intSTT;
        this.strTaiKhoan = strTaiKhoan;
        <FONT color="#f62817"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#598',2,'match0-top.html#598',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>this.strHoTen = strHoTen;
        this.booleanTrangThai = booleanTrangThai;
    }

    public Integer getIntSTT() {
        return intSTT;
    }

    public String getStrTaiKhoan() {
        return strTaiKhoan;
    }</B></FONT>

    public String getStrHoTen() {
        return strHoTen;
    }

    public Boolean getBooleanTrangThai() {
        return booleanTrangThai;
    }
}
</PRE>
<HR>
<H3><CENTER>TaiKhoan\FragmentDanhSachTaiKhoan.java</CENTER></H3><HR>
<PRE>
<A NAME="552"></A><FONT color="#f9966b"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#552',2,'match0-top.html#552',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.TaiKhoan;

import android.annotation.SuppressLint;
import android.content.Context;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AbsListView;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ImageButton;
import android.widget.ListView;
import android.widget.SearchView;
import android.widget.Spinner;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;

import com.example.basa.Home.FragmentHome;
import com.example.basa.Menu.FragmentMenu;
import com.example.basa.R;
import com.example.basa.Class.ClassConnect;
import com.example.basa.Class.ClassPublic;

import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.Objects;

import static com.example.basa.Home.MainActivity.MyPREFERENCES;
import static com.example.basa.Home.MainActivity.User;

public class FragmentDanhSachTaiKhoan extends Fragment implements SearchView.OnQueryTextListener{
<A NAME="712"></A>    //Khai báo
    String strTaiKhoan, ganMaTinh, strLoai</B></FONT>;
    private View view;
    private SearchView <FONT color="#3090c7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#712',2,'match0-top.html#712',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>searchView;
    private ListView listView;
    private Spinner cmdLoaiTaiKhoan, cmdTrangThai, cmdTinh;
    public static String strLoaiTaiKhoan;
    private String strGanLoaiTaiKhoan, strMaTrangThai, strMaTinh;
    private ImageButton btnQuayLai;
    private Integer intSo;
    public static ArrayList&lt;ClassDanhSachTaiKhoan&gt; arrayListDanhSachTaiKhoan;
    private ListViewDanhSachTaiKhoan adapterDanhSachTaiKhoan;
<A NAME="427"></A>    private ClassConnect classConnect;
    private final ClassPublic classPublic</B></FONT> = new ClassPublic();
    //Khai báo danh sách loại tài khoản
    private final ArrayList&lt;<FONT color="#00ff00"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#427',2,'match0-top.html#427',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>String&gt; listMaLoaiTaiKhoan = new ArrayList&lt;&gt;();
    private final ArrayList&lt;String&gt; listTenLoaiTaiKhoan = new ArrayList&lt;&gt;();
    private final ArrayList&lt;String&gt; listMaTrangThai = new ArrayList&lt;&gt;();
    private final ArrayList&lt;String&gt; listTenTrangThai = new ArrayList&lt;&gt;();
    private final ArrayList&lt;String&gt; listMaTinh = new ArrayList&lt;&gt;();
    private final ArrayList&lt;String&gt; listTenTinh = new ArrayList&lt;&gt;();
    public static FragmentManager fragmentManager; //Tạo Fragment
<A NAME="222"></A>    public static FragmentTransaction fragmentTransaction;
    SharedPreferences sharedpreferences; //Nhớ tài khoản
    SharedPreferences.Editor editor</B></FONT>;
    <FONT color="#c57726"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#222',2,'match0-top.html#222',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>@SuppressLint(&quot;NewApi&quot;)
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
<A NAME="576"></A>        super.onCreateView(inflater, container, savedInstanceState);
        view = inflater.inflate(R.layout.fragment_danh_sach_tai_khoan, container, false);
        sharedpreferences = this</B></FONT>.requireActivity().getSharedPreferences(MyPREFERENCES, Context.MODE_PRIVATE);
        editor = <FONT color="#4e8975"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#576',2,'match0-top.html#576',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>sharedpreferences.edit();
        editor.apply();
        fragmentManager = requireActivity().getSupportFragmentManager();
        Bundle bundle = this.getArguments();
        if (bundle != null){
            strGanLoaiTaiKhoan = bundle.getString(&quot;LoaiTaiKhoan&quot;);
        }
        else {
<A NAME="471"></A>            strGanLoaiTaiKhoan = &quot;&quot;;
        }
        strTaiKhoan = sharedpreferences</B></FONT>.getString(User,&quot;&quot;);
        strLoai = classPublic.layLoaiTaiKhoan(strTaiKhoan, <FONT color="#c58917"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#471',2,'match0-top.html#471',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>getActivity());//Lấy loại tài khoản d
        layTinh(strTaiKhoan);
        layoutAnhXa(); //Ánh xạ các đối tượng trên layout
        return view;
    }
    private void layTinh(String taikhoan) {
        try {
            classConnect = new ClassConnect();
            String sqlTinhHuyenXa = &quot;select MaTinh from TB_NguoiDung where TaiKhoan = '&quot;+taikhoan+&quot;'&quot;;
            ResultSet resultSetTinhHuyenXa = classConnect.selectData(getActivity</B></FONT>(), sqlTinhHuyenXa);
            if (resultSetTinhHuyenXa != null &amp;&amp; resultSetTinhHuyenXa.next()){
                ganMaTinh = resultSetTinhHuyenXa.getString(&quot;MaTinh&quot;);
            }
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, e.getMessage());
<A NAME="623"></A>        }
    }
    @SuppressLint(&quot;NewApi&quot;)
    private <FONT color="#c22817"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#623',2,'match0-top.html#623',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>void layoutAnhXa() {
        listView = view.findViewById(R.id.listView);
        searchView = view.findViewById(R.id.searchTen);
        cmdLoaiTaiKhoan = view.findViewById(R.id.cmdLoaiTaiKhoan);
<A NAME="377"></A>        cmdTrangThai = view.findViewById(R.id.cmdTrangThai);
        cmdTinh</B></FONT> = view.findViewById(R.id.cmdTinh);
        //Nhấn quay lại
        btnQuayLai = <FONT color="#faafba"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#377',2,'match0-top.html#377',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>view.findViewById(R.id.btnQuayLai);
        btnQuayLai.setOnClickListener(view -&gt; {
            fragmentTransaction = fragmentManager.beginTransaction();
            fragmentTransaction.replace(R.id.fragment_main, new FragmentMenu());
            fragmentTransaction.commit();
        });
<A NAME="227"></A>        loadTinh();
        loadLoaiTaiKhoan();
        loadTrangThai</B></FONT>();
    <FONT color="#f88158"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#227',2,'match0-top.html#227',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}

    private void loadTinh() {
        //Danh sách tỉnh
        listMaTinh.clear(); // Xóa danh sách tỉnh
        listTenTinh.clear();
        try{
            classConnect = new ClassConnect(); //Mở kết nối SQL
            String sqlTinh = &quot;select MaTinh, TenTinh from TB_Tinh&quot;;
            ResultSet resultSetTinh = classConnect.selectData(getActivity(), sqlTinh);
            if (resultSetTinh != null){
                while (resultSetTinh.next()){
                    listMaTinh.add(resultSetTinh.getString(&quot;MaTinh&quot;));
                    listTenTinh.add(resultSetTinh.getString(&quot;TenTinh&quot;));
                }
<A NAME="641"></A>                ArrayAdapter&lt;String&gt; dataTinh = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenTinh);
                dataTinh.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
                cmdTinh</B></FONT>.setAdapter(dataTinh);
            <FONT color="#6cc417"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#641',2,'match0-top.html#641',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
            classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
        }
        cmdTinh.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaTinh.isEmpty()) {
                    strMaTinh = listMaTinh.get(position);
                    if (strLoai.equals(&quot;7&quot;)){
                        cmdTinh.setSelection(listMaTinh.indexOf(ganMaTinh));
<A NAME="47"></A>                        strMaTinh</B></FONT> = ganMaTinh;
                        cmdTinh.setEnabled(false);
                    }
                    <FONT color="#d16587"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#47',2,'match0-top.html#47',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>loadDanhSachTaiKhoan(strMaTinh, strLoaiTaiKhoan, strMaTrangThai);
                }
            }

            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }

    private void loadLoaiTaiKhoan() {
        //Danh sách loại tài khoản
        listMaLoaiTaiKhoan.clear(); //Xóa danh sách đang có
        listTenLoaiTaiKhoan.clear();
        listMaLoaiTaiKhoan.add(&quot;2&quot;);
        listTenLoaiTaiKhoan.add(&quot;Hộ nuôi&quot;);
        listMaLoaiTaiKhoan.add(&quot;3&quot;);
        listTenLoaiTaiKhoan.add(&quot;Công ty thức ăn thủy sản&quot;);
        listMaLoaiTaiKhoan.add(&quot;4&quot;);
<A NAME="330"></A>        listTenLoaiTaiKhoan.add(&quot;Công ty chế biến thủy sản&quot;);
        listMaLoaiTaiKhoan.add(&quot;6&quot;);
        listTenLoaiTaiKhoan</B></FONT>.add(&quot;Công ty thuốc thủy sản&quot;);
        <FONT color="#347235"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#330',2,'match0-top.html#330',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>listMaLoaiTaiKhoan.add(&quot;5&quot;);
        listTenLoaiTaiKhoan.add(&quot;Cán bộ nông nghiệp&quot;);
<A NAME="160"></A>        ArrayAdapter&lt;String&gt; dataLoaiTaiKhoan = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenLoaiTaiKhoan);
        dataLoaiTaiKhoan.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
        cmdLoaiTaiKhoan</B></FONT>.setAdapter(dataLoaiTaiKhoan);
        <FONT color="#e57ded"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#160',2,'match0-top.html#160',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>cmdLoaiTaiKhoan.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaLoaiTaiKhoan.isEmpty()){
                    strLoaiTaiKhoan = listMaLoaiTaiKhoan.get(position);
                    if (!strGanLoaiTaiKhoan.equals(&quot;&quot;)){
                        cmdLoaiTaiKhoan.setSelection(listMaLoaiTaiKhoan.indexOf(strGanLoaiTaiKhoan));
<A NAME="134"></A>                        strLoaiTaiKhoan</B></FONT> = strGanLoaiTaiKhoan;
                        strGanLoaiTaiKhoan = &quot;&quot;;
                    }
                    <FONT color="#f62817"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#134',2,'match0-top.html#134',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>loadDanhSachTaiKhoan(strMaTinh, strLoaiTaiKhoan, strMaTrangThai);
                }
            }

            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }
    @SuppressLint(&quot;NewApi&quot;)
    private void loadTrangThai(){
        listMaTrangThai.clear(); // Xóa danh sách trạng thái
        listTenTrangThai.clear();
        listMaTrangThai.add(&quot;1&quot;);
        listTenTrangThai.add(&quot;Hoạt động&quot;);
        listMaTrangThai.add(&quot;0&quot;);
        listTenTrangThai.add(&quot;Bị khóa&quot;);
<A NAME="269"></A>        ArrayAdapter&lt;String&gt; dataTrangThai = new ArrayAdapter&lt;&gt;(requireActivity(), android.R.layout.simple_spinner_item,listTenTrangThai);
        dataTrangThai.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
        cmdTrangThai.setAdapter(dataTrangThai);
        cmdTrangThai</B></FONT>.setOnItemSelectedListener(new <FONT color="#810541"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#269',2,'match0-top.html#269',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaTrangThai.isEmpty()) {
                    strMaTrangThai = listMaTrangThai.get(position);
                    loadDanhSachTaiKhoan(strMaTinh, strLoaiTaiKhoan, strMaTrangThai); //Load danh sách tai khoản
                }
            }

            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }

    private void</B></FONT> loadDanhSachTaiKhoan(String maTinh,String loaiTaiKhoan, String maTrangThai){
        arrayListDanhSachTaiKhoan = new ArrayList&lt;&gt;();
        arrayListDanhSachTaiKhoan.clear();
        intSo = 0;
        try{
<A NAME="465"></A>            classConnect = new ClassConnect(); //Mở kết nối đến SQL
            String sqlDanhSachTaiKhoan = &quot;select TaiKhoan, HoTen, TrangThai from TB_NguoiDung where HienThi = 1 and &quot; +
                    &quot;MaTinh = '&quot;+maTinh+&quot;' and LoaiTaiKhoan = '&quot;+Integer.parseInt(loaiTaiKhoan)+&quot;' and TrangThai = '&quot;+Integer.parseInt(maTrangThai)+&quot;'&quot;;
            ResultSet <FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#465',2,'match0-top.html#465',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>resultSetDanhSachTaiKhoan = classConnect.selectData(getActivity(), sqlDanhSachTaiKhoan);
            if (resultSetDanhSachTaiKhoan != null){
                while (resultSetDanhSachTaiKhoan.next()){
                    arrayListDanhSachTaiKhoan.add(new ClassDanhSachTaiKhoan(++intSo, resultSetDanhSachTaiKhoan</B></FONT>.getString(&quot;TaiKhoan&quot;),
                            resultSetDanhSachTaiKhoan.getString(&quot;HoTen&quot;), resultSetDanhSachTaiKhoan.getBoolean(&quot;TrangThai&quot;)));
                }
            }
            else {
                classPublic.ThongBao(getActivity(),&quot;Thông báo! Chưa cập nhật danh sách tài khoản&quot;);
<A NAME="397"></A>            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối đến SQL
        }catch (Exception e){
            <FONT color="#8e35ef"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#397',2,'match0-top.html#397',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>Log.e(&quot;TAG&quot;, e.getMessage());
        }
        adapterDanhSachTaiKhoan = new ListViewDanhSachTaiKhoan(getContext());
        listView.setAdapter(adapterDanhSachTaiKhoan);
        //Xử lý khi nhập vào ô tìm kiếm
        searchView.setOnQueryTextListener(this);
    }
    @Override
    public boolean onQueryTextSubmit(String query) {
        return false;
    }

    @Override
    public boolean onQueryTextChange(String newText) { //Tìm theo tên tài khoản
        adapterDanhSachTaiKhoan.filter(newText);
        return false;
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>TaiKhoan\ListViewDanhSachTaiKhoan.java</CENTER></H3><HR>
<PRE>
<A NAME="658"></A>package com.example.basa.TaiKhoan;

<FONT color="#d4a017"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#658',2,'match0-top.html#658',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.annotation.SuppressLint;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageButton;
import android.widget.Switch;
import android.widget.TextView;

import com.example.basa.Class.ClassConnect;
import com.example.basa.Class.ClassPublic;
import com.example.basa.R;

import java.util.ArrayList;
import java.util.Locale;

public class ListViewDanhSachTaiKhoan  extends BaseAdapter {
    private final Context mContext;
    private final LayoutInflater inflater;
    private final ArrayList&lt;ClassDanhSachTaiKhoan&gt; arraylist;
    private ClassConnect classConnect;
    private final ClassPublic classPublic = new ClassPublic();
    public ListViewDanhSachTaiKhoan(Context context) {
        mContext = context;
        inflater = LayoutInflater.from(mContext);
        this.arraylist = new ArrayList&lt;&gt;();
        this.arraylist.addAll(FragmentDanhSachTaiKhoan.arrayListDanhSachTaiKhoan);
    }
    public static class ViewHolder {
<A NAME="708"></A>        TextView textSTT, textTaiKhoan</B></FONT>, textHoTen;
        ImageButton btnDelete;
        @SuppressLint(&quot;UseSwitchCompatOrMaterialCode&quot;)
        Switch <FONT color="#3b9c9c"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#708',2,'match0-top.html#708',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>btnTrangThai;
    }
    @Override
    public int getCount() {
        return FragmentDanhSachTaiKhoan.arrayListDanhSachTaiKhoan.size();
    }

    @Override
    public Object getItem(int position) {
        return FragmentDanhSachTaiKhoan.arrayListDanhSachTaiKhoan.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @SuppressLint({&quot;InflateParams&quot;, &quot;SetTextI18n&quot;})
    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.listview_danh_sach_tai_khoan, null);
            holder.textSTT = convertView.findViewById(R.id.textSTT);
            holder.textTaiKhoan = convertView.findViewById(R.id.textTaiKhoan);
            holder.textHoTen = convertView.findViewById(R.id.textHoTen);
            holder.btnTrangThai = convertView</B></FONT>.findViewById(R.id.btnTrangThai);
            holder.btnDelete = convertView.findViewById(R.id.btnDelete);
            convertView.setTag(holder);
<A NAME="560"></A>        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        <FONT color="#348781"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#560',2,'match0-top.html#560',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>holder.textTaiKhoan.setText(&quot;Tài khoản: &quot; + FragmentDanhSachTaiKhoan.arrayListDanhSachTaiKhoan.get(position).getStrTaiKhoan());
        holder.textHoTen.setText((position + 1)+&quot;. &quot;+FragmentDanhSachTaiKhoan.arrayListDanhSachTaiKhoan.get(position).getStrHoTen());
<A NAME="239"></A>        holder.btnTrangThai.setChecked(FragmentDanhSachTaiKhoan.arrayListDanhSachTaiKhoan.get(position).getBooleanTrangThai());
        holder</B></FONT>.btnTrangThai.setOnCheckedChangeListener((buttonView, isChecked) -&gt; {
        //Hiện hộp thoại thông báo khóa tài khoản
        final String <FONT color="#c58917"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#239',2,'match0-top.html#239',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>strTaiKhoan = FragmentDanhSachTaiKhoan.arrayListDanhSachTaiKhoan.get(position).getStrTaiKhoan();
        final AlertDialog.Builder builder = new AlertDialog.Builder(mContext);
        builder.setTitle(&quot;THÔNG BÁO&quot;);
        builder.setIcon(R.drawable.ic_thongbao);
        builder.setMessage(&quot;Bạn có muốn khóa tài khoản: &quot; + strTaiKhoan + &quot; không?&quot;);
        builder.setCancelable(false);
        builder</B></FONT>.setPositiveButton(&quot;Đồng ý&quot;, (dialogInterface, i) -&gt; {
        try{
            classConnect = new ClassConnect(); //Mở kết nối đến SQL
            String sqlTaiKhoan;
            if (holder.btnTrangThai.isChecked()){
                 sqlTaiKhoan = &quot;update TB_NguoiDung set TrangThai = 1 where TaiKhoan = '&quot;+ strTaiKhoan +&quot;'&quot;;
                 classPublic.ThongBao((Activity)mContext,&quot;Mở khóa tài khoản thành công&quot;);
            }
            else {
                 sqlTaiKhoan = &quot;update TB_NguoiDung set TrangThai = 0 where TaiKhoan = '&quot;+ strTaiKhoan +&quot;'&quot;;
<A NAME="24"></A>                classPublic.ThongBao((Activity)mContext,&quot;Khóa tài khoản thành công&quot;);
            }
            if (classConnect.updateData((Activity)mContext, sqlTaiKhoan) == 1){
                FragmentDanhSachTaiKhoan.fragmentTransaction = <FONT color="#ada96e"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#24',2,'match0-top.html#24',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>FragmentDanhSachTaiKhoan.fragmentManager.beginTransaction();
                FragmentDanhSachTaiKhoan fragment = new FragmentDanhSachTaiKhoan();
                Bundle bundle = new Bundle();
                bundle.putString(&quot;LoaiTaiKhoan&quot;, FragmentDanhSachTaiKhoan.strLoaiTaiKhoan);
                fragment.setArguments(bundle);
                FragmentDanhSachTaiKhoan.fragmentTransaction.replace(R.id.fragment_main, fragment);
                FragmentDanhSachTaiKhoan.fragmentTransaction.commit();
            }
            else</B></FONT> {
                classPublic.ThongBao((Activity)mContext, &quot;Lỗi! Không khóa được tài khoản&quot;);
            }
            classConnect.CONN((Activity)mContext).close(); //Đóng kết nối đến SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, e.getMessage());
        }
        });
<A NAME="415"></A>        builder.setNegativeButton(&quot;Hủy bỏ&quot;, (dialogInterface, i) -&gt; {
            //Chuyển fragment
            dialogInterface.dismiss();
            <FONT color="#f88017"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#415',2,'match0-top.html#415',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>FragmentDanhSachTaiKhoan.fragmentTransaction = FragmentDanhSachTaiKhoan.fragmentManager.beginTransaction();
            FragmentDanhSachTaiKhoan fragment = new FragmentDanhSachTaiKhoan();
            Bundle bundle = new Bundle();
            bundle.putString(&quot;LoaiTaiKhoan&quot;, FragmentDanhSachTaiKhoan.strLoaiTaiKhoan);
            fragment.setArguments(bundle);
            FragmentDanhSachTaiKhoan.fragmentTransaction.replace(R.id.fragment_main, fragment);
            FragmentDanhSachTaiKhoan</B></FONT>.fragmentTransaction.commit();
        });
        AlertDialog alertDialog = builder.create();
        alertDialog.show();
<A NAME="170"></A>        });
        holder.btnDelete.setOnClickListener(v -&gt; {
        //Hiện hộp thoại thông báo xóa danh sách tài khoản
        final String <FONT color="#4e8975"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#170',2,'match0-top.html#170',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>strTaiKhoan = FragmentDanhSachTaiKhoan.arrayListDanhSachTaiKhoan.get(position).getStrTaiKhoan();
        AlertDialog.Builder builder = new AlertDialog.Builder(mContext);
        builder.setTitle(&quot;THÔNG BÁO&quot;);
<A NAME="175"></A>        builder.setMessage(&quot;Bạn có muốn xóa &quot; + strTaiKhoan + &quot; không?&quot;);
        builder.setCancelable(false);
        builder</B></FONT>.setPositiveButton(&quot;Đồng ý&quot;, (dialogInterface, i) -&gt; {
        <FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#175',2,'match0-top.html#175',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>try{
            classConnect = new ClassConnect(); //Mở kết nối đến SQL
<A NAME="343"></A>            String sqlTaiKhoan = &quot;update TB_NguoiDung set HienThi = 0, TrangThai = 0 where TaiKhoan = '&quot;+ strTaiKhoan +&quot;'&quot;;
            if (classConnect.updateData((Activity)mContext, sqlTaiKhoan) == 1){
                classPublic.ThongBao((Activity)mContext, &quot;Thông báo! Xóa tài khoản thành công&quot;);
                FragmentDanhSachTaiKhoan</B></FONT>.fragmentTransaction = <FONT color="#f88158"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#343',2,'match0-top.html#343',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>FragmentDanhSachTaiKhoan.fragmentManager.beginTransaction();
                FragmentDanhSachTaiKhoan fragment = new FragmentDanhSachTaiKhoan();
                Bundle bundle = new Bundle();
                bundle.putString(&quot;LoaiTaiKhoan&quot;, FragmentDanhSachTaiKhoan.strLoaiTaiKhoan);
                fragment.setArguments(bundle);
                FragmentDanhSachTaiKhoan.fragmentTransaction.replace(R.id.fragment_main, fragment);
                FragmentDanhSachTaiKhoan.fragmentTransaction.commit();
            }
            else</B></FONT> {
                classPublic.ThongBao((Activity)mContext, &quot;Lỗi! Không xóa được tài khoản&quot;);
            }
            classConnect.CONN((Activity)mContext).close(); //Đóng kết nối đến SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, e.getMessage());
        }
        });
        builder.setNegativeButton(&quot;Hủy bỏ&quot;, (dialogInterface, i) -&gt; dialogInterface.dismiss());
        AlertDialog alertDialog = builder.create();
<A NAME="177"></A>        alertDialog.show();
        });
        return convertView;
    <FONT color="#6cc417"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#177',2,'match0-top.html#177',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
    public void filter(String charText) {
        charText = charText.toLowerCase(Locale.getDefault());
        FragmentDanhSachTaiKhoan.arrayListDanhSachTaiKhoan.clear();
        if (charText.length() == 0) {
            FragmentDanhSachTaiKhoan.arrayListDanhSachTaiKhoan.addAll(arraylist);
        } else {
            for (ClassDanhSachTaiKhoan wp : arraylist) {
                if (wp.getStrTaiKhoan().toLowerCase(Locale.getDefault()).contains(charText) || wp.getStrHoTen().toLowerCase(Locale.getDefault()).contains(charText)) {
                    FragmentDanhSachTaiKhoan.arrayListDanhSachTaiKhoan.add(wp);
                }
            }
        }
        notifyDataSetChanged();
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>ThamKhao\ClassThamKhao.java</CENTER></H3><HR>
<PRE>
<A NAME="210"></A><FONT color="#ff00ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#210',2,'match0-top.html#210',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.ThamKhao;

public class ClassThamKhao {

    String strTieuDe, strNoiDung;

    public ClassThamKhao(String strTieuDe, String strNoiDung){
        this.strTieuDe = strTieuDe;
        this.strNoiDung = strNoiDung;
    }

    public String getStrTieuDe() {
        return strTieuDe;
    }

    public String getStrNoiDung() {
        return strNoiDung;
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>ThamKhao\ClassThamKhaoEdit.java</CENTER></H3><HR>
<PRE>
<A NAME="6"></A><FONT color="#50ebec"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#6',2,'match0-top.html#6',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.ThamKhao;

public class ClassThamKhaoEdit {

    String strMaThamKhao, strTieuDe, strNoiDung;

    public ClassThamKhaoEdit(String strMaThamKhao, String strTieuDe, String strNoiDung){
        this.strMaThamKhao = strMaThamKhao;
        this.strTieuDe = strTieuDe;
        this.strNoiDung = strNoiDung;
    }

    public String getStrMaThamKhao() {
        return strMaThamKhao;
    }

    public String getStrTieuDe() {
        return strTieuDe;
    }

    public String getStrNoiDung() {
        return strNoiDung;
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>ThamKhao\FragmentSoDo.java</CENTER></H3><HR>
<PRE>
<A NAME="286"></A><FONT color="#4e8975"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#286',2,'match0-top.html#286',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.ThamKhao;

import android.annotation.SuppressLint;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ImageButton;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import</B></FONT> androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;

import com.example.basa.R;

import java.util.Objects;

public class FragmentSoDo extends Fragment {
    //Khai báo
    private View view;
    private ImageButton btnQuayLai;
    private FragmentManager fragmentManager; //Tạo Fragment
    private FragmentTransaction fragmentTransaction;
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);
        view = inflater.inflate(R.layout.fragment_so_do, container, false);
        layoutAnhXa(); //Ánh xạ các đối tượng trên layout
        return view;
    }
    @SuppressLint({&quot;NewApi&quot;, &quot;UseRequireInsteadOfGet&quot;})
    private void layoutAnhXa() {
       btnQuayLai = view.findViewById(R.id.btnQuayLai);
       fragmentManager = Objects.requireNonNull(getActivity()).getSupportFragmentManager();
       clickButton();
    }

    private void clickButton() {
        //Quay lại trang ao nuôi use
        btnQuayLai.setOnClickListener(v -&gt; {
            fragmentTransaction = fragmentManager.beginTransaction();
            FragmentThamKhao fragment = new FragmentThamKhao();
            fragmentTransaction.replace(R.id.fragment_main, fragment);
            fragmentTransaction.commit();
        });
    }
}
</PRE>
<HR>
<H3><CENTER>ThamKhao\FragmentThamKhao.java</CENTER></H3><HR>
<PRE>
<A NAME="180"></A><FONT color="#50ebec"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#180',2,'match0-top.html#180',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.ThamKhao;

import android.annotation.SuppressLint;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ImageButton;
import android.widget.ListView;
import android.widget.SearchView;
import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;
import com.example.basa.AoNuoi.FragmentQuanLiAoNuoi;
import com.example.basa.Class.ClassConnect;
import com.example.basa.Class.ClassPublic;
import com.example.basa.R;
import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.Objects;

public class FragmentThamKhao extends Fragment implements SearchView.OnQueryTextListener {

    View view</B></FONT>;
    ListView listView;
    SearchView searchView;
    ImageButton btnQuayLai, btnSoDo;
    ClassPublic classPublic = new ClassPublic();
    ClassConnect classConnect;
    ListViewThamKhao adapterThamKhao;
    public static ArrayList &lt;ClassThamKhao&gt; arrayListThamKhao;
    public static FragmentManager fragmentManager; //Fragment trang chủ
<A NAME="54"></A>    public static FragmentTransaction fragmentTransaction;

    @SuppressLint(&quot;UseRequireInsteadOfGet&quot;)
    <FONT color="#4e8975"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#54',2,'match0-top.html#54',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>@Override
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);
        view = inflater.inflate(R.layout.fragment_tham_khao, container, false);
        fragmentManager = Objects.requireNonNull(getActivity</B></FONT>()).getSupportFragmentManager();
        layoutAnhXa(); //Ánh xạ các đối tượng trên layout
<A NAME="243"></A>        return view ;
    }
    @SuppressLint({&quot;NewApi&quot;, &quot;UseRequireInsteadOfGet&quot;})
    private <FONT color="#571b7e"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#243',2,'match0-top.html#243',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>void layoutAnhXa() {
        btnQuayLai = view.findViewById(R.id.btnQuayLai);
        btnSoDo = view.findViewById(R.id.btnSoDo);
        listView = view.findViewById(R.id.listView);
        searchView = view.findViewById(R.id.searchTen);
        loadThamKhao();
<A NAME="193"></A>        clickButton();
    }</B></FONT>

    private <FONT color="#4e9258"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#193',2,'match0-top.html#193',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>void clickButton() {
        btnQuayLai.setOnClickListener(view -&gt; {
            FragmentThamKhao.fragmentTransaction = FragmentThamKhao.fragmentManager.beginTransaction();
            FragmentThamKhao.fragmentTransaction.replace(R.id.fragment_main,new FragmentQuanLiAoNuoi());
            FragmentThamKhao.fragmentTransaction.commit();
        });
        btnSoDo</B></FONT>.setOnClickListener(view -&gt; {
            FragmentThamKhao.fragmentTransaction = FragmentThamKhao.fragmentManager.beginTransaction();
            FragmentThamKhao.fragmentTransaction.replace(R.id.fragment_main,new FragmentSoDo());
            FragmentThamKhao.fragmentTransaction.commit();
<A NAME="255"></A>        });
    }

    private <FONT color="#f660ab"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#255',2,'match0-top.html#255',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>void loadThamKhao() {
        arrayListThamKhao = new ArrayList&lt;&gt;();
        arrayListThamKhao.clear();
        try {
            classConnect = new ClassConnect(); //Mở kết nối đến SQL
            String sqlThamKhao;
                sqlThamKhao = &quot;select TieuDe, NoiDung from TB_KyThuat&quot;;
            ResultSet resultSetThamKhao = classConnect.selectData(getActivity(), sqlThamKhao);
            if (resultSetThamKhao != null) {
                while (resultSetThamKhao.next()) {
                    arrayListThamKhao.add(new ClassThamKhao(resultSetThamKhao.getString(&quot;TieuDe&quot;), resultSetThamKhao.getString(&quot;NoiDung&quot;)));
                }
            }
            if (arrayListThamKhao.isEmpty()){
                classPublic.ThongBao(getActivity(),&quot;Thông báo! Đang cập nhật kiến thức tham khảo&quot;);
            }
<A NAME="334"></A>            classConnect.CONN(getActivity()).close(); //Đóng kết nối đến SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, e</B></FONT>.getMessage());
        <FONT color="#e57ded"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#334',2,'match0-top.html#334',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
         adapterThamKhao = new ListViewThamKhao(getContext());
         listView.setAdapter(adapterThamKhao);
         searchView.setOnQueryTextListener(this);
    }
    @Override
    public boolean onQueryTextSubmit(String query) {
        return false;
    }

    @Override
    public boolean onQueryTextChange(String newText) { //Tìm theo tên kinh nghiệm
        adapterThamKhao.filter(newText);
        return false;
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>ThamKhao\FragmentThamKhaoEdit.java</CENTER></H3><HR>
<PRE>
<A NAME="391"></A><FONT color="#c22817"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#391',2,'match0-top.html#391',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.ThamKhao;

import android.annotation.SuppressLint;
import android.app.AlertDialog;
import android.os.Bundle;

import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;

import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.ListView;
import android.widget.SearchView;
import android.widget.TextView;

import com.example.basa.Class.ClassConnect;
import com.example.basa.Class.ClassPublic;
import com.example.basa.Menu.FragmentMenu;
import com.example.basa.R;

import java.sql.ResultSet;
import java.util.ArrayList;


public class FragmentThamKhaoEdit extends Fragment implements SearchView.OnQueryTextListener {

    View view;
    ImageButton btnAdd, btnQuayLai</B></FONT>;
    ListView listView;
    SearchView seachTen;
<A NAME="644"></A>    ClassPublic classPublic = new ClassPublic();
    ClassConnect classConnect;
    ListViewThamKhaoEdit adapterThamKhao;
    public static ArrayList&lt;ClassThamKhaoEdit&gt; <FONT color="#50ebec"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#644',2,'match0-top.html#644',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>arrayListThamKhao;
    public static FragmentManager fragmentManager; //Fragment trang chủ
    public static FragmentTransaction fragmentTransaction;
    //Khai báo các đối tượng trên dialog
    private TextView textTieuDe;
    private EditText editMaThamKhao, editTieuDe, editNoiDung;
    private Button btnDong, btnLuuLai</B></FONT>, btnXoa;

<A NAME="690"></A>    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
        <FONT color="#2b60de"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#690',2,'match0-top.html#690',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>super.onCreateView(inflater, container, savedInstanceState);
        fragmentManager = requireActivity().getSupportFragmentManager();
        view = inflater.inflate(R.layout.fragment_tham_khao_edit, container, false);
        layoutAnhXa();
        return view;
    }

    private void layoutAnhXa() {
        //Nhấn quay lại
        btnQuayLai = view</B></FONT>.findViewById(R.id.btnQuayLai);
        btnQuayLai.setOnClickListener(view -&gt; {
            fragmentTransaction = fragmentManager.beginTransaction();
            fragmentTransaction.replace(R.id.fragment_main, new FragmentMenu());
            fragmentTransaction.commit();
<A NAME="691"></A>        });
        seachTen = view.findViewById(R.id.searchTen);
        btnAdd = view.findViewById(R.id.btnAdd);
        listView = <FONT color="#f88158"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#691',2,'match0-top.html#691',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>view.findViewById(R.id.listView);
        clickDoiTuong();
        loadThamKhao();
    }

    private void loadThamKhao() {
        arrayListThamKhao = new ArrayList&lt;&gt;();
        arrayListThamKhao.clear();
        try {
            classConnect = new ClassConnect(); //Mở kết nối đến SQL
            String sqlThamKhao;
            sqlThamKhao = &quot;select * from TB_KyThuat&quot;;
            ResultSet resultSetThamKhao = classConnect.selectData(getActivity(), sqlThamKhao);
<A NAME="341"></A>            if (resultSetThamKhao != null) {
                while (resultSetThamKhao.next()) {
                    arrayListThamKhao.add(new ClassThamKhaoEdit(resultSetThamKhao.getString(&quot;MaThamKhao&quot;),resultSetThamKhao.getString(&quot;TieuDe&quot;), resultSetThamKhao</B></FONT>.getString(&quot;NoiDung&quot;)));
                <FONT color="#b38481"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#341',2,'match0-top.html#341',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
            }
            if (arrayListThamKhao.isEmpty()){
                classPublic.ThongBao(getActivity(),&quot;Thông báo! Đang cập nhật kiến thức tham khảo&quot;);
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối đến SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, e</B></FONT>.getMessage());
<A NAME="393"></A>        }
        adapterThamKhao = new ListViewThamKhaoEdit(getContext());
        listView.setAdapter(adapterThamKhao);
        <FONT color="#79d867"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#393',2,'match0-top.html#393',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>seachTen.setOnQueryTextListener(this);
    }

<A NAME="34"></A>    private void clickDoiTuong() {
        btnAdd.setOnClickListener(v -&gt; updateKienThuc(-1));
        listView.setOnItemClickListener((parent, view, position, id) -&gt; updateKienThuc</B></FONT>(position));
    <FONT color="#827d6b"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#34',2,'match0-top.html#34',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}

    private void updateKienThuc(final int intChiSo) {
        LayoutInflater inflater = getLayoutInflater();
        @SuppressLint(&quot;InflateParams&quot;) View alertLayout = inflater.inflate(R.layout.dialog_tham_khao, null);
        textTieuDe = alertLayout.findViewById(R.id.textTieuDe);
        editMaThamKhao = alertLayout.findViewById(R.id.editMaBenh);
        editTieuDe = alertLayout.findViewById(R.id.editTenBenh);
        editNoiDung = alertLayout.findViewById(R.id.editPhongTri);
        btnLuuLai = alertLayout.findViewById(R.id.btnLuuLai);
        btnDong = alertLayout.findViewById(R.id.btnDong);
        btnXoa = alertLayout.findViewById(R.id.btnXoa);
        final AlertDialog.Builder alert = new AlertDialog.Builder(getActivity());
        alert.setView(alertLayout);
        alert.setCancelable(false);
        final AlertDialog dialog = alert.create();
        if (intChiSo == -1) {
<A NAME="630"></A>            btnXoa.setEnabled(false);//Không cho phép ấn nút xóa
            String strTieuDe = &quot;THÊM MỚI KIẾN THỨC THAM KHẢO&quot;;
            textTieuDe</B></FONT>.setText(strTieuDe);
            <FONT color="#ff0000"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#630',2,'match0-top.html#630',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>editMaThamKhao.setText(&quot;&quot;);
            String strNut = &quot;THÊM MỚI&quot;; //Đổi text nút lưu lại thành thêm mới
            btnLuuLai.setText(strNut);
        } else {
            btnXoa.setEnabled(true);//Cho phép ấn nút xóa
            String strTieuDe = &quot;CẬP NHẬT KIẾN THỨC THAM KHẢO&quot;;
            textTieuDe.setText(strTieuDe);
            String strNut = &quot;CẬP NHẬT&quot;;
            btnLuuLai.setText(strNut);//Đổi text nút lưu lại thành cập nhật
            editMaThamKhao.setText(arrayListThamKhao.get(intChiSo).getStrMaThamKhao()); //Gán giá trị mã kt
            editTieuDe</B></FONT>.setText(arrayListThamKhao.get(intChiSo).getStrTieuDe()); //Gán giá trị tên kt
<A NAME="271"></A>            editNoiDung.setText(arrayListThamKhao.get(intChiSo).getStrNoiDung());//Gán giá trị th
        }
        btnLuuLai.setOnClickListener(v -&gt; {
            <FONT color="#152dc6"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#271',2,'match0-top.html#271',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>try {
                if (editTieuDe.getText().length()!= 0){
                    if (editNoiDung.getText().length()!= 0){
                        String sqlThamKhao;
                        if (intChiSo == -1) { //Thêm mới
<A NAME="272"></A>                            sqlThamKhao = &quot;insert into TB_KyThuat (TieuDe, NoiDung) values &quot; +
                                    &quot;(N'&quot; + editTieuDe.getText() + &quot;', N'&quot; + editNoiDung.getText() + &quot;')&quot;;
                        } else {
                            sqlThamKhao</B></FONT> = &quot;update TB_KyThuat set TieuDe = N'&quot;+editTieuDe.getText()+&quot;', NoiDung = N'&quot;+<FONT color="#347235"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#272',2,'match0-top.html#272',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>editNoiDung.getText()+&quot;' where MaThamKhao = '&quot;+editMaThamKhao.getText()+&quot;'&quot;;
                        }
                        classConnect = new ClassConnect(); //Mở kết nối SQL
                        if (classConnect.updateData(getActivity(), sqlThamKhao) == 1) {
                            if (intChiSo == -1) {
                                classPublic.ThongBao(getActivity(), &quot;Thông báo! Thêm mới thành công&quot;);
                            } else {
                                classPublic.ThongBao(getActivity(), &quot;Thông báo! Cập nhật thành công&quot;);
                            }
                            dialog.cancel(); //Đóng dialog sau đó gọi load mới danh sách
                            loadThamKhao</B></FONT>();
                        }
                    }
                    else {
<A NAME="718"></A>                        classPublic.ThongBao(getActivity(),&quot;Vui lòng nhập nội dung&quot;);
                    }
                }
                <FONT color="#4cc417"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#718',2,'match0-top.html#718',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>else {
                    classPublic.ThongBao(getActivity(),&quot;Vui lòng nhập giải pháp&quot;);
                }
                classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
            } catch (Exception e){
                Log.e(&quot;TAG&quot;, e.getMessage());
<A NAME="250"></A>            }</B></FONT>
        });
        btnXoa.setOnClickListener(v -&gt; {
            <FONT color="#f62817"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#250',2,'match0-top.html#250',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>if (editMaThamKhao.getText().length() != 0) {
                dialogXoa(editMaThamKhao.getText().toString(), editTieuDe.getText().toString());
                dialog.cancel();
            }
            else {
                classPublic.ThongBao(getActivity(),&quot;Không tìm thấy bệnh để xóa&quot;);
<A NAME="311"></A>            }</B></FONT>
        });
        btnDong.setOnClickListener(v -&gt; dialog.cancel());
        <FONT color="#00ff00"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#311',2,'match0-top.html#311',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>dialog.show();
    }
    private void dialogXoa(final String maThamKhao, final String tieuDe){
        //Hiện hộp thoại thông báo xóa tỉnh
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        builder.setTitle(&quot;XÓA KIẾN THỨC THAM KHẢO&quot;);
        builder.setIcon(R.drawable.ic_delete);
<A NAME="252"></A>        builder.setMessage(&quot;Bạn có muốn xóa &quot;+tieuDe+&quot; không?&quot;);
        builder.setCancelable(false);
        builder</B></FONT>.setPositiveButton(&quot;Đồng ý&quot;, (dialogInterface, i) -&gt; {
            <FONT color="#d4a017"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#252',2,'match0-top.html#252',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>try {
                classConnect = new ClassConnect(); //Mở kết nối SQL
                String sqlTinh = &quot;delete TB_KyThuat where MaThamKhao = '&quot;+ maThamKhao +&quot;'&quot;;
                if (classConnect.updateData(getActivity(), sqlTinh) == 1){
                    classPublic.ThongBao(getActivity(),&quot;Thông báo! Xóa thành công&quot;);
                    loadThamKhao();
                }
                else {
                    classPublic.ThongBao(getActivity(),&quot;Thông báo! Không xóa được&quot;);
                }
                classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
            }catch (Exception e){
                Log.e(&quot;TAG&quot;, e</B></FONT>.getMessage());
<A NAME="572"></A>            }
        });
        builder.setNegativeButton(&quot;Hủy bỏ&quot;, (dialogInterface, i) -&gt; dialogInterface.dismiss());
        AlertDialog <FONT color="#ff0000"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#572',2,'match0-top.html#572',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>alertDialog = builder.create();
        alertDialog.show();
    }

    @Override
    public boolean onQueryTextSubmit(String query) {
        return false;
    }

    @Override
    public boolean</B></FONT> onQueryTextChange(String newText) {
        adapterThamKhao.filter(newText);
        return false;
    }
}
</PRE>
<HR>
<H3><CENTER>ThamKhao\ListViewThamKhao.java</CENTER></H3><HR>
<PRE>
<A NAME="237"></A>package com.example.basa.ThamKhao;

<FONT color="#c8c2a7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#237',2,'match0-top.html#237',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.annotation.SuppressLint;
import android.app.Activity;
import android.content.Context;
import android.speech.tts.TextToSpeech;
import android.text.Html;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageButton;
import android.widget.TextView;

import com.example.basa.Class.ClassPublic;
import com.example.basa.R;

import java.util.ArrayList;
import java.util.Locale;

public class ListViewThamKhao extends BaseAdapter {

    Context mContext;
    LayoutInflater inflater;
    ArrayList&lt;ClassThamKhao&gt; arraylist;
    ClassPublic classPublic</B></FONT> = new ClassPublic();
    TextToSpeech tts;
    public ListViewThamKhao(Context context) {
<A NAME="696"></A>        mContext = context;
        inflater = LayoutInflater.from(mContext);
        //Khởi tạo đọc văn bản
        <FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#696',2,'match0-top.html#696',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>tts = classPublic.DocVanBan((Activity)mContext,&quot;&quot;);
        this.arraylist = new ArrayList&lt;&gt;();
        this.arraylist.addAll(FragmentThamKhao.arrayListThamKhao);
    }
    public static class ViewHolder {
        TextView textNoiDung, textTieuDe;
        ImageButton btnVolumeUp, btnVolumeOff;
    }
    @Override
    public int getCount() {
        return FragmentThamKhao.arrayListThamKhao.size();
    }

    @Override
    public Object getItem(int position) {
        return FragmentThamKhao.arrayListThamKhao.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @SuppressLint({&quot;InflateParams&quot;, &quot;NewApi&quot;, &quot;MissingPermission&quot;, &quot;SetTextI18n&quot;})
    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.listview_tham_khao, null);
            holder.textNoiDung = convertView.findViewById(R.id.textNoiDung);
            holder.textTieuDe = convertView.findViewById(R.id.textTieuDe);
            holder.btnVolumeUp = convertView.findViewById(R.id.btnVolumeUp);
            holder.btnVolumeOff = convertView.findViewById(R.id.btnVolumeOff);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }</B></FONT>
<A NAME="206"></A>
        holder.textTieuDe.setText(FragmentThamKhao.arrayListThamKhao.get(position).getStrTieuDe());
        //Rút gọn nội dung
        String [] strText = <FONT color="#82cafa"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#206',2,'match0-top.html#206',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>FragmentThamKhao.arrayListThamKhao.get(position).getStrNoiDung().split(&quot;\\.&quot;);
        holder.textNoiDung.setText(Html.fromHtml(strText[0] + &quot;... &lt;font color='blue'&gt;&lt;b&gt;Xem thêm &gt;&gt;&lt;/b&gt;&lt;/font&gt;&quot;),TextView.BufferType.SPANNABLE);
<A NAME="281"></A>        holder.textNoiDung.setOnClickListener(v -&gt; holder.textNoiDung.setText(FragmentThamKhao.arrayListThamKhao.get(position).getStrNoiDung()));
        holder</B></FONT>.btnVolumeUp.setOnClickListener(v -&gt; {
            String strDoc = FragmentThamKhao.arrayListThamKhao.get(position).getStrTieuDe() +&quot;, &quot; + FragmentThamKhao.arrayListThamKhao.get(position).getStrNoiDung();
            tts = <FONT color="#8e35ef"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#281',2,'match0-top.html#281',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>classPublic.DocVanBan((Activity)mContext, strDoc);
        });

        holder.btnVolumeOff.setOnClickListener(v -&gt; {
            tts.stop(); //Tắt chức năng đọc tin tức
        });

        return convertView;
    }

    public void filter(String charText) {
        charText = charText.toLowerCase(Locale.getDefault());
        FragmentThamKhao.arrayListThamKhao.clear();
        if (charText.length() == 0) {
            FragmentThamKhao.arrayListThamKhao.addAll(arraylist);
        } else {
            for (ClassThamKhao wp : arraylist) {
                if (wp.getStrTieuDe().toLowerCase(Locale.getDefault()).contains(charText)) {
                    FragmentThamKhao.arrayListThamKhao.add(wp);
                }
            }
        }
        notifyDataSetChanged();
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>ThamKhao\ListViewThamKhaoEdit.java</CENTER></H3><HR>
<PRE>
<A NAME="585"></A>package com.example.basa.ThamKhao;

<FONT color="#c8c2a7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#585',2,'match0-top.html#585',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.annotation.SuppressLint;
import android.app.Activity;
import android.content.Context;
import android.speech.tts.TextToSpeech;
import android.text.Html;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageButton;
import android.widget.TextView;

import com.example.basa.Class.ClassPublic;
import com.example.basa.R;

import java.util.ArrayList;
import java.util.Locale;

public class ListViewThamKhaoEdit extends BaseAdapter {

    Context mContext;
    LayoutInflater inflater;
    ArrayList&lt;ClassThamKhaoEdit&gt; arraylist;
    ClassPublic classPublic</B></FONT> = new ClassPublic();
    TextToSpeech tts;
    public ListViewThamKhaoEdit(Context context) {
<A NAME="667"></A>        mContext = context;
        inflater = LayoutInflater.from(mContext);
        //Khởi tạo đọc văn bản
        <FONT color="#faafba"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#667',2,'match0-top.html#667',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>tts = classPublic.DocVanBan((Activity)mContext,&quot;&quot;);
        this.arraylist = new ArrayList&lt;&gt;();
        this.arraylist.addAll(FragmentThamKhaoEdit.arrayListThamKhao);
    }
    public static class ViewHolder {
        TextView textNoiDung, textTieuDe;
    }
    @Override
    public int getCount() {
        return FragmentThamKhaoEdit.arrayListThamKhao.size();
    }

    @Override
    public Object getItem(int position) {
        return FragmentThamKhaoEdit.arrayListThamKhao.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @SuppressLint({&quot;InflateParams&quot;, &quot;NewApi&quot;, &quot;MissingPermission&quot;, &quot;SetTextI18n&quot;})
    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.listview_tham_khao_edit, null);
            holder.textNoiDung = convertView.findViewById(R.id.textNoiDung);
            holder.textTieuDe = convertView.findViewById(R.id.textTieuDe);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }</B></FONT>
<A NAME="529"></A>
        holder.textTieuDe.setText(FragmentThamKhaoEdit.arrayListThamKhao.get(position).getStrTieuDe());
        //Rút gọn nội dung
        String [] strText = <FONT color="#c58917"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#529',2,'match0-top.html#529',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>FragmentThamKhaoEdit.arrayListThamKhao.get(position).getStrNoiDung().split(&quot;\\.&quot;);
        holder.textNoiDung.setText(Html.fromHtml(strText[0] + &quot;... &lt;font color='blue'&gt;&lt;b&gt;Xem thêm &gt;&gt;&lt;/b&gt;&lt;/font&gt;&quot;),TextView.BufferType.SPANNABLE);
        holder.textNoiDung.setOnClickListener(v -&gt; holder.textNoiDung.setText(FragmentThamKhao.arrayListThamKhao.get(position).getStrNoiDung()));
        return convertView;
    }

    public void filter(String charText) {
        charText = charText.toLowerCase(Locale.getDefault());
        FragmentThamKhaoEdit.arrayListThamKhao.clear();
        if (charText.length() == 0) {
            FragmentThamKhaoEdit.arrayListThamKhao.addAll(arraylist);
        } else {
            for (ClassThamKhaoEdit wp : arraylist) {
                if (wp.getStrTieuDe().toLowerCase(Locale.getDefault()).contains(charText)) {
                    FragmentThamKhaoEdit.arrayListThamKhao.add(wp);
                }
            }
        }
        notifyDataSetChanged();
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>ThoiTiet\ClassThoiTiet.java</CENTER></H3><HR>
<PRE>
<A NAME="388"></A><FONT color="#347235"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#388',2,'match0-top.html#388',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.ThoiTiet;

public class ClassThoiTiet {
    private final String strNgay, strStatus, strImage, strNhietDo, strTocDoGio, strDoAm;
    public ClassThoiTiet(String strNgay, String strStatus, String strImage,
                         String strNhietDo, String strTocDoGio, String strDoAm){
        this.strNgay = strNgay;
        this.strStatus = strStatus;
        this.strImage = strImage;
        this.strNhietDo = strNhietDo;
        this.strTocDoGio = strTocDoGio;
        this.strDoAm = strDoAm;
    }

    public String getStrNgay() {
        return strNgay;
    }

    public String getStrStatus() {
        return strStatus;
    }

    public String getStrImage() {
        return strImage;
    }

    public String getStrNhietDo() {
        return strNhietDo;
    }

    public String getStrTocDoGio() {
        return strTocDoGio;
    }

    public String getStrDoAm() {
        return strDoAm;
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>ThoiTiet\FragmentThoiTiet.java</CENTER></H3><HR>
<PRE>
<A NAME="211"></A>package com.example.basa.ThoiTiet;

<FONT color="#810541"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#211',2,'match0-top.html#211',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.annotation.SuppressLint;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ImageButton;
import android.widget.ListView;
import android.widget.TextView;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;

import com.android.volley.Request;
import com.android.volley.RequestQueue;
import com.android.volley.toolbox.JsonObjectRequest;
import com.android.volley.toolbox.Volley;
import com.example.basa.AoNuoi.FragmentQuanLiAoNuoi;
import com.example.basa.Class.ClassConnect;
import com.example.basa.Class.ClassPublic;
import com.example.basa.Home.HomeActivity;
import com.example.basa.R;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import java.sql.ResultSet;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Calendar;
import java.util.Date;
import java.util.Objects;

public class FragmentThoiTiet extends Fragment {
    //Khai báo
    private View view;
    private ListView listView;
    public static ArrayList&lt;ClassThoiTiet&gt; arrayListThoiTiet;
    private ListViewThoiTiet adapterThoiTiet;
    private String strMaAo, strKinhDo, strViDo;
<A NAME="645"></A>    private ImageButton btnQuayLai;
    private TextView textTenAoNuoi, textDiaChi;
    private ClassConnect classConnect</B></FONT>;
    private final ClassPublic classPublic = new <FONT color="#c58917"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#645',2,'match0-top.html#645',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>ClassPublic();
    private FragmentManager fragmentManager; //Tạo Fragment
    private FragmentTransaction fragmentTransaction;
    private RequestQueue requestQueue;
    private  String strUrl;
    @SuppressLint({&quot;NewApi&quot;, &quot;UseRequireInsteadOfGet&quot;})
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);
        view = inflater.inflate(R.layout.fragment_thoi_tiet, container, false);
<A NAME="508"></A>        fragmentManager = Objects.requireNonNull(getActivity()).getSupportFragmentManager();
        Bundle bundle = this.getArguments();
        if</B></FONT> (bundle != null){
            <FONT color="#e57ded"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#508',2,'match0-top.html#508',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>strMaAo = bundle.getString(&quot;MaAo&quot;);
        }
        else {
            startActivity(new Intent(getActivity(), HomeActivity.class)); //Về trang home
        }
        layoutAnhXa();
        return view;
    }

    @SuppressLint({&quot;NewApi&quot;, &quot;UseRequireInsteadOfGet&quot;})
    private void layoutAnhXa() {
        btnQuayLai = view.findViewById(R.id.btnQuayLai);
        textTenAoNuoi = view.findViewById(R.id.textTenAoNuoi);
        textDiaChi = view.findViewById(R.id.textDiaChi);
        listView = view.findViewById(R.id.listView);
        layAoNuoi(strMaAo);
        requestQueue = Volley.newRequestQueue(Objects.requireNonNull(getActivity()));
        getWeather(strUrl);
        clickButton();
    }

    @SuppressLint(&quot;NewApi&quot;)
    private void layAoNuoi(String maAo) {
        try {
            classConnect = new ClassConnect(); //Mở kết nối đến SQL
            String sqlAoNuoi = &quot;select * from TB_AoNuoi an, TB_Tinh t, TB_Huyen h, TB_Xa x &quot; +
                    &quot;where an.MaTinh = t.MaTinh and an.MaHuyen = h.MaHuyen and an.MaXa = x.MaXa and an.MaAo = '&quot;+ maAo +&quot;'&quot;;
            ResultSet resultSetAoNuoi = classConnect.selectData(getActivity(), sqlAoNuoi);
            if (resultSetAoNuoi != null &amp;&amp; resultSetAoNuoi.next()){
                String strDiaChi = resultSetAoNuoi.getString(&quot;TenXa&quot;);
                strDiaChi = strDiaChi.concat(&quot; - &quot; + resultSetAoNuoi.getString(&quot;TenHuyen&quot;) + &quot; - &quot; + resultSetAoNuoi.getString(&quot;TenTinh&quot;));
                textTenAoNuoi.setText(resultSetAoNuoi.getString(&quot;TenAoNuoi&quot;).toUpperCase());
                textDiaChi.setText(strDiaChi);
                strKinhDo = resultSetAoNuoi.getString(&quot;KinhDo&quot;);
                strViDo = resultSetAoNuoi.getString(&quot;ViDo&quot;);
                strUrl = &quot;http://api.openweathermap.org/data/2.5/forecast?lat=&quot;+strKinhDo+&quot;&amp;lon=&quot;+strViDo+&quot;&amp;units=metric&amp;cnt=7&amp;lang=vi&amp;appid=904ddffc0e393b0d5b4191e37d10f6ae&quot;;
            }
            classConnect.CONN(getActivity()).close();
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
        }
    }

<A NAME="509"></A>    @SuppressLint(&quot;NewApi&quot;)
    private void getWeather(String url) {
        JsonObjectRequest jsonObjectRequest = new JsonObjectRequest</B></FONT>(Request.Method.GET, url, null, response -&gt; {
        <FONT color="#79d867"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#509',2,'match0-top.html#509',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>try {
            arrayListThoiTiet = new ArrayList&lt;&gt;();
            arrayListThoiTiet.clear();
            JSONArray jsonArray = response.getJSONArray(&quot;list&quot;);
            for (int i = 0; i &lt; jsonArray.length(); i++){
                JSONObject jsonObjectList = jsonArray.getJSONObject(i);

                //Chuyển sang định dạng ngày
                Calendar calendar = Calendar.getInstance();
                calendar.add(Calendar.DAY_OF_YEAR,i);
                Date date = calendar.getTime();
                @SuppressLint(&quot;SimpleDateFormat&quot;) SimpleDateFormat simpleDateFormat = new SimpleDateFormat(&quot;EEEE dd-MM-yyyy&quot;);
                String strDay = simpleDateFormat.format(date);

                JSONObject jsonObjectTemp = jsonObjectList.getJSONObject(&quot;main&quot;);
                String nhietDo = jsonObjectTemp.getString(&quot;temp&quot;);
                //Chuyển sang nhiệt độ
<A NAME="510"></A>                double doubleNhietDo = Double.parseDouble(nhietDo);
                String strNhietDo = (</B></FONT>int) doubleNhietDo + &quot;°C&quot;;

                String <FONT color="#92c7c7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#510',2,'match0-top.html#510',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>strDoAm = jsonObjectTemp.getString(&quot;humidity&quot;).concat(&quot;%&quot;);

                JSONObject jsonObjectWind = jsonObjectList.getJSONObject(&quot;wind&quot;);
                String strTocDoGio = jsonObjectWind.getString(&quot;speed&quot;).concat(&quot;m/s&quot;);

                JSONArray jsonArrayWeather = jsonObjectList.getJSONArray(&quot;weather&quot;);
                JSONObject jsonObjectWeather = jsonArrayWeather.getJSONObject(0);
                String strTrangThai = jsonObjectWeather.getString(&quot;description&quot;);
                String strImage = jsonObjectWeather.getString(&quot;icon&quot;);
                arrayListThoiTiet.add(new ClassThoiTiet(strDay, strTrangThai, strImage,strNhietDo, strTocDoGio, strDoAm));
            }
            adapterThoiTiet = new ListViewThoiTiet(getContext());
            listView.setAdapter(adapterThoiTiet);
        } catch (JSONException e) {
<A NAME="202"></A>            e</B></FONT>.printStackTrace();
            classPublic.ThongBao(getActivity(),e.getMessage());
        }
        }, error -&gt; classPublic.ThongBao(<FONT color="#717d7d"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#202',2,'match0-top.html#202',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>getActivity(),error.getMessage()));
        requestQueue.add(jsonObjectRequest);
    }

    private void clickButton() {
        btnQuayLai.setOnClickListener(v -&gt; {
        fragmentTransaction = fragmentManager.beginTransaction();
        fragmentTransaction.replace(R.id.fragment_main, new FragmentQuanLiAoNuoi());
        fragmentTransaction.commit();
        });
    }</B></FONT>
}
</PRE>
<HR>
<H3><CENTER>ThoiTiet\ListViewThoiTiet.java</CENTER></H3><HR>
<PRE>
<A NAME="543"></A><FONT color="#00ff00"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#543',2,'match0-top.html#543',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.ThoiTiet;

import android.annotation.SuppressLint;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;
import com.example.basa.R;
import com.squareup.picasso.Picasso;

import java.util.ArrayList;

public class ListViewThoiTiet extends BaseAdapter {
    private final Context mContext;
    private final LayoutInflater inflater;
    private final ArrayList&lt;ClassThoiTiet&gt; arraylist;
    public ListViewThoiTiet(Context context) {
        mContext = context;
        inflater = LayoutInflater.from(mContext);
        this.arraylist = new ArrayList&lt;&gt;();
        this.arraylist.addAll(FragmentThoiTiet.arrayListThoiTiet);
    }
    public static class ViewHolder {
        TextView textNgay, textTrangThai, textNhietDo, textTocDoGio, textDoAm;
        ImageView imageTrangThai;
    }
    @Override
    public int getCount() {
        return FragmentThoiTiet.arrayListThoiTiet.size();
    }

    @Override
    public Object getItem(int position) {
        return FragmentThoiTiet.arrayListThoiTiet.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @SuppressLint({&quot;InflateParams&quot;, &quot;SetTextI18n&quot;})
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.listview_thoitiet, null);
            holder.textNgay = convertView.findViewById(R.id.textNgay);
            holder.imageTrangThai = convertView.findViewById(R.id.imageTrangThai);
            holder.textTrangThai = convertView.findViewById(R.id.textTrangThai);
            holder.textNhietDo = convertView.findViewById(R.id.textNhietDo);
            holder.textTocDoGio = convertView.findViewById(R.id.textTocDoGio);
            holder.textDoAm = convertView.findViewById(R.id.textDoAm);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        holder.textNgay.setText(FragmentThoiTiet.arrayListThoiTiet.get(position).getStrNgay());
        Picasso.get().load(&quot;http://openweathermap.org/img/w/&quot; + FragmentThoiTiet.arrayListThoiTiet.get(position).getStrImage() +&quot;.png&quot;).into(holder.imageTrangThai);
        holder.textTrangThai.setText(FragmentThoiTiet.arrayListThoiTiet.get(position).getStrStatus().toUpperCase());
        holder.textNhietDo.setText(FragmentThoiTiet.arrayListThoiTiet.get(position).getStrNhietDo());
        holder.textTocDoGio.setText(FragmentThoiTiet.arrayListThoiTiet.get(position).getStrTocDoGio());
        holder.textDoAm.setText(FragmentThoiTiet.arrayListThoiTiet.get(position).getStrDoAm());
        return convertView;
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>TinTuc\ClassTinTucEdit.java</CENTER></H3><HR>
<PRE>
<A NAME="5"></A><FONT color="#c8c2a7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#5',2,'match0-top.html#5',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.TinTuc;

public class ClassTinTucEdit {
    private final String strMaTinTuc, strTieuDe, strNoiDung, strNgayGui, strTenCoQuan, strDiaChi;
    public ClassTinTucEdit (String strMaTinTuc, String strTieuDe, String strNoiDung, String strNgayGui,
                        String strTenCoQuan, String strDiaChi) {
        this.strMaTinTuc = strMaTinTuc;
        this.strTieuDe = strTieuDe;
        this.strNoiDung = strNoiDung;
        this.strNgayGui = strNgayGui;
        this.strTenCoQuan = strTenCoQuan;
        this.strDiaChi = strDiaChi;
    }

    public String getStrMaTinTuc() {
        return strMaTinTuc;
    }

    public String getStrTieuDe() {
        return strTieuDe;
    }

    public String getStrNoiDung() {
        return strNoiDung;
    }

    public String getStrNgayGui() {
        return strNgayGui;
    }

    public String getStrTenCoQuan() {
        return strTenCoQuan;
    }

    public String getStrDiaChi() {
        return strDiaChi;
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>TinTuc\ClassTinTucView.java</CENTER></H3><HR>
<PRE>
<A NAME="382"></A><FONT color="#827d6b"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#382',2,'match0-top.html#382',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.TinTuc;

public class ClassTinTucView {

    String strImage, strCoQuan, strDiaChi, strNgayGui, strNoiDung, strTieuDe;

    public ClassTinTucView(String strImage, String strCoQuan, String strDiaChi,
                           String strNgayGui, String strNoiDung, String strTieuDe){
        this.strImage = strImage;
        this.strCoQuan = strCoQuan;
        this.strDiaChi = strDiaChi;
        this.strNgayGui = strNgayGui;
        this.strNoiDung = strNoiDung;
        this.strTieuDe = strTieuDe;
    }

    public String getStrImage() {
        return strImage;
    }

    public String getStrCoQuan() {
        return strCoQuan;
    }

    public String getStrDiaChi() {
        return strDiaChi;
    }

    public String getStrNgayGui() {
        return strNgayGui;
    }

    public String getStrNoiDung() {
        return strNoiDung;
    }

    public String getStrTieuDe() {
        return strTieuDe;
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>TinTuc\FragmentTinTucEdit.java</CENTER></H3><HR>
<PRE>
<A NAME="620"></A><FONT color="#347235"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#620',2,'match0-top.html#620',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.TinTuc;

import android.annotation.SuppressLint;
import android.app.AlertDialog;
import android.content.Context;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.ListView;
import android.widget.SearchView;
import android.widget.TextView;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;

import com.example.basa.Class.ClassConnect;
import com.example.basa.Class.ClassPublic;
import com.example.basa.Home.FragmentHome;
import com.example.basa.Menu.FragmentMenu;
import com.example.basa.R;

import java.sql.ResultSet;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;

import static com.example.basa.Home.MainActivity.MyPREFERENCES;
import static com.example.basa.Home.MainActivity.User;
<A NAME="545"></A>
public class FragmentTinTucEdit extends Fragment implements SearchView.OnQueryTextListener{
    //Khai báo
    String strTaiKhoan, strCoQuan, ganMaTinh</B></FONT>, ganMaHuyen, <FONT color="#f660ab"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#545',2,'match0-top.html#545',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>ganMaXa;
    private View view;
    private ListView listView;
    private SearchView searchView;
    private ImageButton btnThemMoi, btnQuayLai;
<A NAME="325"></A>    private final ClassPublic classPublic = new ClassPublic();
    private ClassConnect classConnect;
    private ListViewTinTucEdit adapterTinTuc</B></FONT>;
    public static ArrayList &lt;ClassTinTucEdit&gt; <FONT color="#41a317"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#325',2,'match0-top.html#325',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>arrayListTinTuc;
    SharedPreferences sharedpreferences; //Nhớ tài khoản
    SharedPreferences.Editor editor;
    public static FragmentManager fragmentManager; //Fragment trang chủ
    public static FragmentTransaction fragmentTransaction;
    //Khai báo các đối tượng trên dialog
    private TextView textTieuDe;
    private EditText editMaTinTuc, editTenTinTuc, editNoiDung</B></FONT>;
    private Button btnDong, btnChiaSe, btnXoa;
<A NAME="148"></A>    int intDieuKienGan;
    @SuppressLint(&quot;CommitPrefEdits&quot;)
    @Nullable
    <FONT color="#82cafa"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#148',2,'match0-top.html#148',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>@Override
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);
        view = inflater.inflate(R.layout.fragment_tin_tuc_edit, container, false);
        sharedpreferences = this</B></FONT>.requireActivity().getSharedPreferences(MyPREFERENCES, Context.MODE_PRIVATE);
<A NAME="114"></A>        editor = sharedpreferences.edit();
        editor.apply();
        strTaiKhoan = sharedpreferences.getString(User,&quot;&quot;);
        strCoQuan = <FONT color="#52d017"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#114',2,'match0-top.html#114',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>classPublic.layCoQuan(strTaiKhoan,getActivity());
        layTinhHuyenXa(strTaiKhoan);
        layoutAnhXa(); //Ánh xạ các đối tượng trên layout
        return view ;
    }

    private void layTinhHuyenXa(String taikhoan) {
        try {
            classConnect = new ClassConnect();
            String sqlTinhHuyenXa = &quot;select MaTinh, MaHuyen, MaXa from TB_NguoiDung where TaiKhoan = '&quot;+taikhoan+&quot;'&quot;;
            ResultSet resultSetTinhHuyenXa = classConnect.selectData(getActivity</B></FONT>(), sqlTinhHuyenXa);
            if (resultSetTinhHuyenXa != null &amp;&amp; resultSetTinhHuyenXa.next()){
                ganMaTinh = resultSetTinhHuyenXa.getString(&quot;MaTinh&quot;);
                ganMaHuyen = resultSetTinhHuyenXa.getString(&quot;MaHuyen&quot;);
                ganMaXa = resultSetTinhHuyenXa.getString(&quot;MaXa&quot;);
            }
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, e.getMessage());
        }
    }
<A NAME="702"></A>
    @SuppressLint(&quot;NewApi&quot;)
    private void layoutAnhXa() {
        <FONT color="#50ebec"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#702',2,'match0-top.html#702',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>btnThemMoi = view.findViewById(R.id.btnThemMoi);
        btnQuayLai = view.findViewById(R.id.btnQuayLai);
        listView = view.findViewById(R.id.listView);
        searchView = view.findViewById(R.id.searchTen);
        fragmentManager = requireActivity().getSupportFragmentManager();//Chuyển fragment
        loadTinTuc();
        clickButton();
        clickListView();//Tin tức trên listView
    }
    private void loadTinTuc() {
        arrayListTinTuc = new ArrayList&lt;&gt;();
        arrayListTinTuc.clear();
        try {
            classConnect = new ClassConnect(); //Mở kết nối đến SQL
            String sqlTinTuc = &quot;select * from TB_TinTuc tt, TB_Tinh t, TB_Huyen h, TB_Xa x, TB_NguoiDung nd, TB_CoQuan cq&quot; +
                    &quot; where tt.TaiKhoan = nd.TaiKhoan and nd.MaTinh = t.MaTinh and nd.MaHuyen = h.MaHuyen and nd.MaXa = x.MaXa and nd.MaCoQuan = cq.MaCoQuan and tt.TaiKhoan = '&quot;+strTaiKhoan+&quot;' order by MaTinTuc desc&quot;;
            ResultSet resultSetTinTuc = classConnect.selectData(getActivity(), sqlTinTuc);
            if (resultSetTinTuc != null) {
                while (resultSetTinTuc</B></FONT>.next()) {
                    String strMaSo = null;
                    switch (strCoQuan){
                        case &quot;1&quot;:
<A NAME="105"></A>                            strMaSo = resultSetTinTuc.getString(&quot;TenTinh&quot;);
                            break;
                        case &quot;2&quot;:
                            strMaSo = <FONT color="#d16587"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#105',2,'match0-top.html#105',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>resultSetTinTuc.getString(&quot;TenHuyen&quot;).concat(&quot;-&quot;+resultSetTinTuc.getString(&quot;TenTinh&quot;));
                            break;
<A NAME="22"></A>                        case &quot;3&quot;:
                            strMaSo = resultSetTinTuc.getString(&quot;TenXa&quot;).concat(&quot;-&quot;+resultSetTinTuc.getString(&quot;TenHuyen&quot;).concat(&quot;-&quot;+resultSetTinTuc</B></FONT>.getString(&quot;TenTinh&quot;)));
                    }
                    <FONT color="#4cc417"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#22',2,'match0-top.html#22',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>arrayListTinTuc.add(new ClassTinTucEdit(resultSetTinTuc.getString(&quot;MaTinTuc&quot;), resultSetTinTuc.getString(&quot;TieuDe&quot;),
                            resultSetTinTuc.getString(&quot;NoiDung&quot;), resultSetTinTuc.getString(&quot;NgayGui&quot;),resultSetTinTuc.getString(&quot;TenCoQuan&quot;),strMaSo));
                }
            }
            if (arrayListTinTuc.isEmpty()){
                classPublic.ThongBao(getActivity(),&quot;Bạn chưa thêm tin tức&quot;);
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối đến SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, e</B></FONT>.getMessage());
        }
        adapterTinTuc = new ListViewTinTucEdit(getContext());
        listView.setAdapter(adapterTinTuc);
        searchView.setOnQueryTextListener(this);
    }


    private void clickButton() {
        btnThemMoi.setOnClickListener(v -&gt; {
            insertKinhNghiem(-1);
            intDieuKienGan = 0;
        });
        btnQuayLai.setOnClickListener(view -&gt; {
            fragmentTransaction = fragmentManager.beginTransaction();
            fragmentTransaction.replace(R.id.fragment_main, new FragmentMenu());
            fragmentTransaction.commit();
        });
    }
<A NAME="564"></A>    private void clickListView() {
        listView.setOnItemClickListener((parent, view, position, id) -&gt; insertKinhNghiem(position));
    }
    private <FONT color="#c57717"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#564',2,'match0-top.html#564',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>void insertKinhNghiem(final int intChiSo) {
        LayoutInflater inflater = getLayoutInflater();
        @SuppressLint(&quot;InflateParams&quot;) View alertLayout = inflater.inflate(R.layout.dialog_tin_tuc, null);
        textTieuDe = alertLayout.findViewById(R.id.textTieuDe);
        editMaTinTuc = alertLayout.findViewById(R.id.editMaTinTuc);
        editTenTinTuc = alertLayout.findViewById(R.id.editTenTinhTuc);
        editNoiDung = alertLayout.findViewById(R.id.editNoiDung);
        btnChiaSe = alertLayout.findViewById(R.id.btnChiaSe);
        btnDong = alertLayout.findViewById(R.id.btnDong);
<A NAME="305"></A>        btnXoa = alertLayout.findViewById(R.id.btnXoa);
        final AlertDialog.Builder alert = new AlertDialog.Builder(getActivity</B></FONT>());
        intDieuKienGan = 1;
        <FONT color="#3bb9ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#305',2,'match0-top.html#305',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>alert.setView(alertLayout);
        alert.setCancelable(false);
        final AlertDialog dialog = alert.create();
        if (intChiSo == -1) {
<A NAME="566"></A>            btnXoa.setEnabled(false);//Không cho phép ấn nút xóa
            String strTieuDe = &quot;THÊM MỚI TIN TỨC&quot;</B></FONT>;
            textTieuDe.setText(strTieuDe);
            <FONT color="#e57ded"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#566',2,'match0-top.html#566',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>editMaTinTuc.setText(&quot;&quot;);
            String strNut = &quot;THÊM MỚI&quot;; //Đổi text nút lưu lại thành thêm mới
            btnChiaSe.setText(strNut);
        } else {
            btnXoa.setEnabled(true);//Cho phép ấn nút xóa
            String strTieuDe = &quot;CẬP NHẬT TIN TỨC&quot;;
            textTieuDe.setText(strTieuDe);
            String strNut = &quot;CẬP NHẬT&quot;;
            btnChiaSe.setText(strNut);//Đổi text nút lưu lại thành cập nhật
            editMaTinTuc.setText(arrayListTinTuc.get(intChiSo).getStrMaTinTuc()); //Gán giá trị mã kn
            editTenTinTuc.setText(arrayListTinTuc.get(intChiSo).getStrTieuDe()); //Gán giá trị tên kn
            editNoiDung.setText(arrayListTinTuc.get(intChiSo).getStrNoiDung());//Gán giá trị nt
        }
        btnChiaSe</B></FONT>.setOnClickListener(v -&gt; {
        try {
            if (editTenTinTuc.getText().length()!= 0){
                if (editNoiDung.getText().length()!= 0){
                    Date date_HienTai = new Date();//Lấy ngày h hiện tại
                    @SuppressLint(&quot;SimpleDateFormat&quot;) SimpleDateFormat date_NgayThang = new SimpleDateFormat(&quot;dd/MM/yyyy hh:mm:ss&quot;);
                    String sqlTinTuc;
                    if (intChiSo == -1) { //Thêm mới
                        String strMaSo = null;
                        switch (strCoQuan){
                            case &quot;1&quot;:
                                strMaSo = ganMaTinh;
                                break;
                            case &quot;2&quot;:
                                strMaSo = ganMaHuyen;
                                break;
                            case &quot;3&quot;:
                                strMaSo = ganMaXa;
                        }
                        sqlTinTuc = &quot;insert into TB_TinTuc (TaiKhoan, TieuDe, NoiDung, MaSo, NgayGui) values ('&quot;+strTaiKhoan+&quot;',N'&quot;+editTenTinTuc.getText()+&quot;', N'&quot;+editNoiDung.getText()+&quot;','&quot;+strMaSo+&quot;', '&quot;+date_NgayThang.format(date_HienTai)+&quot;')&quot;;
                    } else {
                        sqlTinTuc = &quot;update TB_TinTuc set TieuDe = N'&quot;+editTenTinTuc.getText()+&quot;', NoiDung = N'&quot;+editNoiDung.getText()+&quot;', NgayGui = '&quot;+date_NgayThang.format(date_HienTai)+&quot;' where MaTinTuc = '&quot;+editMaTinTuc.getText()+&quot;'&quot;;
                    }
                    classConnect = new ClassConnect(); //Mở kết nối SQL
<A NAME="309"></A>                    //Đóng dialog sau đó gọi load mới danh sách
                    if (classConnect.updateData(getActivity(), sqlTinTuc) == 1) {
                        if (intChiSo == -1) {
                            <FONT color="#4e9258"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#309',2,'match0-top.html#309',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>classPublic.ThongBao(getActivity(), &quot;Thêm mới tin tức thành công&quot;);
                        } else {
                            classPublic.ThongBao(getActivity(), &quot;Cập nhật tin tức thành công&quot;);
                        }
                    }
                    else {
                        classPublic.ThongBao(getActivity(),&quot;Không cập nhật được tin tức&quot;);
                    }</B></FONT>
                    dialog.cancel(); //Đóng dialog sau đó gọi load mới danh sách
                    loadTinTuc();
                }
                else {
<A NAME="706"></A>                    classPublic.ThongBao(getActivity(),&quot;Vui lòng nhập nội dung&quot;);
                }
            }
            <FONT color="#b041ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#706',2,'match0-top.html#706',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>else {
                classPublic.ThongBao(getActivity(),&quot;Vui lòng nhập tiêu đề tin tức&quot;);
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
        } catch (Exception e){
            Log.e(&quot;TAG&quot;, e.getMessage());
<A NAME="39"></A>        }</B></FONT>
        });
        btnXoa.setOnClickListener(v -&gt; {
            <FONT color="#152dc6"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#39',2,'match0-top.html#39',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>if (editMaTinTuc.getText().length() != 0) {
                dialogXoa(editMaTinTuc.getText().toString(), editTenTinTuc.getText().toString());
                dialog.cancel();
            }
            else {
                classPublic.ThongBao(getActivity(),&quot;Không tìm thấy mã tỉnh để xóa&quot;);
<A NAME="40"></A>            }</B></FONT>
        });
        btnDong.setOnClickListener(v -&gt; dialog.cancel());
        <FONT color="#347235"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#40',2,'match0-top.html#40',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>dialog.show(); //Show giao diện thêm mới kinh nghiệm
    }
    private void dialogXoa(final String maTinTuc, final String tenTinTuc){
        //Hiện hộp thoại thông báo xóa tỉnh
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        builder.setTitle(&quot;XÓA TIN TỨC&quot;);
        builder.setIcon(R.drawable.ic_delete);
<A NAME="41"></A>        builder.setMessage(&quot;Bạn có muốn xóa tin tức &quot;+tenTinTuc+&quot; không?&quot;);
        builder.setCancelable(false);
        builder</B></FONT>.setPositiveButton(&quot;Đồng ý&quot;, (dialogInterface, i) -&gt; {
        <FONT color="#f87a17"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#41',2,'match0-top.html#41',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>try {
            classConnect = new ClassConnect(); //Mở kết nối SQL
            String sqlTinh = &quot;delete TB_TinTuc where MaTinTuc = '&quot;+ maTinTuc +&quot;'&quot;;
            if (classConnect.updateData(getActivity(), sqlTinh) == 1){
                classPublic.ThongBao(getActivity(),&quot;Xóa tin tức thành công&quot;);
                loadTinTuc();
            }
            else {
                classPublic.ThongBao(getActivity(),&quot;Không xóa được tin tức&quot;);
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, e</B></FONT>.getMessage());
        }
        });
<A NAME="493"></A>        builder.setNegativeButton(&quot;Hủy bỏ&quot;, (dialogInterface, i) -&gt; dialogInterface.dismiss());
        AlertDialog alertDialog = builder.create();
        alertDialog.show();
    <FONT color="#faafba"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#493',2,'match0-top.html#493',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
    @Override
    public boolean onQueryTextSubmit(String query) {
        return false;
    }

    @Override
    public boolean onQueryTextChange(String newText) { //Tìm theo tên kinh nghiệm
        adapterTinTuc.filter(newText);
        return false;
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>TinTuc\FragmentTinTucHome.java</CENTER></H3><HR>
<PRE>
<A NAME="125"></A><FONT color="#f88017"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#125',2,'match0-top.html#125',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.TinTuc;

import android.annotation.SuppressLint;
import android.content.Context;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ImageButton;
import android.widget.ListView;
import android.widget.SearchView;
import android.widget.Spinner;

import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;

import com.example.basa.Class.ClassConnect;
import com.example.basa.Class.ClassPublic;
import com.example.basa.Home.FragmentHome;
import com.example.basa.R;

import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.Objects;

import static com.example.basa.Home.MainActivity.MyPREFERENCES;
import static com.example.basa.Home.MainActivity.User;

public class</B></FONT> FragmentTinTucHome extends Fragment implements SearchView.OnQueryTextListener {
<A NAME="126"></A>
    //Phần khai báo
    View view;
    ListView <FONT color="#b041ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#126',2,'match0-top.html#126',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>listView;
    ImageButton btnQuayLai;
    SearchView searchView;
    Spinner cmdTinh, cmdHuyen, cmdXa;
    public static ArrayList&lt;ClassTinTucView&gt; arrayListTinTuc;
    ListViewTinTucHome adapterTinTuc;
    //Khai báo danh sách tỉnh
    ArrayList&lt;String&gt; listMaTinh = new ArrayList&lt;&gt;();
    ArrayList&lt;String&gt; listTenTinh = new ArrayList&lt;&gt;();
    //Khai báo danh sách huyện
    ArrayList&lt;String&gt; listMaHuyen = new ArrayList&lt;&gt;();
    ArrayList&lt;String&gt; listTenHuyen = new ArrayList&lt;&gt;();
    //Khai báo danh sách xã
<A NAME="506"></A>    ArrayList&lt;String&gt; listMaXa = new ArrayList&lt;&gt;();
    ArrayList&lt;String&gt; listTenXa = new ArrayList&lt;&gt;();
    ClassConnect classConnect;
    ClassPublic classPublic</B></FONT> = <FONT color="#c57717"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#506',2,'match0-top.html#506',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>new ClassPublic();
    String strTaiKhoan, strMaTinh, strMaHuyen, strMaXa, ganMaTinh, ganMaHuyen, ganMaXa;
    public static FragmentManager fragmentManager; //Fragment trang chủ
    public static FragmentTransaction fragmentTransaction;
    SharedPreferences sharedpreferences; //Nhớ tài khoản
    SharedPreferences.Editor editor</B></FONT>;
    int intDieuKienGan;
<A NAME="689"></A>    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
        view = <FONT color="#b38481"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#689',2,'match0-top.html#689',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>inflater.inflate(R.layout.fragment_tin_tuc_home, container, false);
<A NAME="254"></A>        fragmentManager = requireActivity().getSupportFragmentManager();
        sharedpreferences = this.requireActivity().getSharedPreferences(MyPREFERENCES, Context.MODE_PRIVATE);
        editor = sharedpreferences</B></FONT>.edit();
        <FONT color="#4cc417"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#254',2,'match0-top.html#254',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>editor.apply();
        strTaiKhoan = sharedpreferences.getString(User,&quot;&quot;);
        layTinhHuyenXa(strTaiKhoan);
        layoutAnhXa();
        return view;
    }
    private void layoutAnhXa() {
        listView = view.findViewById(R.id.listView);
        searchView = view.findViewById(R.id.searchTen);
        btnQuayLai = view.findViewById(R.id.btnQuayLai);
        btnQuayLai</B></FONT>.setOnClickListener(view -&gt; {
            fragmentTransaction = fragmentManager.beginTransaction();
            fragmentTransaction.replace(R.id.fragment_main, new FragmentHome());
            fragmentTransaction.commit();
        });
        cmdTinh = view.findViewById(R.id.cmdTinh);
<A NAME="226"></A>        cmdHuyen= view.findViewById(R.id.cmdHuyen);
        cmdXa = view.findViewById(R.id.cmdXa);
        intDieuKienGan = 1;
        <FONT color="#2b60de"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#226',2,'match0-top.html#226',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>loadTinh();
    }
    private void layTinhHuyenXa(String taikhoan) {
        try {
            classConnect = new ClassConnect();
            String sqlTinhHuyenXa = &quot;select MaTinh, MaHuyen, MaXa from TB_NguoiDung where TaiKhoan = '&quot;+taikhoan+&quot;'&quot;;
            ResultSet resultSetTinhHuyenXa = classConnect.selectData(getActivity(), sqlTinhHuyenXa);
            if (resultSetTinhHuyenXa != null &amp;&amp; resultSetTinhHuyenXa.next()){
                ganMaTinh = resultSetTinhHuyenXa.getString(&quot;MaTinh&quot;);
                ganMaHuyen = resultSetTinhHuyenXa</B></FONT>.getString(&quot;MaHuyen&quot;);
                ganMaXa = resultSetTinhHuyenXa.getString(&quot;MaXa&quot;);
            }
<A NAME="130"></A>        }catch (Exception e){
            Log.e(&quot;TAG&quot;, e.getMessage());
        }
    <FONT color="#f52887"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#130',2,'match0-top.html#130',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
    @SuppressLint(&quot;NewApi&quot;)
    //Load danh sách tỉnh lên Spinner
    private void loadTinh(){
        listMaTinh.clear(); // Xóa danh sách tỉnh
        listTenTinh.clear();
        try{
            classConnect = new ClassConnect(); //Mở kết nối SQL
            String sqlTinh = &quot;select MaTinh, TenTinh from TB_Tinh&quot;;//Câu lệnh lấy ra từ sql để gán lên cmd
            ResultSet resultSetTinh = classConnect.selectData(getActivity(), sqlTinh);
            if (resultSetTinh != null){
                while (resultSetTinh.next()){
                    listMaTinh.add(resultSetTinh.getString(&quot;MaTinh&quot;));
                    listTenTinh.add(resultSetTinh.getString(&quot;TenTinh&quot;));
                }
<A NAME="57"></A>                ArrayAdapter&lt;String&gt; dataTinh = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenTinh);
                dataTinh.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
                cmdTinh</B></FONT>.setAdapter(dataTinh);
            <FONT color="#980517"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#57',2,'match0-top.html#57',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
            classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
<A NAME="188"></A>        }catch (Exception e){
            Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
        }</B></FONT>
        <FONT color="#f52887"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#188',2,'match0-top.html#188',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>if (listMaTinh.isEmpty()){ //Nếu chưa nhập tỉnh thì không hiển thị huyện
<A NAME="157"></A>            listMaHuyen.clear(); // Xóa danh sách huyện
            listTenHuyen.clear();
            ArrayAdapter&lt;String&gt; dataHuyen = new ArrayAdapter&lt;&gt;(getActivity</B></FONT>(), android.R.layout.simple_spinner_item,listTenHuyen);
            <FONT color="#f87a17"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#157',2,'match0-top.html#157',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>dataHuyen.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
            cmdHuyen.setAdapter(dataHuyen);
        }
        cmdTinh.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaTinh.isEmpty()) {
<A NAME="158"></A>                    strMaTinh = listMaTinh.get(position);
                    if (intDieuKienGan == 1){
                        cmdTinh.setSelection(listMaTinh</B></FONT>.indexOf(ganMaTinh));
                        <FONT color="#c57717"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#158',2,'match0-top.html#158',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>strMaTinh = ganMaTinh;
                    }
                    loadHuyen(strMaTinh); //Load huyện theo tỉnh
                }
            }

            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }

    @SuppressLint(&quot;NewApi&quot;)
    private void loadHuyen(String maTinh){
        listMaHuyen.clear(); // Xóa danh sách huyện
        listTenHuyen.clear();
        try {
            classConnect = new ClassConnect(); //Mở kết nối SQL
            String sqlHuyen = &quot;select MaHuyen, TenHuyen from TB_Huyen where MaTinh = '&quot;+maTinh+&quot;'&quot;;
            ResultSet resultSetHuyen = classConnect.selectData(getActivity(), sqlHuyen);
            if (resultSetHuyen != null){
                while (resultSetHuyen.next()){
                    listMaHuyen.add(resultSetHuyen.getString(&quot;MaHuyen&quot;));
                    listTenHuyen.add(resultSetHuyen.getString(&quot;TenHuyen&quot;));
                }
                ArrayAdapter&lt;String&gt; dataHuyen = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenHuyen);
                dataHuyen.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
<A NAME="450"></A>                cmdHuyen</B></FONT>.setAdapter(dataHuyen);
            }
            else {
                <FONT color="#e57ded"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#450',2,'match0-top.html#450',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>Log.e(&quot;TAG&quot;, &quot;Chưa cập nhật danh sách huyện&quot;);
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
        }
        if (listMaHuyen.isEmpty()){ //Nếu chưa nhập huyện thì không hiển thị xã
            listMaXa.clear(); // Xóa danh sách xã
            listTenXa.clear();
<A NAME="454"></A>            ArrayAdapter&lt;String&gt; dataXa = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenXa);
            dataXa.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
            cmdXa</B></FONT>.setAdapter(dataXa);
        <FONT color="#c57726"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#454',2,'match0-top.html#454',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
        cmdHuyen.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaHuyen.isEmpty()) {
<A NAME="161"></A>                    strMaHuyen = listMaHuyen.get(position);
                    if (intDieuKienGan == 1){
                        cmdHuyen.setSelection(listMaHuyen</B></FONT>.indexOf(ganMaHuyen));
                        <FONT color="#79d867"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#161',2,'match0-top.html#161',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>strMaHuyen = ganMaHuyen;
                    }
                    loadXa(strMaHuyen); //Load xã theo huyện
                }
            }

            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }

    @SuppressLint(&quot;NewApi&quot;)
    private void loadXa(String maHuyen){
        listMaXa.clear();
        listTenXa.clear();
        try {
            classConnect = new ClassConnect(); //Mở kết nối SQL
            String sqlXa = &quot;select MaXa, TenXa from TB_Xa where MaHuyen = '&quot;+maHuyen+&quot;'&quot;;
            ResultSet resultSetXa = classConnect.selectData(getActivity(), sqlXa);
            if (resultSetXa != null){
                while (resultSetXa.next()){
                    listMaXa.add(resultSetXa.getString(&quot;MaXa&quot;));
                    listTenXa.add(resultSetXa.getString(&quot;TenXa&quot;));
                }
                ArrayAdapter&lt;String&gt; dataXa = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenXa);
                dataXa.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
<A NAME="46"></A>                cmdXa</B></FONT>.setAdapter(dataXa);
            }
            else {
                <FONT color="#92c7c7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#46',2,'match0-top.html#46',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>Log.e(&quot;TAG&quot;, &quot;Chưa cập nhật danh sách huyện&quot;);
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
        }
        cmdXa.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaXa</B></FONT>.isEmpty()) {
                    strMaXa = listMaXa.get(position);
                    if (intDieuKienGan == 1){
                        cmdXa.setSelection(listMaXa.indexOf(ganMaXa));
                        strMaXa = ganMaXa;
                    }
<A NAME="200"></A>                    loadTinTuc();
                }
                intDieuKienGan = 0;
            <FONT color="#95b9c7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#200',2,'match0-top.html#200',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }
    private void loadTinTuc() {
        arrayListTinTuc = new ArrayList&lt;&gt;();
        arrayListTinTuc.clear();
        try{
            classConnect = new ClassConnect(); //Mở kết nối đến SQL
            String sqlTinTuc;
                sqlTinTuc = &quot;select Anh, TenCoQuan, NgayGui, TieuDe, NoiDung, nd.MaCoQuan, TenTinh, TenHuyen, TenXa &quot; +
                        &quot;from TB_TinTuc tt, TB_NguoiDung nd, TB_CoQuan cq, TB_Tinh t, TB_Huyen h, TB_Xa x &quot; +
                        &quot;where tt.TaiKhoan = nd.TaiKhoan and nd.MaCoQuan = cq.MaCoQuan and nd.MaTinh = t.MaTinh and &quot; +
                        &quot;nd.MaHuyen = h.MaHuyen and nd.MaXa = x.MaXa and &quot; +
                        &quot;(tt.MaSo = '&quot;+ strMaTinh +&quot;' or tt.MaSo = '&quot;+ strMaHuyen +&quot;' or tt.MaSo = '&quot;+ strMaXa +&quot;') &quot; +
                        &quot;order by MaTinTuc desc&quot;;
            ResultSet resultSetTinTuc = classConnect.selectData(getActivity(), sqlTinTuc);
            if (resultSetTinTuc != null){
                while (resultSetTinTuc</B></FONT>.next()){
                    String strDiaChi = null;
                    switch (resultSetTinTuc.getString(&quot;MaCoQuan&quot;)){
                        case &quot;1&quot;:
                            strDiaChi = resultSetTinTuc.getString(&quot;TenTinh&quot;);
                            break;
                        case &quot;2&quot;:
                            String str = resultSetTinTuc.getString(&quot;TenHuyen&quot;);
                            strDiaChi = str.concat(&quot; - &quot; + resultSetTinTuc.getString(&quot;TenTinh&quot;));
                            break;
                        case &quot;3&quot;:
                            String str1 = resultSetTinTuc.getString(&quot;TenXa&quot;);
                            strDiaChi = str1.concat(&quot; - &quot; + resultSetTinTuc.getString(&quot;TenHuyen&quot;) + &quot; - &quot; + resultSetTinTuc.getString(&quot;TenTinh&quot;));
                            break;
                    }
                    arrayListTinTuc.add(new ClassTinTucView(resultSetTinTuc.getString(&quot;Anh&quot;), resultSetTinTuc.getString(&quot;TenCoQuan&quot;), strDiaChi,
                            resultSetTinTuc.getString(&quot;NgayGui&quot;), resultSetTinTuc.getString(&quot;NoiDung&quot;), resultSetTinTuc.getString(&quot;TieuDe&quot;)));
<A NAME="51"></A>                }
            }
            else {
                <FONT color="#b38481"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#51',2,'match0-top.html#51',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>classPublic.ThongBao(getActivity(),&quot;Thông báo! Đang cập nhật tin tức nông vụ&quot;);
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối đến SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
        }
        adapterTinTuc = new ListViewTinTucHome(getContext());
        listView.setAdapter(adapterTinTuc);
        searchView.setOnQueryTextListener(this);
    }
    @Override
    public boolean onQueryTextSubmit(String query) {
        return false;
    }

    @Override
    public boolean onQueryTextChange(String newText) { //Tìm theo cơ quan, tiêu đề
        adapterTinTuc.filter(newText);
        return false;
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>TinTuc\FragmentTinTucView.java</CENTER></H3><HR>
<PRE>
<A NAME="253"></A>package com.example.basa.TinTuc;

import android.annotation.SuppressLint;
<FONT color="#00ff00"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#253',2,'match0-top.html#253',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.content.Context;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ImageButton;
import android.widget.ListView;
import android.widget.SearchView;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;

import com.example.basa.AoNuoi.FragmentQuanLiAoNuoi;
import com.example.basa.Class.ClassConnect;
import com.example.basa.Class.ClassPublic;
import com.example.basa.R;

import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.Objects;

import static com.example.basa.Home.MainActivity.MyPREFERENCES;
import static com.example.basa.Home.MainActivity.User;

public class FragmentTinTucView extends Fragment implements SearchView.OnQueryTextListener {

    //Phần khai báo
    View view;
    ListView listView;
    ImageButton btnQuayLai;
    SearchView searchView;
    static ArrayList&lt;ClassTinTucView&gt; arrayListTinTuc;
    ListViewTinTucView adapterTinTuc;
    ClassConnect classConnect;
    ClassPublic classPublic = new ClassPublic();
    String strTaiKhoan, strMaAo, strLoaiTaiKhoan;
    public static FragmentManager fragmentManager; //Fragment trang chủ
    public static FragmentTransaction fragmentTransaction;
<A NAME="212"></A>    SharedPreferences sharedpreferences</B></FONT>; //Nhớ tài khoản
    SharedPreferences.Editor editor;

    <FONT color="#348781"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#212',2,'match0-top.html#212',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>@SuppressLint({&quot;NewApi&quot;, &quot;UseRequireInsteadOfGet&quot;})
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);
        view = inflater.inflate(R.layout.fragment_tin_tuc_view, container, false);
        fragmentManager = Objects.requireNonNull(getActivity()).getSupportFragmentManager();
        sharedpreferences = Objects.requireNonNull(this.getActivity()).getSharedPreferences(MyPREFERENCES, Context.MODE_PRIVATE);
        editor = sharedpreferences.edit();
        editor.apply();
        strTaiKhoan = sharedpreferences.getString(User,&quot;&quot;);
<A NAME="337"></A>        strLoaiTaiKhoan = classPublic.layLoaiTaiKhoan(strTaiKhoan,getActivity</B></FONT>());
        Bundle bundle = this.getArguments();
        if (bundle != null) {
            strMaAo = <FONT color="#d16587"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#337',2,'match0-top.html#337',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>bundle.getString(&quot;MaAo&quot;);//Lấy mã ao
        }
        layoutAnhXa(); //Ánh xạ các đối tượng trên layout
        return view;
    }

    private void layoutAnhXa() {
        listView = view.findViewById(R.id.listView);
        searchView = view.findViewById(R.id.searchTen);
        btnQuayLai = view</B></FONT>.findViewById(R.id.btnQuayLai);
        btnQuayLai.setOnClickListener(view -&gt; {
            fragmentTransaction = fragmentManager.beginTransaction();
<A NAME="275"></A>            fragmentTransaction.replace(R.id.fragment_main, new FragmentQuanLiAoNuoi());
            fragmentTransaction.commit();
        });
        loadDanhSachTinTuc(<FONT color="#c22817"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#275',2,'match0-top.html#275',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>Integer.parseInt(strMaAo));//Tin tức theo mã ao
    }

    @SuppressLint(&quot;NewApi&quot;)
    private void loadDanhSachTinTuc(Integer maAo){
        arrayListTinTuc = new ArrayList&lt;&gt;();
        arrayListTinTuc.clear();
        try{
            classConnect = new ClassConnect(); //Mở kết nối đến SQL
            String sqlTinTuc;
                sqlTinTuc = &quot;select Anh, TenCoQuan, NgayGui, TieuDe, NoiDung, nd.MaCoQuan, TenTinh, TenHuyen, TenXa &quot; +
                        &quot;from TB_TinTuc tt, TB_NguoiDung nd, TB_CoQuan cq, TB_Tinh t, TB_Huyen h, TB_Xa x, TB_AoNuoi an &quot; +
                        &quot;where tt.TaiKhoan = nd.TaiKhoan and nd.MaCoQuan = cq.MaCoQuan and nd.MaTinh = t.MaTinh and &quot; +
                        &quot;nd.MaHuyen = h.MaHuyen and nd.MaXa = x.MaXa and nd.LoaiTaiKhoan = 5 and &quot; +
                        &quot;(tt.MaSo = an.MaTinh or tt.MaSo = an.MaHuyen or tt.MaSo = an.MaXa) and an.MaAo = '&quot; + maAo + &quot;' order by MaTinTuc desc&quot;;

            ResultSet resultSetTinTuc = classConnect.selectData(getActivity(), sqlTinTuc);
            if (resultSetTinTuc != null){
                while (resultSetTinTuc</B></FONT>.next()){
                    String strDiaChi = null;
                    switch (resultSetTinTuc.getString(&quot;MaCoQuan&quot;)){
                        case &quot;1&quot;:
                            strDiaChi = resultSetTinTuc.getString(&quot;TenTinh&quot;);
                            break;
                        case &quot;2&quot;:
                            String str = resultSetTinTuc.getString(&quot;TenHuyen&quot;);
                            strDiaChi = str.concat(&quot; - &quot; + resultSetTinTuc.getString(&quot;TenTinh&quot;));
                            break;
                        case &quot;3&quot;:
                            String str1 = resultSetTinTuc.getString(&quot;TenXa&quot;);
                            strDiaChi = str1.concat(&quot; - &quot; + resultSetTinTuc.getString(&quot;TenHuyen&quot;) + &quot; - &quot; + resultSetTinTuc.getString(&quot;TenTinh&quot;));
                            break;
                    }
                    arrayListTinTuc.add(new ClassTinTucView(resultSetTinTuc.getString(&quot;Anh&quot;), resultSetTinTuc.getString(&quot;TenCoQuan&quot;), strDiaChi,
                            resultSetTinTuc.getString(&quot;NgayGui&quot;), resultSetTinTuc.getString(&quot;NoiDung&quot;), resultSetTinTuc.getString(&quot;TieuDe&quot;)));
<A NAME="61"></A>                }
            }
            else {
                <FONT color="#6cc417"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#61',2,'match0-top.html#61',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>classPublic.ThongBao(getActivity(),&quot;Thông báo! Đang cập nhật tin tức nông vụ&quot;);
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối đến SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
        }
        adapterTinTuc = new ListViewTinTucView(getContext());
        listView.setAdapter(adapterTinTuc);
        searchView.setOnQueryTextListener(this);
    }
    @Override
    public boolean onQueryTextSubmit(String query) {
        return false;
    }

    @Override
    public boolean onQueryTextChange(String newText) { //Tìm theo tên kinh nghiệm
        adapterTinTuc.filter(newText);
        return false;
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>TinTuc\ListViewTinTucEdit.java</CENTER></H3><HR>
<PRE>
<A NAME="666"></A><FONT color="#717d7d"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#666',2,'match0-top.html#666',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.TinTuc;

import android.annotation.SuppressLint;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.TextView;

import com.example.basa.R;
import com.example.basa.Class.ClassPublic;

import java.util.ArrayList;
import java.util.Locale;

public class ListViewTinTucEdit extends BaseAdapter {
    private final ClassPublic classPublic</B></FONT> = new ClassPublic();
<A NAME="238"></A>    private final Context mContext;
    private final LayoutInflater inflater;
    private final ArrayList&lt;ClassTinTucEdit&gt; arraylist;
    public <FONT color="#50ebec"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#238',2,'match0-top.html#238',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>ListViewTinTucEdit(Context context){
        mContext = context;
        inflater = LayoutInflater.from(mContext);
        this.arraylist = new ArrayList&lt;&gt;();
        this.arraylist.addAll(FragmentTinTucEdit.arrayListTinTuc);
    }
    public static class ViewHolder {
        TextView textTieuDe;
        TextView textNoiDung;
        TextView textTenCoQuan;
        TextView textNgayGui;
        TextView textDiaChi;
    }
    @Override
    public int getCount() {
        return FragmentTinTucEdit.arrayListTinTuc.size();
    }
    @Override
    public Object getItem(int position) {
        return FragmentTinTucEdit.arrayListTinTuc.get(position);
    }
    @Override
    public long getItemId(int position) {
        return position;
    }
    @Override
    @SuppressLint({&quot;InflateParams&quot;, &quot;SetTextI18n&quot;})
    public View getView(int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.listview_tintuc_edit, null);
            holder.textTieuDe = convertView.findViewById(R.id.textTieuDe);
            holder.textDiaChi = convertView.findViewById(R.id.textDiaChi);
            holder.textNoiDung = convertView.findViewById(R.id.textNoiDung);
            holder.textNgayGui = convertView.findViewById(R.id.textNgayGui);
            holder.textTenCoQuan = convertView.findViewById(R.id.textTenCoQuan);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        holder.textTieuDe.setText(FragmentTinTucEdit.arrayListTinTuc.get(position).getStrTieuDe());
        holder.textDiaChi.setText(FragmentTinTucEdit.arrayListTinTuc.get(position).getStrDiaChi());
<A NAME="367"></A>        holder.textNoiDung.setText(FragmentTinTucEdit</B></FONT>.arrayListTinTuc.get(position).getStrNoiDung());
        holder.textTenCoQuan.setText(FragmentTinTucEdit.arrayListTinTuc.get(position).getStrTenCoQuan());
        holder.textNgayGui.setText(FragmentTinTucEdit.arrayListTinTuc.get(position).getStrNgayGui());
        <FONT color="#4e9258"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#367',2,'match0-top.html#367',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>return convertView;
    }
    public void filter(String charText) {
        charText = charText.toLowerCase(Locale.getDefault());
        FragmentTinTucEdit.arrayListTinTuc.clear();
        if (charText.length() == 0) {
            FragmentTinTucEdit.arrayListTinTuc.addAll(arraylist);
        } else {
            for (ClassTinTucEdit wp : arraylist) {
                if (wp.getStrTenCoQuan().toLowerCase(Locale.getDefault()).contains(charText)||wp</B></FONT>.getStrNoiDung().toLowerCase(Locale.getDefault()).contains(charText)
                        ||wp.getStrTieuDe().toLowerCase(Locale.getDefault()).contains(charText)) {
                    FragmentTinTucEdit.arrayListTinTuc.add(wp);
                }
            }
        }
        notifyDataSetChanged();
    }
}
</PRE>
<HR>
<H3><CENTER>TinTuc\ListViewTinTucHome.java</CENTER></H3><HR>
<PRE>
<A NAME="347"></A>package com.example.basa.TinTuc;

<FONT color="#980517"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#347',2,'match0-top.html#347',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.annotation.SuppressLint;
import android.app.Activity;
import android.content.Context;
import android.net.ConnectivityManager;
import android.speech.tts.TextToSpeech;
import android.text.Html;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.TextView;

import com.example.basa.Class.ClassPublic;
import com.example.basa.R;

import java.util.ArrayList;
import java.util.Locale;
import java.util.Objects;

public class ListViewTinTucHome extends BaseAdapter {

    Context mContext;
    LayoutInflater inflater;
    ArrayList&lt;ClassTinTucView&gt; arraylist;
    ClassPublic classPublic;
    TextToSpeech tts;

    public ListViewTinTucHome(Context context) {
        mContext = context;
        inflater = LayoutInflater.from(mContext);
        this.arraylist = new ArrayList&lt;&gt;();
<A NAME="348"></A>        this.arraylist.addAll(FragmentTinTucHome.arrayListTinTuc);
    }
    public static class</B></FONT> ViewHolder {
        ImageView <FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#348',2,'match0-top.html#348',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>imageView;
        TextView textCoQuan, textDiaChi, textNgayGui, textNoiDung, textTieuDe;
        ImageButton btnVolumeUp, btnVolumeOff;
    }
    @Override
    public int getCount() {
        return FragmentTinTucHome.arrayListTinTuc.size();
    }

    @Override
    public Object getItem(int position) {
        return FragmentTinTucHome.arrayListTinTuc.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @SuppressLint({&quot;InflateParams&quot;, &quot;NewApi&quot;, &quot;MissingPermission&quot;, &quot;SetTextI18n&quot;})
    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.listview_tintuc_view, null);
            holder.imageView = convertView.findViewById(R.id.imgChuDe);
            holder.textCoQuan = convertView.findViewById(R.id.textCoQuan);
            holder.textDiaChi = convertView.findViewById(R.id.textDiaChi);
            holder.textNgayGui = convertView.findViewById(R.id.textNgayGui);
            holder.btnVolumeUp = convertView.findViewById(R.id.btnVolumeUp);
            holder.btnVolumeOff = convertView.findViewById(R.id.btnVolumeOff);
            holder.textNoiDung = convertView.findViewById(R.id.textNoiDung);
            holder.textTieuDe = convertView</B></FONT>.findViewById(R.id.textTieuDe);
            convertView.setTag(holder);
        } else {
<A NAME="697"></A>            holder = (ViewHolder) convertView.getTag();
        }
        //Kiểm tra kết nối đến hosting
        ConnectivityManager <FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#697',2,'match0-top.html#697',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>connectivityManager = (ConnectivityManager) mContext.getSystemService (Context.CONNECTIVITY_SERVICE);
        if(Objects.requireNonNull(connectivityManager).getActiveNetworkInfo() != null &amp;&amp; Objects.requireNonNull(connectivityManager.getActiveNetworkInfo()).isAvailable()
                &amp;&amp; connectivityManager</B></FONT>.getActiveNetworkInfo().isConnected()) {
<A NAME="724"></A>            String strAnh = FragmentTinTucHome.arrayListTinTuc.get(position).getStrImage();
            classPublic = new ClassPublic();
            if (!strAnh.isEmpty()) {
                <FONT color="#717d7d"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#724',2,'match0-top.html#724',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>classPublic.downloadImage(&quot;http://hoclamaimai.com/&quot; + strAnh, holder.imageView); //Load ảnh đại diện
            }
            else {
                holder.imageView.setImageResource(R.drawable.img_tintuc);
            }
        }
        else {
            Log.e(&quot;TAG&quot;,&quot;LỖI! Kết nối đến hosting.&quot;);
        }
<A NAME="534"></A>        holder.textCoQuan.setText(FragmentTinTucHome.arrayListTinTuc.get(position).getStrCoQuan());
        holder.textDiaChi.setText(FragmentTinTucHome</B></FONT>.arrayListTinTuc.get(position).getStrDiaChi());
        holder.textNgayGui.setText(FragmentTinTucHome.arrayListTinTuc.get(position).getStrNgayGui());
        holder.textTieuDe.setText(<FONT color="#3b9c9c"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#534',2,'match0-top.html#534',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>FragmentTinTucHome.arrayListTinTuc.get(position).getStrTieuDe());
        holder.btnVolumeUp.setOnClickListener(v -&gt; {
        String strNoiDung = arraylist.get(position).getStrNoiDung();
<A NAME="402"></A>        String strTieuDe = arraylist.get(position).getStrTieuDe();
        String strDelay = &quot;,&quot;</B></FONT>;
        tts = classPublic.DocVanBan((Activity)mContext, &quot;&quot;);
        if (!<FONT color="#4e8975"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#402',2,'match0-top.html#402',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>strNoiDung.isEmpty()||!strTieuDe.isEmpty()){
            tts = classPublic.DocVanBan((Activity)mContext, strTieuDe</B></FONT>.concat(strDelay).concat(strNoiDung).
                    replace(&quot;VNĐ/Kg&quot;,&quot;Nghìn đồng trên 1 kí.&quot;).
                    replace(&quot;VNĐ&quot;,&quot;Nghìn đồng&quot;).
                    replace(&quot;vnĐ&quot;,&quot;Nghìn đồng&quot;).replace(&quot;Kg&quot;,&quot;Kí&quot;));
        }
        });
        holder.btnVolumeOff.setOnClickListener(v -&gt; {
            tts.stop(); //Tắt chức năng đọc tin tức
<A NAME="668"></A>        });
        String [] strText = FragmentTinTucHome.arrayListTinTuc.get(position).getStrNoiDung().split(&quot;\\.&quot;);
        holder.textNoiDung.setText(Html.fromHtml(strText[0] + &quot;... &lt;font color='blue'&gt;&lt;b&gt;Xem thêm &gt;&gt;&lt;/b&gt;&lt;/font&gt;&quot;),TextView.BufferType.SPANNABLE);
        <FONT color="#f9966b"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#668',2,'match0-top.html#668',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>holder.textNoiDung.setOnClickListener(v -&gt;
            holder.textNoiDung.setText(FragmentTinTucHome.arrayListTinTuc.get(position).getStrNoiDung()));

        return convertView;
    }
    public void filter(String charText) {
        charText = charText.toLowerCase(Locale.getDefault());
        FragmentTinTucHome.arrayListTinTuc.clear();
        if (charText.length() == 0) {
            FragmentTinTucHome.arrayListTinTuc.addAll(arraylist);
        } else {
            for (ClassTinTucView wp : arraylist) {
                if (wp.getStrCoQuan().toLowerCase(Locale.getDefault()).contains(charText)
                        ||wp.getStrTieuDe().toLowerCase(Locale.getDefault()).contains(charText)) {
                    FragmentTinTucHome.arrayListTinTuc.add(wp);
                }
            }
        }
        notifyDataSetChanged();
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>TinTuc\ListViewTinTucView.java</CENTER></H3><HR>
<PRE>
<A NAME="398"></A>package com.example.basa.TinTuc;

<FONT color="#ff0000"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#398',2,'match0-top.html#398',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.annotation.SuppressLint;
import android.app.Activity;
import android.content.Context;
import android.net.ConnectivityManager;
import android.speech.tts.TextToSpeech;
import android.text.Html;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.TextView;

import com.example.basa.Class.ClassPublic;
import com.example.basa.R;

import java.util.ArrayList;
import java.util.Locale;
import java.util.Objects;

public class ListViewTinTucView extends BaseAdapter {
    private final Context mContext;
    private final LayoutInflater inflater;
    private final ArrayList&lt;ClassTinTucView&gt; arraylist;
    private ClassPublic classPublic;
    private TextToSpeech tts;
    public ListViewTinTucView(Context context) {
        mContext = context;
        inflater = LayoutInflater.from(mContext);
        this.arraylist = new ArrayList&lt;&gt;();
<A NAME="531"></A>        this.arraylist.addAll(FragmentTinTucView.arrayListTinTuc);
    }
    public static class</B></FONT> ViewHolder {
        ImageView <FONT color="#f88017"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#531',2,'match0-top.html#531',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>imageView;
        TextView textCoQuan, textDiaChi, textNgayGui, textNoiDung, textTieuDe;
        ImageButton btnVolumeUp, btnVolumeOff;
    }
    @Override
    public int getCount() {
        return FragmentTinTucView.arrayListTinTuc.size();
    }

    @Override
    public Object getItem(int position) {
        return FragmentTinTucView.arrayListTinTuc.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @SuppressLint({&quot;InflateParams&quot;, &quot;NewApi&quot;, &quot;MissingPermission&quot;, &quot;SetTextI18n&quot;})
    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.listview_tintuc_view, null);
            holder.imageView = convertView.findViewById(R.id.imgChuDe);
            holder.textCoQuan = convertView.findViewById(R.id.textCoQuan);
            holder.textDiaChi = convertView.findViewById(R.id.textDiaChi);
            holder.textNgayGui = convertView.findViewById(R.id.textNgayGui);
            holder.btnVolumeUp = convertView.findViewById(R.id.btnVolumeUp);
            holder.btnVolumeOff = convertView.findViewById(R.id.btnVolumeOff);
            holder.textNoiDung = convertView.findViewById(R.id.textNoiDung);
            holder.textTieuDe = convertView</B></FONT>.findViewById(R.id.textTieuDe);
            convertView.setTag(holder);
        } else {
<A NAME="723"></A>            holder = (ViewHolder) convertView.getTag();
        }
        //Kiểm tra kết nối đến hosting
        ConnectivityManager <FONT color="#e77471"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#723',2,'match0-top.html#723',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>connectivityManager = (ConnectivityManager) mContext.getSystemService (Context.CONNECTIVITY_SERVICE);
        if(Objects.requireNonNull(connectivityManager).getActiveNetworkInfo() != null &amp;&amp; Objects.requireNonNull(connectivityManager.getActiveNetworkInfo()).isAvailable()
                &amp;&amp; connectivityManager</B></FONT>.getActiveNetworkInfo().isConnected()) {
<A NAME="738"></A>            String strAnh = FragmentTinTucView.arrayListTinTuc.get(position).getStrImage();
            classPublic = new ClassPublic();
            if (!strAnh.isEmpty()) {
                <FONT color="#c57717"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#738',2,'match0-top.html#738',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>classPublic.downloadImage(&quot;http://hoclamaimai.com/&quot; + strAnh, holder.imageView); //Load ảnh đại diện
            }
            else {
                holder.imageView.setImageResource(R.drawable.img_tintuc);
            }
        }
        else {
            Log.e(&quot;TAG&quot;,&quot;LỖI! Kết nối đến hosting.&quot;);
        }
<A NAME="672"></A>        holder.textCoQuan.setText(FragmentTinTucView.arrayListTinTuc.get(position).getStrCoQuan());
        holder.textDiaChi.setText(FragmentTinTucView</B></FONT>.arrayListTinTuc.get(position).getStrDiaChi());
        holder.textNgayGui.setText(FragmentTinTucView.arrayListTinTuc.get(position).getStrNgayGui());
        holder.textTieuDe.setText(<FONT color="#827d6b"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#672',2,'match0-top.html#672',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>FragmentTinTucView.arrayListTinTuc.get(position).getStrTieuDe());
        holder.btnVolumeUp.setOnClickListener(v -&gt; {
        String strNoiDung = arraylist.get(position).getStrNoiDung();
<A NAME="443"></A>        String strTieuDe = arraylist.get(position).getStrTieuDe();
        String strDelay = &quot;,&quot;</B></FONT>;
        tts = classPublic.DocVanBan((Activity)mContext, &quot;&quot;);
        if (!<FONT color="#810541"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#443',2,'match0-top.html#443',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>strNoiDung.isEmpty()||!strTieuDe.isEmpty()){
            tts = classPublic.DocVanBan((Activity)mContext, strTieuDe</B></FONT>.concat(strDelay).concat(strNoiDung).
                    replace(&quot;VNĐ/Kg&quot;,&quot;Nghìn đồng trên 1 kí.&quot;).
                    replace(&quot;VNĐ&quot;,&quot;Nghìn đồng&quot;).
                    replace(&quot;vnĐ&quot;,&quot;Nghìn đồng&quot;).replace(&quot;Kg&quot;,&quot;Kí&quot;));
        }
        });
        holder.btnVolumeOff.setOnClickListener(v -&gt; {
            tts.stop(); //Tắt chức năng đọc tin tức
        });
        String [] strText = FragmentTinTucView.arrayListTinTuc.get(position).getStrNoiDung().split(&quot;\\.&quot;);
<A NAME="673"></A>        holder.textNoiDung.setText(Html.fromHtml(strText[0] + &quot;... &lt;font color='blue'&gt;&lt;b&gt;Xem thêm &gt;&gt;&lt;/b&gt;&lt;/font&gt;&quot;),TextView.BufferType.SPANNABLE);
        holder.textNoiDung.setOnClickListener(v -&gt; holder.textNoiDung.setText(FragmentTinTucView.arrayListTinTuc.get(position).getStrNoiDung()));

        <FONT color="#41a317"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#673',2,'match0-top.html#673',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>return convertView;
    }
    public void filter(String charText) {
        charText = charText.toLowerCase(Locale.getDefault());
        FragmentTinTucView.arrayListTinTuc.clear();
        if (charText.length() == 0) {
            FragmentTinTucView.arrayListTinTuc.addAll(arraylist);
        } else {
            for (ClassTinTucView wp : arraylist) {
                if (wp.getStrCoQuan().toLowerCase(Locale.getDefault()).contains(charText)
                        ||wp.getStrTieuDe().toLowerCase(Locale.getDefault()).contains(charText)) {
                    FragmentTinTucView.arrayListTinTuc.add(wp);
                }
            }
        }
        notifyDataSetChanged();
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>User\FragmentDoiMatKhau.java</CENTER></H3><HR>
<PRE>
package com.example.basa.User;

import android.annotation.SuppressLint;
import android.app.AlertDialog;
import android.content.Context;
<A NAME="139"></A>import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Build;
<FONT color="#f660ab"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#139',2,'match0-top.html#139',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import android.os.Bundle;
import android.text.method.HideReturnsTransformationMethod;
import android.text.method.PasswordTransformationMethod;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageButton;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.annotation.RequiresApi;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;

import com.example.basa.Class.ClassConnect;
import com.example.basa.Class.ClassPublic;
import com.example.basa.Home.MainActivity;
import com.example.basa.Menu.FragmentMenu;
import com.example.basa.R;
import com.google.android.material.textfield.TextInputLayout;

import java.util.Objects;

import static com.example.basa.Home.MainActivity.MyPREFERENCES;
import static com.example.basa.Home.MainActivity.Pass;
import static com.example.basa.Home.MainActivity.User;

public class FragmentDoiMatKhau extends Fragment {
    private View view;
    private EditText editMatKhauCu, editMatKhauMoi, editXacNhanMatKhau;
    private TextInputLayout inpMatKhauCu, inpMatKhauMoi, inpXacNhanMatKhau;
    private Button btnCapNhat;
    private ImageButton btnQuayLai;
    ClassPublic classPublic = new ClassPublic();
    ClassConnect classConnect;
    SharedPreferences sharedpreferences; //Nhớ tài khoản
    SharedPreferences.Editor editor;
<A NAME="315"></A>    public static FragmentManager fragmentManager; //Fragment trang chủ
    public static FragmentTransaction fragmentTransaction</B></FONT>;
    @SuppressLint(&quot;UseRequireInsteadOfGet&quot;)
    <FONT color="#87f717"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#315',2,'match0-top.html#315',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>@RequiresApi(api = Build.VERSION_CODES.KITKAT)
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);
        view = inflater.inflate(R.layout.fragment_doi_mat_khau, container, false);
        sharedpreferences = Objects.requireNonNull(this.getActivity()).getSharedPreferences(MyPREFERENCES, Context.MODE_PRIVATE);
        editor = sharedpreferences.edit();
        editor.apply();
        //Ánh xạ các đối tượng Layout
        layoutAnhXa</B></FONT>();
<A NAME="264"></A>        return view;
    }
    @SuppressLint(&quot;NewApi&quot;)
    private <FONT color="#82cafa"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#264',2,'match0-top.html#264',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>void layoutAnhXa() {
        //Ảnh xạ đối tượng trên layout
        editMatKhauCu = view.findViewById(R.id.editMatKhauCu);
        editMatKhauMoi = view.findViewById(R.id.editMatKhauMoi);
<A NAME="612"></A>        editXacNhanMatKhau = view.findViewById(R.id.editXacNhanMatKhau);
        inpMatKhauCu = view.findViewById(R.id.inpMatKhauCu);
        inpMatKhauMoi</B></FONT> = view.findViewById(R.id.inpMatKhauMoi);
        <FONT color="#82cafa"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#612',2,'match0-top.html#612',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>inpXacNhanMatKhau = view.findViewById(R.id.inpXacNhanMatKhau);
        btnCapNhat = view.findViewById(R.id.btnCapNhat);
        btnQuayLai = view.findViewById(R.id.btnQuayLai);
        fragmentManager = requireActivity().getSupportFragmentManager();//Khai báo chuyển fragment
<A NAME="519"></A>        clickButton(); //Click button
    }</B></FONT>
    private void clickButton() {
        <FONT color="#4863a0"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#519',2,'match0-top.html#519',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>btnCapNhat.setOnClickListener(v -&gt; {
        String strMatKhauCu = editMatKhauCu.getText().toString();
        String strMatKhauMoi = editMatKhauMoi.getText().toString();
        String strXacNhanMatKhau = editXacNhanMatKhau</B></FONT>.getText().toString();
        if (strMatKhauCu.length()&gt;= 8 &amp;&amp; sharedpreferences.getString(Pass,&quot; &quot;).equals(strMatKhauCu)){
<A NAME="143"></A>            if (strMatKhauMoi.length() &gt;= 8){
                if (strXacNhanMatKhau.equals(strMatKhauMoi)){
                    try {
                        <FONT color="#e77471"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#143',2,'match0-top.html#143',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>classConnect = new ClassConnect();//Mở kết nối đến SQL
                        String sqlMatKhau = &quot;UPDATE TB_NguoiDung set MatKhau ='&quot;+strMatKhauMoi+&quot;' where TaiKhoan = '&quot;+sharedpreferences.getString(User,&quot;&quot;)+&quot;' &quot;;
                        if (classConnect.updateData(getActivity(), sqlMatKhau) == 1){
<A NAME="236"></A>                            classPublic.ThongBao(getActivity(),&quot;Đổi mật khẩu thành công&quot;);
                            editor.clear();//Xóa hết các thông tin về tài khoản đã lưu
                            editor.commit();//Lưu thay đổi
                            startActivity(new Intent</B></FONT>(<FONT color="#151b8d"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#236',2,'match0-top.html#236',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>getActivity(), MainActivity.class));//Quay lại trang đăng nhập
                            classPublic.ThongBao(getActivity(),&quot;Vui lòng đăng nhập lại&quot;);
                        }
                        else {
                            classPublic.ThongBao(getActivity(),&quot;Không đổi được mật khẩu&quot;);
                        }
                        classConnect.CONN(getActivity()).close();
                    }catch (Exception e){
                        Log.e(&quot;TAG&quot;, e.getMessage());
                    }
                }
                else {
                    inpXacNhanMatKhau</B></FONT>.setError(&quot;Mật khẩu phải khớp với mật khẩu mới&quot;);
                }
            }
            else {
                inpMatKhauMoi.setError(&quot;Mật khẩu mới có ít nhất 8 kí tự&quot;);
            }
        }
        else {
            inpMatKhauCu.setError(&quot;Mật khẩu cũ không đúng&quot;);
<A NAME="422"></A>        }
        });
        btnQuayLai.setOnClickListener(v -&gt; {
            <FONT color="#3090c7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#422',2,'match0-top.html#422',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>FragmentDoiMatKhau.fragmentTransaction = FragmentDoiMatKhau.fragmentManager.beginTransaction();
            FragmentMenu fragment = new FragmentMenu();
            Bundle bundle = new Bundle();
            fragment.setArguments(bundle);
            FragmentDoiMatKhau.fragmentTransaction.replace(R.id.fragment_main,fragment);
            FragmentDoiMatKhau</B></FONT>.fragmentTransaction.commit();
        });
    }
}
</PRE>
<HR>
<H3><CENTER>User\FragmentUser.java</CENTER></H3><HR>
<PRE>
<A NAME="468"></A><FONT color="#151b8d"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#468',2,'match0-top.html#468',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.example.basa.User;

import android.annotation.SuppressLint;
import android.app.AlertDialog;
import android.content.Context;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.LinearLayout;
import android.widget.Spinner;
import android.widget.TextView;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;

import com.example.basa.Class.ClassConnect;
import com.example.basa.Class.ClassPublic;
import com.example.basa.Menu.FragmentMenu;
import com.example.basa.R;

import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.Objects;

import static com.example.basa.Home.MainActivity.MyPREFERENCES;
import static com.example.basa.Home.MainActivity.User;

<A NAME="109"></A>public class FragmentUser extends Fragment {
    //Khai báo
    private View view;
    private EditText editTaiKhoan, editHoTen</B></FONT>, editCongTy, <FONT color="#b38481"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#109',2,'match0-top.html#109',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>editSoDienThoai, editEmail;
    private TextView textDiaChi;
    private Spinner cmdCoQuan, cmdTinh, cmdHuyen, cmdXa, cmdLoaiTaiKhoan;
    private LinearLayout layoutCoQuan, layoutCongTy;
<A NAME="110"></A>    private Button btnCapNhat;
    private final ClassPublic classPublic = new ClassPublic</B></FONT>();
    private ClassConnect classConnect;
    private String <FONT color="#2b60de"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#110',2,'match0-top.html#110',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>strMaTinh, strMaHuyen, strMaXa, strTaiKhoan, strLoaiTaiKhoan, ganMaCoQuan, ganMaTinh, ganMaHuyen, ganMaXa, ganLoaiTaiKhoan;
    private int intDieuKienGan;
    private SharedPreferences sharedpreferences; //Nhớ tài khoản
    private SharedPreferences.Editor editor;
    private FragmentManager fragmentManager; //Tạo Fragment
    private FragmentTransaction fragmentTransaction;
    private final ArrayList&lt;String&gt; listMaLoaiTaiKhoan = new ArrayList&lt;&gt;(); //Khai báo danh sách loại tài khoản
    private final ArrayList&lt;String&gt; listTenLoaiTaiKhoan = new ArrayList&lt;&gt;();
    private final ArrayList&lt;String&gt; listMaCoQuan = new ArrayList&lt;&gt;(); //Khai báo danh sách cơ quan
    private final ArrayList&lt;String&gt; listTenCoQuan = new ArrayList&lt;&gt;();
    private final ArrayList&lt;String&gt; listMaTinh = new ArrayList&lt;&gt;(); //Khai báo danh sách tỉnh
    private final ArrayList&lt;String&gt; listTenTinh = new ArrayList&lt;&gt;();
<A NAME="12"></A>    private final ArrayList&lt;String&gt; listMaHuyen = new ArrayList&lt;&gt;(); //Khai báo danh sách huyện
    private final ArrayList&lt;String&gt; listTenHuyen = new ArrayList</B></FONT>&lt;&gt;();
    private final ArrayList&lt;String&gt; listMaXa = new ArrayList&lt;&gt;(); //Khai báo danh sách xã
    private final ArrayList&lt;<FONT color="#3b9c9c"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#12',2,'match0-top.html#12',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>String&gt; listTenXa = new ArrayList&lt;&gt;();
    @SuppressLint(&quot;NewApi&quot;)
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);
        view = inflater.inflate(R.layout.fragment_user, container, false);
<A NAME="149"></A>        sharedpreferences = this</B></FONT>.requireActivity().getSharedPreferences(MyPREFERENCES, Context.MODE_PRIVATE);
        editor = sharedpreferences.edit();
        editor.apply();
        fragmentManager = <FONT color="#736aff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#149',2,'match0-top.html#149',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>requireActivity().getSupportFragmentManager();
        strTaiKhoan = sharedpreferences.getString(User,&quot;&quot;); //Lấy tên tài khoản
        strLoaiTaiKhoan = classPublic.layLoaiTaiKhoan(strTaiKhoan, getActivity());
        layoutAnhXa(); //Ánh xạ các đối tượng Layout
        return view;
    }

    @SuppressLint(&quot;NewApi&quot;)
    private void layoutAnhXa() {
        editTaiKhoan = view.findViewById(R.id.editTaiKhoan);
        editHoTen = view.findViewById(R.id.editHoTen);
        cmdCoQuan = view.findViewById(R.id.cmdCoQuan);
        editCongTy = view.findViewById(R.id.editCongTy);
        textDiaChi = view.findViewById(R.id.textDiaChiHoNuoi);
        cmdTinh = view.findViewById(R.id.cmdTinh);
        cmdHuyen = view.findViewById(R.id.cmdHuyen);
        cmdXa = view.findViewById(R.id.cmdXa);
        cmdLoaiTaiKhoan = view.findViewById(R.id.cmdLoaiTaiKhoan);
        layoutCoQuan = view.findViewById(R.id.layoutCoQuan);
        layoutCongTy = view.findViewById(R.id.layoutCongTy);
        editSoDienThoai = view.findViewById(R.id.editSoDienThoai);
        editEmail = view.findViewById(R.id.editEmail);
        btnCapNhat = view.findViewById(R.id.btnCapNhat);
        intDieuKienGan = 1;
        ganThongTin</B></FONT>(); //Gán thông tin
        loadTinh(); //Load danh sách tỉnh
        loadLoaiTaiKhoan();
        clickButton(); //Click button
    }
    private void ganThongTin(){
        String strDiaChi;
        switch (strLoaiTaiKhoan) {
            case &quot;2&quot;:
                strDiaChi = &quot;Địa chỉ thường trú&quot;;
                textDiaChi.setText(strDiaChi);
<A NAME="154"></A>                layoutCongTy.setVisibility(View.GONE);
                layoutCoQuan.setVisibility(View.GONE);
                break;
            case &quot;3&quot;<FONT color="#348781"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#154',2,'match0-top.html#154',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>:
            case &quot;4&quot;:
            case &quot;6&quot;:
                strDiaChi = &quot;Địa chỉ công ty&quot;;
                textDiaChi.setText(strDiaChi);
                layoutCongTy.setVisibility(View.VISIBLE);
                layoutCoQuan.setVisibility(View.GONE);
                break;
            case &quot;5&quot;:
                strDiaChi = &quot;Địa chỉ cơ quan&quot;;
                textDiaChi.setText(strDiaChi);
                layoutCongTy.setVisibility(View.GONE);
<A NAME="56"></A>                layoutCoQuan</B></FONT>.setVisibility(View.VISIBLE);
                break;
        }
        <FONT color="#52d017"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#56',2,'match0-top.html#56',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>try {
            classConnect = new ClassConnect(); //Mở kết nối SQL
            String sqlTaiKhoan = &quot;select * from TB_NguoiDung where TaiKhoan = '&quot;+ strTaiKhoan +&quot;'&quot;;
            ResultSet resultSetTaiKhoan = classConnect.selectData(getActivity(), sqlTaiKhoan);
            if (resultSetTaiKhoan != null &amp;&amp; resultSetTaiKhoan.next()){
                editTaiKhoan.setText(resultSetTaiKhoan.getString(&quot;TaiKhoan&quot;));
                editHoTen</B></FONT>.setText(resultSetTaiKhoan.getString(&quot;HoTen&quot;));
                if (strLoaiTaiKhoan.equals(&quot;5&quot;)){
                    ganMaCoQuan = resultSetTaiKhoan.getString(&quot;MaCoQuan&quot;);
                    loadCoQuan(); //Load danh sách cơ quan
                }
                editCongTy.setText(resultSetTaiKhoan.getString(&quot;CongTy&quot;));
<A NAME="152"></A>                ganMaTinh = resultSetTaiKhoan.getString(&quot;MaTinh&quot;);
                ganMaHuyen = resultSetTaiKhoan.getString(&quot;MaHuyen&quot;);
                ganMaXa = resultSetTaiKhoan.getString(&quot;MaXa&quot;);
                ganLoaiTaiKhoan = <FONT color="#ff00ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#152',2,'match0-top.html#152',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>resultSetTaiKhoan.getString(&quot;LoaiTaiKhoan&quot;);
                editSoDienThoai.setText(resultSetTaiKhoan.getString(&quot;SoDienThoai&quot;));
                editEmail.setText(resultSetTaiKhoan.getString(&quot;Email&quot;));
            }
            else {
                //Quay lại trang home
                fragmentTransaction = fragmentManager.beginTransaction();
                fragmentTransaction.replace(R.id.fragment_main, new FragmentMenu());
                fragmentTransaction.commit();
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
<A NAME="187"></A>        }catch (Exception e){
            Log.e(&quot;TAG&quot;,e</B></FONT>.getMessage());
        }
    <FONT color="#842dce"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#187',2,'match0-top.html#187',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}

    @SuppressLint(&quot;NewApi&quot;)
    private void loadCoQuan(){ //Load danh sách cơ quan
        listMaCoQuan.clear(); //Xóa danh sách đang có
        listTenCoQuan.clear();
        try{
            classConnect = new ClassConnect(); //Mở kết nối SQL
            String sqlCoQuan = &quot;select MaCoQuan, TenCoQuan from TB_CoQuan&quot;;
            ResultSet resultSetCoQuan = classConnect.selectData(getActivity(), sqlCoQuan);
            if (resultSetCoQuan != null){
                while (resultSetCoQuan.next()){
                    listMaCoQuan.add(resultSetCoQuan.getString(&quot;MaCoQuan&quot;));
                    listTenCoQuan.add(resultSetCoQuan.getString(&quot;TenCoQuan&quot;));
                }
                ArrayAdapter&lt;String&gt; dataCoQuan = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenCoQuan);
                dataCoQuan.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
                cmdCoQuan.setAdapter(dataCoQuan);
            }
            if (listMaCoQuan.isEmpty()){
                classPublic.ThongBao(getActivity(), &quot;Thông báo! Đang cập nhật cơ quan&quot;);
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
<A NAME="18"></A>        }catch (Exception e){
            Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
        }</B></FONT>
        <FONT color="#f62817"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#18',2,'match0-top.html#18',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>cmdCoQuan.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaCoQuan.isEmpty()){
                    cmdCoQuan.setSelection(listMaCoQuan.indexOf(ganMaCoQuan));
                }
            }

            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        }</B></FONT>);
        cmdCoQuan.setEnabled(false);
    }
    private void loadLoaiTaiKhoan() {
<A NAME="153"></A>        //Danh sách loại tài khoản
        listMaLoaiTaiKhoan.clear(); //Xóa danh sách đang có
        listTenLoaiTaiKhoan.clear();
        <FONT color="#810541"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#153',2,'match0-top.html#153',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>listMaLoaiTaiKhoan.add(&quot;1&quot;);
        listTenLoaiTaiKhoan.add(&quot;Quản trị&quot;);
        listMaLoaiTaiKhoan.add(&quot;7&quot;);
        listTenLoaiTaiKhoan.add(&quot;Quản trị tỉnh&quot;);
        listMaLoaiTaiKhoan.add(&quot;2&quot;);
        listTenLoaiTaiKhoan.add(&quot;Hộ nuôi&quot;);
        listMaLoaiTaiKhoan.add(&quot;3&quot;);
        listTenLoaiTaiKhoan.add(&quot;Cty thức ăn thủy sản&quot;);
        listMaLoaiTaiKhoan.add(&quot;4&quot;);
        listTenLoaiTaiKhoan.add(&quot;Cty chế biến thủy sản&quot;);
        listMaLoaiTaiKhoan.add(&quot;6&quot;);
        listTenLoaiTaiKhoan.add(&quot;Cty thuốc thú y thủy sản&quot;);
        listMaLoaiTaiKhoan.add(&quot;5&quot;);
        listTenLoaiTaiKhoan.add(&quot;Cán bộ nông nghiệp&quot;);
        ArrayAdapter&lt;String&gt; dataLoaiTaiKhoan = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenLoaiTaiKhoan);
        dataLoaiTaiKhoan.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
        cmdLoaiTaiKhoan.setAdapter(dataLoaiTaiKhoan);
        cmdLoaiTaiKhoan</B></FONT>.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaLoaiTaiKhoan.isEmpty()){
<A NAME="492"></A>                    strLoaiTaiKhoan = listMaLoaiTaiKhoan.get(position);
                    if (intDieuKienGan == 1){
                        cmdLoaiTaiKhoan.setSelection(listMaLoaiTaiKhoan.indexOf(ganLoaiTaiKhoan));
                        <FONT color="#717d7d"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#492',2,'match0-top.html#492',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>strLoaiTaiKhoan = ganLoaiTaiKhoan;
                    }
                }
            }
            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {
<A NAME="473"></A>
            }
        }</B></FONT>);
        <FONT color="#f88017"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#473',2,'match0-top.html#473',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>cmdLoaiTaiKhoan.setEnabled(false);
    }
    @SuppressLint(&quot;NewApi&quot;)
    private void loadTinh(){  //Danh sách tỉnh
        listMaTinh.clear(); // Xóa danh sách tỉnh
        listTenTinh.clear();
        try{
            classConnect = new ClassConnect(); //Mở kết nối SQL
            String sqlTinh = &quot;select MaTinh, TenTinh from TB_Tinh&quot;;
            ResultSet resultSetTinh = classConnect.selectData(getActivity(), sqlTinh);
            if (resultSetTinh != null){
                while (resultSetTinh.next()){
                    listMaTinh.add(resultSetTinh.getString(&quot;MaTinh&quot;));
                    listTenTinh.add(resultSetTinh.getString(&quot;TenTinh&quot;));
<A NAME="156"></A>                }</B></FONT>
                ArrayAdapter dataTinh = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenTinh);
                dataTinh.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
                <FONT color="#347235"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#156',2,'match0-top.html#156',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>cmdTinh.setAdapter(dataTinh);
            }
            if (listMaTinh.isEmpty()){
                classPublic.ThongBao(getActivity(), &quot;Thông báo! Đang cập nhật danh sách tỉnh/thành phố&quot;);
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
        }
        if (listMaTinh.isEmpty()){ //Nếu chưa nhập tỉnh thì không hiển thị huyện
            listMaHuyen.clear(); // Xóa danh sách huyện
            listTenHuyen.clear();
<A NAME="451"></A>            ArrayAdapter&lt;String&gt; dataHuyen = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenHuyen);
            dataHuyen.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
            cmdHuyen</B></FONT>.setAdapter(dataHuyen);
        <FONT color="#79d867"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#451',2,'match0-top.html#451',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
        cmdTinh.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaTinh.isEmpty()){
                    strMaTinh = listMaTinh.get(position);
                    if (intDieuKienGan == 1){
<A NAME="190"></A>                        cmdTinh.setSelection(listMaTinh</B></FONT>.indexOf(ganMaTinh));
                        strMaTinh = ganMaTinh;
                    }
                    <FONT color="#3090c7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#190',2,'match0-top.html#190',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>loadHuyen(strMaTinh);
                }
            }

            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }
    @SuppressLint(&quot;NewApi&quot;)
    private void loadHuyen(String maTinh){ //Danh sách huyện
        listMaHuyen.clear(); // Xóa danh sách huyện
        listTenHuyen.clear();
        try {
            classConnect = new ClassConnect(); //Mở kết nối SQL
            String sqlHuyen = &quot;select MaHuyen, TenHuyen from TB_Huyen where MaTinh = '&quot;+maTinh+&quot;'&quot;;
            ResultSet resultSetHuyen = classConnect.selectData(getActivity(), sqlHuyen);
            if (resultSetHuyen != null){
                while (resultSetHuyen.next()){
                    listMaHuyen.add(resultSetHuyen.getString(&quot;MaHuyen&quot;));
                    listTenHuyen.add(resultSetHuyen.getString(&quot;TenHuyen&quot;));
                }
                ArrayAdapter&lt;String&gt; dataHuyen = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenHuyen);
                dataHuyen.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
                cmdHuyen.setAdapter(dataHuyen);
            }
            if (listMaHuyen.isEmpty()){
                classPublic.ThongBao(getActivity(), &quot;Thông báo! Đang cập nhật danh sách quận/huyện&quot;);
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
        }
        if (listMaHuyen.isEmpty()){ //Nếu chưa nhập huyện thì không hiển thị xã
            listMaXa.clear(); // Xóa danh sách xã
            listTenXa.clear();
            ArrayAdapter&lt;String&gt; dataXa = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenXa);
            dataXa.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
            cmdXa.setAdapter(dataXa);
        }
        cmdHuyen.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaHuyen</B></FONT>.isEmpty()){
                    strMaHuyen = listMaHuyen.get(position);
                    if (intDieuKienGan == 1) {
<A NAME="121"></A>                        cmdHuyen.setSelection(listMaHuyen.indexOf(ganMaHuyen));
                        strMaHuyen = ganMaHuyen;
                    }
                    <FONT color="#c8c2a7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#121',2,'match0-top.html#121',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>loadXa(strMaHuyen);
                }
            }

            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }
    @SuppressLint(&quot;NewApi&quot;)
    private void loadXa(String maHuyen){ //Danh sách xã
        listMaXa.clear(); // Xóa danh sách xã
        listTenXa.clear();
        try {
            classConnect = new ClassConnect(); //Mở kết nối SQL
            String sqlXa = &quot;select MaXa, TenXa from TB_Xa where MaHuyen = '&quot;+maHuyen+&quot;'&quot;;
            ResultSet resultSetXa = classConnect.selectData(getActivity(), sqlXa);
            if (resultSetXa != null){
                while (resultSetXa.next()){
                    listMaXa.add(resultSetXa.getString(&quot;MaXa&quot;));
                    listTenXa.add(resultSetXa.getString(&quot;TenXa&quot;));
                }
                ArrayAdapter&lt;String&gt; dataXa = new ArrayAdapter&lt;&gt;(getActivity(), android.R.layout.simple_spinner_item,listTenXa);
                dataXa.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
                cmdXa.setAdapter(dataXa);
            }
            if (listMaXa.isEmpty()){
                classPublic.ThongBao(getActivity(), &quot;Thông báo! Đang cập nhật danh sách phường/xã&quot;);
            }
            classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
        }
        cmdXa.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaXa</B></FONT>.isEmpty()){
                    strMaXa = listMaXa.get(position);
                    if (intDieuKienGan == 1){
                        cmdXa.setSelection(listMaXa.indexOf(ganMaXa));
                        strMaXa = ganMaXa;
<A NAME="163"></A>                    }
                }
                intDieuKienGan = 0; //Bỏ gán giá trị theo csdl
            <FONT color="#d16587"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#163',2,'match0-top.html#163',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}

            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }
<A NAME="520"></A>    private void clickButton(){
        btnCapNhat</B></FONT>.setOnClickListener(v -&gt; {
        //Hiện hộp thoại thông báo
        AlertDialog.Builder <FONT color="#52d017"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#520',2,'match0-top.html#520',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>builder = new AlertDialog.Builder(getActivity());
        builder.setTitle(&quot;THÔNG BÁO&quot;);
        builder.setMessage(&quot;Bạn có muốn cập nhật thông tin tài khoản không?&quot;);
<A NAME="164"></A>        builder.setIcon(R.drawable.ic_thongbao);
        builder.setCancelable(false);
        builder</B></FONT>.setPositiveButton(&quot;Đồng ý&quot;, (dialogInterface, i) -&gt; {
        <FONT color="#c57726"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#164',2,'match0-top.html#164',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>if (editTaiKhoan.getText().length() != 0) { //Kiểm tra tài khoản rỗng
            if (editHoTen.getText().length() != 0) { //Kiểm tra họ tên rỗng
                if (!listMaTinh.isEmpty()) { //Kiểm tra tỉnh rỗng
                    if (!listMaHuyen.isEmpty()) { //Kiểm tra huyện rỗng
                        if (!listMaXa.isEmpty()) { //Kiểm tra xã rỗng
                            if (editSoDienThoai</B></FONT>.length() != 0) { //Kiểm tra số điện thoại rỗng
                                try {
                                    classConnect = new ClassConnect(); //Mở kết nối SQL
                                    String sqlTaiKhoan = null;
                                    switch (strLoaiTaiKhoan) {
                                        case &quot;1&quot;: //Admin
                                        case &quot;7&quot;: //Admin tỉnh
                                        case &quot;2&quot;: //Hộ nuôi
                                        case &quot;5&quot;: //Cán bộ nông nghiệp
                                            sqlTaiKhoan = &quot;update TB_NguoiDung set HoTen = N'&quot; + editHoTen.getText() + &quot;', MaXa = '&quot; + strMaXa + &quot;', MaHuyen = '&quot; + strMaHuyen + &quot;', &quot; +
                                                    &quot;MaTinh = '&quot; + strMaTinh + &quot;', SoDienThoai = '&quot; + editSoDienThoai.getText() + &quot;', Email = '&quot; + editEmail.getText() + &quot;'&quot; +
                                                    &quot; where TaiKhoan = '&quot; + editTaiKhoan.getText() + &quot;'&quot;;
                                            break;
<A NAME="166"></A>                                        case &quot;3&quot;: //Cty thức ăn
                                        case &quot;4&quot;: //Cty chế biến thủy sản
                                        case &quot;6&quot;://Cty thuốc
                                            sqlTaiKhoan = &quot;update TB_NguoiDung set HoTen = N'&quot; + <FONT color="#ff0000"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#166',2,'match0-top.html#166',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>editHoTen.getText() + &quot;', CongTy = N'&quot; + editCongTy.getText() + &quot;', MaXa = '&quot; + strMaXa + &quot;', MaHuyen = '&quot; + strMaHuyen + &quot;', &quot; +
                                                    &quot;MaTinh = '&quot; + strMaTinh + &quot;', SoDienThoai = '&quot; + editSoDienThoai.getText() + &quot;', Email = '&quot; + editEmail.getText() + &quot;'&quot; +
                                                    &quot; where TaiKhoan = '&quot; + editTaiKhoan.getText() + &quot;'&quot;;
                                            break;
                                    }
                                    if (classConnect.updateData(getActivity(), sqlTaiKhoan) == 1) {
                                        classPublic.ThongBao(getActivity(), &quot;Thông báo! Cập nhật thành công&quot;);

                                    } else {
<A NAME="167"></A>                                        classPublic.ThongBao(getActivity(), &quot;Lỗi! Không cập nhật được&quot;);
                                    }</B></FONT>
                                    ganThongTin();
                                    <FONT color="#b38481"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#167',2,'match0-top.html#167',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>classConnect.CONN(getActivity()).close(); //Đóng kết nối SQL
                                } catch (Exception e) {
                                    Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
                                }
                            } else {
                                classPublic.ThongBao(getActivity(), &quot;Thông báo! Vui lòng nhập số điện thoại&quot;);
                            }
                        } else {
                            classPublic.ThongBao(getActivity(), &quot;Thông báo! Vui lòng chọn xã&quot;);
                        }
                    } else {
                        classPublic.ThongBao(getActivity(), &quot;Thông báo! Vui lòng chọn huyện&quot;);
                    }
                } else {
                    classPublic.ThongBao(getActivity(), &quot;Thông báo! Vui lòng chọn tỉnh&quot;);
                }
            } else {
                classPublic.ThongBao(getActivity(), &quot;Thông báo! Vui lòng nhập họ tên&quot;);
            }
        } else {
            classPublic.ThongBao(getActivity(), &quot;Thông báo! Vui lòng nhập tài khoản&quot;);
        }</B></FONT>
        });
        builder.setNegativeButton(&quot;Hủy bỏ&quot;, (dialogInterface, i) -&gt; dialogInterface.dismiss());
        AlertDialog alertDialog = builder.create();
        alertDialog.show();
        });
    }
}
</PRE>
<HR>
<H3><CENTER>User\SignActivity.java</CENTER></H3><HR>
<PRE>
<A NAME="146"></A>package com.example.basa.User;

<FONT color="#f9966b"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#146',2,'match0-top.html#146',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import androidx.appcompat.app.ActionBar;
import androidx.appcompat.app.AppCompatActivity;
import android.annotation.SuppressLint;
import android.graphics.Color;
import android.graphics.drawable.ColorDrawable;
import android.os.Bundle;
import android.text.Html;
import android.text.InputType;
import android.text.method.HideReturnsTransformationMethod;
import android.text.method.PasswordTransformationMethod;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.AutoCompleteTextView;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.LinearLayout;
import android.widget.Spinner;
import android.widget.TextView;
import com.example.basa.Class.ClassConnect;
import com.example.basa.Class.ClassPublic;
import com.example.basa.R;
import com.google.android.material.textfield.TextInputLayout;

import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.Objects;

public class SignActivity extends AppCompatActivity {
    //Khai báo
<A NAME="181"></A>    EditText editTaiKhoan, editMatKhau, editXacNhanMatKhau, editHoTen, editCongTy, editSoDienThoai, editEmail;
    TextInputLayout inpTaiKhoan, inpMatKhau, inpXacNhanMatKhau, inpHoTen, inpCongTy, inpSoDienThoai, inpEmail;
    TextView textDiaChiHoNuoi;
    Spinner cmdLoaiTaiKhoan, cmdCoQuan,cmdTinh</B></FONT>, <FONT color="#c58917"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#181',2,'match0-top.html#181',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>cmdHuyen, cmdXa;
    Button btnDangKy;
    LinearLayout layoutCoQuan, layoutCongTy;
    ImageButton btnQuayLai;
    ClassPublic classPublic = new ClassPublic();
    ClassConnect classConnect;
    String strMaTinh, strMaHuyen, strMaXa, strLoaiTaiKhoan, strCoQuan</B></FONT>;
    //Khai báo danh sách loại tài khoản
<A NAME="95"></A>    private final ArrayList&lt;String&gt; listMaLoaiTaiKhoan = new ArrayList&lt;&gt;();
    private final ArrayList&lt;String&gt; listTenLoaiTaiKhoan = new ArrayList&lt;&gt;();
    //Khai báo danh sách cơ quan
    private final ArrayList&lt;<FONT color="#810541"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#95',2,'match0-top.html#95',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>String&gt; listMaCoQuan = new ArrayList&lt;&gt;();
    private final ArrayList&lt;String&gt; listTenCoQuan = new ArrayList&lt;&gt;();
    //Khai báo danh sách tỉnh
    private final ArrayList&lt;String&gt; listMaTinh = new ArrayList&lt;&gt;();
    private final ArrayList&lt;String&gt; listTenTinh = new ArrayList&lt;&gt;();
    //Khai báo danh sách huyện
    private final ArrayList&lt;String&gt; listMaHuyen = new ArrayList&lt;&gt;();
    private final ArrayList&lt;String&gt; listTenHuyen = new ArrayList&lt;&gt;();
    //Khai báo danh sách xã
    private final ArrayList&lt;String&gt; listMaXa = new ArrayList&lt;&gt;();
    private final ArrayList&lt;String&gt; listTenXa = new ArrayList&lt;&gt;();
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_sign);
        //Ánh xạ các đối tượng Layout
        layoutAnhXa();
    }

    private void layoutAnhXa() {
        //Ảnh xả đối tượng từ layout
        editTaiKhoan = findViewById(R.id.editTaiKhoan);
        editMatKhau = findViewById(R.id.editMatKhau);
        cmdLoaiTaiKhoan = findViewById(R.id.cmdLoaiTaiKhoan);
        cmdCoQuan = findViewById(R.id.cmdCoQuan);
        editHoTen = findViewById(R.id.editHoTen);
        editCongTy = findViewById(R.id.editCongTy);
        layoutCoQuan = findViewById(R.id.layoutCoQuan);
        layoutCongTy = findViewById(R.id.layoutCongTy);
        textDiaChiHoNuoi = findViewById(R.id.textDiaChiHoNuoi);
        cmdTinh = findViewById(R.id.cmdTinh);
        cmdHuyen = findViewById(R.id.cmdHuyen);
        cmdXa = findViewById(R.id.cmdXa);
        editSoDienThoai = findViewById(R.id.editSoDienThoai);
        editEmail = findViewById(R.id.editEmail);
        editXacNhanMatKhau = findViewById(R.id.editXacNhanMatKhau);
        btnQuayLai = findViewById(R.id.btnQuayLai);
<A NAME="556"></A>        btnDangKy = findViewById</B></FONT>(R.id.btnDangKy);
        inpTaiKhoan = findViewById(R.id.inpTaiKhoan);
        inpMatKhau = findViewById(R.id.inpMatKhau);
        <FONT color="#827d6b"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#556',2,'match0-top.html#556',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>inpXacNhanMatKhau = findViewById(R.id.inpXacNhanMatKhau);
        inpCongTy = findViewById(R.id.inpCongTy);
        inpEmail = findViewById(R.id.inpEmail);
        inpHoTen = findViewById(R.id.inpHoTen);
        inpSoDienThoai = findViewById(R.id.inpSoDienThoai);
        //Load danh sách
        loadLoaiTaiKhoan(); //Load loại tài khoản
        loadTinh(); //Load tỉnh
        loadCoQuan(); //Load danh sách cơ quan
        clickButton</B></FONT>(); //Click button
    }

    private void loadLoaiTaiKhoan() {
<A NAME="96"></A>        //Danh sách loại tài khoản
        listMaLoaiTaiKhoan.clear(); //Xóa danh sách đang có
        listTenLoaiTaiKhoan.clear();
        <FONT color="#348781"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#96',2,'match0-top.html#96',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>listMaLoaiTaiKhoan.add(&quot;2&quot;);
        listTenLoaiTaiKhoan.add(&quot;Hộ nuôi&quot;);
        listMaLoaiTaiKhoan.add(&quot;3&quot;);
        listTenLoaiTaiKhoan.add(&quot;Công ty thức ăn thủy sản&quot;);
        listMaLoaiTaiKhoan.add(&quot;4&quot;);
        listTenLoaiTaiKhoan.add(&quot;Công ty chế biến thủy sản&quot;);
        listMaLoaiTaiKhoan.add(&quot;6&quot;);
        listTenLoaiTaiKhoan.add(&quot;Công ty thuốc thủy sản&quot;);
        listMaLoaiTaiKhoan.add(&quot;5&quot;);
        listTenLoaiTaiKhoan.add(&quot;Cán bộ nông nghiệp&quot;);
        ArrayAdapter&lt;String&gt; dataLoaiTaiKhoan = new ArrayAdapter&lt;&gt;(this, android.R.layout.simple_spinner_item,listTenLoaiTaiKhoan);
        dataLoaiTaiKhoan.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
        cmdLoaiTaiKhoan.setAdapter(dataLoaiTaiKhoan);
        cmdLoaiTaiKhoan.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @</B></FONT>Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                strLoaiTaiKhoan = listMaLoaiTaiKhoan.get(position);
                String strDiaChi, strTieuDe;
                switch (strLoaiTaiKhoan) {
                    case &quot;2&quot;:
                        strDiaChi = &quot;Địa chỉ thường trú&quot;;
                        textDiaChiHoNuoi.setText(strDiaChi);
                        layoutCongTy.setVisibility(View.GONE);
<A NAME="165"></A>                        layoutCoQuan.setVisibility(View.GONE);
                        break;
                    case &quot;3&quot;:
                    case &quot;4&quot;<FONT color="#8e35ef"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#165',2,'match0-top.html#165',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>:
                    case &quot;6&quot;:
                        strDiaChi = &quot;Địa chỉ công ty&quot;;
                        textDiaChiHoNuoi.setText(strDiaChi);
                        layoutCongTy.setVisibility(View.VISIBLE);
                        layoutCoQuan.setVisibility(View.GONE);
                        break;
                    case &quot;5&quot;:
                        strDiaChi = &quot;Địa chỉ cơ quan&quot;;
                        textDiaChiHoNuoi.setText(strDiaChi);
                        layoutCongTy.setVisibility(View.GONE);
<A NAME="136"></A>                        layoutCoQuan</B></FONT>.setVisibility(View.VISIBLE);
                        break;
                }
            <FONT color="#d4a017"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#136',2,'match0-top.html#136',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
<A NAME="17"></A>    }
    @SuppressLint(&quot;NewApi&quot;)
    private void</B></FONT> loadCoQuan(){ //Load danh sách cơ quan
        <FONT color="#800517"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#17',2,'match0-top.html#17',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>listMaCoQuan.clear(); //Xóa danh sách đang có
        listTenCoQuan.clear();
        listMaCoQuan.add(&quot;1&quot;);
        listTenCoQuan.add(&quot;Sở nông nghiệp tỉnh&quot;);
        listMaCoQuan.add(&quot;2&quot;);
        listTenCoQuan.add(&quot;Phòng nông nghiệp huyện&quot;);
        listMaCoQuan.add(&quot;3&quot;);
        listTenCoQuan.add(&quot;Phòng nông nghiệp xã&quot;);
        ArrayAdapter&lt;String&gt; dataCoQuan = new ArrayAdapter&lt;&gt;(this, android.R.layout.simple_spinner_item,listTenCoQuan);
        dataCoQuan.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
        cmdCoQuan.setAdapter(dataCoQuan);
        cmdCoQuan</B></FONT>.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                strCoQuan = listMaCoQuan.get(position);
            }

            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {
<A NAME="637"></A>
            }
        });
    <FONT color="#980517"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#637',2,'match0-top.html#637',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
    @SuppressLint(&quot;NewApi&quot;)
    //Load danh sách tỉnh lên Spinner
    private void loadTinh(){
        //Danh sách tỉnh
        listMaTinh.clear(); // Xóa danh sách tỉnh
        listTenTinh.clear();
        try{
<A NAME="99"></A>            classConnect = new ClassConnect(); //Mở kết nối SQL
            String sqlTinh = &quot;select MaTinh, TenTinh from TB_Tinh&quot;;//Câu lệnh lấy ra từ sql để gán lên cmd
            ResultSet resultSetTinh = classConnect</B></FONT>.selectData(SignActivity.this, sqlTinh);
            <FONT color="#f87a17"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#99',2,'match0-top.html#99',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>if (resultSetTinh != null){
                while (resultSetTinh.next()){
                    listMaTinh.add(resultSetTinh.getString(&quot;MaTinh&quot;));
<A NAME="100"></A>                    listTenTinh.add(resultSetTinh.getString(&quot;TenTinh&quot;));
                }
                ArrayAdapter&lt;String&gt; dataTinh = new ArrayAdapter</B></FONT>&lt;&gt;(this, android.R.layout.simple_spinner_item,listTenTinh);
                <FONT color="#c57717"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#100',2,'match0-top.html#100',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>dataTinh.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
                cmdTinh.setAdapter(dataTinh);
            }
            classConnect.CONN(SignActivity.this).close(); //Đóng kết nối SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
        }
        if (listMaTinh.isEmpty()){ //Nếu chưa nhập tỉnh thì không hiển thị huyện
            listMaHuyen.clear(); // Xóa danh sách huyện
            listTenHuyen.clear();
            ArrayAdapter&lt;String&gt; dataHuyen = new ArrayAdapter&lt;&gt;(this, android.R.layout.simple_spinner_item,listTenHuyen);
            dataHuyen.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
            cmdHuyen.setAdapter(dataHuyen);
        }
        cmdTinh.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaTinh.isEmpty()) {
                    strMaTinh = listMaTinh.get(position);
                    loadHuyen(strMaTinh); //Load huyện theo tỉnh
                }
            }

            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }
    @SuppressLint(&quot;NewApi&quot;)
    private void loadHuyen(String maTinh){
        //Danh sách huyện
        listMaHuyen.clear(); // Xóa danh sách huyện
        listTenHuyen.clear();
        try {
            classConnect = new ClassConnect(); //Mở kết nối SQL
            String sqlHuyen = &quot;select MaHuyen, TenHuyen from TB_Huyen where MaTinh = '&quot;+maTinh+&quot;'&quot;;
            ResultSet resultSetHuyen = classConnect.selectData(SignActivity.this, sqlHuyen);
            if (resultSetHuyen != null){
                while (resultSetHuyen.next()){
                    listMaHuyen.add(resultSetHuyen.getString(&quot;MaHuyen&quot;));
                    listTenHuyen.add(resultSetHuyen.getString(&quot;TenHuyen&quot;));
                }
                ArrayAdapter&lt;String&gt; dataHuyen = new ArrayAdapter&lt;&gt;(this, android.R.layout.simple_spinner_item,listTenHuyen);
<A NAME="171"></A>                dataHuyen.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
                cmdHuyen</B></FONT>.setAdapter(dataHuyen);
            }
            <FONT color="#4863a0"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#171',2,'match0-top.html#171',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>else {
                Log.e(&quot;TAG&quot;, &quot;Chưa cập nhật danh sách huyện&quot;);
            }
            classConnect.CONN(SignActivity.this).close(); //Đóng kết nối SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
        }</B></FONT>
        if (listMaHuyen.isEmpty()){ //Nếu chưa nhập huyện thì không hiển thị xã
<A NAME="189"></A>            listMaXa.clear(); // Xóa danh sách xã
            listTenXa.clear();
            ArrayAdapter&lt;String&gt; dataXa = new ArrayAdapter&lt;&gt;(this, android.R.layout.simple_spinner_item,listTenXa);
            <FONT color="#3bb9ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#189',2,'match0-top.html#189',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>dataXa.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
            cmdXa.setAdapter(dataXa);
        }
        cmdHuyen.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
<A NAME="97"></A>            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaHuyen</B></FONT>.isEmpty()) {
                    strMaHuyen = listMaHuyen.get(position);
                    <FONT color="#152dc6"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#97',2,'match0-top.html#97',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>loadXa(strMaHuyen); //Load xã theo huyện
                }
            }

            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }
    @SuppressLint(&quot;NewApi&quot;)
    private void loadXa(String maHuyen){
        //Danh sách huyện
        listMaXa.clear(); // Xóa danh sách huyện
        listTenXa.clear();
        try {
            classConnect = new ClassConnect(); //Mở kết nối SQL
            String sqlXa = &quot;select MaXa, TenXa from TB_Xa where MaHuyen = '&quot;+maHuyen+&quot;'&quot;;
            ResultSet resultSetXa = classConnect.selectData(SignActivity.this, sqlXa);
            if (resultSetXa != null){
                while (resultSetXa.next()){
                    listMaXa.add(resultSetXa.getString(&quot;MaXa&quot;));
                    listTenXa.add(resultSetXa.getString(&quot;TenXa&quot;));
                }
                ArrayAdapter&lt;String&gt; dataXa = new ArrayAdapter&lt;&gt;(this, android.R.layout.simple_spinner_item,listTenXa);
                dataXa.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
<A NAME="101"></A>                cmdXa</B></FONT>.setAdapter(dataXa);
            }
            else {
                <FONT color="#c22817"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#101',2,'match0-top.html#101',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>Log.e(&quot;TAG&quot;, &quot;Chưa cập nhật danh sách huyện&quot;);
            }
            classConnect.CONN(SignActivity.this).close(); //Đóng kết nối SQL
        }catch (Exception e){
            Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
        }
        cmdXa.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
                if (!listMaXa.isEmpty()) {
                    strMaXa = listMaXa.get(position);
                }
            }

            @Override
            public void onNothingSelected(AdapterView&lt;?&gt; parent) {

            }
        });
    }
    //Khi click vào BUTTON
    private void clickButton(){
        btnQuayLai</B></FONT>.setOnClickListener(v -&gt; {
            onBackPressed();//Quay lại trang trước đó
        });
        btnDangKy.setOnClickListener(v -&gt; {
<A NAME="142"></A>            //Viết hoa kí tự đầu gọi cho android:inputType=&quot;textCapWords&quot; của xml
            EditText editor = new EditText(SignActivity.this);
            editor.setInputType(InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_FLAG_CAP_WORDS);
            if (<FONT color="#95b9c7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#142',2,'match0-top.html#142',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>editTaiKhoan.getText().length() &gt;= 6 ){ //Kiểm tra tài khoản rỗng
                if (editMatKhau.getText().length() &gt;= 8){ //Mật khẩu có ít nhất 8 kí tự
                    if (cmdLoaiTaiKhoan.getSelectedItem().toString().length() != 0){ //Kiểm tra loại tài khoản rỗng
                        if (editHoTen</B></FONT>.getText().length() != 0){ //Kiểm tra họ tên rỗng
                            if (!listMaTinh.isEmpty()){ //Kiểm tra tỉnh rỗng
                                if (!listMaHuyen.isEmpty()){ //Kiểm tra huyện rỗng
                                    if (!listMaXa.isEmpty()){ //Kiểm tra xã rỗng
<A NAME="104"></A>                                        if (editSoDienThoai.length() &gt;= 10){ //Kiểm tra số điện thoại rỗng
                                            String strMatKhau = editMatKhau.getText().toString();
                                            if(strMatKhau.length() &gt;= 8){//So sánh mật khẩu xác nhận
                                                if (<FONT color="#92c7c7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#104',2,'match0-top.html#104',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>editXacNhanMatKhau.getText().toString().equals(strMatKhau)){
                                                    try {
                                                        classConnect = new ClassConnect(); //Mở kết nối SQL
                                                        String sqlTaiKhoan = &quot;select TaiKhoan from TB_NguoiDung where &quot; +
                                                                &quot;TaiKhoan = '&quot;+editTaiKhoan.getText()+&quot;'&quot;;//Câu lệnh để nhập dữ liệu lên sql
                                                        ResultSet resultSetTaiKhoan = classConnect.selectData(SignActivity.this,sqlTaiKhoan);
                                                        if (resultSetTaiKhoan != null &amp;&amp; resultSetTaiKhoan.next()){
                                                            classPublic.ThongBao(SignActivity.this,&quot;Tài khoản này đã có người sử dụng. Vui lòng nhập tài khoản khác&quot;);
                                                        }
                                                        else {
                                                            String sqlDangKy = null;
                                                            switch (strLoaiTaiKhoan) {
                                                                case &quot;2&quot;:</B></FONT> //Hộ nuôi
                                                                    sqlDangKy = &quot;insert into TB_NguoiDung(TaiKhoan, MatKhau, LoaiTaiKhoan, HoTen, MaXa, MaHuyen, MaTinh, SoDienThoai, Email, TrangThai) &quot; +
                                                                            &quot;values('&quot; + editTaiKhoan.getText() + &quot;', '&quot; + editMatKhau.getText() + &quot;', '&quot; + strLoaiTaiKhoan + &quot;', N'&quot; + editHoTen.getText() + &quot;',&quot; +
<A NAME="106"></A>                                                                            &quot; '&quot; + strMaXa + &quot;', '&quot; + strMaHuyen + &quot;', '&quot; + strMaTinh + &quot;', '&quot; + editSoDienThoai.getText() + &quot;', '&quot; + editEmail.getText() + &quot;', 1)&quot;;
                                                                    break;
                                                                case &quot;3&quot;: //Công ty thức ăn
                                                                case &quot;4&quot;<FONT color="#c57726"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#106',2,'match0-top.html#106',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>: //Công ty chế biến
                                                                case &quot;6&quot;://Cty thuốc
                                                                    sqlDangKy = &quot;insert into TB_NguoiDung(TaiKhoan, MatKhau, LoaiTaiKhoan, HoTen, CongTy, MaXa, MaHuyen, MaTinh, SoDienThoai, Email, TrangThai) &quot; +
                                                                            &quot;values('&quot; + editTaiKhoan.getText() + &quot;', '&quot; + editMatKhau.getText() + &quot;', '&quot; + strLoaiTaiKhoan + &quot;', N'&quot; + editHoTen.getText() + &quot;', N'&quot; + editCongTy.getText() + &quot;',&quot; +
                                                                            &quot; '&quot; + strMaXa + &quot;', '&quot; + strMaHuyen + &quot;', '&quot; + strMaTinh + &quot;', '&quot; + editSoDienThoai.getText() + &quot;', '&quot; + editEmail.getText() + &quot;', 1)&quot;;
                                                                    break</B></FONT>;
                                                                case &quot;5&quot;: //Cán bộ nông nghiệp
                                                                    if (strCoQuan.equals(&quot;1&quot;)){//Tỉnh add avt tỉnh
                                                                        sqlDangKy = &quot;insert into TB_NguoiDung(TaiKhoan, MatKhau, LoaiTaiKhoan, HoTen, MaCoQuan, MaXa, MaHuyen, MaTinh, SoDienThoai, Email, TrangThai, Anh) &quot; +
                                                                                &quot;values('&quot; + editTaiKhoan.getText() + &quot;', '&quot; + editMatKhau.getText() + &quot;', '&quot; + strLoaiTaiKhoan + &quot;', N'&quot; + editHoTen.getText() + &quot;', N'&quot; + strCoQuan + &quot;',&quot; +
                                                                                &quot; '&quot; + strMaXa + &quot;', '&quot; + strMaHuyen + &quot;', '&quot; + strMaTinh + &quot;', '&quot; + editSoDienThoai.getText() + &quot;', '&quot; + editEmail.getText() + &quot;', 1, '&quot;+ &quot;CongTy/NN1.png&quot; +&quot;')&quot;;
                                                                    }
                                                                    else if (strCoQuan.equals(&quot;2&quot;)){//Huyện add avt huyện
                                                                        sqlDangKy = &quot;insert into TB_NguoiDung(TaiKhoan, MatKhau, LoaiTaiKhoan, HoTen, MaCoQuan, MaXa, MaHuyen, MaTinh, SoDienThoai, Email, TrangThai, Anh) &quot; +
                                                                                &quot;values('&quot; + editTaiKhoan.getText() + &quot;', '&quot; + editMatKhau.getText() + &quot;', '&quot; + strLoaiTaiKhoan + &quot;', N'&quot; + editHoTen.getText() + &quot;', N'&quot; + strCoQuan + &quot;',&quot; +
                                                                                &quot; '&quot; + strMaXa + &quot;', '&quot; + strMaHuyen + &quot;', '&quot; + strMaTinh + &quot;', '&quot; + editSoDienThoai.getText() + &quot;', '&quot; + editEmail.getText() + &quot;', 1, '&quot;+ &quot;CongTy/NN2.png&quot; +&quot;')&quot;;
                                                                    }
                                                                    else {//Xã add avt xã
                                                                        sqlDangKy = &quot;insert into TB_NguoiDung(TaiKhoan, MatKhau, LoaiTaiKhoan, HoTen, MaCoQuan, MaXa, MaHuyen, MaTinh, SoDienThoai, Email, TrangThai, Anh) &quot; +
                                                                                &quot;values('&quot; + editTaiKhoan.getText() + &quot;', '&quot; + editMatKhau.getText() + &quot;', '&quot; + strLoaiTaiKhoan + &quot;', N'&quot; + editHoTen.getText() + &quot;', N'&quot; + strCoQuan + &quot;',&quot; +
                                                                                &quot; '&quot; + strMaXa + &quot;', '&quot; + strMaHuyen + &quot;', '&quot; + strMaTinh + &quot;', '&quot; + editSoDienThoai.getText() + &quot;', '&quot; + editEmail.getText() + &quot;', 1, '&quot;+ &quot;CongTy/NN3.png&quot; +&quot;')&quot;;
                                                                    }
                                                                    break;
                                                            }
                                                            if (classConnect.updateData(SignActivity.this, sqlDangKy) == 1) {
<A NAME="107"></A>                                                                classPublic.ThongBao(SignActivity.this, &quot;Thông báo! Đăng ký tài khoản thành công&quot;);
                                                                onBackPressed(); //Quay lại trang đăng nhập
                                                            }
                                                            <FONT color="#8e35ef"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#107',2,'match0-top.html#107',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>else {
                                                                classPublic.ThongBao(SignActivity.this,&quot;Thông báo! Đăng ký không thành công&quot;);
                                                            }
                                                        }
                                                        classConnect.CONN(SignActivity.this).close(); //Đóng kết nối SQL
                                                    }catch (Exception e){
                                                        Log.e(&quot;TAG&quot;, Objects.requireNonNull(e.getMessage()));
                                                    }
                                                }
                                                else {
                                                    inpXacNhanMatKhau.setError(&quot;Mật khẩu xác nhận không khớp&quot;);
                                                }
                                            }
                                            else {
                                                inpMatKhau.setError(&quot;Mật khẩu có ít nhất 8 kí tự&quot;);
                                            }
                                        }
                                        else {
                                           inpSoDienThoai.setError(&quot;Số điện thoại có ít nhất 10 chữ số&quot;);
                                        }
                                    }
                                    else {
                                        //Thông báo bằng văn bản
                                        classPublic.ThongBao(SignActivity.this,&quot;Vui lòng chọn xã&quot;);
                                    }
                                }
                                else {
                                    //Thông báo bằng văn bản
                                    classPublic.ThongBao(SignActivity.this,&quot;Vui lòng chọn huyện&quot;);
                                }
                            }
                            else {
                                //Thông báo bằng văn bản
                                classPublic.ThongBao(SignActivity.this,&quot;Vui lòng chọn tỉnh&quot;);
                            }
                        }
                        else {
                            inpHoTen.setError(&quot;Vui lòng nhập họ tên&quot;);
                        }
                    }
                    else {
                        //Thông báo bằng văn bản
                        classPublic.ThongBao(SignActivity.this,&quot;Vui lòng chọn loại tài khoản&quot;);
                    }
                }
                else {
                   inpMatKhau.setError(&quot;Mật khẩu có ít nhất 8 kí tự&quot;);
                }</B></FONT>
            }
            else {
               inpTaiKhoan.setError(&quot;Tài khoản có ít nhất 6 kí tự&quot;);
            }
        });
    }
}
</PRE>

</BODY>
</HTML>
